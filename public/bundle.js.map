{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","../src/lib/store.js","../node_modules/@noble/hashes/esm/_assert.js","../node_modules/@noble/hashes/esm/crypto.js","../node_modules/@noble/hashes/esm/utils.js","../node_modules/@noble/hashes/esm/_sha2.js","../node_modules/@noble/hashes/esm/sha256.js","../node_modules/@noble/curves/esm/abstract/utils.js","../node_modules/@noble/curves/esm/abstract/modular.js","../node_modules/@noble/curves/esm/abstract/curve.js","../node_modules/@noble/curves/esm/abstract/weierstrass.js","../node_modules/@noble/hashes/esm/hmac.js","../node_modules/@noble/curves/esm/_shortw_utils.js","../node_modules/@noble/curves/esm/secp256k1.js","../node_modules/@noble/curves/esm/abstract/hash-to-curve.js","../node_modules/@scure/base/lib/esm/index.js","../node_modules/@scure/bip39/wordlists/english.js","../node_modules/@noble/hashes/_assert.js","../node_modules/@noble/hashes/crypto.js","../node_modules/@noble/hashes/utils.js","../node_modules/@noble/hashes/hmac.js","../node_modules/@noble/hashes/pbkdf2.js","../node_modules/@noble/hashes/_sha2.js","../node_modules/@noble/hashes/sha256.js","../node_modules/@noble/hashes/_u64.js","../node_modules/@noble/hashes/sha512.js","../node_modules/@scure/base/lib/index.js","../node_modules/@scure/bip39/index.js","../node_modules/@noble/hashes/esm/ripemd160.js","../node_modules/@noble/hashes/esm/_u64.js","../node_modules/@noble/hashes/esm/sha512.js","../node_modules/@scure/bip32/lib/esm/index.js","../node_modules/nostr-tools/lib/esm/nostr.mjs","../node_modules/nostr/lib/relay.js","../node_modules/ws/browser.js","../node_modules/nostr/lib/relay-pool.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../node_modules/ms/index.js","../node_modules/debug/src/common.js","../node_modules/debug/src/browser.js","../node_modules/eventemitter3/index.js","../node_modules/tstl/utility/node.js","../node_modules/websocket/lib/browser.js","../node_modules/es5-ext/global.js","../node_modules/websocket/lib/version.js","../node_modules/tstl/base/container/Container.js","../node_modules/tstl/internal/iterator/disposable/ForOfAdaptor.js","../node_modules/tstl/internal/iterator/disposable/NativeArrayIterator.js","../node_modules/tstl/exception/LogicError.js","../node_modules/tstl/exception/Exception.js","../node_modules/tstl/exception/InvalidArgument.js","../node_modules/tstl/internal/exception/ErrorGenerator.js","../node_modules/tstl/exception/OutOfRange.js","../node_modules/tstl/base/container/UniqueSet.js","../node_modules/tstl/base/container/SetContainer.js","../node_modules/tstl/functional/uid.js","../node_modules/tstl/internal/Global.js","../node_modules/tstl/functional/hash.js","../node_modules/tstl/functional/comparators.js","../node_modules/tstl/internal/container/associative/IHashContainer.js","../node_modules/tstl/internal/container/associative/IAssociativeContainer.js","../node_modules/tstl/internal/iterator/ListIterator.js","../node_modules/tstl/iterator/global.js","../node_modules/tstl/internal/container/linear/ListContainer.js","../node_modules/tstl/internal/iterator/disposable/Repeater.js","../node_modules/tstl/internal/iterator/ReverseIterator.js","../node_modules/tstl/internal/hash/HashBuckets.js","../node_modules/tstl/utility/Pair.js","../node_modules/tstl/container/HashSet.js","../node_modules/tstl/internal/container/associative/SetElementList.js","../node_modules/tstl/internal/hash/SetHashBuckets.js","../node_modules/tstl/base/container/UniqueMap.js","../node_modules/tstl/base/container/MapContainer.js","../node_modules/tstl/container/HashMap.js","../node_modules/tstl/internal/container/associative/MapElementList.js","../node_modules/tstl/internal/hash/MapHashBuckets.js","../node_modules/tstl/utility/Entry.js","../node_modules/websocket-polyfill/lib/events/Event.js","../node_modules/websocket-polyfill/lib/index.js","../node_modules/websocket-polyfill/lib/WebSocket.js","../node_modules/websocket-polyfill/lib/events/EventTarget.js","../node_modules/websocket-polyfill/lib/events/CloseEvent.js","../node_modules/websocket-polyfill/lib/events/MessageEvent.js","../node_modules/websocket-polyfill/lib/events/ErrorEvent.js","../node_modules/light-bolt11-decoder/bolt11.js","../node_modules/@nostr-dev-kit/ndk/lib/esm/ndk.mjs","../src/lib/adapters/index.js","../src/lib/adapters/nip07.js","../node_modules/@nostr-connect/connect/dist/connect.esm.js","../src/lib/adapters/nip46.js","../src/lib/adapters/discardable-keys.js","../src/KeyPrompt.svelte","../node_modules/webln/lib/errors.js","../node_modules/webln/lib/client.js","../node_modules/webln/lib/index.js","../src/ZapAmountButton.svelte","../node_modules/webln/lib/provider.js","../src/NostrNote.svelte","../node_modules/svelte-scrollto/src/helper.js","../node_modules/svelte-scrollto/src/index.js","../node_modules/svelte/easing/index.mjs","../src/ConnectedWidget.svelte","../src/Container.svelte","../src/Widget.svelte","../src/widget.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\nfunction is_promise(value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function') && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction split_css_unit(value) {\n    const split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n    return split ? [parseFloat(split[1]), split[2] || 'px'] : [value, 'px'];\n}\nconst contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nclass ResizeObserverSingleton {\n    constructor(options) {\n        this.options = options;\n        this._listeners = 'WeakMap' in globals ? new WeakMap() : undefined;\n    }\n    observe(element, listener) {\n        this._listeners.set(element, listener);\n        this._getObserver().observe(element, this.options);\n        return () => {\n            this._listeners.delete(element);\n            this._observer.unobserve(element); // this line can probably be removed\n        };\n    }\n    _getObserver() {\n        var _a;\n        return (_a = this._observer) !== null && _a !== void 0 ? _a : (this._observer = new ResizeObserver((entries) => {\n            var _a;\n            for (const entry of entries) {\n                ResizeObserverSingleton.entries.set(entry.target, entry);\n                (_a = this._listeners.get(entry.target)) === null || _a === void 0 ? void 0 : _a(entry);\n            }\n        }));\n    }\n}\n// Needs to be written like this to pass the tree-shake-test\nResizeObserverSingleton.entries = 'WeakMap' in globals ? new WeakMap() : undefined;\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n    return style.sheet;\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentNode !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction comment(content) {\n    return document.createComment(content);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_immediate_propagation(fn) {\n    return function (event) {\n        event.stopImmediatePropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set && always_set_through_set_attribute.indexOf(key) === -1) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data_map(node, data_map) {\n    Object.keys(data_map).forEach((key) => {\n        set_custom_element_data(node, key, data_map[key]);\n    });\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction set_dynamic_element_data(tag) {\n    return (/-/.test(tag)) ? set_custom_element_data_map : set_attributes;\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction init_binding_group(group) {\n    let _inputs;\n    return {\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            _inputs.forEach(input => group.push(input));\n        },\n        /* remove */ r() {\n            _inputs.forEach(input => group.splice(group.indexOf(input), 1));\n        }\n    };\n}\nfunction init_binding_group_dynamic(group, indexes) {\n    let _group = get_binding_group(group);\n    let _inputs;\n    function get_binding_group(group) {\n        for (let i = 0; i < indexes.length; i++) {\n            group = group[indexes[i]] = group[indexes[i]] || [];\n        }\n        return group;\n    }\n    function push() {\n        _inputs.forEach(input => _group.push(input));\n    }\n    function remove() {\n        _inputs.forEach(input => _group.splice(_group.indexOf(input), 1));\n    }\n    return {\n        /* update */ u(new_indexes) {\n            indexes = new_indexes;\n            const new_group = get_binding_group(group);\n            if (new_group !== _group) {\n                remove();\n                _group = new_group;\n                push();\n            }\n        },\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            push();\n        },\n        /* remove */ r: remove\n    };\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction claim_comment(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 8, (node) => {\n        node.data = '' + data;\n        return undefined;\n    }, () => comment(data), true);\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    text.data = data;\n}\nfunction set_data_contenteditable(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable(text, data);\n    }\n    else {\n        set_data(text, data);\n    }\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value == null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value, mounting) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    if (!mounting || value !== undefined) {\n        select.selectedIndex = -1; // no option should be selected\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked');\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_iframe_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n            // make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n            // see https://github.com/sveltejs/svelte/issues/4233\n            fn();\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nconst resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'content-box' });\nconst resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'border-box' });\nconst resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'device-pixel-content-box' });\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nfunction head_selector(nodeId, head) {\n    const result = [];\n    let started = 0;\n    for (const node of head.childNodes) {\n        if (node.nodeType === 8 /* comment node */) {\n            const comment = node.textContent.trim();\n            if (comment === `HEAD_${nodeId}_END`) {\n                started -= 1;\n                result.push(node);\n            }\n            else if (comment === `HEAD_${nodeId}_START`) {\n                started += 1;\n                result.push(node);\n            }\n        }\n        else if (started > 0) {\n            result.push(node);\n        }\n    }\n    return result;\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            /** #7364  target for <template> may be provided as #document-fragment(11) */\n            else\n                this.e = element((target.nodeType === 11 ? 'TEMPLATE' : target.nodeName));\n            this.t = target.tagName !== 'TEMPLATE' ? target : target.content;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\nfunction construct_svelte_component(component, props) {\n    return new component(props);\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { ownerNode } = info.stylesheet;\n            // there is no ownerNode if it runs on jsdom.\n            if (ownerNode)\n                detach(ownerNode);\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs#run-time-svelte-beforeupdate\n */\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs#run-time-svelte-onmount\n */\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n */\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs#run-time-svelte-ondestroy\n */\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * https://svelte.dev/docs#run-time-svelte-createeventdispatcher\n */\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-setcontext\n */\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-getcontext\n */\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs#run-time-svelte-getallcontexts\n */\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-hascontext\n */\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nlet render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    // Do not reenter flush while dirty components are updated, as this can\n    // result in an infinite loop. Instead, let the inner flush handle it.\n    // Reentrancy is ok afterwards for bindings etc.\n    if (flushidx !== 0) {\n        return;\n    }\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        try {\n            while (flushidx < dirty_components.length) {\n                const component = dirty_components[flushidx];\n                flushidx++;\n                set_current_component(component);\n                update(component.$$);\n            }\n        }\n        catch (e) {\n            // reset dirty state to not end up in a deadlocked state and then rethrow\n            dirty_components.length = 0;\n            flushidx = 0;\n            throw e;\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n */\nfunction flush_render_callbacks(fns) {\n    const filtered = [];\n    const targets = [];\n    render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));\n    targets.forEach((c) => c());\n    render_callbacks = filtered;\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    const options = { direction: 'in' };\n    let config = fn(node, params, options);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config(options);\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    const options = { direction: 'out' };\n    let config = fn(node, params, options);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config(options);\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    const options = { direction: 'both' };\n    let config = fn(node, params, options);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config(options);\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    const updates = [];\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            // defer updates until all the DOM shuffling is done\n            updates.push(() => block.p(child_ctx, dirty));\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    run_all(updates);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst _boolean_attributes = [\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'inert',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n];\n/**\n * List of HTML boolean attributes (e.g. `<input disabled>`).\n * Source: https://html.spec.whatwg.org/multipage/indices.html\n */\nconst boolean_attributes = new Set([..._boolean_attributes]);\n\n/** regex of all html void element names */\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${name}>.`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${escape_attribute_value(style_object[key])};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n            // if the component was destroyed immediately\n            // it will update the `$$.on_destroy` reference to `null`.\n            // the destructured on_destroy may still reference to the old array\n            if (component.$$.on_destroy) {\n                component.$$.on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        flush_render_callbacks($$.after_update);\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: [],\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            if (!is_function(callback)) {\n                return noop;\n            }\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        if (!is_function(callback)) {\n            return noop;\n        }\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.59.1' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation, has_stop_immediate_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    if (has_stop_immediate_propagation)\n        modifiers.push('stopImmediatePropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_contenteditable_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable_dev(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable_dev(text, data);\n    }\n    else {\n        set_data_dev(text, data);\n    }\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        console.warn(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\nfunction construct_svelte_component_dev(component, props) {\n    const error_message = 'this={...} of <svelte:component> should specify a Svelte component.';\n    try {\n        const instance = new component(props);\n        if (!instance.$$ || !instance.$set || !instance.$on || !instance.$destroy) {\n            throw new Error(error_message);\n        }\n        return instance;\n    }\n    catch (err) {\n        const { message } = err;\n        if (typeof message === 'string' && message.indexOf('is not a constructor') !== -1) {\n            throw new Error(error_message);\n        }\n        else {\n            throw err;\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, ResizeObserverSingleton, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_iframe_resize_listener, add_location, add_render_callback, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_comment, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, comment, component_subscribe, compute_rest_props, compute_slots, construct_svelte_component, construct_svelte_component_dev, contenteditable_truthy_values, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, flush_render_callbacks, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, head_selector, identity, init, init_binding_group, init_binding_group_dynamic, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, resize_observer_border_box, resize_observer_content_box, resize_observer_device_pixel_content_box, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_custom_element_data_map, set_data, set_data_contenteditable, set_data_contenteditable_dev, set_data_dev, set_data_maybe_contenteditable, set_data_maybe_contenteditable_dev, set_dynamic_element_data, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, split_css_unit, spread, src_url_equal, start_hydrating, stop_immediate_propagation, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier} [start]\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=} start\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0 && stop) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let started = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (started) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        started = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n            // We need to set this to false because callbacks can still happen despite having unsubscribed:\n            // Callbacks might already be placed in the queue which doesn't know it should no longer\n            // invoke this derived store.\n            started = false;\n        };\n    });\n}\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @param store - store to make readonly\n */\nfunction readonly(store) {\n    return {\n        subscribe: store.subscribe.bind(store)\n    };\n}\n\nexport { derived, readable, readonly, writable };\n","import { writable } from 'svelte/store';\n\nexport const chatAdapter = writable(null);\nexport const chatData = writable({ events: [], profiles: {}});\nexport const selectedMessage = writable(null);\nexport const zappingMessage = writable(null);\nexport const zapsPerMessage = writable({});","export function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexport function bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexport function hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexport function exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexport function output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexport default assert;\n//# sourceMappingURL=_assert.js.map","export const crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use `globalThis.crypto`, but node.js versions earlier than v19 don't\n// declare it in global scope. For node.js, package.json#exports field mapping\n// rewrites import from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n */\nexport function bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('deadbeef') // Uint8Array.from([0xde, 0xad, 0xbe, 0xef])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `globalThis.crypto` or node.js crypto module.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","import assert from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        assert.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_sha2.js.map","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst u8a = (a) => a instanceof Uint8Array;\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexport function numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nexport function hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // Big Endian\n    return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n// Caching slows it down 2-3x\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    if (hex.length % 2)\n        throw new Error('hex string is invalid: unpadded ' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// Big Endian\nexport function bytesToNumberBE(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nexport function bytesToNumberLE(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\nexport const numberToBytesBE = (n, len) => hexToBytes(n.toString(16).padStart(len * 2, '0'));\nexport const numberToBytesLE = (n, len) => numberToBytesBE(n, len).reverse();\n// Returns variable number bytes (minimal bigint encoding?)\nexport const numberToVarBytesBE = (n) => hexToBytes(numberToHexUnpadded(n));\nexport function ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = hexToBytes(hex);\n        }\n        catch (e) {\n            throw new Error(`${title} must be valid hex string, got \"${hex}\". Cause: ${e}`);\n        }\n    }\n    else if (u8a(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(`${title} must be hex string or Uint8Array`);\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(`${title} expected ${expectedLength} bytes, got ${len}`);\n    return res;\n}\n// Copies several Uint8Arrays into one.\nexport function concatBytes(...arrs) {\n    const r = new Uint8Array(arrs.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrs.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\nexport function equalBytes(b1, b2) {\n    // We don't care about timing attacks here\n    if (b1.length !== b2.length)\n        return false;\n    for (let i = 0; i < b1.length; i++)\n        if (b1[i] !== b2[i])\n            return false;\n    return true;\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\n// Bit operations\n// Amount of bits inside bigint (Same as n.toString(2).length)\nexport function bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n// Gets single bit at position. NOTE: first bit position is 0 (same as arrays)\n// Same as !!+Array.from(n.toString(2)).reverse()[pos]\nexport const bitGet = (n, pos) => (n >> BigInt(pos)) & _1n;\n// Sets single bit at position\nexport const bitSet = (n, pos, value) => n | ((value ? _1n : _0n) << BigInt(pos));\n// Return mask for N bits (Same as BigInt(`0b${Array(i).fill('1').join('')}`))\n// Not using ** operator with bigints for old engines.\nexport const bitMask = (n) => (_2n << BigInt(n - 1)) - _1n;\n// DRBG\nconst u8n = (data) => new Uint8Array(data); // creates Uint8Array\nconst u8fr = (arr) => Uint8Array.from(arr); // another shortcut\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n()) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return concatBytes(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nexport function validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error(`Invalid validator \"${type}\", expected function`);\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error(`Invalid param ${String(fieldName)}=${val} (${typeof val}), expected ${type}`);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n//# sourceMappingURL=utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Utilities for modular arithmetics and finite fields\nimport { bitMask, numberToBytesBE, numberToBytesLE, bytesToNumberBE, bytesToNumberLE, ensureBytes, validateObject, } from './utils.js';\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _4n = BigInt(4), _5n = BigInt(5), _8n = BigInt(8);\n// prettier-ignore\nconst _9n = BigInt(9), _16n = BigInt(16);\n// Calculates a modulo b\nexport function mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently exponentiate num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * powMod(2n, 6n, 11n) // 64n % 11n == 9n\n */\n// TODO: use field version && remove\nexport function pow(num, power, modulo) {\n    if (modulo <= _0n || power < _0n)\n        throw new Error('Expected power/modulo > 0');\n    if (modulo === _1n)\n        return _0n;\n    let res = _1n;\n    while (power > _0n) {\n        if (power & _1n)\n            res = (res * num) % modulo;\n        num = (num * num) % modulo;\n        power >>= _1n;\n    }\n    return res;\n}\n// Does x ^ (2 ^ power) mod p. pow2(30, 4) == 30 ^ (2 ^ 4)\nexport function pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n// Inverses number over modulo\nexport function invert(number, modulo) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    // Eucledian GCD https://brilliant.org/wiki/extended-euclidean-algorithm/\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n// Tonelli-Shanks algorithm\n// Paper 1: https://eprint.iacr.org/2012/685.pdf (page 12)\n// Paper 2: Square Roots from 1; 24, 51, 10 to Dan Shanks\nexport function tonelliShanks(P) {\n    // Legendre constant: used to calculate Legendre symbol (a | p),\n    // which denotes the value of a^((p-1)/2) (mod p).\n    // (a | p)  1    if a is a square (mod p)\n    // (a | p)  -1   if a is not a square (mod p)\n    // (a | p)  0    if a  0 (mod p)\n    const legendreC = (P - _1n) / _2n;\n    let Q, S, Z;\n    // Step 1: By factoring out powers of 2 from p - 1,\n    // find q and s such that p - 1 = q*(2^s) with q odd\n    for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++)\n        ;\n    // Step 2: Select a non-square z such that (z | p)  -1 and set c  zq\n    for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++)\n        ;\n    // Fast-path\n    if (S === 1) {\n        const p1div4 = (P + _1n) / _4n;\n        return function tonelliFast(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Slow-path\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        // Step 0: Check that n is indeed a square: (n | p) should not be  -1\n        if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE))\n            throw new Error('Cannot find square root');\n        let r = S;\n        // TODO: will fail at Fp2/etc\n        let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n        let x = Fp.pow(n, Q1div2); // first guess at the square root\n        let b = Fp.pow(n, Q); // first guess at the fudge factor\n        while (!Fp.eql(b, Fp.ONE)) {\n            if (Fp.eql(b, Fp.ZERO))\n                return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n            // Find m such b^(2^m)==1\n            let m = 1;\n            for (let t2 = Fp.sqr(b); m < r; m++) {\n                if (Fp.eql(t2, Fp.ONE))\n                    break;\n                t2 = Fp.sqr(t2); // t2 *= t2\n            }\n            // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n            const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n            g = Fp.sqr(ge); // g = ge * ge\n            x = Fp.mul(x, ge); // x *= ge\n            b = Fp.mul(b, g); // b *= g\n            r = m;\n        }\n        return x;\n    };\n}\nexport function FpSqrt(P) {\n    // NOTE: different algorithms can give different roots, it is up to user to decide which one they want.\n    // For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n    // P  3 (mod 4)\n    // n = n^((P+1)/4)\n    if (P % _4n === _3n) {\n        // Not all roots possible!\n        // const ORDER =\n        //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n        // const NUM = 72057594037927816n;\n        const p1div4 = (P + _1n) / _4n;\n        return function sqrt3mod4(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            // Throw if root**2 != n\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Atkin algorithm for q  5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n    if (P % _8n === _5n) {\n        const c1 = (P - _5n) / _8n;\n        return function sqrt5mod8(Fp, n) {\n            const n2 = Fp.mul(n, _2n);\n            const v = Fp.pow(n2, c1);\n            const nv = Fp.mul(n, v);\n            const i = Fp.mul(Fp.mul(nv, _2n), v);\n            const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // P  9 (mod 16)\n    if (P % _16n === _9n) {\n        // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n        // Means we cannot use sqrt for constants at all!\n        //\n        // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n        // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n        // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n        // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n        // sqrt = (x) => {\n        //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n        //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n        //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n        //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n        //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n        //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n        //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n        //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n        //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n        //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n        // }\n    }\n    // Other cases: Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nexport function validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'isSafeInteger',\n        BITS: 'isSafeInteger',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    return validateObject(field, opts);\n}\n// Generic field functions\nexport function FpPow(f, num, power) {\n    // Should have same speed as pow for bigints\n    // TODO: benchmark!\n    if (power < _0n)\n        throw new Error('Expected power > 0');\n    if (power === _0n)\n        return f.ONE;\n    if (power === _1n)\n        return num;\n    let p = f.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = f.mul(p, d);\n        d = f.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n// 0 is non-invertible: non-batched version will throw on 0\nexport function FpInvertBatch(f, nums) {\n    const tmp = new Array(nums.length);\n    // Walk from first to last, multiply them by each other MOD p\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = acc;\n        return f.mul(acc, num);\n    }, f.ONE);\n    // Invert last element\n    const inverted = f.inv(lastMultiplied);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = f.mul(acc, tmp[i]);\n        return f.mul(acc, num);\n    }, inverted);\n    return tmp;\n}\nexport function FpDiv(f, lhs, rhs) {\n    return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare(f) {\n    const legendreConst = (f.ORDER - _1n) / _2n; // Integer arithmetic\n    return (x) => {\n        const p = f.pow(x, legendreConst);\n        return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n    };\n}\n// CURVE.n lengths\nexport function nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Initializes a galois field over prime. Non-primes are not supported for now.\n * Do not init in loop: slow. Very fragile: always run a benchmark on change.\n * Major performance gains:\n * a) non-normalized operations like mulN instead of mul\n * b) `Object.freeze`\n * c) Same object shape: never add or remove keys\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(ORDER, bitLen, isLE = false, redef = {}) {\n    if (ORDER <= _0n)\n        throw new Error(`Expected Fp ORDER > 0, got ${ORDER}`);\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n    if (BYTES > 2048)\n        throw new Error('Field lengths over 2048 bytes are not supported');\n    const sqrtP = FpSqrt(ORDER);\n    const f = Object.freeze({\n        ORDER,\n        BITS,\n        BYTES,\n        MASK: bitMask(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error(`Invalid field element: expected bigint, got ${typeof num}`);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: redef.sqrt || ((n) => sqrtP(f, n)),\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // TODO: do we really need constant cmov?\n        // We don't have const-time bigints anyway, so probably will be not very useful\n        cmov: (a, b, c) => (c ? b : a),\n        toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error(`Fp.fromBytes: expected ${BYTES}, got ${bytes.length}`);\n            return isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n        },\n    });\n    return Object.freeze(f);\n}\nexport function FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nexport function FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * FIPS 186 B.4.1-compliant \"constant-time\" private key generation utility.\n * Can take (n+8) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being neglible.\n * Needs at least 40 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * @param hash hash output from SHA3 or a similar function\n * @returns valid private scalar\n */\nexport function hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = ensureBytes('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error(`hashToPrivateScalar: expected ${minLen}-1024 bytes of input, got ${hashLen}`);\n    const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n//# sourceMappingURL=modular.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Abelian group utilities\nimport { validateField, nLength } from './modular.js';\nimport { validateObject } from './utils.js';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n// Elliptic curve multiplication of Point by scalar. Fragile.\n// Scalars should always be less than curve order: this should be checked inside of a curve itself.\n// Creates precomputation tables for fast multiplication:\n// - private scalar is split by fixed size windows of W bits\n// - every window point is collected from window's table & added to accumulator\n// - since windows are different, same point inside tables won't be accessed more than once per calc\n// - each multiplication is 'Math.ceil(CURVE_ORDER / ) + 1' point additions (fixed for any scalar)\n// - +1 window is neccessary for wNAF\n// - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n// TODO: Research returning 2d JS array of windows, instead of a single window. This would allow\n// windows to be in different memory locations\nexport function wNAF(c, bits) {\n    const constTimeNegate = (condition, item) => {\n        const neg = item.negate();\n        return condition ? neg : item;\n    };\n    const opts = (W) => {\n        const windows = Math.ceil(bits / W) + 1; // +1, because\n        const windowSize = 2 ** (W - 1); // -1 because we skip zero\n        return { windows, windowSize };\n    };\n    return {\n        constTimeNegate,\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n) {\n            let p = c.ZERO;\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(1) * (Math.ceil( / ) + 1), where:\n         * -  is the window size\n         * -  is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = opts(W);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // =1, because we skip zero\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // TODO: maybe check that scalar is less than group order? wNAF behavious is undefined otherwise\n            // But need to carefully remove other checks before wNAF. ORDER == bits here\n            const { windows, windowSize } = opts(W);\n            let p = c.ZERO;\n            let f = c.BASE;\n            const mask = BigInt(2 ** W - 1); // Create mask with W ones: 0b1111 for W=4 etc.\n            const maxNumber = 2 ** W;\n            const shiftBy = BigInt(W);\n            for (let window = 0; window < windows; window++) {\n                const offset = window * windowSize;\n                // Extract W bits.\n                let wbits = Number(n & mask);\n                // Shift number by W bits.\n                n >>= shiftBy;\n                // If the bits are bigger than max size, we'll split those.\n                // +224 => 256 - 32\n                if (wbits > windowSize) {\n                    wbits -= maxNumber;\n                    n += _1n;\n                }\n                // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n                // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n                // there is negate now: it is possible that negated element from low value\n                // would be the same as high element, which will create carry into next window.\n                // It's not obvious how this can fail, but still worth investigating later.\n                // Check if we're onto Zero point.\n                // Add random point inside current window to f.\n                const offset1 = offset;\n                const offset2 = offset + Math.abs(wbits) - 1; // -1 because we skip zero\n                const cond1 = window % 2 !== 0;\n                const cond2 = wbits < 0;\n                if (wbits === 0) {\n                    // The most important part for const-time getPublicKey\n                    f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n                }\n                else {\n                    p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n                }\n            }\n            // JIT-compiler should not eliminate f here, since it will later be used in normalizeZ()\n            // Even if the variable is still unused, there are some checks which will\n            // throw an exception, so compiler needs to prove they won't happen, which is hard.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        wNAFCached(P, precomputesMap, n, transform) {\n            // @ts-ignore\n            const W = P._WINDOW_SIZE || 1;\n            // Calculate precomputes on a first run, reuse them after\n            let comp = precomputesMap.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1) {\n                    precomputesMap.set(P, transform(comp));\n                }\n            }\n            return this.wNAF(W, comp, n);\n        },\n    };\n}\nexport function validateBasic(curve) {\n    validateField(curve.Fp);\n    validateObject(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...nLength(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\n//# sourceMappingURL=curve.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y = x + ax + b\nimport * as mod from './modular.js';\nimport * as ut from './utils.js';\nimport { ensureBytes } from './utils.js';\nimport { wNAF, validateBasic } from './curve.js';\nfunction validatePointOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        a: 'field',\n        b: 'field',\n    }, {\n        allowedPrivateKeyLengths: 'array',\n        wrapPrivateKey: 'boolean',\n        isTorsionFree: 'function',\n        clearCofactor: 'function',\n        allowInfinityPoint: 'boolean',\n        fromBytes: 'function',\n        toBytes: 'function',\n    });\n    const { endo, Fp, a } = opts;\n    if (endo) {\n        if (!Fp.eql(a, Fp.ZERO)) {\n            throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n        }\n        if (typeof endo !== 'object' ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n        }\n    }\n    return Object.freeze({ ...opts });\n}\n// ASN.1 DER encoding utilities\nconst { bytesToNumberBE: b2n, hexToBytes: h2b } = ut;\nexport const DER = {\n    // asn.1 DER encoding utils\n    Err: class DERErr extends Error {\n        constructor(m = '') {\n            super(m);\n        }\n    },\n    _parseInt(data) {\n        const { Err: E } = DER;\n        if (data.length < 2 || data[0] !== 0x02)\n            throw new E('Invalid signature integer tag');\n        const len = data[1];\n        const res = data.subarray(2, len + 2);\n        if (!len || res.length !== len)\n            throw new E('Invalid signature integer: wrong length');\n        // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n        // since we always use positive integers here. It must always be empty:\n        // - add zero byte if exists\n        // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n        if (res[0] & 0b10000000)\n            throw new E('Invalid signature integer: negative');\n        if (res[0] === 0x00 && !(res[1] & 0b10000000))\n            throw new E('Invalid signature integer: unnecessary leading zero');\n        return { d: b2n(res), l: data.subarray(len + 2) }; // d is data, l is left\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E } = DER;\n        const data = typeof hex === 'string' ? h2b(hex) : hex;\n        if (!(data instanceof Uint8Array))\n            throw new Error('ui8a expected');\n        let l = data.length;\n        if (l < 2 || data[0] != 0x30)\n            throw new E('Invalid signature tag');\n        if (data[1] !== l - 2)\n            throw new E('Invalid signature: incorrect length');\n        const { d: r, l: sBytes } = DER._parseInt(data.subarray(2));\n        const { d: s, l: rBytesLeft } = DER._parseInt(sBytes);\n        if (rBytesLeft.length)\n            throw new E('Invalid signature: left bytes after parsing');\n        return { r, s };\n    },\n    hexFromSig(sig) {\n        // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n        const slice = (s) => (Number.parseInt(s[0], 16) & 0b1000 ? '00' + s : s);\n        const h = (num) => {\n            const hex = num.toString(16);\n            return hex.length & 1 ? `0${hex}` : hex;\n        };\n        const s = slice(h(sig.s));\n        const r = slice(h(sig.r));\n        const shl = s.length / 2;\n        const rhl = r.length / 2;\n        const sl = h(shl);\n        const rl = h(rhl);\n        return `30${h(rhl + shl + 4)}02${rl}${r}02${sl}${s}`;\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\nexport function weierstrassPoints(opts) {\n    const CURVE = validatePointOpts(opts);\n    const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n    const toBytes = CURVE.toBytes ||\n        ((c, point, isCompressed) => {\n            const a = point.toAffine();\n            return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n        });\n    const fromBytes = CURVE.fromBytes ||\n        ((bytes) => {\n            // const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n            const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n            const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n            return { x, y };\n        });\n    /**\n     * y = x + ax + b: Short weierstrass curve formula\n     * @returns y\n     */\n    function weierstrassEquation(x) {\n        const { a, b } = CURVE;\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x2 * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n    }\n    // Validate whether the passed curve params are valid.\n    // We check if curve equation works for generator point.\n    // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n    // ProjectivePoint class has not been initialized yet.\n    if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n        throw new Error('bad generator point: equation left != right');\n    // Valid group elements reside in range 1..n-1\n    function isWithinCurveOrder(num) {\n        return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n    }\n    function assertGE(num) {\n        if (!isWithinCurveOrder(num))\n            throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n    }\n    // Validates if priv key is valid and converts it to bigint.\n    // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n    function normPrivateKeyToScalar(key) {\n        const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n } = CURVE;\n        if (lengths && typeof key !== 'bigint') {\n            if (key instanceof Uint8Array)\n                key = ut.bytesToHex(key);\n            // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n            if (typeof key !== 'string' || !lengths.includes(key.length))\n                throw new Error('Invalid key');\n            key = key.padStart(nByteLength * 2, '0');\n        }\n        let num;\n        try {\n            num =\n                typeof key === 'bigint'\n                    ? key\n                    : ut.bytesToNumberBE(ensureBytes('private key', key, nByteLength));\n        }\n        catch (error) {\n            throw new Error(`private key must be ${nByteLength} bytes, hex or bigint, not ${typeof key}`);\n        }\n        if (wrapPrivateKey)\n            num = mod.mod(num, n); // disabled by default, enabled for BLS\n        assertGE(num); // num in range [1..N-1]\n        return num;\n    }\n    const pointPrecomputes = new Map();\n    function assertPrjPoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z)  (x=x/z, y=y/z)\n     * Default Point works in 2d / affine coordinates: (x, y)\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        constructor(px, py, pz) {\n            this.px = px;\n            this.py = py;\n            this.pz = pz;\n            if (px == null || !Fp.isValid(px))\n                throw new Error('x required');\n            if (py == null || !Fp.isValid(py))\n                throw new Error('y required');\n            if (pz == null || !Fp.isValid(pz))\n                throw new Error('z required');\n        }\n        // Does not validate if the point is on-curve.\n        // Use fromHex instead, or call assertValidity() later.\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            const is0 = (i) => Fp.eql(i, Fp.ZERO);\n            // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n            if (is0(x) && is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        /**\n         * Takes a bunch of Projective Points but executes only one\n         * inversion on all of them. Inversion is very slow operation,\n         * so this improves performance massively.\n         * Optimization: converts a list of projective points to a list of identical points with Z=1.\n         */\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.pz));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        /**\n         * Converts hash string or Uint8Array to Point.\n         * @param hex short/long ECDSA hex\n         */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        // Multiplies generator point by privateKey.\n        static fromPrivateKey(privateKey) {\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            this._WINDOW_SIZE = windowSize;\n            pointPrecomputes.delete(this);\n        }\n        // A point on curve is valid if it conforms to equation.\n        assertValidity() {\n            // Zero is valid point too!\n            if (this.is0()) {\n                if (CURVE.allowInfinityPoint)\n                    return;\n                throw new Error('bad point: ZERO');\n            }\n            // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n            const { x, y } = this.toAffine();\n            // Check if x, y are valid field elements\n            if (!Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('bad point: x or y not FE');\n            const left = Fp.sqr(y); // y\n            const right = weierstrassEquation(x); // x + ax + b\n            if (!Fp.eql(left, right))\n                throw new Error('bad point: equation left != right');\n            if (!this.isTorsionFree())\n                throw new Error('bad point: not in prime-order subgroup');\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (Fp.isOdd)\n                return !Fp.isOdd(y);\n            throw new Error(\"Field doesn't support isOdd\");\n        }\n        /**\n         * Compare one point to another.\n         */\n        equals(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /**\n         * Flips point to one corresponding to (x, -y) in Affine coordinates.\n         */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, pointPrecomputes, n, (comp) => {\n                const toInv = Fp.invertBatch(comp.map((p) => p.pz));\n                return comp.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n            });\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(n) {\n            const I = Point.ZERO;\n            if (n === _0n)\n                return I;\n            assertGE(n); // Will throw on 0\n            if (n === _1n)\n                return this;\n            const { endo } = CURVE;\n            if (!endo)\n                return wnaf.unsafeLadder(this, n);\n            // Apply endomorphism\n            let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let k1p = I;\n            let k2p = I;\n            let d = this;\n            while (k1 > _0n || k2 > _0n) {\n                if (k1 & _1n)\n                    k1p = k1p.add(d);\n                if (k2 & _1n)\n                    k2p = k2p.add(d);\n                d = d.double();\n                k1 >>= _1n;\n                k2 >>= _1n;\n            }\n            if (k1neg)\n                k1p = k1p.negate();\n            if (k2neg)\n                k2p = k2p.negate();\n            k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n            return k1p.add(k2p);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            assertGE(scalar);\n            let n = scalar;\n            let point, fake; // Fake point is used to const-time mult\n            const { endo } = CURVE;\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n                let { p: k1p, f: f1p } = this.wNAF(k1);\n                let { p: k2p, f: f2p } = this.wNAF(k2);\n                k1p = wnaf.constTimeNegate(k1neg, k1p);\n                k2p = wnaf.constTimeNegate(k2neg, k2p);\n                k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n                point = k1p.add(k2p);\n                fake = f1p.add(f2p);\n            }\n            else {\n                const { p, f } = this.wNAF(n);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n         * Not using Strauss-Shamir trick: precomputation tables are faster.\n         * The trick could be useful if both P and Q are not G (not in our case).\n         * @returns non-zero affine point\n         */\n        multiplyAndAddUnsafe(Q, a, b) {\n            const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n            const mul = (P, a // Select faster multiply() method\n            ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n            const sum = mul(this, a).add(mul(Q, b));\n            return sum.is0() ? undefined : sum;\n        }\n        // Converts Projective point to affine (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        // (x, y, z)  (x=x/z, y=y/z)\n        toAffine(iz) {\n            const { px: x, py: y, pz: z } = this;\n            const is0 = this.is0();\n            // If invZ was 0, we return zero point. However we still want to execute\n            // all operations, so we replace invZ with a random number, 1.\n            if (iz == null)\n                iz = is0 ? Fp.ONE : Fp.inv(z);\n            const ax = Fp.mul(x, iz);\n            const ay = Fp.mul(y, iz);\n            const zz = Fp.mul(z, iz);\n            if (is0)\n                return { x: Fp.ZERO, y: Fp.ZERO };\n            if (!Fp.eql(zz, Fp.ONE))\n                throw new Error('invZ was invalid');\n            return { x: ax, y: ay };\n        }\n        isTorsionFree() {\n            const { h: cofactor, isTorsionFree } = CURVE;\n            if (cofactor === _1n)\n                return true; // No subgroups, always torsion-free\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n        }\n        clearCofactor() {\n            const { h: cofactor, clearCofactor } = CURVE;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(CURVE.h);\n        }\n        toRawBytes(isCompressed = true) {\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        toHex(isCompressed = true) {\n            return ut.bytesToHex(this.toRawBytes(isCompressed));\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n    const _bits = CURVE.nBitLength;\n    const wnaf = wNAF(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n    // Validate if generator point is on curve\n    return {\n        CURVE,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    };\n}\nfunction validateOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        hash: 'hash',\n        hmac: 'function',\n        randomBytes: 'function',\n    }, {\n        bits2int: 'function',\n        bits2int_modN: 'function',\n        lowS: 'boolean',\n    });\n    return Object.freeze({ lowS: true, ...opts });\n}\nexport function weierstrass(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER } = CURVE;\n    const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n    const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n    function isValidFieldElement(num) {\n        return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n    }\n    function modN(a) {\n        return mod.mod(a, CURVE_ORDER);\n    }\n    function invN(a) {\n        return mod.invert(a, CURVE_ORDER);\n    }\n    const { ProjectivePoint: Point, normPrivateKeyToScalar, weierstrassEquation, isWithinCurveOrder, } = weierstrassPoints({\n        ...CURVE,\n        toBytes(c, point, isCompressed) {\n            const a = point.toAffine();\n            const x = Fp.toBytes(a.x);\n            const cat = ut.concatBytes;\n            if (isCompressed) {\n                return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n            }\n            else {\n                return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n            }\n        },\n        fromBytes(bytes) {\n            const len = bytes.length;\n            const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // this.assertValidity() is done inside of fromHex\n            if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n                const x = ut.bytesToNumberBE(tail);\n                if (!isValidFieldElement(x))\n                    throw new Error('Point is not on curve');\n                const y2 = weierstrassEquation(x); // y = x + ax + b\n                let y = Fp.sqrt(y2); // y = y ^ (p+1)/4\n                const isYOdd = (y & _1n) === _1n;\n                // ECDSA\n                const isHeadOdd = (head & 1) === 1;\n                if (isHeadOdd !== isYOdd)\n                    y = Fp.neg(y);\n                return { x, y };\n            }\n            else if (len === uncompressedLen && head === 0x04) {\n                const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n                const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n                return { x, y };\n            }\n            else {\n                throw new Error(`Point of length ${len} was invalid. Expected ${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes`);\n            }\n        },\n    });\n    const numToNByteStr = (num) => ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n    }\n    // slice bytes num\n    const slcNum = (b, from, to) => ut.bytesToNumberBE(b.slice(from, to));\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            this.r = r;\n            this.s = s;\n            this.recovery = recovery;\n            this.assertValidity();\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const l = CURVE.nByteLength;\n            hex = ensureBytes('compactSignature', hex, l * 2);\n            return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = DER.toSig(ensureBytes('DER', hex));\n            return new Signature(r, s);\n        }\n        assertValidity() {\n            // can use assertGE here\n            if (!isWithinCurveOrder(this.r))\n                throw new Error('r must be 0 < r < CURVE.n');\n            if (!isWithinCurveOrder(this.s))\n                throw new Error('s must be 0 < s < CURVE.n');\n        }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        recoverPublicKey(msgHash) {\n            const { r, s, recovery: rec } = this;\n            const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n            if (radj >= Fp.ORDER)\n                throw new Error('recovery id 2 or 3 invalid');\n            const prefix = (rec & 1) === 0 ? '02' : '03';\n            const R = Point.fromHex(prefix + numToNByteStr(radj));\n            const ir = invN(radj); // r^-1\n            const u1 = modN(-h * ir); // -hr^-1\n            const u2 = modN(s * ir); // sr^-1\n            const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n            if (!Q)\n                throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return ut.hexToBytes(this.toDERHex());\n        }\n        toDERHex() {\n            return DER.hexFromSig({ r: this.r, s: this.s });\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return ut.hexToBytes(this.toCompactHex());\n        }\n        toCompactHex() {\n            return numToNByteStr(this.r) + numToNByteStr(this.s);\n        }\n    }\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size (nBitLength+64)\n         * as per FIPS 186 B.4.1 with modulo bias being neglible.\n         */\n        randomPrivateKey: () => {\n            const rand = CURVE.randomBytes(Fp.BYTES + 8);\n            const num = mod.hashToPrivateScalar(rand, CURVE_ORDER);\n            return ut.numberToBytesBE(num, CURVE.nByteLength);\n        },\n        /**\n         * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n         * Allows to massively speed-up `point.multiply(scalar)`.\n         * @returns cached point\n         * @example\n         * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n         * fast.multiply(privKey); // much faster ECDH now\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n            return point;\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        const arr = item instanceof Uint8Array;\n        const str = typeof item === 'string';\n        const len = (arr || str) && item.length;\n        if (arr)\n            return len === compressedLen || len === uncompressedLen;\n        if (str)\n            return len === 2 * compressedLen || len === 2 * uncompressedLen;\n        if (item instanceof Point)\n            return true;\n        return false;\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA))\n            throw new Error('first arg must be private key');\n        if (!isProbPub(publicB))\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = CURVE.bits2int ||\n        function (bytes) {\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = CURVE.bits2int_modN ||\n        function (bytes) {\n            return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        if (typeof num !== 'bigint')\n            throw new Error('bigint expected');\n        if (!(_0n <= num && num < ORDER_MASK))\n            throw new Error(`bigint expected < 2^${CURVE.nBitLength}`);\n        // works with order, can have different size than numToField!\n        return ut.numberToBytesBE(num, CURVE.nByteLength);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n    // Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash, randomBytes } = CURVE;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = ensureBytes('msgHash', msgHash);\n        if (prehash)\n            msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push(ensureBytes('extraEntropy', e, Fp.BYTES)); // check for being of size BYTES\n        }\n        const seed = ut.concatBytes(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!isWithinCurveOrder(k))\n                return; // Important: all mod() calls here must be done over N\n            const ik = invN(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = modN(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            // Can use scalar blinding b^-1(bm + bdr) where b  [1,q1] according to\n            // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n            // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n            const s = modN(ik * modN(m + r * d)); // Not using blinding here\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: CURVE.lowS, prehash: false };\n    const defaultVerOpts = { lowS: CURVE.lowS, prehash: false };\n    /**\n     * Signs message hash (not message: you need to hash it by yourself).\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G  k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param opts `lowS, extraEntropy, prehash`\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const drbg = ut.createHmacDrbg(CURVE.hash.outputLen, CURVE.nByteLength, CURVE.hmac);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE._setWindowSize(8);\n    // utils.precompute(8, ProjectivePoint.BASE)\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1G - U2P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = ensureBytes('msgHash', msgHash);\n        publicKey = ensureBytes('publicKey', publicKey);\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        const { lowS, prehash } = opts;\n        let _sig = undefined;\n        let P;\n        try {\n            if (typeof sg === 'string' || sg instanceof Uint8Array) {\n                // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n                // Since DER can also be 2*nByteLength bytes, we check for it first.\n                try {\n                    _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof DER.Err))\n                        throw derError;\n                    _sig = Signature.fromCompact(sg);\n                }\n            }\n            else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n                const { r, s } = sg;\n                _sig = new Signature(r, s);\n            }\n            else {\n                throw new Error('PARSE');\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            if (error.message === 'PARSE')\n                throw new Error(`signature must be Signature instance, Uint8Array or hex string`);\n            return false;\n        }\n        if (lowS && _sig.hasHighS())\n            return false;\n        if (prehash)\n            msgHash = CURVE.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = invN(s); // s^-1\n        const u1 = modN(h * is); // u1 = hs^-1 mod n\n        const u2 = modN(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1G + u2P\n        if (!R)\n            return false;\n        const v = modN(R.x);\n        return v === r;\n    }\n    return {\n        CURVE,\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        ProjectivePoint: Point,\n        Signature,\n        utils,\n    };\n}\n// Implementation of the Shallue and van de Woestijne method for any Weierstrass curve\n// TODO: check if there is a way to merge this with uvRatio in Edwards && move to modular?\n// b = True and y = sqrt(u / v) if (u / v) is square in F, and\n// b = False and y = sqrt(Z * (u / v)) otherwise.\nexport function SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    const c2 = (q - _1n) / _2n ** c1; // 2. c2 = (q - 1) / (2^c1)        # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n ** c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n ** (c1 - _1n); // 5. c5 = 2^(c1 - 1)              # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = _2n ** (i - _2n); // 18.    tv5 = i - 2;    19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n// From draft-irtf-cfrg-hash-to-curve-16\nexport function mapToCurveSimpleSWU(Fp, opts) {\n    mod.validateField(Fp);\n    if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n    if (!Fp.isOdd)\n        throw new Error('Fp.isOdd is not implemented!');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        x = Fp.div(x, tv4); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","import assert from './_assert.js';\nimport { Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assert.hash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        assert.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { concatBytes, randomBytes } from '@noble/hashes/utils';\nimport { weierstrass } from './abstract/weierstrass.js';\n// connects noble-curves to noble-hashes\nexport function getHash(hash) {\n    return {\n        hash,\n        hmac: (key, ...msgs) => hmac(hash, key, concatBytes(...msgs)),\n        randomBytes,\n    };\n}\nexport function createCurve(curveDef, defHash) {\n    const create = (hash) => weierstrass({ ...curveDef, ...getHash(hash) });\n    return Object.freeze({ ...create(defHash), create });\n}\n//# sourceMappingURL=_shortw_utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha256';\nimport { randomBytes } from '@noble/hashes/utils';\nimport { Field, mod, pow2 } from './abstract/modular.js';\nimport { mapToCurveSimpleSWU } from './abstract/weierstrass.js';\nimport { bytesToNumberBE, concatBytes, ensureBytes, numberToBytesBE } from './abstract/utils.js';\nimport * as htf from './abstract/hash-to-curve.js';\nimport { createCurve } from './_shortw_utils.js';\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a, b) => (a + b / _2n) / b;\n/**\n * n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y) {\n    const P = secp256k1P;\n    // prettier-ignore\n    const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n    // prettier-ignore\n    const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n    const b2 = (y * y * y) % P; // x^3, 11\n    const b3 = (b2 * b2 * y) % P; // x^7\n    const b6 = (pow2(b3, _3n, P) * b3) % P;\n    const b9 = (pow2(b6, _3n, P) * b3) % P;\n    const b11 = (pow2(b9, _2n, P) * b2) % P;\n    const b22 = (pow2(b11, _11n, P) * b11) % P;\n    const b44 = (pow2(b22, _22n, P) * b22) % P;\n    const b88 = (pow2(b44, _44n, P) * b44) % P;\n    const b176 = (pow2(b88, _88n, P) * b88) % P;\n    const b220 = (pow2(b176, _44n, P) * b44) % P;\n    const b223 = (pow2(b220, _3n, P) * b3) % P;\n    const t1 = (pow2(b223, _23n, P) * b22) % P;\n    const t2 = (pow2(t1, _6n, P) * b2) % P;\n    const root = pow2(t2, _2n, P);\n    if (!Fp.eql(Fp.sqr(root), y))\n        throw new Error('Cannot find square root');\n    return root;\n}\nconst Fp = Field(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\nexport const secp256k1 = createCurve({\n    a: BigInt(0),\n    b: BigInt(7),\n    Fp,\n    n: secp256k1N,\n    // Base point (x, y) aka generator point\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1),\n    lowS: true,\n    /**\n     * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n     * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n     * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n     * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n     */\n    endo: {\n        beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n        splitScalar: (k) => {\n            const n = secp256k1N;\n            const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n            const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n            const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n            const b2 = a1;\n            const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n            const c1 = divNearest(b2 * k, n);\n            const c2 = divNearest(-b1 * k, n);\n            let k1 = mod(k - c1 * a1 - c2 * a2, n);\n            let k2 = mod(-c1 * b1 - c2 * b2, n);\n            const k1neg = k1 > POW_2_128;\n            const k2neg = k2 > POW_2_128;\n            if (k1neg)\n                k1 = n - k1;\n            if (k2neg)\n                k2 = n - k2;\n            if (k1 > POW_2_128 || k2 > POW_2_128) {\n                throw new Error('splitScalar: Endomorphism failed, k=' + k);\n            }\n            return { k1neg, k1, k2neg, k2 };\n        },\n    },\n}, sha256);\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\nconst fe = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1P;\nconst ge = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1N;\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES = {};\nfunction taggedHash(tag, ...messages) {\n    let tagP = TAGGED_HASH_PREFIXES[tag];\n    if (tagP === undefined) {\n        const tagH = sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n        tagP = concatBytes(tagH, tagH);\n        TAGGED_HASH_PREFIXES[tag] = tagP;\n    }\n    return sha256(concatBytes(tagP, ...messages));\n}\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n) => numberToBytesBE(n, 32);\nconst modP = (x) => mod(x, secp256k1P);\nconst modN = (x) => mod(x, secp256k1N);\nconst Point = secp256k1.ProjectivePoint;\nconst GmulAdd = (Q, a, b) => Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv) {\n    let d_ = secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n    let p = Point.fromPrivateKey(d_); // P = d'G; 0 < d' < n check is done inside\n    const scalar = p.hasEvenY() ? d_ : modN(-d_);\n    return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x) {\n    if (!fe(x))\n        throw new Error('bad x: need 0 < x < p'); // Fail if x  p.\n    const xx = modP(x * x);\n    const c = modP(xx * x + BigInt(7)); // Let c = x + 7 mod p.\n    let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n    if (y % _2n !== _0n)\n        y = modP(-y); // Return the unique point P such that x(P) = x and\n    const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n    p.assertValidity();\n    return p;\n}\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args) {\n    return modN(bytesToNumberBE(taggedHash('BIP0340/challenge', ...args)));\n}\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey) {\n    return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'n. Ret bytes(d'G)\n}\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message, privateKey, auxRand = randomBytes(32)) {\n    const m = ensureBytes('message', message);\n    const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n    const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n    const t = numTo32b(d ^ bytesToNumberBE(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n    const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n    const k_ = modN(bytesToNumberBE(rand)); // Let k' = int(rand) mod n\n    if (k_ === _0n)\n        throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n    const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'G.\n    const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n    const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n    sig.set(rx, 0);\n    sig.set(numTo32b(modN(k + e * d)), 32);\n    // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n    if (!schnorrVerify(sig, m, px))\n        throw new Error('sign: Invalid signature produced');\n    return sig;\n}\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature, message, publicKey) {\n    const sig = ensureBytes('signature', signature, 64);\n    const m = ensureBytes('message', message);\n    const pub = ensureBytes('publicKey', publicKey, 32);\n    try {\n        const P = lift_x(bytesToNumberBE(pub)); // P = lift_x(int(pk)); fail if that fails\n        const r = bytesToNumberBE(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r  p.\n        if (!fe(r))\n            return false;\n        const s = bytesToNumberBE(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s  n.\n        if (!ge(s))\n            return false;\n        const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n        const R = GmulAdd(P, s, modN(-e)); // R = sG - eP\n        if (!R || !R.hasEvenY() || R.toAffine().x !== r)\n            return false; // -eP == (n-e)P\n        return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R)  r.\n    }\n    catch (error) {\n        return false;\n    }\n}\nexport const schnorr = {\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    utils: {\n        randomPrivateKey: secp256k1.utils.randomPrivateKey,\n        lift_x,\n        pointToBytes,\n        numberToBytesBE,\n        bytesToNumberBE,\n        taggedHash,\n        mod,\n    },\n};\nconst isoMap = htf.isogenyMap(Fp, [\n    // xNum\n    [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n    ],\n    // xDen\n    [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n    // yNum\n    [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n    ],\n    // yDen\n    [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n].map((i) => i.map((j) => BigInt(j))));\nconst mapSWU = mapToCurveSimpleSWU(Fp, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fp.create(BigInt('-11')),\n});\nexport const { hashToCurve, encodeToCurve } = htf.createHasher(secp256k1.ProjectivePoint, (scalars) => {\n    const { x, y } = mapSWU(Fp.create(scalars[0]));\n    return isoMap(x, y);\n}, {\n    DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n    encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha256,\n});\n//# sourceMappingURL=secp256k1.js.map","import { mod } from './modular.js';\nimport { bytesToNumberBE, concatBytes, utf8ToBytes, validateObject } from './utils.js';\nfunction validateDST(dst) {\n    if (dst instanceof Uint8Array)\n        return dst;\n    if (typeof dst === 'string')\n        return utf8ToBytes(dst);\n    throw new Error('DST must be Uint8Array or string');\n}\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = bytesToNumberBE;\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value, length) {\n    if (value < 0 || value >= 1 << (8 * length)) {\n        throw new Error(`bad I2OSP call: value=${value} length=${length}`);\n    }\n    const res = Array.from({ length }).fill(0);\n    for (let i = length - 1; i >= 0; i--) {\n        res[i] = value & 0xff;\n        value >>>= 8;\n    }\n    return new Uint8Array(res);\n}\nfunction strxor(a, b) {\n    const arr = new Uint8Array(a.length);\n    for (let i = 0; i < a.length; i++) {\n        arr[i] = a[i] ^ b[i];\n    }\n    return arr;\n}\nfunction isBytes(item) {\n    if (!(item instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n}\nfunction isNum(item) {\n    if (!Number.isSafeInteger(item))\n        throw new Error('number expected');\n}\n// Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits\n// https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-11#section-5.4.1\nexport function expand_message_xmd(msg, DST, lenInBytes, H) {\n    isBytes(msg);\n    isBytes(DST);\n    isNum(lenInBytes);\n    // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-5.3.3\n    if (DST.length > 255)\n        DST = H(concatBytes(utf8ToBytes('H2C-OVERSIZE-DST-'), DST));\n    const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n    const ell = Math.ceil(lenInBytes / b_in_bytes);\n    if (ell > 255)\n        throw new Error('Invalid xmd length');\n    const DST_prime = concatBytes(DST, i2osp(DST.length, 1));\n    const Z_pad = i2osp(0, r_in_bytes);\n    const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n    const b = new Array(ell);\n    const b_0 = H(concatBytes(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n    b[0] = H(concatBytes(b_0, i2osp(1, 1), DST_prime));\n    for (let i = 1; i <= ell; i++) {\n        const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n        b[i] = H(concatBytes(...args));\n    }\n    const pseudo_random_bytes = concatBytes(...b);\n    return pseudo_random_bytes.slice(0, lenInBytes);\n}\nexport function expand_message_xof(msg, DST, lenInBytes, k, H) {\n    isBytes(msg);\n    isBytes(DST);\n    isNum(lenInBytes);\n    // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-5.3.3\n    // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n    if (DST.length > 255) {\n        const dkLen = Math.ceil((2 * k) / 8);\n        DST = H.create({ dkLen }).update(utf8ToBytes('H2C-OVERSIZE-DST-')).update(DST).digest();\n    }\n    if (lenInBytes > 65535 || DST.length > 255)\n        throw new Error('expand_message_xof: invalid lenInBytes');\n    return (H.create({ dkLen: lenInBytes })\n        .update(msg)\n        .update(i2osp(lenInBytes, 2))\n        // 2. DST_prime = DST || I2OSP(len(DST), 1)\n        .update(DST)\n        .update(i2osp(DST.length, 1))\n        .digest());\n}\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F\n * https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-11#section-5.3\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nexport function hash_to_field(msg, count, options) {\n    validateObject(options, {\n        DST: 'string',\n        p: 'bigint',\n        m: 'isSafeInteger',\n        k: 'isSafeInteger',\n        hash: 'hash',\n    });\n    const { p, k, m, hash, expand, DST: _DST } = options;\n    isBytes(msg);\n    isNum(count);\n    const DST = validateDST(_DST);\n    const log2p = p.toString(2).length;\n    const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n    const len_in_bytes = count * m * L;\n    let prb; // pseudo_random_bytes\n    if (expand === 'xmd') {\n        prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n    }\n    else if (expand === 'xof') {\n        prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n    }\n    else if (expand === '_internal_pass') {\n        // for internal tests only\n        prb = msg;\n    }\n    else {\n        throw new Error('expand must be \"xmd\" or \"xof\"');\n    }\n    const u = new Array(count);\n    for (let i = 0; i < count; i++) {\n        const e = new Array(m);\n        for (let j = 0; j < m; j++) {\n            const elm_offset = L * (j + i * m);\n            const tv = prb.subarray(elm_offset, elm_offset + L);\n            e[j] = mod(os2ip(tv), p);\n        }\n        u[i] = e;\n    }\n    return u;\n}\nexport function isogenyMap(field, map) {\n    // Make same order as in spec\n    const COEFF = map.map((i) => Array.from(i).reverse());\n    return (x, y) => {\n        const [xNum, xDen, yNum, yDen] = COEFF.map((val) => val.reduce((acc, i) => field.add(field.mul(acc, x), i)));\n        x = field.div(xNum, xDen); // xNum / xDen\n        y = field.mul(y, field.div(yNum, yDen)); // y * (yNum / yDev)\n        return { x, y };\n    };\n}\nexport function createHasher(Point, mapToCurve, def) {\n    if (typeof mapToCurve !== 'function')\n        throw new Error('mapToCurve() must be defined');\n    return {\n        // Encodes byte string to elliptic curve\n        // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-3\n        hashToCurve(msg, options) {\n            const u = hash_to_field(msg, 2, { ...def, DST: def.DST, ...options });\n            const u0 = Point.fromAffine(mapToCurve(u[0]));\n            const u1 = Point.fromAffine(mapToCurve(u[1]));\n            const P = u0.add(u1).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n        // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-3\n        encodeToCurve(msg, options) {\n            const u = hash_to_field(msg, 1, { ...def, DST: def.encodeDST, ...options });\n            const P = Point.fromAffine(mapToCurve(u[0])).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n    };\n}\n//# sourceMappingURL=hash-to-curve.js.map","/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nexport function assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexport const utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexport const base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexport const base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexport const base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexport const base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexport const base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexport const base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexport const base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexport const base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexport const base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexport const base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nexport const base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), base58);\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexport const bech32 = genBech32('bech32');\nexport const bech32m = genBech32('bech32m');\nexport const utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexport const hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nexport const bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexport const str = bytesToString;\nexport const stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexport const bytes = stringToBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wordlist = void 0;\nexports.wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexports.bool = bool;\nfunction bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.isLE = exports.rotr = exports.createView = exports.u32 = exports.u8 = void 0;\n// We use `globalThis.crypto`, but node.js versions earlier than v19 don't\n// declare it in global scope. For node.js, package.json#exports field mapping\n// rewrites import from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!exports.isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n */\nfunction bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n/**\n * @example hexToBytes('deadbeef') // Uint8Array.from([0xde, 0xad, 0xbe, 0xef])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexports.utf8ToBytes = utf8ToBytes;\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nfunction concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\n/**\n * Secure PRNG. Uses `globalThis.crypto` or node.js crypto module.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hmac = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// HMAC (RFC 2104)\nclass HMAC extends utils_js_1.Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        _assert_js_1.default.hash(hash);\n        const key = (0, utils_js_1.toBytes)(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        _assert_js_1.default.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nconst hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nexports.hmac = hmac;\nexports.hmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pbkdf2Async = exports.pbkdf2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst hmac_js_1 = require(\"./hmac.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash, _password, _salt, _opts) {\n    _assert_js_1.default.hash(hash);\n    const opts = (0, utils_js_1.checkOpts)({ dkLen: 32, asyncTick: 10 }, _opts);\n    const { c, dkLen, asyncTick } = opts;\n    _assert_js_1.default.number(c);\n    _assert_js_1.default.number(dkLen);\n    _assert_js_1.default.number(asyncTick);\n    if (c < 1)\n        throw new Error('PBKDF2: iterations (c) should be >= 1');\n    const password = (0, utils_js_1.toBytes)(_password);\n    const salt = (0, utils_js_1.toBytes)(_salt);\n    // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n    const DK = new Uint8Array(dkLen);\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    const PRF = hmac_js_1.hmac.create(hash, password);\n    const PRFSalt = PRF._cloneInto().update(salt);\n    return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\nfunction pbkdf2Output(PRF, PRFSalt, DK, prfW, u) {\n    PRF.destroy();\n    PRFSalt.destroy();\n    if (prfW)\n        prfW.destroy();\n    u.fill(0);\n    return DK;\n}\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n */\nfunction pbkdf2(hash, password, salt, opts) {\n    const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 +  + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        for (let ui = 1; ui < c; ui++) {\n            // Uc = PRF(Password, Uc1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        }\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2 = pbkdf2;\nasync function pbkdf2Async(hash, password, salt, opts) {\n    const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 +  + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        await (0, utils_js_1.asyncLoop)(c - 1, asyncTick, (i) => {\n            // Uc = PRF(Password, Uc1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        });\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2Async = pbkdf2Async;\n//# sourceMappingURL=pbkdf2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SHA2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nclass SHA2 extends utils_js_1.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0, utils_js_1.createView)(this.buffer);\n    }\n    update(data) {\n        _assert_js_1.default.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0, utils_js_1.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0, utils_js_1.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\nexports.SHA2 = SHA2;\n//# sourceMappingURL=_sha2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha224 = exports.sha256 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0, utils_js_1.rotr)(W15, 7) ^ (0, utils_js_1.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0, utils_js_1.rotr)(W2, 17) ^ (0, utils_js_1.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0, utils_js_1.rotr)(E, 6) ^ (0, utils_js_1.rotr)(E, 11) ^ (0, utils_js_1.rotr)(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0, utils_js_1.rotr)(A, 2) ^ (0, utils_js_1.rotr)(A, 13) ^ (0, utils_js_1.rotr)(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexports.sha256 = (0, utils_js_1.wrapConstructor)(() => new SHA256());\nexports.sha224 = (0, utils_js_1.wrapConstructor)(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.add = exports.toBig = exports.split = exports.fromBig = void 0;\nconst U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexports.fromBig = fromBig;\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexports.split = split;\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\nexports.add = add;\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig: exports.toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha384 = exports.sha512_256 = exports.sha512_224 = exports.sha512 = exports.SHA512 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst _u64_js_1 = require(\"./_u64.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = _u64_js_1.default.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nclass SHA512 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = _u64_js_1.default.rotrSH(W15h, W15l, 1) ^ _u64_js_1.default.rotrSH(W15h, W15l, 8) ^ _u64_js_1.default.shrSH(W15h, W15l, 7);\n            const s0l = _u64_js_1.default.rotrSL(W15h, W15l, 1) ^ _u64_js_1.default.rotrSL(W15h, W15l, 8) ^ _u64_js_1.default.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = _u64_js_1.default.rotrSH(W2h, W2l, 19) ^ _u64_js_1.default.rotrBH(W2h, W2l, 61) ^ _u64_js_1.default.shrSH(W2h, W2l, 6);\n            const s1l = _u64_js_1.default.rotrSL(W2h, W2l, 19) ^ _u64_js_1.default.rotrBL(W2h, W2l, 61) ^ _u64_js_1.default.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = _u64_js_1.default.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = _u64_js_1.default.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = _u64_js_1.default.rotrSH(Eh, El, 14) ^ _u64_js_1.default.rotrSH(Eh, El, 18) ^ _u64_js_1.default.rotrBH(Eh, El, 41);\n            const sigma1l = _u64_js_1.default.rotrSL(Eh, El, 14) ^ _u64_js_1.default.rotrSL(Eh, El, 18) ^ _u64_js_1.default.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = _u64_js_1.default.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = _u64_js_1.default.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = _u64_js_1.default.rotrSH(Ah, Al, 28) ^ _u64_js_1.default.rotrBH(Ah, Al, 34) ^ _u64_js_1.default.rotrBH(Ah, Al, 39);\n            const sigma0l = _u64_js_1.default.rotrSL(Ah, Al, 28) ^ _u64_js_1.default.rotrBL(Ah, Al, 34) ^ _u64_js_1.default.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = _u64_js_1.default.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = _u64_js_1.default.add3L(T1l, sigma0l, MAJl);\n            Ah = _u64_js_1.default.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = _u64_js_1.default.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = _u64_js_1.default.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = _u64_js_1.default.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = _u64_js_1.default.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = _u64_js_1.default.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = _u64_js_1.default.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = _u64_js_1.default.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = _u64_js_1.default.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexports.SHA512 = SHA512;\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexports.sha512 = (0, utils_js_1.wrapConstructor)(() => new SHA512());\nexports.sha512_224 = (0, utils_js_1.wrapConstructor)(() => new SHA512_224());\nexports.sha512_256 = (0, utils_js_1.wrapConstructor)(() => new SHA512_256());\nexports.sha384 = (0, utils_js_1.wrapConstructor)(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","\"use strict\";\n/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bytes = exports.stringToBytes = exports.str = exports.bytesToString = exports.hex = exports.utf8 = exports.bech32m = exports.bech32 = exports.base58check = exports.base58xmr = exports.base58xrp = exports.base58flickr = exports.base58 = exports.base64url = exports.base64 = exports.base32crockford = exports.base32hex = exports.base32 = exports.base16 = exports.utils = exports.assertNumber = void 0;\nfunction assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nexports.assertNumber = assertNumber;\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexports.utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexports.base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexports.base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexports.base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexports.base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexports.base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexports.base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexports.base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexports.base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexports.base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexports.base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = exports.base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nconst base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), exports.base58);\nexports.base58check = base58check;\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexports.bech32 = genBech32('bech32');\nexports.bech32m = genBech32('bech32m');\nexports.utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexports.hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8: exports.utf8, hex: exports.hex, base16: exports.base16, base32: exports.base32, base64: exports.base64, base64url: exports.base64url, base58: exports.base58, base58xmr: exports.base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nconst bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexports.bytesToString = bytesToString;\nexports.str = exports.bytesToString;\nconst stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexports.stringToBytes = stringToBytes;\nexports.bytes = exports.stringToBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mnemonicToSeedSync = exports.mnemonicToSeed = exports.validateMnemonic = exports.entropyToMnemonic = exports.mnemonicToEntropy = exports.generateMnemonic = void 0;\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nconst _assert_1 = require(\"@noble/hashes/_assert\");\nconst pbkdf2_1 = require(\"@noble/hashes/pbkdf2\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst sha512_1 = require(\"@noble/hashes/sha512\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst base_1 = require(\"@scure/base\");\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError(`Invalid mnemonic type: ${typeof str}`);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction assertEntropy(entropy) {\n    _assert_1.default.bytes(entropy, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction generateMnemonic(wordlist, strength = 128) {\n    _assert_1.default.number(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic((0, utils_1.randomBytes)(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([((0, sha256_1.sha256)(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\n        throw new Error('Worlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error(`Wordlist: non-string element: ${i}`);\n    });\n    return base_1.utils.chain(base_1.utils.checksum(1, calcChecksum), base_1.utils.radix2(11, true), base_1.utils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    assertEntropy(entropy);\n    return entropy;\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction entropyToMnemonic(entropy, wordlist) {\n    assertEntropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nconst salt = (passphrase) => nfkd(`mnemonic${passphrase}`);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeed(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2Async)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\n","import { SHA2 } from './_sha2.js';\nimport { wrapConstructor } from './utils.js';\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = Uint8Array.from({ length: 16 }, (_, i) => i);\nconst Pi = Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++)\n    for (let j of [idxL, idxR])\n        j.push(j[i].map((k) => Rho[k]));\nconst shifts = [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\nconst shiftsL = idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst Kl = new Uint32Array([0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]);\nconst Kr = new Uint32Array([0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]);\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | (word >>> (32 - shift));\n// It's called f() in spec.\nfunction f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    else if (group === 1)\n        return (x & y) | (~x & z);\n    else if (group === 2)\n        return (x | ~y) ^ z;\n    else if (group === 3)\n        return (x & z) | (y & ~z);\n    else\n        return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst BUF = new Uint32Array(16);\nexport class RIPEMD160 extends SHA2 {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = (rotl(al + f(group, bl, cl, dl) + BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = (rotl(ar + f(rGroup, br, cr, dr) + BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        BUF.fill(0);\n    }\n    destroy() {\n        this.destroyed = true;\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexport const ripemd160 = wrapConstructor(() => new RIPEMD160());\n//# sourceMappingURL=ripemd160.js.map","const U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nexport function fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexport function split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexport const toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nexport function add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nexport class SHA512 extends SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexport const sha512 = wrapConstructor(() => new SHA512());\nexport const sha512_224 = wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = wrapConstructor(() => new SHA512_256());\nexport const sha384 = wrapConstructor(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512 } from '@noble/hashes/sha512';\nimport { bytes as assertBytes } from '@noble/hashes/_assert';\nimport { bytesToHex, concatBytes, createView, hexToBytes, utf8ToBytes } from '@noble/hashes/utils';\nimport { secp256k1 as secp } from '@noble/curves/secp256k1';\nimport { mod } from '@noble/curves/abstract/modular';\nimport { base58check as base58checker } from '@scure/base';\nconst Point = secp.ProjectivePoint;\nconst base58check = base58checker(sha256);\nfunction bytesToNumber(bytes) {\n    return BigInt(`0x${bytesToHex(bytes)}`);\n}\nfunction numberToBytes(num) {\n    return hexToBytes(num.toString(16).padStart(64, '0'));\n}\nconst MASTER_SECRET = utf8ToBytes('Bitcoin seed');\nconst BITCOIN_VERSIONS = { private: 0x0488ade4, public: 0x0488b21e };\nexport const HARDENED_OFFSET = 0x80000000;\nconst hash160 = (data) => ripemd160(sha256(data));\nconst fromU32 = (data) => createView(data).getUint32(0, false);\nconst toU32 = (n) => {\n    if (!Number.isSafeInteger(n) || n < 0 || n > 2 ** 32 - 1) {\n        throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);\n    }\n    const buf = new Uint8Array(4);\n    createView(buf).setUint32(0, n, false);\n    return buf;\n};\nexport class HDKey {\n    get fingerprint() {\n        if (!this.pubHash) {\n            throw new Error('No publicKey set!');\n        }\n        return fromU32(this.pubHash);\n    }\n    get identifier() {\n        return this.pubHash;\n    }\n    get pubKeyHash() {\n        return this.pubHash;\n    }\n    get privateKey() {\n        return this.privKeyBytes || null;\n    }\n    get publicKey() {\n        return this.pubKey || null;\n    }\n    get privateExtendedKey() {\n        const priv = this.privateKey;\n        if (!priv) {\n            throw new Error('No private key');\n        }\n        return base58check.encode(this.serialize(this.versions.private, concatBytes(new Uint8Array([0]), priv)));\n    }\n    get publicExtendedKey() {\n        if (!this.pubKey) {\n            throw new Error('No public key');\n        }\n        return base58check.encode(this.serialize(this.versions.public, this.pubKey));\n    }\n    static fromMasterSeed(seed, versions = BITCOIN_VERSIONS) {\n        assertBytes(seed);\n        if (8 * seed.length < 128 || 8 * seed.length > 512) {\n            throw new Error(`HDKey: wrong seed length=${seed.length}. Should be between 128 and 512 bits; 256 bits is advised)`);\n        }\n        const I = hmac(sha512, MASTER_SECRET, seed);\n        return new HDKey({\n            versions,\n            chainCode: I.slice(32),\n            privateKey: I.slice(0, 32),\n        });\n    }\n    static fromExtendedKey(base58key, versions = BITCOIN_VERSIONS) {\n        const keyBuffer = base58check.decode(base58key);\n        const keyView = createView(keyBuffer);\n        const version = keyView.getUint32(0, false);\n        const opt = {\n            versions,\n            depth: keyBuffer[4],\n            parentFingerprint: keyView.getUint32(5, false),\n            index: keyView.getUint32(9, false),\n            chainCode: keyBuffer.slice(13, 45),\n        };\n        const key = keyBuffer.slice(45);\n        const isPriv = key[0] === 0;\n        if (version !== versions[isPriv ? 'private' : 'public']) {\n            throw new Error('Version mismatch');\n        }\n        if (isPriv) {\n            return new HDKey({ ...opt, privateKey: key.slice(1) });\n        }\n        else {\n            return new HDKey({ ...opt, publicKey: key });\n        }\n    }\n    static fromJSON(json) {\n        return HDKey.fromExtendedKey(json.xpriv);\n    }\n    constructor(opt) {\n        this.depth = 0;\n        this.index = 0;\n        this.chainCode = null;\n        this.parentFingerprint = 0;\n        if (!opt || typeof opt !== 'object') {\n            throw new Error('HDKey.constructor must not be called directly');\n        }\n        this.versions = opt.versions || BITCOIN_VERSIONS;\n        this.depth = opt.depth || 0;\n        this.chainCode = opt.chainCode;\n        this.index = opt.index || 0;\n        this.parentFingerprint = opt.parentFingerprint || 0;\n        if (!this.depth) {\n            if (this.parentFingerprint || this.index) {\n                throw new Error('HDKey: zero depth with non-zero index/parent fingerprint');\n            }\n        }\n        if (opt.publicKey && opt.privateKey) {\n            throw new Error('HDKey: publicKey and privateKey at same time.');\n        }\n        if (opt.privateKey) {\n            if (!secp.utils.isValidPrivateKey(opt.privateKey)) {\n                throw new Error('Invalid private key');\n            }\n            this.privKey =\n                typeof opt.privateKey === 'bigint' ? opt.privateKey : bytesToNumber(opt.privateKey);\n            this.privKeyBytes = numberToBytes(this.privKey);\n            this.pubKey = secp.getPublicKey(opt.privateKey, true);\n        }\n        else if (opt.publicKey) {\n            this.pubKey = Point.fromHex(opt.publicKey).toRawBytes(true);\n        }\n        else {\n            throw new Error('HDKey: no public or private key provided');\n        }\n        this.pubHash = hash160(this.pubKey);\n    }\n    derive(path) {\n        if (!/^[mM]'?/.test(path)) {\n            throw new Error('Path must start with \"m\" or \"M\"');\n        }\n        if (/^[mM]'?$/.test(path)) {\n            return this;\n        }\n        const parts = path.replace(/^[mM]'?\\//, '').split('/');\n        let child = this;\n        for (const c of parts) {\n            const m = /^(\\d+)('?)$/.exec(c);\n            if (!m || m.length !== 3) {\n                throw new Error(`Invalid child index: ${c}`);\n            }\n            let idx = +m[1];\n            if (!Number.isSafeInteger(idx) || idx >= HARDENED_OFFSET) {\n                throw new Error('Invalid index');\n            }\n            if (m[2] === \"'\") {\n                idx += HARDENED_OFFSET;\n            }\n            child = child.deriveChild(idx);\n        }\n        return child;\n    }\n    deriveChild(index) {\n        if (!this.pubKey || !this.chainCode) {\n            throw new Error('No publicKey or chainCode set');\n        }\n        let data = toU32(index);\n        if (index >= HARDENED_OFFSET) {\n            const priv = this.privateKey;\n            if (!priv) {\n                throw new Error('Could not derive hardened child key');\n            }\n            data = concatBytes(new Uint8Array([0]), priv, data);\n        }\n        else {\n            data = concatBytes(this.pubKey, data);\n        }\n        const I = hmac(sha512, this.chainCode, data);\n        const childTweak = bytesToNumber(I.slice(0, 32));\n        const chainCode = I.slice(32);\n        if (!secp.utils.isValidPrivateKey(childTweak)) {\n            throw new Error('Tweak bigger than curve order');\n        }\n        const opt = {\n            versions: this.versions,\n            chainCode,\n            depth: this.depth + 1,\n            parentFingerprint: this.fingerprint,\n            index,\n        };\n        try {\n            if (this.privateKey) {\n                const added = mod(this.privKey + childTweak, secp.CURVE.n);\n                if (!secp.utils.isValidPrivateKey(added)) {\n                    throw new Error('The tweak was out of range or the resulted private key is invalid');\n                }\n                opt.privateKey = added;\n            }\n            else {\n                const added = Point.fromHex(this.pubKey).add(Point.fromPrivateKey(childTweak));\n                if (added.equals(Point.ZERO)) {\n                    throw new Error('The tweak was equal to negative P, which made the result key invalid');\n                }\n                opt.publicKey = added.toRawBytes(true);\n            }\n            return new HDKey(opt);\n        }\n        catch (err) {\n            return this.deriveChild(index + 1);\n        }\n    }\n    sign(hash) {\n        if (!this.privateKey) {\n            throw new Error('No privateKey set!');\n        }\n        assertBytes(hash, 32);\n        return secp.sign(hash, this.privKey).toCompactRawBytes();\n    }\n    verify(hash, signature) {\n        assertBytes(hash, 32);\n        assertBytes(signature, 64);\n        if (!this.publicKey) {\n            throw new Error('No publicKey set!');\n        }\n        let sig;\n        try {\n            sig = secp.Signature.fromCompact(signature);\n        }\n        catch (error) {\n            return false;\n        }\n        return secp.verify(sig, hash, this.publicKey);\n    }\n    wipePrivateData() {\n        this.privKey = undefined;\n        if (this.privKeyBytes) {\n            this.privKeyBytes.fill(0);\n            this.privKeyBytes = undefined;\n        }\n        return this;\n    }\n    toJSON() {\n        return {\n            xpriv: this.privateExtendedKey,\n            xpub: this.publicExtendedKey,\n        };\n    }\n    serialize(version, key) {\n        if (!this.chainCode) {\n            throw new Error('No chainCode set');\n        }\n        assertBytes(key, 33);\n        return concatBytes(toU32(version), new Uint8Array([this.depth]), toU32(this.parentFingerprint), toU32(this.index), this.chainCode, key);\n    }\n}\n//# sourceMappingURL=index.js.map","var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// keys.ts\nimport { schnorr } from \"@noble/curves/secp256k1\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\nfunction generatePrivateKey() {\n  return bytesToHex(schnorr.utils.randomPrivateKey());\n}\nfunction getPublicKey(privateKey) {\n  return bytesToHex(schnorr.getPublicKey(privateKey));\n}\n\n// event.ts\nimport { schnorr as schnorr2 } from \"@noble/curves/secp256k1\";\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { bytesToHex as bytesToHex2 } from \"@noble/hashes/utils\";\n\n// utils.ts\nvar utils_exports = {};\n__export(utils_exports, {\n  MessageNode: () => MessageNode,\n  MessageQueue: () => MessageQueue,\n  insertEventIntoAscendingList: () => insertEventIntoAscendingList,\n  insertEventIntoDescendingList: () => insertEventIntoDescendingList,\n  normalizeURL: () => normalizeURL,\n  utf8Decoder: () => utf8Decoder,\n  utf8Encoder: () => utf8Encoder\n});\nvar utf8Decoder = new TextDecoder(\"utf-8\");\nvar utf8Encoder = new TextEncoder();\nfunction normalizeURL(url) {\n  let p = new URL(url);\n  p.pathname = p.pathname.replace(/\\/+/g, \"/\");\n  if (p.pathname.endsWith(\"/\"))\n    p.pathname = p.pathname.slice(0, -1);\n  if (p.port === \"80\" && p.protocol === \"ws:\" || p.port === \"443\" && p.protocol === \"wss:\")\n    p.port = \"\";\n  p.searchParams.sort();\n  p.hash = \"\";\n  return p.toString();\n}\nfunction insertEventIntoDescendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at < sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at >= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at > event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at < event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\nfunction insertEventIntoAscendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at > sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at <= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at < event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at > event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\nvar MessageNode = class {\n  _value;\n  _next;\n  get value() {\n    return this._value;\n  }\n  set value(message) {\n    this._value = message;\n  }\n  get next() {\n    return this._next;\n  }\n  set next(node) {\n    this._next = node;\n  }\n  constructor(message) {\n    this._value = message;\n    this._next = null;\n  }\n};\nvar MessageQueue = class {\n  _first;\n  _last;\n  get first() {\n    return this._first;\n  }\n  set first(messageNode) {\n    this._first = messageNode;\n  }\n  get last() {\n    return this._last;\n  }\n  set last(messageNode) {\n    this._last = messageNode;\n  }\n  _size;\n  get size() {\n    return this._size;\n  }\n  set size(v) {\n    this._size = v;\n  }\n  constructor() {\n    this._first = null;\n    this._last = null;\n    this._size = 0;\n  }\n  enqueue(message) {\n    const newNode = new MessageNode(message);\n    if (this._size === 0 || !this._last) {\n      this._first = newNode;\n      this._last = newNode;\n    } else {\n      this._last.next = newNode;\n      this._last = newNode;\n    }\n    this._size++;\n    return true;\n  }\n  dequeue() {\n    if (this._size === 0 || !this._first)\n      return null;\n    let prev = this._first;\n    this._first = prev.next;\n    prev.next = null;\n    this._size--;\n    return prev.value;\n  }\n};\n\n// event.ts\nvar Kind = /* @__PURE__ */ ((Kind3) => {\n  Kind3[Kind3[\"Metadata\"] = 0] = \"Metadata\";\n  Kind3[Kind3[\"Text\"] = 1] = \"Text\";\n  Kind3[Kind3[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  Kind3[Kind3[\"Contacts\"] = 3] = \"Contacts\";\n  Kind3[Kind3[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  Kind3[Kind3[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  Kind3[Kind3[\"Repost\"] = 6] = \"Repost\";\n  Kind3[Kind3[\"Reaction\"] = 7] = \"Reaction\";\n  Kind3[Kind3[\"BadgeAward\"] = 8] = \"BadgeAward\";\n  Kind3[Kind3[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  Kind3[Kind3[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  Kind3[Kind3[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  Kind3[Kind3[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  Kind3[Kind3[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  Kind3[Kind3[\"Blank\"] = 255] = \"Blank\";\n  Kind3[Kind3[\"Report\"] = 1984] = \"Report\";\n  Kind3[Kind3[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  Kind3[Kind3[\"Zap\"] = 9735] = \"Zap\";\n  Kind3[Kind3[\"RelayList\"] = 10002] = \"RelayList\";\n  Kind3[Kind3[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  Kind3[Kind3[\"BadgeDefinition\"] = 30008] = \"BadgeDefinition\";\n  Kind3[Kind3[\"ProfileBadge\"] = 30009] = \"ProfileBadge\";\n  Kind3[Kind3[\"Article\"] = 30023] = \"Article\";\n  return Kind3;\n})(Kind || {});\nfunction getBlankEvent(kind = 255 /* Blank */) {\n  return {\n    kind,\n    content: \"\",\n    tags: [],\n    created_at: 0\n  };\n}\nfunction finishEvent(t, privateKey) {\n  let event = t;\n  event.pubkey = getPublicKey(privateKey);\n  event.id = getEventHash(event);\n  event.sig = getSignature(event, privateKey);\n  return event;\n}\nfunction serializeEvent(evt) {\n  if (!validateEvent(evt))\n    throw new Error(\"can't serialize event with wrong or missing properties\");\n  return JSON.stringify([\n    0,\n    evt.pubkey,\n    evt.created_at,\n    evt.kind,\n    evt.tags,\n    evt.content\n  ]);\n}\nfunction getEventHash(event) {\n  let eventHash = sha256(utf8Encoder.encode(serializeEvent(event)));\n  return bytesToHex2(eventHash);\n}\nvar isRecord = (obj) => obj instanceof Object;\nfunction validateEvent(event) {\n  if (!isRecord(event))\n    return false;\n  if (typeof event.kind !== \"number\")\n    return false;\n  if (typeof event.content !== \"string\")\n    return false;\n  if (typeof event.created_at !== \"number\")\n    return false;\n  if (typeof event.pubkey !== \"string\")\n    return false;\n  if (!event.pubkey.match(/^[a-f0-9]{64}$/))\n    return false;\n  if (!Array.isArray(event.tags))\n    return false;\n  for (let i = 0; i < event.tags.length; i++) {\n    let tag = event.tags[i];\n    if (!Array.isArray(tag))\n      return false;\n    for (let j = 0; j < tag.length; j++) {\n      if (typeof tag[j] === \"object\")\n        return false;\n    }\n  }\n  return true;\n}\nfunction verifySignature(event) {\n  try {\n    return schnorr2.verify(event.sig, getEventHash(event), event.pubkey);\n  } catch (err) {\n    return false;\n  }\n}\nfunction signEvent(event, key) {\n  console.warn(\n    \"nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead.\"\n  );\n  return getSignature(event, key);\n}\nfunction getSignature(event, key) {\n  return bytesToHex2(schnorr2.sign(getEventHash(event), key));\n}\n\n// filter.ts\nfunction matchFilter(filter, event) {\n  if (filter.ids && filter.ids.indexOf(event.id) === -1) {\n    if (!filter.ids.some((prefix) => event.id.startsWith(prefix))) {\n      return false;\n    }\n  }\n  if (filter.kinds && filter.kinds.indexOf(event.kind) === -1)\n    return false;\n  if (filter.authors && filter.authors.indexOf(event.pubkey) === -1) {\n    if (!filter.authors.some((prefix) => event.pubkey.startsWith(prefix))) {\n      return false;\n    }\n  }\n  for (let f in filter) {\n    if (f[0] === \"#\") {\n      let tagName = f.slice(1);\n      let values = filter[`#${tagName}`];\n      if (values && !event.tags.find(\n        ([t, v]) => t === f.slice(1) && values.indexOf(v) !== -1\n      ))\n        return false;\n    }\n  }\n  if (filter.since && event.created_at < filter.since)\n    return false;\n  if (filter.until && event.created_at >= filter.until)\n    return false;\n  return true;\n}\nfunction matchFilters(filters, event) {\n  for (let i = 0; i < filters.length; i++) {\n    if (matchFilter(filters[i], event))\n      return true;\n  }\n  return false;\n}\n\n// fakejson.ts\nvar fakejson_exports = {};\n__export(fakejson_exports, {\n  getHex64: () => getHex64,\n  getInt: () => getInt,\n  getSubscriptionId: () => getSubscriptionId,\n  matchEventId: () => matchEventId,\n  matchEventKind: () => matchEventKind,\n  matchEventPubkey: () => matchEventPubkey\n});\nfunction getHex64(json, field) {\n  let len = field.length + 3;\n  let idx = json.indexOf(`\"${field}\":`) + len;\n  let s = json.slice(idx).indexOf(`\"`) + idx + 1;\n  return json.slice(s, s + 64);\n}\nfunction getInt(json, field) {\n  let len = field.length;\n  let idx = json.indexOf(`\"${field}\":`) + len + 3;\n  let sliced = json.slice(idx);\n  let end = Math.min(sliced.indexOf(\",\"), sliced.indexOf(\"}\"));\n  return parseInt(sliced.slice(0, end), 10);\n}\nfunction getSubscriptionId(json) {\n  let idx = json.slice(0, 22).indexOf(`\"EVENT\"`);\n  if (idx === -1)\n    return null;\n  let pstart = json.slice(idx + 7 + 1).indexOf(`\"`);\n  if (pstart === -1)\n    return null;\n  let start = idx + 7 + 1 + pstart;\n  let pend = json.slice(start + 1, 80).indexOf(`\"`);\n  if (pend === -1)\n    return null;\n  let end = start + 1 + pend;\n  return json.slice(start + 1, end);\n}\nfunction matchEventId(json, id) {\n  return id === getHex64(json, \"id\");\n}\nfunction matchEventPubkey(json, pubkey) {\n  return pubkey === getHex64(json, \"pubkey\");\n}\nfunction matchEventKind(json, kind) {\n  return kind === getInt(json, \"kind\");\n}\n\n// relay.ts\nvar newListeners = () => ({\n  connect: [],\n  disconnect: [],\n  error: [],\n  notice: [],\n  auth: []\n});\nfunction relayInit(url, options = {}) {\n  let { listTimeout = 3e3, getTimeout = 3e3, countTimeout = 3e3 } = options;\n  var ws;\n  var openSubs = {};\n  var listeners = newListeners();\n  var subListeners = {};\n  var pubListeners = {};\n  var connectionPromise;\n  async function connectRelay() {\n    if (connectionPromise)\n      return connectionPromise;\n    connectionPromise = new Promise((resolve, reject) => {\n      try {\n        ws = new WebSocket(url);\n      } catch (err) {\n        reject(err);\n      }\n      ws.onopen = () => {\n        listeners.connect.forEach((cb) => cb());\n        resolve();\n      };\n      ws.onerror = () => {\n        connectionPromise = void 0;\n        listeners.error.forEach((cb) => cb());\n        reject();\n      };\n      ws.onclose = async () => {\n        connectionPromise = void 0;\n        listeners.disconnect.forEach((cb) => cb());\n      };\n      let incomingMessageQueue = new MessageQueue();\n      let handleNextInterval;\n      ws.onmessage = (e) => {\n        incomingMessageQueue.enqueue(e.data);\n        if (!handleNextInterval) {\n          handleNextInterval = setInterval(handleNext, 0);\n        }\n      };\n      function handleNext() {\n        if (incomingMessageQueue.size === 0) {\n          clearInterval(handleNextInterval);\n          handleNextInterval = null;\n          return;\n        }\n        var json = incomingMessageQueue.dequeue();\n        if (!json)\n          return;\n        let subid = getSubscriptionId(json);\n        if (subid) {\n          let so = openSubs[subid];\n          if (so && so.alreadyHaveEvent && so.alreadyHaveEvent(getHex64(json, \"id\"), url)) {\n            return;\n          }\n        }\n        try {\n          let data = JSON.parse(json);\n          switch (data[0]) {\n            case \"EVENT\": {\n              let id2 = data[1];\n              let event = data[2];\n              if (validateEvent(event) && openSubs[id2] && (openSubs[id2].skipVerification || verifySignature(event)) && matchFilters(openSubs[id2].filters, event)) {\n                openSubs[id2];\n                (subListeners[id2]?.event || []).forEach((cb) => cb(event));\n              }\n              return;\n            }\n            case \"COUNT\":\n              let id = data[1];\n              let payload = data[2];\n              if (openSubs[id]) {\n                ;\n                (subListeners[id]?.count || []).forEach((cb) => cb(payload));\n              }\n              return;\n            case \"EOSE\": {\n              let id2 = data[1];\n              if (id2 in subListeners) {\n                subListeners[id2].eose.forEach((cb) => cb());\n                subListeners[id2].eose = [];\n              }\n              return;\n            }\n            case \"OK\": {\n              let id2 = data[1];\n              let ok = data[2];\n              let reason = data[3] || \"\";\n              if (id2 in pubListeners) {\n                if (ok)\n                  pubListeners[id2].ok.forEach((cb) => cb());\n                else\n                  pubListeners[id2].failed.forEach((cb) => cb(reason));\n                pubListeners[id2].ok = [];\n                pubListeners[id2].failed = [];\n              }\n              return;\n            }\n            case \"NOTICE\":\n              let notice = data[1];\n              listeners.notice.forEach((cb) => cb(notice));\n              return;\n            case \"AUTH\": {\n              let challenge = data[1];\n              listeners.auth?.forEach((cb) => cb(challenge));\n              return;\n            }\n          }\n        } catch (err) {\n          return;\n        }\n      }\n    });\n    return connectionPromise;\n  }\n  function connected() {\n    return ws?.readyState === 1;\n  }\n  async function connect() {\n    if (connected())\n      return;\n    await connectRelay();\n  }\n  async function trySend(params) {\n    let msg = JSON.stringify(params);\n    if (!connected()) {\n      await new Promise((resolve) => setTimeout(resolve, 1e3));\n      if (!connected()) {\n        return;\n      }\n    }\n    try {\n      ws.send(msg);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  const sub = (filters, {\n    verb = \"REQ\",\n    skipVerification = false,\n    alreadyHaveEvent = null,\n    id = Math.random().toString().slice(2)\n  } = {}) => {\n    let subid = id;\n    openSubs[subid] = {\n      id: subid,\n      filters,\n      skipVerification,\n      alreadyHaveEvent\n    };\n    trySend([verb, subid, ...filters]);\n    return {\n      sub: (newFilters, newOpts = {}) => sub(newFilters || filters, {\n        skipVerification: newOpts.skipVerification || skipVerification,\n        alreadyHaveEvent: newOpts.alreadyHaveEvent || alreadyHaveEvent,\n        id: subid\n      }),\n      unsub: () => {\n        delete openSubs[subid];\n        delete subListeners[subid];\n        trySend([\"CLOSE\", subid]);\n      },\n      on: (type, cb) => {\n        subListeners[subid] = subListeners[subid] || {\n          event: [],\n          count: [],\n          eose: []\n        };\n        subListeners[subid][type].push(cb);\n      },\n      off: (type, cb) => {\n        let listeners2 = subListeners[subid];\n        let idx = listeners2[type].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type].splice(idx, 1);\n      }\n    };\n  };\n  function _publishEvent(event, type) {\n    if (!event.id)\n      throw new Error(`event ${event} has no id`);\n    let id = event.id;\n    trySend([type, event]);\n    return {\n      on: (type2, cb) => {\n        pubListeners[id] = pubListeners[id] || {\n          ok: [],\n          failed: []\n        };\n        pubListeners[id][type2].push(cb);\n      },\n      off: (type2, cb) => {\n        let listeners2 = pubListeners[id];\n        if (!listeners2)\n          return;\n        let idx = listeners2[type2].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type2].splice(idx, 1);\n      }\n    };\n  }\n  return {\n    url,\n    sub,\n    on: (type, cb) => {\n      listeners[type].push(cb);\n      if (type === \"connect\" && ws?.readyState === 1) {\n        ;\n        cb();\n      }\n    },\n    off: (type, cb) => {\n      let index = listeners[type].indexOf(cb);\n      if (index !== -1)\n        listeners[type].splice(index, 1);\n    },\n    list: (filters, opts) => new Promise((resolve) => {\n      let s = sub(filters, opts);\n      let events = [];\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(events);\n      }, listTimeout);\n      s.on(\"eose\", () => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(events);\n      });\n      s.on(\"event\", (event) => {\n        events.push(event);\n      });\n    }),\n    get: (filter, opts) => new Promise((resolve) => {\n      let s = sub([filter], opts);\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, getTimeout);\n      s.on(\"event\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    count: (filters) => new Promise((resolve) => {\n      let s = sub(filters, { ...sub, verb: \"COUNT\" });\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, countTimeout);\n      s.on(\"count\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    publish(event) {\n      return _publishEvent(event, \"EVENT\");\n    },\n    auth(event) {\n      return _publishEvent(event, \"AUTH\");\n    },\n    connect,\n    close() {\n      listeners = newListeners();\n      subListeners = {};\n      pubListeners = {};\n      if (ws.readyState === WebSocket.OPEN) {\n        ws?.close();\n      }\n    },\n    get status() {\n      return ws?.readyState ?? 3;\n    }\n  };\n}\n\n// pool.ts\nvar SimplePool = class {\n  _conn;\n  _seenOn = {};\n  eoseSubTimeout;\n  getTimeout;\n  constructor(options = {}) {\n    this._conn = {};\n    this.eoseSubTimeout = options.eoseSubTimeout || 3400;\n    this.getTimeout = options.getTimeout || 3400;\n  }\n  close(relays) {\n    relays.forEach((url) => {\n      let relay = this._conn[normalizeURL(url)];\n      if (relay)\n        relay.close();\n    });\n  }\n  async ensureRelay(url) {\n    const nm = normalizeURL(url);\n    if (!this._conn[nm]) {\n      this._conn[nm] = relayInit(nm, {\n        getTimeout: this.getTimeout * 0.9,\n        listTimeout: this.getTimeout * 0.9\n      });\n    }\n    const relay = this._conn[nm];\n    await relay.connect();\n    return relay;\n  }\n  sub(relays, filters, opts) {\n    let _knownIds = /* @__PURE__ */ new Set();\n    let modifiedOpts = { ...opts || {} };\n    modifiedOpts.alreadyHaveEvent = (id, url) => {\n      if (opts?.alreadyHaveEvent?.(id, url)) {\n        return true;\n      }\n      let set = this._seenOn[id] || /* @__PURE__ */ new Set();\n      set.add(url);\n      this._seenOn[id] = set;\n      return _knownIds.has(id);\n    };\n    let subs = [];\n    let eventListeners = /* @__PURE__ */ new Set();\n    let eoseListeners = /* @__PURE__ */ new Set();\n    let eosesMissing = relays.length;\n    let eoseSent = false;\n    let eoseTimeout = setTimeout(() => {\n      eoseSent = true;\n      for (let cb of eoseListeners.values())\n        cb();\n    }, this.eoseSubTimeout);\n    relays.forEach(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n      } catch (err) {\n        handleEose();\n        return;\n      }\n      if (!r)\n        return;\n      let s = r.sub(filters, modifiedOpts);\n      s.on(\"event\", (event) => {\n        _knownIds.add(event.id);\n        for (let cb of eventListeners.values())\n          cb(event);\n      });\n      s.on(\"eose\", () => {\n        if (eoseSent)\n          return;\n        handleEose();\n      });\n      subs.push(s);\n      function handleEose() {\n        eosesMissing--;\n        if (eosesMissing === 0) {\n          clearTimeout(eoseTimeout);\n          for (let cb of eoseListeners.values())\n            cb();\n        }\n      }\n    });\n    let greaterSub = {\n      sub(filters2, opts2) {\n        subs.forEach((sub) => sub.sub(filters2, opts2));\n        return greaterSub;\n      },\n      unsub() {\n        subs.forEach((sub) => sub.unsub());\n      },\n      on(type, cb) {\n        if (type === \"event\") {\n          eventListeners.add(cb);\n        } else if (type === \"eose\") {\n          eoseListeners.add(cb);\n        }\n      },\n      off(type, cb) {\n        if (type === \"event\") {\n          eventListeners.delete(cb);\n        } else if (type === \"eose\")\n          eoseListeners.delete(cb);\n      }\n    };\n    return greaterSub;\n  }\n  get(relays, filter, opts) {\n    return new Promise((resolve) => {\n      let sub = this.sub(relays, [filter], opts);\n      let timeout = setTimeout(() => {\n        sub.unsub();\n        resolve(null);\n      }, this.getTimeout);\n      sub.on(\"event\", (event) => {\n        resolve(event);\n        clearTimeout(timeout);\n        sub.unsub();\n      });\n    });\n  }\n  list(relays, filters, opts) {\n    return new Promise((resolve) => {\n      let events = [];\n      let sub = this.sub(relays, filters, opts);\n      sub.on(\"event\", (event) => {\n        events.push(event);\n      });\n      sub.on(\"eose\", () => {\n        sub.unsub();\n        resolve(events);\n      });\n    });\n  }\n  publish(relays, event) {\n    const pubPromises = relays.map(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n        return r.publish(event);\n      } catch (_) {\n        return { on() {\n        }, off() {\n        } };\n      }\n    });\n    const callbackMap = /* @__PURE__ */ new Map();\n    return {\n      on(type, cb) {\n        relays.forEach(async (relay, i) => {\n          let pub = await pubPromises[i];\n          let callback = () => cb(relay);\n          callbackMap.set(cb, callback);\n          pub.on(type, callback);\n        });\n      },\n      off(type, cb) {\n        relays.forEach(async (_, i) => {\n          let callback = callbackMap.get(cb);\n          if (callback) {\n            let pub = await pubPromises[i];\n            pub.off(type, callback);\n          }\n        });\n      }\n    };\n  }\n  seenOn(id) {\n    return Array.from(this._seenOn[id]?.values?.() || []);\n  }\n};\n\n// nip19.ts\nvar nip19_exports = {};\n__export(nip19_exports, {\n  BECH32_REGEX: () => BECH32_REGEX,\n  decode: () => decode,\n  naddrEncode: () => naddrEncode,\n  neventEncode: () => neventEncode,\n  noteEncode: () => noteEncode,\n  nprofileEncode: () => nprofileEncode,\n  npubEncode: () => npubEncode,\n  nrelayEncode: () => nrelayEncode,\n  nsecEncode: () => nsecEncode\n});\nimport { bytesToHex as bytesToHex3, concatBytes, hexToBytes } from \"@noble/hashes/utils\";\nimport { bech32 } from \"@scure/base\";\nvar Bech32MaxSize = 5e3;\nvar BECH32_REGEX = /[\\x21-\\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;\nfunction decode(nip19) {\n  let { prefix, words } = bech32.decode(nip19, Bech32MaxSize);\n  let data = new Uint8Array(bech32.fromWords(words));\n  switch (prefix) {\n    case \"nprofile\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nprofile\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      return {\n        type: \"nprofile\",\n        data: {\n          pubkey: bytesToHex3(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nevent\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nevent\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      if (tlv[2] && tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      return {\n        type: \"nevent\",\n        data: {\n          id: bytesToHex3(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : [],\n          author: tlv[2]?.[0] ? bytesToHex3(tlv[2][0]) : void 0\n        }\n      };\n    }\n    case \"naddr\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for naddr\");\n      if (!tlv[2]?.[0])\n        throw new Error(\"missing TLV 2 for naddr\");\n      if (tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      if (!tlv[3]?.[0])\n        throw new Error(\"missing TLV 3 for naddr\");\n      if (tlv[3][0].length !== 4)\n        throw new Error(\"TLV 3 should be 4 bytes\");\n      return {\n        type: \"naddr\",\n        data: {\n          identifier: utf8Decoder.decode(tlv[0][0]),\n          pubkey: bytesToHex3(tlv[2][0]),\n          kind: parseInt(bytesToHex3(tlv[3][0]), 16),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nrelay\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nrelay\");\n      return {\n        type: \"nrelay\",\n        data: utf8Decoder.decode(tlv[0][0])\n      };\n    }\n    case \"nsec\":\n    case \"npub\":\n    case \"note\":\n      return { type: prefix, data: bytesToHex3(data) };\n    default:\n      throw new Error(`unknown prefix ${prefix}`);\n  }\n}\nfunction parseTLV(data) {\n  let result = {};\n  let rest = data;\n  while (rest.length > 0) {\n    let t = rest[0];\n    let l = rest[1];\n    if (!l)\n      throw new Error(`malformed TLV ${t}`);\n    let v = rest.slice(2, 2 + l);\n    rest = rest.slice(2 + l);\n    if (v.length < l)\n      throw new Error(`not enough data to read on TLV ${t}`);\n    result[t] = result[t] || [];\n    result[t].push(v);\n  }\n  return result;\n}\nfunction nsecEncode(hex) {\n  return encodeBytes(\"nsec\", hex);\n}\nfunction npubEncode(hex) {\n  return encodeBytes(\"npub\", hex);\n}\nfunction noteEncode(hex) {\n  return encodeBytes(\"note\", hex);\n}\nfunction encodeBytes(prefix, hex) {\n  let data = hexToBytes(hex);\n  let words = bech32.toWords(data);\n  return bech32.encode(prefix, words, Bech32MaxSize);\n}\nfunction nprofileEncode(profile) {\n  let data = encodeTLV({\n    0: [hexToBytes(profile.pubkey)],\n    1: (profile.relays || []).map((url) => utf8Encoder.encode(url))\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nprofile\", words, Bech32MaxSize);\n}\nfunction neventEncode(event) {\n  let data = encodeTLV({\n    0: [hexToBytes(event.id)],\n    1: (event.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: event.author ? [hexToBytes(event.author)] : []\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nevent\", words, Bech32MaxSize);\n}\nfunction naddrEncode(addr) {\n  let kind = new ArrayBuffer(4);\n  new DataView(kind).setUint32(0, addr.kind, false);\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(addr.identifier)],\n    1: (addr.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: [hexToBytes(addr.pubkey)],\n    3: [new Uint8Array(kind)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"naddr\", words, Bech32MaxSize);\n}\nfunction nrelayEncode(url) {\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(url)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nrelay\", words, Bech32MaxSize);\n}\nfunction encodeTLV(tlv) {\n  let entries = [];\n  Object.entries(tlv).forEach(([t, vs]) => {\n    vs.forEach((v) => {\n      let entry = new Uint8Array(v.length + 2);\n      entry.set([parseInt(t)], 0);\n      entry.set([v.length], 1);\n      entry.set(v, 2);\n      entries.push(entry);\n    });\n  });\n  return concatBytes(...entries);\n}\n\n// references.ts\nvar mentionRegex = /\\bnostr:((note|npub|naddr|nevent|nprofile)1\\w+)\\b|#\\[(\\d+)\\]/g;\nfunction parseReferences(evt) {\n  let references = [];\n  for (let ref of evt.content.matchAll(mentionRegex)) {\n    if (ref[2]) {\n      try {\n        let { type, data } = decode(ref[1]);\n        switch (type) {\n          case \"npub\": {\n            references.push({\n              text: ref[0],\n              profile: { pubkey: data, relays: [] }\n            });\n            break;\n          }\n          case \"nprofile\": {\n            references.push({\n              text: ref[0],\n              profile: data\n            });\n            break;\n          }\n          case \"note\": {\n            references.push({\n              text: ref[0],\n              event: { id: data, relays: [] }\n            });\n            break;\n          }\n          case \"nevent\": {\n            references.push({\n              text: ref[0],\n              event: data\n            });\n            break;\n          }\n          case \"naddr\": {\n            references.push({\n              text: ref[0],\n              address: data\n            });\n            break;\n          }\n        }\n      } catch (err) {\n      }\n    } else if (ref[3]) {\n      let idx = parseInt(ref[3], 10);\n      let tag = evt.tags[idx];\n      if (!tag)\n        continue;\n      switch (tag[0]) {\n        case \"p\": {\n          references.push({\n            text: ref[0],\n            profile: { pubkey: tag[1], relays: tag[2] ? [tag[2]] : [] }\n          });\n          break;\n        }\n        case \"e\": {\n          references.push({\n            text: ref[0],\n            event: { id: tag[1], relays: tag[2] ? [tag[2]] : [] }\n          });\n          break;\n        }\n        case \"a\": {\n          try {\n            let [kind, pubkey, identifier] = tag[1].split(\":\");\n            references.push({\n              text: ref[0],\n              address: {\n                identifier,\n                pubkey,\n                kind: parseInt(kind, 10),\n                relays: tag[2] ? [tag[2]] : []\n              }\n            });\n          } catch (err) {\n          }\n          break;\n        }\n      }\n    }\n  }\n  return references;\n}\n\n// nip04.ts\nvar nip04_exports = {};\n__export(nip04_exports, {\n  decrypt: () => decrypt,\n  encrypt: () => encrypt\n});\nimport { randomBytes } from \"@noble/hashes/utils\";\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\nimport { base64 } from \"@scure/base\";\nif (typeof crypto !== \"undefined\" && !crypto.subtle && crypto.webcrypto) {\n  crypto.subtle = crypto.webcrypto.subtle;\n}\nasync function encrypt(privkey, pubkey, text) {\n  const key = secp256k1.getSharedSecret(privkey, \"02\" + pubkey);\n  const normalizedKey = getNormalizedX(key);\n  let iv = Uint8Array.from(randomBytes(16));\n  let plaintext = utf8Encoder.encode(text);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"encrypt\"]\n  );\n  let ciphertext = await crypto.subtle.encrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    plaintext\n  );\n  let ctb64 = base64.encode(new Uint8Array(ciphertext));\n  let ivb64 = base64.encode(new Uint8Array(iv.buffer));\n  return `${ctb64}?iv=${ivb64}`;\n}\nasync function decrypt(privkey, pubkey, data) {\n  let [ctb64, ivb64] = data.split(\"?iv=\");\n  let key = secp256k1.getSharedSecret(privkey, \"02\" + pubkey);\n  let normalizedKey = getNormalizedX(key);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"decrypt\"]\n  );\n  let ciphertext = base64.decode(ctb64);\n  let iv = base64.decode(ivb64);\n  let plaintext = await crypto.subtle.decrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    ciphertext\n  );\n  let text = utf8Decoder.decode(plaintext);\n  return text;\n}\nfunction getNormalizedX(key) {\n  return key.slice(1, 33);\n}\n\n// nip05.ts\nvar nip05_exports = {};\n__export(nip05_exports, {\n  NIP05_REGEX: () => NIP05_REGEX,\n  queryProfile: () => queryProfile,\n  searchDomain: () => searchDomain,\n  useFetchImplementation: () => useFetchImplementation\n});\nvar NIP05_REGEX = /^(?:([\\w.+-]+)@)?([\\w.-]+)$/;\nvar _fetch;\ntry {\n  _fetch = fetch;\n} catch {\n}\nfunction useFetchImplementation(fetchImplementation) {\n  _fetch = fetchImplementation;\n}\nasync function searchDomain(domain, query = \"\") {\n  try {\n    let res = await (await _fetch(`https://${domain}/.well-known/nostr.json?name=${query}`)).json();\n    return res.names;\n  } catch (_) {\n    return {};\n  }\n}\nasync function queryProfile(fullname) {\n  const match = fullname.match(NIP05_REGEX);\n  if (!match)\n    return null;\n  const [_, name = \"_\", domain] = match;\n  try {\n    const res = await _fetch(`https://${domain}/.well-known/nostr.json?name=${name}`);\n    const { names, relays } = parseNIP05Result(await res.json());\n    const pubkey = names[name];\n    return pubkey ? { pubkey, relays: relays?.[pubkey] } : null;\n  } catch (_e) {\n    return null;\n  }\n}\nfunction parseNIP05Result(json) {\n  const result = {\n    names: {}\n  };\n  for (const [name, pubkey] of Object.entries(json.names)) {\n    if (typeof name === \"string\" && typeof pubkey === \"string\") {\n      result.names[name] = pubkey;\n    }\n  }\n  if (json.relays) {\n    result.relays = {};\n    for (const [pubkey, relays] of Object.entries(json.relays)) {\n      if (typeof pubkey === \"string\" && Array.isArray(relays)) {\n        result.relays[pubkey] = relays.filter((relay) => typeof relay === \"string\");\n      }\n    }\n  }\n  return result;\n}\n\n// nip06.ts\nvar nip06_exports = {};\n__export(nip06_exports, {\n  generateSeedWords: () => generateSeedWords,\n  privateKeyFromSeedWords: () => privateKeyFromSeedWords,\n  validateWords: () => validateWords\n});\nimport { bytesToHex as bytesToHex4 } from \"@noble/hashes/utils\";\nimport { wordlist } from \"@scure/bip39/wordlists/english.js\";\nimport {\n  generateMnemonic,\n  mnemonicToSeedSync,\n  validateMnemonic\n} from \"@scure/bip39\";\nimport { HDKey } from \"@scure/bip32\";\nfunction privateKeyFromSeedWords(mnemonic, passphrase) {\n  let root = HDKey.fromMasterSeed(mnemonicToSeedSync(mnemonic, passphrase));\n  let privateKey = root.derive(`m/44'/1237'/0'/0/0`).privateKey;\n  if (!privateKey)\n    throw new Error(\"could not derive private key\");\n  return bytesToHex4(privateKey);\n}\nfunction generateSeedWords() {\n  return generateMnemonic(wordlist);\n}\nfunction validateWords(words) {\n  return validateMnemonic(words, wordlist);\n}\n\n// nip10.ts\nvar nip10_exports = {};\n__export(nip10_exports, {\n  parse: () => parse\n});\nfunction parse(event) {\n  const result = {\n    reply: void 0,\n    root: void 0,\n    mentions: [],\n    profiles: []\n  };\n  const eTags = [];\n  for (const tag of event.tags) {\n    if (tag[0] === \"e\" && tag[1]) {\n      eTags.push(tag);\n    }\n    if (tag[0] === \"p\" && tag[1]) {\n      result.profiles.push({\n        pubkey: tag[1],\n        relays: tag[2] ? [tag[2]] : []\n      });\n    }\n  }\n  for (let eTagIndex = 0; eTagIndex < eTags.length; eTagIndex++) {\n    const eTag = eTags[eTagIndex];\n    const [_, eTagEventId, eTagRelayUrl, eTagMarker] = eTag;\n    const eventPointer = {\n      id: eTagEventId,\n      relays: eTagRelayUrl ? [eTagRelayUrl] : []\n    };\n    const isFirstETag = eTagIndex === 0;\n    const isLastETag = eTagIndex === eTags.length - 1;\n    if (eTagMarker === \"root\") {\n      result.root = eventPointer;\n      continue;\n    }\n    if (eTagMarker === \"reply\") {\n      result.reply = eventPointer;\n      continue;\n    }\n    if (eTagMarker === \"mention\") {\n      result.mentions.push(eventPointer);\n      continue;\n    }\n    if (isFirstETag) {\n      result.root = eventPointer;\n      continue;\n    }\n    if (isLastETag) {\n      result.reply = eventPointer;\n      continue;\n    }\n    result.mentions.push(eventPointer);\n  }\n  return result;\n}\n\n// nip13.ts\nvar nip13_exports = {};\n__export(nip13_exports, {\n  getPow: () => getPow\n});\nimport { hexToBytes as hexToBytes2 } from \"@noble/hashes/utils\";\nfunction getPow(id) {\n  return getLeadingZeroBits(hexToBytes2(id));\n}\nfunction getLeadingZeroBits(hash) {\n  let total, i, bits;\n  for (i = 0, total = 0; i < hash.length; i++) {\n    bits = msb(hash[i]);\n    total += bits;\n    if (bits !== 8) {\n      break;\n    }\n  }\n  return total;\n}\nfunction msb(b) {\n  let n = 0;\n  if (b === 0) {\n    return 8;\n  }\n  while (b >>= 1) {\n    n++;\n  }\n  return 7 - n;\n}\n\n// nip18.ts\nvar nip18_exports = {};\n__export(nip18_exports, {\n  finishRepostEvent: () => finishRepostEvent,\n  getRepostedEvent: () => getRepostedEvent,\n  getRepostedEventPointer: () => getRepostedEventPointer\n});\nfunction finishRepostEvent(t, reposted, relayUrl, privateKey) {\n  return finishEvent({\n    kind: 6 /* Repost */,\n    tags: [\n      ...t.tags ?? [],\n      [\"e\", reposted.id, relayUrl],\n      [\"p\", reposted.pubkey]\n    ],\n    content: t.content === \"\" ? \"\" : JSON.stringify(reposted),\n    created_at: t.created_at\n  }, privateKey);\n}\nfunction getRepostedEventPointer(event) {\n  if (event.kind !== 6 /* Repost */) {\n    return void 0;\n  }\n  let lastETag;\n  let lastPTag;\n  for (let i = event.tags.length - 1; i >= 0 && (lastETag === void 0 || lastPTag === void 0); i--) {\n    const tag = event.tags[i];\n    if (tag.length >= 2) {\n      if (tag[0] === \"e\" && lastETag === void 0) {\n        lastETag = tag;\n      } else if (tag[0] === \"p\" && lastPTag === void 0) {\n        lastPTag = tag;\n      }\n    }\n  }\n  if (lastETag === void 0) {\n    return void 0;\n  }\n  return {\n    id: lastETag[1],\n    relays: [lastETag[2], lastPTag?.[2]].filter((x) => typeof x === \"string\"),\n    author: lastPTag?.[1]\n  };\n}\nfunction getRepostedEvent(event, { skipVerification } = {}) {\n  const pointer = getRepostedEventPointer(event);\n  if (pointer === void 0 || event.content === \"\") {\n    return void 0;\n  }\n  let repostedEvent;\n  try {\n    repostedEvent = JSON.parse(event.content);\n  } catch (error) {\n    return void 0;\n  }\n  if (repostedEvent.id !== pointer.id) {\n    return void 0;\n  }\n  if (!skipVerification && !verifySignature(repostedEvent)) {\n    return void 0;\n  }\n  return repostedEvent;\n}\n\n// nip21.ts\nvar nip21_exports = {};\n__export(nip21_exports, {\n  NOSTR_URI_REGEX: () => NOSTR_URI_REGEX,\n  parse: () => parse2,\n  test: () => test\n});\nvar NOSTR_URI_REGEX = new RegExp(`nostr:(${BECH32_REGEX.source})`);\nfunction test(value) {\n  return typeof value === \"string\" && new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(value);\n}\nfunction parse2(uri) {\n  const match = uri.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));\n  if (!match)\n    throw new Error(`Invalid Nostr URI: ${uri}`);\n  return {\n    uri: match[0],\n    value: match[1],\n    decoded: decode(match[1])\n  };\n}\n\n// nip25.ts\nvar nip25_exports = {};\n__export(nip25_exports, {\n  finishReactionEvent: () => finishReactionEvent,\n  getReactedEventPointer: () => getReactedEventPointer\n});\nfunction finishReactionEvent(t, reacted, privateKey) {\n  const inheritedTags = reacted.tags.filter(\n    (tag) => tag.length >= 2 && (tag[0] === \"e\" || tag[0] === \"p\")\n  );\n  return finishEvent({\n    ...t,\n    kind: 7 /* Reaction */,\n    tags: [\n      ...t.tags ?? [],\n      ...inheritedTags,\n      [\"e\", reacted.id],\n      [\"p\", reacted.pubkey]\n    ],\n    content: t.content ?? \"+\"\n  }, privateKey);\n}\nfunction getReactedEventPointer(event) {\n  if (event.kind !== 7 /* Reaction */) {\n    return void 0;\n  }\n  let lastETag;\n  let lastPTag;\n  for (let i = event.tags.length - 1; i >= 0 && (lastETag === void 0 || lastPTag === void 0); i--) {\n    const tag = event.tags[i];\n    if (tag.length >= 2) {\n      if (tag[0] === \"e\" && lastETag === void 0) {\n        lastETag = tag;\n      } else if (tag[0] === \"p\" && lastPTag === void 0) {\n        lastPTag = tag;\n      }\n    }\n  }\n  if (lastETag === void 0 || lastPTag === void 0) {\n    return void 0;\n  }\n  return {\n    id: lastETag[1],\n    relays: [lastETag[2], lastPTag[2]].filter((x) => x !== void 0),\n    author: lastPTag[1]\n  };\n}\n\n// nip26.ts\nvar nip26_exports = {};\n__export(nip26_exports, {\n  createDelegation: () => createDelegation,\n  getDelegator: () => getDelegator\n});\nimport { schnorr as schnorr3 } from \"@noble/curves/secp256k1\";\nimport { bytesToHex as bytesToHex5 } from \"@noble/hashes/utils\";\nimport { sha256 as sha2562 } from \"@noble/hashes/sha256\";\nfunction createDelegation(privateKey, parameters) {\n  let conditions = [];\n  if ((parameters.kind || -1) >= 0)\n    conditions.push(`kind=${parameters.kind}`);\n  if (parameters.until)\n    conditions.push(`created_at<${parameters.until}`);\n  if (parameters.since)\n    conditions.push(`created_at>${parameters.since}`);\n  let cond = conditions.join(\"&\");\n  if (cond === \"\")\n    throw new Error(\"refusing to create a delegation without any conditions\");\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${parameters.pubkey}:${cond}`)\n  );\n  let sig = bytesToHex5(\n    schnorr3.sign(sighash, privateKey)\n  );\n  return {\n    from: getPublicKey(privateKey),\n    to: parameters.pubkey,\n    cond,\n    sig\n  };\n}\nfunction getDelegator(event) {\n  let tag = event.tags.find((tag2) => tag2[0] === \"delegation\" && tag2.length >= 4);\n  if (!tag)\n    return null;\n  let pubkey = tag[1];\n  let cond = tag[2];\n  let sig = tag[3];\n  let conditions = cond.split(\"&\");\n  for (let i = 0; i < conditions.length; i++) {\n    let [key, operator, value] = conditions[i].split(/\\b/);\n    if (key === \"kind\" && operator === \"=\" && event.kind === parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \"<\" && event.created_at < parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \">\" && event.created_at > parseInt(value))\n      continue;\n    else\n      return null;\n  }\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${event.pubkey}:${cond}`)\n  );\n  if (!schnorr3.verify(sig, sighash, pubkey))\n    return null;\n  return pubkey;\n}\n\n// nip27.ts\nvar nip27_exports = {};\n__export(nip27_exports, {\n  matchAll: () => matchAll,\n  regex: () => regex,\n  replaceAll: () => replaceAll\n});\nvar regex = () => new RegExp(`\\\\b${NOSTR_URI_REGEX.source}\\\\b`, \"g\");\nfunction* matchAll(content) {\n  const matches = content.matchAll(regex());\n  for (const match of matches) {\n    const [uri, value] = match;\n    yield {\n      uri,\n      value,\n      decoded: decode(value),\n      start: match.index,\n      end: match.index + uri.length\n    };\n  }\n}\nfunction replaceAll(content, replacer) {\n  return content.replaceAll(regex(), (uri, value) => {\n    return replacer({\n      uri,\n      value,\n      decoded: decode(value)\n    });\n  });\n}\n\n// nip39.ts\nvar nip39_exports = {};\n__export(nip39_exports, {\n  useFetchImplementation: () => useFetchImplementation2,\n  validateGithub: () => validateGithub\n});\nvar _fetch2;\ntry {\n  _fetch2 = fetch;\n} catch {\n}\nfunction useFetchImplementation2(fetchImplementation) {\n  _fetch2 = fetchImplementation;\n}\nasync function validateGithub(pubkey, username, proof) {\n  try {\n    let res = await (await _fetch2(`https://gist.github.com/${username}/${proof}/raw`)).text();\n    return res === `Verifying that I control the following Nostr public key: ${pubkey}`;\n  } catch (_) {\n    return false;\n  }\n}\n\n// nip42.ts\nvar nip42_exports = {};\n__export(nip42_exports, {\n  authenticate: () => authenticate\n});\nvar authenticate = async ({\n  challenge,\n  relay,\n  sign\n}) => {\n  const e = {\n    kind: 22242 /* ClientAuth */,\n    created_at: Math.floor(Date.now() / 1e3),\n    tags: [\n      [\"relay\", relay.url],\n      [\"challenge\", challenge]\n    ],\n    content: \"\"\n  };\n  const pub = relay.auth(await sign(e));\n  return new Promise((resolve, reject) => {\n    pub.on(\"ok\", function ok() {\n      pub.off(\"ok\", ok);\n      resolve();\n    });\n    pub.on(\"failed\", function fail(reason) {\n      pub.off(\"failed\", fail);\n      reject(reason);\n    });\n  });\n};\n\n// nip57.ts\nvar nip57_exports = {};\n__export(nip57_exports, {\n  getZapEndpoint: () => getZapEndpoint,\n  makeZapReceipt: () => makeZapReceipt,\n  makeZapRequest: () => makeZapRequest,\n  useFetchImplementation: () => useFetchImplementation3,\n  validateZapRequest: () => validateZapRequest\n});\nimport { bech32 as bech322 } from \"@scure/base\";\nvar _fetch3;\ntry {\n  _fetch3 = fetch;\n} catch {\n}\nfunction useFetchImplementation3(fetchImplementation) {\n  _fetch3 = fetchImplementation;\n}\nasync function getZapEndpoint(metadata) {\n  try {\n    let lnurl = \"\";\n    let { lud06, lud16 } = JSON.parse(metadata.content);\n    if (lud06) {\n      let { words } = bech322.decode(lud06, 1e3);\n      let data = bech322.fromWords(words);\n      lnurl = utf8Decoder.decode(data);\n    } else if (lud16) {\n      let [name, domain] = lud16.split(\"@\");\n      lnurl = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else {\n      return null;\n    }\n    let res = await _fetch3(lnurl);\n    let body = await res.json();\n    if (body.allowsNostr && body.nostrPubkey) {\n      return body.callback;\n    }\n  } catch (err) {\n  }\n  return null;\n}\nfunction makeZapRequest({\n  profile,\n  event,\n  amount,\n  relays,\n  comment = \"\"\n}) {\n  if (!amount)\n    throw new Error(\"amount not given\");\n  if (!profile)\n    throw new Error(\"profile not given\");\n  let zr = {\n    kind: 9734,\n    created_at: Math.round(Date.now() / 1e3),\n    content: comment,\n    tags: [\n      [\"p\", profile],\n      [\"amount\", amount.toString()],\n      [\"relays\", ...relays]\n    ]\n  };\n  if (event) {\n    zr.tags.push([\"e\", event]);\n  }\n  return zr;\n}\nfunction validateZapRequest(zapRequestString) {\n  let zapRequest;\n  try {\n    zapRequest = JSON.parse(zapRequestString);\n  } catch (err) {\n    return \"Invalid zap request JSON.\";\n  }\n  if (!validateEvent(zapRequest))\n    return \"Zap request is not a valid Nostr event.\";\n  if (!verifySignature(zapRequest))\n    return \"Invalid signature on zap request.\";\n  let p = zapRequest.tags.find(([t, v]) => t === \"p\" && v);\n  if (!p)\n    return \"Zap request doesn't have a 'p' tag.\";\n  if (!p[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'p' tag is not valid hex.\";\n  let e = zapRequest.tags.find(([t, v]) => t === \"e\" && v);\n  if (e && !e[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'e' tag is not valid hex.\";\n  let relays = zapRequest.tags.find(([t, v]) => t === \"relays\" && v);\n  if (!relays)\n    return \"Zap request doesn't have a 'relays' tag.\";\n  return null;\n}\nfunction makeZapReceipt({\n  zapRequest,\n  preimage,\n  bolt11,\n  paidAt\n}) {\n  let zr = JSON.parse(zapRequest);\n  let tagsFromZapRequest = zr.tags.filter(\n    ([t]) => t === \"e\" || t === \"p\" || t === \"a\"\n  );\n  let zap = {\n    kind: 9735,\n    created_at: Math.round(paidAt.getTime() / 1e3),\n    content: \"\",\n    tags: [\n      ...tagsFromZapRequest,\n      [\"bolt11\", bolt11],\n      [\"description\", zapRequest]\n    ]\n  };\n  if (preimage) {\n    zap.tags.push([\"preimage\", preimage]);\n  }\n  return zap;\n}\nexport {\n  Kind,\n  SimplePool,\n  finishEvent,\n  fakejson_exports as fj,\n  generatePrivateKey,\n  getBlankEvent,\n  getEventHash,\n  getPublicKey,\n  getSignature,\n  matchFilter,\n  matchFilters,\n  nip04_exports as nip04,\n  nip05_exports as nip05,\n  nip06_exports as nip06,\n  nip10_exports as nip10,\n  nip13_exports as nip13,\n  nip18_exports as nip18,\n  nip19_exports as nip19,\n  nip21_exports as nip21,\n  nip25_exports as nip25,\n  nip26_exports as nip26,\n  nip27_exports as nip27,\n  nip39_exports as nip39,\n  nip42_exports as nip42,\n  nip57_exports as nip57,\n  parseReferences,\n  relayInit,\n  serializeEvent,\n  signEvent,\n  utils_exports as utils,\n  validateEvent,\n  verifySignature\n};\n","const WS = typeof WebSocket !== 'undefined' ? WebSocket : require('ws')\n\nRelay.prototype.wait_connected = async function relay_wait_connected(data) {\n\tlet retry = 1000\n\twhile (true) {\n\t\tif (this.ws.readyState !== 1) {\n\t\t\tawait sleep(retry)\n\t\t\tretry *= 1.5\n\t\t}\n\t\telse {\n\t\t\treturn\n\t\t}\n\t}\n}\n\n\nfunction Relay(relay, opts={})\n{\n\tif (!(this instanceof Relay))\n\t\treturn new Relay(relay, opts)\n\n\tthis.url = relay\n\tthis.opts = opts\n\n\tif (opts.reconnect == null)\n\t\topts.reconnect = true\n\n\tconst me = this\n\tme.onfn = {}\n\n\tinit_websocket(me)\n\t\t.catch(e => {\n\t\t\tif (me.onfn.error)\n\t\t\t\tme.onfn.error(e)\n\t\t})\n\n\treturn this\n}\n\nfunction init_websocket(me) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst ws = me.ws = new WS(me.url);\n\n\t\tlet resolved = false\n\t\tws.onmessage = (m) => {\n\t\t\thandle_nostr_message(me, m)\n\t\t\tif (me.onfn.message)\n\t\t\t\tme.onfn.message(m)\n\t\t}\n\t\tws.onclose = (e) => {\n\t\t\tif (me.onfn.close)\n\t\t\t\tme.onfn.close(e)\n\t\t\tif (me.reconnecting)\n\t\t\t\treturn reject(new Error(\"close during reconnect\"))\n\t\t\tif (!me.manualClose && me.opts.reconnect)\n\t\t\t\treconnect(me)\n\t\t}\n\t\tws.onerror = (e) => {\n\t\t\tif (me.onfn.error)\n\t\t\t\tme.onfn.error(e)\n\t\t\tif (me.reconnecting)\n\t\t\t\treturn reject(new Error(\"error during reconnect\"))\n\t\t\tif (me.opts.reconnect)\n\t\t\t\treconnect(me)\n\t\t}\n\t\tws.onopen = (e) => {\n\t\t\tif (me.onfn.open)\n\t\t\t\tme.onfn.open(e)\n\n\t\t\tif (resolved) return\n\n\t\t\tresolved = true\n\t\t\tresolve(me)\n\t\t}\n\t});\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function reconnect(me)\n{\n\tconst reconnecting = true\n\tlet n = 100\n\ttry {\n\t\tme.reconnecting = true\n\t\tawait init_websocket(me)\n\t\tme.reconnecting = false\n\t} catch {\n\t\t//console.error(`error thrown during reconnect... trying again in ${n} ms`)\n\t\tawait sleep(n)\n\t\tn *= 1.5\n\t}\n}\n\nRelay.prototype.on = function relayOn(method, fn) {\n\tthis.onfn[method] = fn\n\treturn this\n}\n\nRelay.prototype.close = function relayClose() {\n\tif (this.ws) {\n\t\tthis.manualClose = true\n\t\tthis.ws.close()\n\t}\n}\n\nRelay.prototype.subscribe = function relay_subscribe(sub_id, filters) {\n\tif (Array.isArray(filters))\n\t\tthis.send([\"REQ\", sub_id, ...filters])\n\telse\n\t\tthis.send([\"REQ\", sub_id, filters])\n}\n\nRelay.prototype.unsubscribe = function relay_unsubscribe(sub_id) {\n\tthis.send([\"CLOSE\", sub_id])\n}\n\nRelay.prototype.send = async function relay_send(data) {\n\tawait this.wait_connected()\n\tthis.ws.send(JSON.stringify(data))\n}\n\nfunction handle_nostr_message(relay, msg)\n{\n\tlet data\n\ttry {\n\t\tdata = JSON.parse(msg.data)\n\t} catch (e) {\n\t\tconsole.error(\"handle_nostr_message\", e)\n\t\treturn\n\t}\n\tif (data.length >= 2) {\n\t\tswitch (data[0]) {\n\t\tcase \"EVENT\":\n\t\t\tif (data.length < 3)\n\t\t\t\treturn\n\t\t\treturn relay.onfn.event && relay.onfn.event(data[1], data[2])\n\t\tcase \"EOSE\":\n\t\t\treturn relay.onfn.eose && relay.onfn.eose(data[1])\n\t\tcase \"NOTICE\":\n\t\t\treturn relay.onfn.notice && relay.onfn.notice(...data.slice(1))\n\t\tcase \"OK\":\n\t\t\treturn relay.onfn.ok && relay.onfn.ok(...data.slice(1))\n\t\t}\n\t}\n}\n\nmodule.exports = Relay\n","'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n","\nconst Relay = require('./relay')\n\nfunction RelayPool(relays, opts)\n{\n\tif (!(this instanceof RelayPool))\n\t\treturn new RelayPool(relays, opts)\n\n\tthis.onfn = {}\n\tthis.relays = []\n\tthis.opts = opts\n\n\tfor (const relay of relays) {\n\t\tthis.add(relay)\n\t}\n\n\treturn this\n}\n\nRelayPool.prototype.close = function relayPoolClose() {\n\tfor (const relay of this.relays) {\n\t\trelay.close()\n\t}\n}\n\nRelayPool.prototype.on = function relayPoolOn(method, fn) {\n\tfor (const relay of this.relays) {\n\t\tthis.onfn[method] = fn\n\t\trelay.onfn[method] = fn.bind(null, relay)\n\t}\n\treturn this\n}\n\nRelayPool.prototype.has = function relayPoolHas(relayUrl) {\n\tfor (const relay of this.relays) {\n\t\tif (relay.url === relayUrl)\n\t\t\treturn true\n\t}\n\n\treturn false\n}\n\nRelayPool.prototype.send = function relayPoolSend(payload, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.send(payload)\n\t}\n}\n\nRelayPool.prototype.setupHandlers = function relayPoolSetupHandlers()\n{\n\t// setup its message handlers with the ones we have already\n\tconst keys = Object.keys(this.onfn)\n\tfor (const handler of keys) {\n\t\tfor (const relay of this.relays) {\n\t\t\trelay.onfn[handler] = this.onfn[handler].bind(null, relay)\n\t\t}\n\t}\n}\n\nRelayPool.prototype.remove = function relayPoolRemove(url) {\n\tlet i = 0\n\n\tfor (const relay of this.relays) {\n\t\tif (relay.url === url) {\n\t\t\trelay.ws && relay.ws.close()\n\t\t\tthis.relays = this.replays.splice(i, 1)\n\t\t\treturn true\n\t\t}\n\n\t\ti += 1\n\t}\n\n\treturn false\n}\n\nRelayPool.prototype.subscribe = function relayPoolSubscribe(sub_id, filters, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.subscribe(sub_id, filters)\n\t}\n}\n\nRelayPool.prototype.unsubscribe = function relayPoolUnsubscibe(sub_id, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.unsubscribe(sub_id)\n\t}\n}\n\n\nRelayPool.prototype.add = function relayPoolAdd(relay) {\n\tif (relay instanceof Relay) {\n\t\tif (this.has(relay.url))\n\t\t\treturn false\n\n\t\tthis.relays.push(relay)\n\t\tthis.setupHandlers()\n\t\treturn true\n\t}\n\n\tif (this.has(relay))\n\t\treturn false\n\n\tconst r = Relay(relay, this.opts)\n\tthis.relays.push(r)\n\tthis.setupHandlers()\n\treturn true\n}\n\nRelayPool.prototype.find_relays = function relayPoolFindRelays(relay_ids) {\n\tif (relay_ids instanceof Relay)\n\t\treturn [relay_ids]\n\n\tif (relay_ids.length === 0)\n\t\treturn []\n\n\tif (!relay_ids[0])\n\t\tthrow new Error(\"what!?\")\n\n\tif (relay_ids[0] instanceof Relay)\n\t\treturn relay_ids\n\n\treturn this.relays.reduce((acc, relay) => {\n\t\tif (relay_ids.some((rid) => relay.url === rid))\n\t\t\tacc.push(relay)\n\t\treturn acc\n\t}, [])\n}\n\nmodule.exports = RelayPool\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.is_node = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar is_node_ = null;\r\n/**\r\n * Test whether the code is running on NodeJS.\r\n *\r\n * @return Whether NodeJS or not.\r\n */\r\nfunction is_node() {\r\n    if (is_node_ === null)\r\n        is_node_ =\r\n            typeof global === \"object\" &&\r\n                typeof global.process === \"object\" &&\r\n                typeof global.process.versions === \"object\" &&\r\n                typeof global.process.versions.node !== \"undefined\";\r\n    return is_node_;\r\n}\r\nexports.is_node = is_node;\r\n//# sourceMappingURL=node.js.map","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Container = void 0;\r\nvar ForOfAdaptor_1 = require(\"../../internal/iterator/disposable/ForOfAdaptor\");\r\n/**\r\n * Basic container.\r\n *\r\n * @template T Stored elements' type\r\n * @template SourceT Derived type extending this {@link Container}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n * @template PElem Parent type of *T*, used for inserting elements through {@link assign} and {@link insert}.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Container = /** @class */ (function () {\r\n    function Container() {\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.empty = function () {\r\n        return this.size() === 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rbegin = function () {\r\n        return this.end().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rend = function () {\r\n        return this.begin().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype[Symbol.iterator] = function () {\r\n        return new ForOfAdaptor_1.ForOfAdaptor(this.begin(), this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.toJSON = function () {\r\n        var e_1, _a;\r\n        var ret = [];\r\n        try {\r\n            for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var elem = _c.value;\r\n                ret.push(elem);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return ret;\r\n    };\r\n    return Container;\r\n}());\r\nexports.Container = Container;\r\n//# sourceMappingURL=Container.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ForOfAdaptor = void 0;\r\n/**\r\n * Adaptor for `for ... of` iteration.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ForOfAdaptor = /** @class */ (function () {\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first Input iteartor of the first position.\r\n     * @param last Input iterator of the last position.\r\n     */\r\n    function ForOfAdaptor(first, last) {\r\n        this.it_ = first;\r\n        this.last_ = last;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype.next = function () {\r\n        if (this.it_.equals(this.last_))\r\n            return {\r\n                done: true,\r\n                value: undefined,\r\n            };\r\n        else {\r\n            var it = this.it_;\r\n            this.it_ = this.it_.next();\r\n            return {\r\n                done: false,\r\n                value: it.value,\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype[Symbol.iterator] = function () {\r\n        return this;\r\n    };\r\n    return ForOfAdaptor;\r\n}());\r\nexports.ForOfAdaptor = ForOfAdaptor;\r\n//# sourceMappingURL=ForOfAdaptor.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NativeArrayIterator = void 0;\r\nvar NativeArrayIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function NativeArrayIterator(data, index) {\r\n        this.data_ = data;\r\n        this.index_ = index;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(NativeArrayIterator.prototype, \"value\", {\r\n        get: function () {\r\n            return this.data_[this.index_];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.prev = function () {\r\n        --this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.advance = function (n) {\r\n        this.index_ += n;\r\n        return this;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.equals = function (obj) {\r\n        return this.data_ === obj.data_ && this.index_ === obj.index_;\r\n    };\r\n    NativeArrayIterator.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        _b = __read([obj.index_, this.index_], 2), this.index_ = _b[0], obj.index_ = _b[1];\r\n    };\r\n    return NativeArrayIterator;\r\n}());\r\nexports.NativeArrayIterator = NativeArrayIterator;\r\n//# sourceMappingURL=NativeArrayIterator.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LogicError = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Exception_1 = require(\"./Exception\");\r\n/**\r\n * Logic Error.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar LogicError = /** @class */ (function (_super) {\r\n    __extends(LogicError, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function LogicError(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return LogicError;\r\n}(Exception_1.Exception));\r\nexports.LogicError = LogicError;\r\n//# sourceMappingURL=LogicError.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Exception = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\n/**\r\n * Base Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Exception = /** @class */ (function (_super) {\r\n    __extends(Exception, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function Exception(message) {\r\n        var _newTarget = this.constructor;\r\n        var _this = _super.call(this, message) || this;\r\n        // INHERITANCE POLYFILL\r\n        var proto = _newTarget.prototype;\r\n        if (Object.setPrototypeOf)\r\n            Object.setPrototypeOf(_this, proto);\r\n        else\r\n            _this.__proto__ = proto;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Exception.prototype, \"name\", {\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * The error name.\r\n         */\r\n        get: function () {\r\n            return this.constructor.name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Get error message.\r\n     *\r\n     * @return The error message.\r\n     */\r\n    Exception.prototype.what = function () {\r\n        return this.message;\r\n    };\r\n    /**\r\n     * Native function for `JSON.stringify()`.\r\n     *\r\n     * The {@link Exception.toJSON} function returns only three properties; ({@link name}, {@link message} and {@link stack}). If you want to define a new sub-class extending the {@link Exception} and const the class to export additional props (or remove some props), override this {@link Exception.toJSON} method.\r\n     *\r\n     * @return An object for `JSON.stringify()`.\r\n     */\r\n    Exception.prototype.toJSON = function () {\r\n        return {\r\n            name: this.name,\r\n            message: this.message,\r\n            stack: this.stack,\r\n        };\r\n    };\r\n    return Exception;\r\n}(Error));\r\nexports.Exception = Exception;\r\n//# sourceMappingURL=Exception.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InvalidArgument = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Invalid Argument Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar InvalidArgument = /** @class */ (function (_super) {\r\n    __extends(InvalidArgument, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function InvalidArgument(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return InvalidArgument;\r\n}(LogicError_1.LogicError));\r\nexports.InvalidArgument = InvalidArgument;\r\n//# sourceMappingURL=InvalidArgument.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorGenerator = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar InvalidArgument_1 = require(\"../../exception/InvalidArgument\");\r\nvar OutOfRange_1 = require(\"../../exception/OutOfRange\");\r\nvar ErrorGenerator;\r\n(function (ErrorGenerator) {\r\n    /* ---------------------------------------------------------\r\n        COMMON\r\n    --------------------------------------------------------- */\r\n    function get_class_name(instance) {\r\n        if (typeof instance === \"string\")\r\n            return instance;\r\n        var ret = instance.constructor.name;\r\n        if (instance.constructor.__MODULE)\r\n            ret = \"\".concat(instance.constructor.__MODULE, \".\").concat(ret);\r\n        return \"std.\".concat(ret);\r\n    }\r\n    ErrorGenerator.get_class_name = get_class_name;\r\n    /* ---------------------------------------------------------\r\n        CONTAINERS\r\n    --------------------------------------------------------- */\r\n    function empty(instance, method) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): it's empty container.\"));\r\n    }\r\n    ErrorGenerator.empty = empty;\r\n    function negative_index(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is negative -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_index = negative_index;\r\n    function excessive_index(instance, method, index, size) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is equal or greater than size -> (index = \").concat(index, \", size: \").concat(size, \").\"));\r\n    }\r\n    ErrorGenerator.excessive_index = excessive_index;\r\n    function not_my_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is not this container's own.\"));\r\n    }\r\n    ErrorGenerator.not_my_iterator = not_my_iterator;\r\n    function erased_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator, it already has been erased.\"));\r\n    }\r\n    ErrorGenerator.erased_iterator = erased_iterator;\r\n    function negative_iterator(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is directing negative position -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_iterator = negative_iterator;\r\n    function iterator_end_value(instance, method) {\r\n        if (method === void 0) { method = \"end\"; }\r\n        var className = get_class_name(instance);\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(className, \".Iterator.value: cannot access to the \").concat(className, \".\").concat(method, \"().value.\"));\r\n    }\r\n    ErrorGenerator.iterator_end_value = iterator_end_value;\r\n    function key_nout_found(instance, method, key) {\r\n        throw new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): unable to find the matched key -> \").concat(key));\r\n    }\r\n    ErrorGenerator.key_nout_found = key_nout_found;\r\n})(ErrorGenerator = exports.ErrorGenerator || (exports.ErrorGenerator = {}));\r\n//# sourceMappingURL=ErrorGenerator.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutOfRange = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Out-of-range Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar OutOfRange = /** @class */ (function (_super) {\r\n    __extends(OutOfRange, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function OutOfRange(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return OutOfRange;\r\n}(LogicError_1.LogicError));\r\nexports.OutOfRange = OutOfRange;\r\n//# sourceMappingURL=OutOfRange.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar SetContainer_1 = require(\"./SetContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic set container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template Source Derived type extending this {@link UniqueSet}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueSet = /** @class */ (function (_super) {\r\n    __extends(UniqueSet, _super);\r\n    function UniqueSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    UniqueSet.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueSet.prototype._Insert_by_range = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this._Insert_by_key(first.value);\r\n    };\r\n    UniqueSet.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_val(param);\r\n    };\r\n    UniqueSet.prototype._Extract_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        this._Erase_by_range(it);\r\n        return key;\r\n    };\r\n    UniqueSet.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true || this.has(it.value) === false)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueSet.prototype._Erase_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());) {\r\n            if (this.has(it.value) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n        }\r\n    };\r\n    return UniqueSet;\r\n}(SetContainer_1.SetContainer));\r\nexports.UniqueSet = UniqueSet;\r\n//# sourceMappingURL=UniqueSet.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic set container.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link SetContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetContainer = /** @class */ (function (_super) {\r\n    __extends(SetContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function SetContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    SetContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this._Insert_by_key(args[0]);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this._Insert_by_hint(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            !(args[0] instanceof this.end().constructor &&\r\n                args[0].source() === this))\r\n            return this._Erase_by_val(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return SetContainer;\r\n}(Container_1.Container));\r\nexports.SetContainer = SetContainer;\r\n//# sourceMappingURL=SetContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get_uid = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Global_1 = require(\"../internal/Global\");\r\n/**\r\n * Get unique identifier.\r\n *\r\n * @param obj Target object.\r\n * @return The identifier number.\r\n */\r\nfunction get_uid(obj) {\r\n    // NO UID EXISTS, THEN ISSUE ONE.\r\n    if (obj instanceof Object) {\r\n        if (obj.hasOwnProperty(\"__get_m_iUID\") === false) {\r\n            var uid_1 = ++(0, Global_1._Get_root)().__s_iUID;\r\n            Object.defineProperty(obj, \"__get_m_iUID\", {\r\n                value: function () {\r\n                    return uid_1;\r\n                },\r\n            });\r\n        }\r\n        // RETURNS\r\n        return obj.__get_m_iUID();\r\n    }\r\n    else if (obj === undefined)\r\n        return -1;\r\n    // is null\r\n    else\r\n        return 0;\r\n}\r\nexports.get_uid = get_uid;\r\n//# sourceMappingURL=uid.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._Get_root = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar node_1 = require(\"../utility/node\");\r\n/**\r\n * @internal\r\n */\r\nfunction _Get_root() {\r\n    if (__s_pRoot === null) {\r\n        __s_pRoot = ((0, node_1.is_node)() ? global : self);\r\n        if (__s_pRoot.__s_iUID === undefined)\r\n            __s_pRoot.__s_iUID = 0;\r\n    }\r\n    return __s_pRoot;\r\n}\r\nexports._Get_root = _Get_root;\r\n/**\r\n * @internal\r\n */\r\nvar __s_pRoot = null;\r\n//# sourceMappingURL=Global.js.map","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.hash = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Hash function.\r\n *\r\n * @param itemList The items to be hashed.\r\n * @return The hash code.\r\n */\r\nfunction hash() {\r\n    var e_1, _a;\r\n    var itemList = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        itemList[_i] = arguments[_i];\r\n    }\r\n    var ret = INIT_VALUE;\r\n    try {\r\n        for (var itemList_1 = __values(itemList), itemList_1_1 = itemList_1.next(); !itemList_1_1.done; itemList_1_1 = itemList_1.next()) {\r\n            var item = itemList_1_1.value;\r\n            item = item ? item.valueOf() : item;\r\n            var type = typeof item;\r\n            if (type === \"boolean\")\r\n                // BOOLEAN -> 1 BYTE\r\n                ret = _Hash_boolean(item, ret);\r\n            else if (type === \"number\" || type === \"bigint\")\r\n                // NUMBER -> 8 BYTES\r\n                ret = _Hash_number(item, ret);\r\n            else if (type === \"string\")\r\n                // STRING -> {LENGTH} BYTES\r\n                ret = _Hash_string(item, ret);\r\n            else if (item instanceof Object &&\r\n                item.hashCode instanceof Function) {\r\n                var hashed = item.hashCode();\r\n                if (itemList.length === 1)\r\n                    return hashed;\r\n                else {\r\n                    ret = ret ^ hashed;\r\n                    ret *= MULTIPLIER;\r\n                }\r\n            } // object | null | undefined\r\n            else\r\n                ret = _Hash_number((0, uid_1.get_uid)(item), ret);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (itemList_1_1 && !itemList_1_1.done && (_a = itemList_1.return)) _a.call(itemList_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return Math.abs(ret);\r\n}\r\nexports.hash = hash;\r\nfunction _Hash_boolean(val, ret) {\r\n    ret ^= val ? 1 : 0;\r\n    ret *= MULTIPLIER;\r\n    return ret;\r\n}\r\nfunction _Hash_number(val, ret) {\r\n    return _Hash_string(val.toString(), ret);\r\n    // // ------------------------------------------\r\n    // //    IN C++\r\n    // //        CONSIDER A NUMBER AS A STRING\r\n    // //        HASH<STRING>((CHAR*)&VAL, 8)\r\n    // // ------------------------------------------\r\n    // // CONSTRUCT BUFFER AND BYTE_ARRAY\r\n    // const buffer: ArrayBuffer = new ArrayBuffer(8);\r\n    // const byteArray: Int8Array = new Int8Array(buffer);\r\n    // const valueArray: Float64Array = new Float64Array(buffer);\r\n    // valueArray[0] = val;\r\n    // for (let i: number = 0; i < byteArray.length; ++i)\r\n    // {\r\n    //     const byte = (byteArray[i] < 0) ? byteArray[i] + 256 : byteArray[i];\r\n    //     ret ^= byte;\r\n    //     ret *= _HASH_MULTIPLIER;\r\n    // }\r\n    // return Math.abs(ret);\r\n}\r\nfunction _Hash_string(str, ret) {\r\n    for (var i = 0; i < str.length; ++i) {\r\n        ret ^= str.charCodeAt(i);\r\n        ret *= MULTIPLIER;\r\n    }\r\n    return Math.abs(ret);\r\n}\r\n/* ---------------------------------------------------------\r\n    RESERVED ITEMS\r\n--------------------------------------------------------- */\r\nvar INIT_VALUE = 2166136261;\r\nvar MULTIPLIER = 16777619;\r\n//# sourceMappingURL=hash.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.greater_equal = exports.greater = exports.less_equal = exports.less = exports.not_equal_to = exports.equal_to = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Test whether two arguments are equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether two arguments are equal or not.\r\n */\r\nfunction equal_to(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x ? x.valueOf() : x;\r\n    y = y ? y.valueOf() : y;\r\n    // DO COMPARE\r\n    if (x instanceof Object &&\r\n        x.equals instanceof Function)\r\n        return x.equals(y);\r\n    else\r\n        return x === y;\r\n}\r\nexports.equal_to = equal_to;\r\n/**\r\n * Test whether two arguments are not equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Returns `true`, if two arguments are not equal, otherwise `false`.\r\n */\r\nfunction not_equal_to(x, y) {\r\n    return !equal_to(x, y);\r\n}\r\nexports.not_equal_to = not_equal_to;\r\n/**\r\n * Test whether *x* is less than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than *y*.\r\n */\r\nfunction less(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x.valueOf();\r\n    y = y.valueOf();\r\n    // DO COMPARE\r\n    if (x instanceof Object)\r\n        if (x.less instanceof Function)\r\n            // has less()\r\n            return x.less(y);\r\n        else\r\n            return (0, uid_1.get_uid)(x) < (0, uid_1.get_uid)(y);\r\n    else\r\n        return x < y;\r\n}\r\nexports.less = less;\r\n/**\r\n * Test whether *x* is less than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than or equal to *y*.\r\n */\r\nfunction less_equal(x, y) {\r\n    return less(x, y) || equal_to(x, y);\r\n}\r\nexports.less_equal = less_equal;\r\n/**\r\n * Test whether *x* is greater than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than *y*.\r\n */\r\nfunction greater(x, y) {\r\n    return !less_equal(x, y);\r\n}\r\nexports.greater = greater;\r\n/**\r\n * Test whether *x* is greater than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than or equal to *y*.\r\n */\r\nfunction greater_equal(x, y) {\r\n    return !less(x, y);\r\n}\r\nexports.greater_equal = greater_equal;\r\n//# sourceMappingURL=comparators.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IHashContainer = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar IAssociativeContainer_1 = require(\"./IAssociativeContainer\");\r\nvar hash_1 = require(\"../../../functional/hash\");\r\nvar comparators_1 = require(\"../../../functional/comparators\");\r\nvar IHashContainer;\r\n(function (IHashContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source, Source, bucketFactory) {\r\n        var args = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            args[_i - 3] = arguments[_i];\r\n        }\r\n        // DECLARE MEMBERS\r\n        var post_process = null;\r\n        var hash_function = hash_1.hash;\r\n        var key_eq = comparators_1.equal_to;\r\n        //----\r\n        // INITIALIZE MEMBERS AND POST-PROCESS\r\n        //----\r\n        // BRANCH - METHOD OVERLOADINGS\r\n        if (args.length === 1 && args[0] instanceof Source) {\r\n            // PARAMETERS\r\n            var container_1 = args[0];\r\n            hash_function = container_1.hash_function();\r\n            key_eq = container_1.key_eq();\r\n            // COPY CONSTRUCTOR\r\n            post_process = function () {\r\n                var first = container_1.begin();\r\n                var last = container_1.end();\r\n                source.assign(first, last);\r\n            };\r\n        }\r\n        else {\r\n            var tuple = IAssociativeContainer_1.IAssociativeContainer.construct.apply(IAssociativeContainer_1.IAssociativeContainer, __spreadArray([source], __read(args), false));\r\n            post_process = tuple.ramda;\r\n            if (tuple.tail.length >= 1)\r\n                hash_function = tuple.tail[0];\r\n            if (tuple.tail.length >= 2)\r\n                key_eq = tuple.tail[1];\r\n        }\r\n        //----\r\n        // DO PROCESS\r\n        //----\r\n        // CONSTRUCT BUCKET\r\n        bucketFactory(hash_function, key_eq);\r\n        // ACT POST-PROCESS\r\n        if (post_process !== null)\r\n            post_process();\r\n    }\r\n    IHashContainer.construct = construct;\r\n})(IHashContainer = exports.IHashContainer || (exports.IHashContainer = {}));\r\n//# sourceMappingURL=IHashContainer.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IAssociativeContainer = void 0;\r\nvar IAssociativeContainer;\r\n(function (IAssociativeContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var ramda;\r\n        var tail;\r\n        if (args.length >= 1 && args[0] instanceof Array) {\r\n            // INITIALIZER LIST CONSTRUCTOR\r\n            ramda = function () {\r\n                var items = args[0];\r\n                source.push.apply(source, __spreadArray([], __read(items), false));\r\n            };\r\n            tail = args.slice(1);\r\n        }\r\n        else if (args.length >= 2 &&\r\n            args[0].next instanceof Function &&\r\n            args[1].next instanceof Function) {\r\n            // RANGE CONSTRUCTOR\r\n            ramda = function () {\r\n                var first = args[0];\r\n                var last = args[1];\r\n                source.assign(first, last);\r\n            };\r\n            tail = args.slice(2);\r\n        }\r\n        else {\r\n            // DEFAULT CONSTRUCTOR\r\n            ramda = null;\r\n            tail = args;\r\n        }\r\n        return { ramda: ramda, tail: tail };\r\n    }\r\n    IAssociativeContainer.construct = construct;\r\n})(IAssociativeContainer = exports.IAssociativeContainer || (exports.IAssociativeContainer = {}));\r\n//# sourceMappingURL=IAssociativeContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListIterator = void 0;\r\nvar ErrorGenerator_1 = require(\"../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------------- */\r\n    function ListIterator(prev, next, value) {\r\n        this.prev_ = prev;\r\n        this.next_ = next;\r\n        this.value_ = value;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_prev = function (it, prev) {\r\n        it.prev_ = prev;\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_next = function (it, next) {\r\n        it.next_ = next;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.prev = function () {\r\n        return this.prev_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.next = function () {\r\n        return this.next_;\r\n    };\r\n    Object.defineProperty(ListIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            this._Try_value();\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ListIterator.prototype._Try_value = function () {\r\n        if (this.value_ === undefined &&\r\n            this.equals(this.source().end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.iterator_end_value(this.source());\r\n    };\r\n    /* ---------------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.equals = function (obj) {\r\n        return this === obj;\r\n    };\r\n    return ListIterator;\r\n}());\r\nexports.ListIterator = ListIterator;\r\n//# sourceMappingURL=ListIterator.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.next = exports.prev = exports.advance = exports.distance = exports.size = exports.empty = void 0;\r\nvar InvalidArgument_1 = require(\"../exception/InvalidArgument\");\r\n/* =========================================================\r\n    GLOBAL FUNCTIONS\r\n        - ACCESSORS\r\n        - MOVERS\r\n        - FACTORIES\r\n============================================================\r\n    ACCESSORS\r\n--------------------------------------------------------- */\r\n/**\r\n * Test whether a container is empty.\r\n *\r\n * @param source Target container.\r\n * @return Whether empty or not.\r\n */\r\nfunction empty(source) {\r\n    if (source instanceof Array)\r\n        return source.length !== 0;\r\n    else\r\n        return source.empty();\r\n}\r\nexports.empty = empty;\r\n/**\r\n * Get number of elements of a container.\r\n *\r\n * @param source Target container.\r\n * @return The number of elements in the container.\r\n */\r\nfunction size(source) {\r\n    if (source instanceof Array)\r\n        return source.length;\r\n    else\r\n        return source.size();\r\n}\r\nexports.size = size;\r\nfunction distance(first, last) {\r\n    if (first.index instanceof Function)\r\n        return _Distance_via_index(first, last);\r\n    var ret = 0;\r\n    for (; !first.equals(last); first = first.next())\r\n        ++ret;\r\n    return ret;\r\n}\r\nexports.distance = distance;\r\nfunction _Distance_via_index(first, last) {\r\n    var x = first.index();\r\n    var y = last.index();\r\n    if (first.base instanceof Function)\r\n        return x - y;\r\n    else\r\n        return y - x;\r\n}\r\nfunction advance(it, n) {\r\n    if (n === 0)\r\n        return it;\r\n    else if (it.advance instanceof Function)\r\n        return it.advance(n);\r\n    var stepper;\r\n    if (n < 0) {\r\n        if (!(it.prev instanceof Function))\r\n            throw new InvalidArgument_1.InvalidArgument(\"Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.\");\r\n        stepper = function (it) { return it.prev(); };\r\n        n = -n;\r\n    }\r\n    else\r\n        stepper = function (it) { return it.next(); };\r\n    while (n-- > 0)\r\n        it = stepper(it);\r\n    return it;\r\n}\r\nexports.advance = advance;\r\n/**\r\n * Get previous iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move prev.\r\n * @return An iterator moved to prev *n* steps.\r\n */\r\nfunction prev(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.prev();\r\n    else\r\n        return advance(it, -n);\r\n}\r\nexports.prev = prev;\r\n/**\r\n * Get next iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move next.\r\n * @return Iterator moved to next *n* steps.\r\n */\r\nfunction next(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.next();\r\n    else\r\n        return advance(it, n);\r\n}\r\nexports.next = next;\r\n//# sourceMappingURL=global.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListContainer = void 0;\r\nvar Container_1 = require(\"../../../base/container/Container\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar Repeater_1 = require(\"../../iterator/disposable/Repeater\");\r\nvar NativeArrayIterator_1 = require(\"../../iterator/disposable/NativeArrayIterator\");\r\nvar global_1 = require(\"../../../iterator/global\");\r\nvar ErrorGenerator_1 = require(\"../../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Container.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListContainer = /** @class */ (function (_super) {\r\n    __extends(ListContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function ListContainer() {\r\n        var _this = _super.call(this) || this;\r\n        // INIT MEMBERS\r\n        _this.end_ = _this._Create_iterator(null, null);\r\n        _this.clear();\r\n        return _this;\r\n    }\r\n    ListContainer.prototype.assign = function (par1, par2) {\r\n        this.clear();\r\n        this.insert(this.end(), par1, par2);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.clear = function () {\r\n        // DISCONNECT NODES\r\n        ListIterator_1.ListIterator._Set_prev(this.end_, this.end_);\r\n        ListIterator_1.ListIterator._Set_next(this.end_, this.end_);\r\n        // RE-SIZE -> 0\r\n        this.begin_ = this.end_;\r\n        this.size_ = 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.resize = function (n) {\r\n        var expansion = n - this.size();\r\n        if (expansion > 0)\r\n            this.insert(this.end(), expansion, undefined);\r\n        else if (expansion < 0)\r\n            this.erase((0, global_1.advance)(this.end(), -expansion), this.end());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.begin = function () {\r\n        return this.begin_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.end = function () {\r\n        return this.end_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - PUSH & POP\r\n            - INSERT\r\n            - ERASE\r\n            - POST-PROCESS\r\n    ============================================================\r\n        PUSH & POP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_front = function (val) {\r\n        this.insert(this.begin_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_back = function (val) {\r\n        this.insert(this.end_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_front = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_front\");\r\n        this.erase(this.begin_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_back = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_back\");\r\n        this.erase(this.end_.prev());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(this.end(), first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    ListContainer.prototype.insert = function (pos) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        // VALIDATION\r\n        if (pos.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (pos.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        // BRANCHES\r\n        if (args.length === 1)\r\n            return this._Insert_by_repeating_val(pos, 1, args[0]);\r\n        else if (args.length === 2 && typeof args[0] === \"number\")\r\n            return this._Insert_by_repeating_val(pos, args[0], args[1]);\r\n        else\r\n            return this._Insert_by_range(pos, args[0], args[1]);\r\n    };\r\n    ListContainer.prototype._Insert_by_repeating_val = function (position, n, val) {\r\n        var first = new Repeater_1.Repeater(0, val);\r\n        var last = new Repeater_1.Repeater(n);\r\n        return this._Insert_by_range(position, first, last);\r\n    };\r\n    ListContainer.prototype._Insert_by_range = function (position, begin, end) {\r\n        var prev = position.prev();\r\n        var first = null;\r\n        var size = 0;\r\n        for (var it = begin; it.equals(end) === false; it = it.next()) {\r\n            // CONSTRUCT ITEM, THE NEW ELEMENT\r\n            var item = this._Create_iterator(prev, null, it.value);\r\n            if (size === 0)\r\n                first = item;\r\n            // PLACE ITEM ON THE NEXT OF \"PREV\"\r\n            ListIterator_1.ListIterator._Set_next(prev, item);\r\n            // SHIFT CURRENT ITEM TO PREVIOUS\r\n            prev = item;\r\n            ++size;\r\n        }\r\n        // WILL FIRST BE THE BEGIN?\r\n        if (position.equals(this.begin()) === true)\r\n            this.begin_ = first;\r\n        // CONNECT BETWEEN LAST AND POSITION\r\n        ListIterator_1.ListIterator._Set_next(prev, position);\r\n        ListIterator_1.ListIterator._Set_prev(position, prev);\r\n        this.size_ += size;\r\n        return first;\r\n    };\r\n    ListContainer.prototype.erase = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        return this._Erase_by_range(first, last);\r\n    };\r\n    ListContainer.prototype._Erase_by_range = function (first, last) {\r\n        // VALIDATION\r\n        if (first.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (first.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        else if (first.equals(this.end_))\r\n            return this.end_;\r\n        // FIND PREV AND NEXT\r\n        var prev = first.prev();\r\n        // SHRINK\r\n        ListIterator_1.ListIterator._Set_next(prev, last);\r\n        ListIterator_1.ListIterator._Set_prev(last, prev);\r\n        for (var it = first; !it.equals(last); it = it.next()) {\r\n            it.erased_ = true;\r\n            --this.size_;\r\n        }\r\n        if (first.equals(this.begin_))\r\n            this.begin_ = last;\r\n        return last;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        SWAP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.swap = function (obj) {\r\n        var _a, _b, _c;\r\n        _a = __read([obj.begin_, this.begin_], 2), this.begin_ = _a[0], obj.begin_ = _a[1];\r\n        _b = __read([obj.end_, this.end_], 2), this.end_ = _b[0], obj.end_ = _b[1];\r\n        _c = __read([obj.size_, this.size_], 2), this.size_ = _c[0], obj.size_ = _c[1];\r\n    };\r\n    return ListContainer;\r\n}(Container_1.Container));\r\nexports.ListContainer = ListContainer;\r\n//# sourceMappingURL=ListContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Repeater = void 0;\r\nvar Repeater = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function Repeater(index, value) {\r\n        this.index_ = index;\r\n        this.value_ = value;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(Repeater.prototype, \"value\", {\r\n        get: function () {\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS & COMPARE\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    Repeater.prototype.equals = function (obj) {\r\n        return this.index_ === obj.index_;\r\n    };\r\n    return Repeater;\r\n}());\r\nexports.Repeater = Repeater;\r\n//# sourceMappingURL=Repeater.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ReverseIterator = void 0;\r\n/**\r\n * Basic reverse iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ReverseIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param base The base iterator.\r\n     */\r\n    function ReverseIterator(base) {\r\n        this.base_ = base.prev();\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Get source container.\r\n     *\r\n     * @return The source container.\r\n     */\r\n    ReverseIterator.prototype.source = function () {\r\n        return this.base_.source();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.base = function () {\r\n        return this.base_.next();\r\n    };\r\n    Object.defineProperty(ReverseIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            return this.base_.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.prev = function () {\r\n        // this.base().next()\r\n        return this._Create_neighbor(this.base().next());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.next = function () {\r\n        // this.base().prev()\r\n        return this._Create_neighbor(this.base_);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.equals = function (obj) {\r\n        return this.base_.equals(obj.base_);\r\n    };\r\n    return ReverseIterator;\r\n}());\r\nexports.ReverseIterator = ReverseIterator;\r\n//# sourceMappingURL=ReverseIterator.js.map","\"use strict\";\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashBuckets = void 0;\r\n/**\r\n * Hash buckets\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashBuckets = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function HashBuckets(fetcher, hasher) {\r\n        this.fetcher_ = fetcher;\r\n        this.hasher_ = hasher;\r\n        this.max_load_factor_ = DEFAULT_MAX_FACTOR;\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    }\r\n    HashBuckets.prototype.clear = function () {\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    };\r\n    HashBuckets.prototype.rehash = function (length) {\r\n        var e_1, _a, e_2, _b;\r\n        length = Math.max(length, MIN_BUCKET_COUNT);\r\n        var data = [];\r\n        for (var i = 0; i < length; ++i)\r\n            data.push([]);\r\n        try {\r\n            for (var _c = __values(this.data_), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var row = _d.value;\r\n                try {\r\n                    for (var row_1 = (e_2 = void 0, __values(row)), row_1_1 = row_1.next(); !row_1_1.done; row_1_1 = row_1.next()) {\r\n                        var elem = row_1_1.value;\r\n                        var index = this.hasher_(this.fetcher_(elem)) % data.length;\r\n                        data[index].push(elem);\r\n                    }\r\n                }\r\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (row_1_1 && !row_1_1.done && (_b = row_1.return)) _b.call(row_1);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        this.data_ = data;\r\n    };\r\n    HashBuckets.prototype.reserve = function (length) {\r\n        if (length > this.capacity()) {\r\n            length = Math.floor(length / this.max_load_factor_);\r\n            this.rehash(length);\r\n        }\r\n    };\r\n    HashBuckets.prototype.initialize = function () {\r\n        for (var i = 0; i < MIN_BUCKET_COUNT; ++i)\r\n            this.data_.push([]);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.length = function () {\r\n        return this.data_.length;\r\n    };\r\n    HashBuckets.prototype.capacity = function () {\r\n        return this.data_.length * this.max_load_factor_;\r\n    };\r\n    HashBuckets.prototype.at = function (index) {\r\n        return this.data_[index];\r\n    };\r\n    HashBuckets.prototype.load_factor = function () {\r\n        return this.size_ / this.length();\r\n    };\r\n    HashBuckets.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        if (z === null)\r\n            return this.max_load_factor_;\r\n        else\r\n            this.max_load_factor_ = z;\r\n    };\r\n    HashBuckets.prototype.hash_function = function () {\r\n        return this.hasher_;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS I/O\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.index = function (elem) {\r\n        return this.hasher_(this.fetcher_(elem)) % this.length();\r\n    };\r\n    HashBuckets.prototype.insert = function (val) {\r\n        var capacity = this.capacity();\r\n        if (++this.size_ > capacity)\r\n            this.reserve(capacity * 2);\r\n        var index = this.index(val);\r\n        this.data_[index].push(val);\r\n    };\r\n    HashBuckets.prototype.erase = function (val) {\r\n        var index = this.index(val);\r\n        var bucket = this.data_[index];\r\n        for (var i = 0; i < bucket.length; ++i)\r\n            if (bucket[i] === val) {\r\n                bucket.splice(i, 1);\r\n                --this.size_;\r\n                break;\r\n            }\r\n    };\r\n    return HashBuckets;\r\n}());\r\nexports.HashBuckets = HashBuckets;\r\nvar MIN_BUCKET_COUNT = 10;\r\nvar DEFAULT_MAX_FACTOR = 1.0;\r\n//# sourceMappingURL=HashBuckets.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.make_pair = exports.Pair = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Pair of two elements.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Pair = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first The first element.\r\n     * @param second The second element.\r\n     */\r\n    function Pair(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.equals = function (pair) {\r\n        return ((0, comparators_1.equal_to)(this.first, pair.first) &&\r\n            (0, comparators_1.equal_to)(this.second, pair.second));\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.less = function (pair) {\r\n        if ((0, comparators_1.equal_to)(this.first, pair.first) === false)\r\n            return (0, comparators_1.less)(this.first, pair.first);\r\n        else\r\n            return (0, comparators_1.less)(this.second, pair.second);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first, this.second);\r\n    };\r\n    return Pair;\r\n}());\r\nexports.Pair = Pair;\r\n/**\r\n * Create a {@link Pair}.\r\n *\r\n * @param first The 1st element.\r\n * @param second The 2nd element.\r\n *\r\n * @return A {@link Pair} object.\r\n */\r\nfunction make_pair(first, second) {\r\n    return new Pair(first, second);\r\n}\r\nexports.make_pair = make_pair;\r\n//# sourceMappingURL=Pair.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueSet_1 = require(\"../base/container/UniqueSet\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar SetElementList_1 = require(\"../internal/container/associative/SetElementList\");\r\nvar SetHashBuckets_1 = require(\"../internal/hash/SetHashBuckets\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Set based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashSet = /** @class */ (function (_super) {\r\n    __extends(HashSet, _super);\r\n    function HashSet() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new SetElementList_1.SetElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashSet,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new SetHashBuckets_1.SetHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        SetElementList_1.SetElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        SetHashBuckets_1.SetHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashSet.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashSet.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashSet.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashSet.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_size = function (n) {\r\n        return this.buckets_.at(n).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashSet.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n            - SWAP\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Insert_by_key = function (key) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(key);\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    HashSet.prototype._Insert_by_hint = function (hint, key) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, key);\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashSet.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashSet;\r\n}(UniqueSet_1.UniqueSet));\r\nexports.HashSet = HashSet;\r\n/**\r\n *\r\n */\r\n(function (HashSet) {\r\n    // BODY\r\n    HashSet.Iterator = SetElementList_1.SetElementList.Iterator;\r\n    HashSet.ReverseIterator = SetElementList_1.SetElementList.ReverseIterator;\r\n})(HashSet = exports.HashSet || (exports.HashSet = {}));\r\nexports.HashSet = HashSet;\r\n//# sourceMappingURL=HashSet.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing set elements.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source container type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetElementList = /** @class */ (function (_super) {\r\n    __extends(SetElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function SetElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    SetElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return SetElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    SetElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    SetElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return SetElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.SetElementList = SetElementList;\r\n/**\r\n *\r\n */\r\n(function (SetElementList) {\r\n    /**\r\n     * Iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.source_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.source_.associative();\r\n        };\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    SetElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverser iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    SetElementList.ReverseIterator = ReverseIterator;\r\n})(SetElementList = exports.SetElementList || (exports.SetElementList = {}));\r\nexports.SetElementList = SetElementList;\r\n//# sourceMappingURL=SetElementList.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for set containers\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetHashBuckets = /** @class */ (function (_super) {\r\n    __extends(SetHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source set container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function SetHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    SetHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    SetHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    SetHashBuckets.prototype.find = function (val) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(val) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.value, val))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return SetHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.SetHashBuckets = SetHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.value;\r\n}\r\n//# sourceMappingURL=SetHashBuckets.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar MapContainer_1 = require(\"./MapContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic map container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Source Derived type extending this {@link UniqueMap}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueMap = /** @class */ (function (_super) {\r\n    __extends(UniqueMap, _super);\r\n    function UniqueMap() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    /**\r\n     * Get a value.\r\n     *\r\n     * @param key Key to search for.\r\n     * @return The value mapped by the key.\r\n     */\r\n    UniqueMap.prototype.get = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"get\", key);\r\n        return it.second;\r\n    };\r\n    /**\r\n     * Take a value.\r\n     *\r\n     * Get a value, or set the value and returns it.\r\n     *\r\n     * @param key Key to search for.\r\n     * @param generator Value generator when the matched key not found\r\n     * @returns Value, anyway\r\n     */\r\n    UniqueMap.prototype.take = function (key, generator) {\r\n        var it = this.find(key);\r\n        return it.equals(this.end())\r\n            ? this.emplace(key, generator()).first.second\r\n            : it.second;\r\n    };\r\n    /**\r\n     * Set a value with key.\r\n     *\r\n     * @param key Key to be mapped or search for.\r\n     * @param val Value to insert or assign.\r\n     */\r\n    UniqueMap.prototype.set = function (key, val) {\r\n        this.insert_or_assign(key, val);\r\n    };\r\n    UniqueMap.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueMap.prototype._Insert_by_range = function (first, last) {\r\n        for (var it = first; !it.equals(last); it = it.next())\r\n            this.emplace(it.value.first, it.value.second);\r\n    };\r\n    UniqueMap.prototype.insert_or_assign = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 2) {\r\n            return this._Insert_or_assign_with_key_value(args[0], args[1]);\r\n        }\r\n        else if (args.length === 3) {\r\n            // INSERT OR ASSIGN AN ELEMENT\r\n            return this._Insert_or_assign_with_hint(args[0], args[1], args[2]);\r\n        }\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_key_value = function (key, value) {\r\n        var ret = this.emplace(key, value);\r\n        if (ret.second === false)\r\n            ret.first.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_hint = function (hint, key, value) {\r\n        var ret = this.emplace_hint(hint, key, value);\r\n        if (ret.second !== value)\r\n            ret.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_key(param);\r\n    };\r\n    UniqueMap.prototype._Extract_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        var ret = it.value;\r\n        this._Erase_by_range(it);\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueMap.prototype._Erase_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());)\r\n            if (this.has(it.first) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n    };\r\n    return UniqueMap;\r\n}(MapContainer_1.MapContainer));\r\nexports.UniqueMap = UniqueMap;\r\n//# sourceMappingURL=UniqueMap.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic map container.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link MapContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapContainer = /** @class */ (function (_super) {\r\n    __extends(MapContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function MapContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this.insert(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    MapContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this.emplace(args[0].first, args[0].second);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this.emplace_hint(args[0], args[1].first, args[1].second);\r\n    };\r\n    MapContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            (args[0] instanceof this.end().constructor === false ||\r\n                args[0].source() !== this))\r\n            return this._Erase_by_key(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    MapContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return MapContainer;\r\n}(Container_1.Container));\r\nexports.MapContainer = MapContainer;\r\n//# sourceMappingURL=MapContainer.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueMap_1 = require(\"../base/container/UniqueMap\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar MapElementList_1 = require(\"../internal/container/associative/MapElementList\");\r\nvar MapHashBuckets_1 = require(\"../internal/hash/MapHashBuckets\");\r\nvar Entry_1 = require(\"../utility/Entry\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Map based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashMap = /** @class */ (function (_super) {\r\n    __extends(HashMap, _super);\r\n    function HashMap() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new MapElementList_1.MapElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashMap,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new MapHashBuckets_1.MapHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        MapElementList_1.MapElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        MapHashBuckets_1.MapHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashMap.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashMap.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashMap.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashMap.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_size = function (index) {\r\n        return this.buckets_.at(index).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashMap.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace = function (key, val) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(new Entry_1.Entry(key, val));\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace_hint = function (hint, key, val) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, new Entry_1.Entry(key, val));\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashMap.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashMap.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashMap;\r\n}(UniqueMap_1.UniqueMap));\r\nexports.HashMap = HashMap;\r\n/**\r\n *\r\n */\r\n(function (HashMap) {\r\n    // BODY\r\n    HashMap.Iterator = MapElementList_1.MapElementList.Iterator;\r\n    HashMap.ReverseIterator = MapElementList_1.MapElementList.ReverseIterator;\r\n})(HashMap = exports.HashMap || (exports.HashMap = {}));\r\nexports.HashMap = HashMap;\r\n//# sourceMappingURL=HashMap.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing map elements.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapElementList = /** @class */ (function (_super) {\r\n    __extends(MapElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function MapElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    MapElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return MapElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    MapElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    MapElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return MapElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.MapElementList = MapElementList;\r\n/**\r\n *\r\n */\r\n(function (MapElementList) {\r\n    /**\r\n     * Iterator of map container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.list_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.list_.associative();\r\n        };\r\n        Object.defineProperty(Iterator.prototype, \"first\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Iterator.prototype, \"second\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.second;\r\n            },\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            set: function (val) {\r\n                this.value.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    MapElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverse iterator of map container storing elements a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        Object.defineProperty(ReverseIterator.prototype, \"first\", {\r\n            /* ---------------------------------------------------------\r\n                ACCESSORS\r\n            --------------------------------------------------------- */\r\n            /**\r\n             * Get the first, key element.\r\n             *\r\n             * @return The first element.\r\n             */\r\n            get: function () {\r\n                return this.base_.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ReverseIterator.prototype, \"second\", {\r\n            /**\r\n             * Get the second, stored element.\r\n             *\r\n             * @return The second element.\r\n             */\r\n            get: function () {\r\n                return this.base_.second;\r\n            },\r\n            /**\r\n             * Set the second, stored element.\r\n             *\r\n             * @param val The value to set.\r\n             */\r\n            set: function (val) {\r\n                this.base_.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    MapElementList.ReverseIterator = ReverseIterator;\r\n})(MapElementList = exports.MapElementList || (exports.MapElementList = {}));\r\nexports.MapElementList = MapElementList;\r\n//# sourceMappingURL=MapElementList.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for map containers.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapHashBuckets = /** @class */ (function (_super) {\r\n    __extends(MapHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source map container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function MapHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    MapHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    MapHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    MapHashBuckets.prototype.find = function (key) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(key) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.first, key))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return MapHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.MapHashBuckets = MapHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.first;\r\n}\r\n//# sourceMappingURL=MapHashBuckets.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Entry = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Entry for mapping.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Entry = /** @class */ (function () {\r\n    /**\r\n     * Intializer Constructor.\r\n     *\r\n     * @param first The first, key element.\r\n     * @param second The second, mapped element.\r\n     */\r\n    function Entry(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.equals = function (obj) {\r\n        return (0, comparators_1.equal_to)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.less = function (obj) {\r\n        return (0, comparators_1.less)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first);\r\n    };\r\n    return Entry;\r\n}());\r\nexports.Entry = Entry;\r\n//# sourceMappingURL=Entry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event = /** @class */ (function () {\r\n    function Event(type, init) {\r\n        this.type = type;\r\n        if (init)\r\n            Object.assign(this, init);\r\n    }\r\n    return Event;\r\n}());\r\nexports.Event = Event;\r\n//# sourceMappingURL=Event.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar node_1 = require(\"tstl/utility/node\");\r\nif (node_1.is_node())\r\n    global.WebSocket = require(\"./WebSocket\").WebSocket;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar websocket_1 = require(\"websocket\");\r\nvar EventTarget_1 = require(\"./events/EventTarget\");\r\nvar Event_1 = require(\"./events/Event\");\r\nvar CloseEvent_1 = require(\"./events/CloseEvent\");\r\nvar MessageEvent_1 = require(\"./events/MessageEvent\");\r\nvar ErrorEvent_1 = require(\"./events/ErrorEvent\");\r\nvar WebSocket = /** @class */ (function (_super) {\r\n    __extends(WebSocket, _super);\r\n    /* ----------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    ---------------------------------------------------------------- */\r\n    function WebSocket(url, protocols) {\r\n        var _this = _super.call(this) || this;\r\n        _this.on_ = {};\r\n        _this.state_ = WebSocket.CONNECTING;\r\n        //----\r\n        // CLIENT\r\n        //----\r\n        // PREPARE SOCKET\r\n        _this.client_ = new websocket_1.client();\r\n        _this.client_.on(\"connect\", _this._Handle_connect.bind(_this));\r\n        _this.client_.on(\"connectFailed\", _this._Handle_error.bind(_this));\r\n        if (typeof protocols === \"string\")\r\n            protocols = [protocols];\r\n        // DO CONNECT\r\n        _this.client_.connect(url, protocols);\r\n        return _this;\r\n    }\r\n    WebSocket.prototype.close = function (code, reason) {\r\n        this.state_ = WebSocket.CLOSING;\r\n        if (code === undefined)\r\n            this.connection_.sendCloseFrame();\r\n        else\r\n            this.connection_.sendCloseFrame(code, reason, true);\r\n    };\r\n    /* ================================================================\r\n        ACCESSORS\r\n            - SENDER\r\n            - PROPERTIES\r\n            - LISTENERS\r\n    ===================================================================\r\n        SENDER\r\n    ---------------------------------------------------------------- */\r\n    WebSocket.prototype.send = function (data) {\r\n        if (typeof data.valueOf() === \"string\")\r\n            this.connection_.sendUTF(data);\r\n        else {\r\n            var buffer = void 0;\r\n            if (data instanceof Buffer)\r\n                buffer = data;\r\n            else if (data instanceof Blob)\r\n                buffer = new Buffer(data, \"blob\");\r\n            else if (data.buffer)\r\n                buffer = new Buffer(data.buffer);\r\n            else\r\n                buffer = new Buffer(data);\r\n            this.connection_.sendBytes(buffer);\r\n        }\r\n    };\r\n    Object.defineProperty(WebSocket.prototype, \"url\", {\r\n        /* ----------------------------------------------------------------\r\n            PROPERTIES\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.client_.url.href;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"protocol\", {\r\n        get: function () {\r\n            return this.client_.protocols\r\n                ? this.client_.protocols[0]\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"extensions\", {\r\n        get: function () {\r\n            return this.connection_ && this.connection_.extensions\r\n                ? this.connection_.extensions[0].name\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"readyState\", {\r\n        get: function () {\r\n            return this.state_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"bufferedAmount\", {\r\n        get: function () {\r\n            return this.connection_.bytesWaitingToFlush;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return \"arraybuffer\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onopen\", {\r\n        /* ----------------------------------------------------------------\r\n            LISTENERS\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.on_.open;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"open\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onclose\", {\r\n        get: function () {\r\n            return this.on_.close;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"close\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onmessage\", {\r\n        get: function () {\r\n            return this.on_.message;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"message\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onerror\", {\r\n        get: function () {\r\n            return this.on_.error;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"error\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Set_on = function (type, listener) {\r\n        if (this.on_[type])\r\n            this.removeEventListener(type, this.on_[type]);\r\n        this.addEventListener(type, listener);\r\n        this.on_[type] = listener;\r\n    };\r\n    /* ----------------------------------------------------------------\r\n        SOCKET HANDLERS\r\n    ---------------------------------------------------------------- */\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_connect = function (connection) {\r\n        this.connection_ = connection;\r\n        this.state_ = WebSocket.OPEN;\r\n        this.connection_.on(\"message\", this._Handle_message.bind(this));\r\n        this.connection_.on(\"error\", this._Handle_error.bind(this));\r\n        this.connection_.on(\"close\", this._Handle_close.bind(this));\r\n        var event = new Event_1.Event(\"open\", EVENT_INIT);\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_close = function (code, reason) {\r\n        var event = new CloseEvent_1.CloseEvent(\"close\", __assign({}, EVENT_INIT, { code: code, reason: reason }));\r\n        this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_message = function (message) {\r\n        var event = new MessageEvent_1.MessageEvent(\"message\", __assign({}, EVENT_INIT, { data: message.binaryData\r\n                ? message.binaryData\r\n                : message.utf8Data }));\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_error = function (error) {\r\n        var event = new ErrorEvent_1.ErrorEvent(\"error\", __assign({}, EVENT_INIT, { error: error, message: error.message }));\r\n        if (this.state_ === WebSocket.CONNECTING)\r\n            this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    return WebSocket;\r\n}(EventTarget_1.EventTarget));\r\nexports.WebSocket = WebSocket;\r\n(function (WebSocket) {\r\n    WebSocket.CONNECTING = 0;\r\n    WebSocket.OPEN = 1;\r\n    WebSocket.CLOSING = 2;\r\n    WebSocket.CLOSED = 3;\r\n})(WebSocket = exports.WebSocket || (exports.WebSocket = {}));\r\nexports.WebSocket = WebSocket;\r\nvar EVENT_INIT = {\r\n    bubbles: false,\r\n    cancelable: false\r\n};\r\n//# sourceMappingURL=WebSocket.js.map","\"use strict\";\r\nvar __values = (this && this.__values) || function (o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar HashSet_1 = require(\"tstl/container/HashSet\");\r\nvar HashMap_1 = require(\"tstl/container/HashMap\");\r\nvar EventTarget = /** @class */ (function () {\r\n    function EventTarget() {\r\n        this.listeners_ = new HashMap_1.HashMap();\r\n        this.created_at_ = new Date();\r\n    }\r\n    EventTarget.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        // FIND LISTENERS\r\n        var it = this.listeners_.find(event.type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        // SET DEFAULT ARGUMENTS\r\n        event.target = this;\r\n        event.timeStamp = new Date().getTime() - this.created_at_.getTime();\r\n        try {\r\n            // CALL THE LISTENERS\r\n            for (var _b = __values(it.second), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var listener = _c.value;\r\n                listener(event);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    EventTarget.prototype.addEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            it = this.listeners_.emplace(type, new HashSet_1.HashSet()).first;\r\n        it.second.insert(listener);\r\n    };\r\n    EventTarget.prototype.removeEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        it.second.erase(listener);\r\n        if (it.second.empty())\r\n            this.listeners_.erase(it);\r\n    };\r\n    return EventTarget;\r\n}());\r\nexports.EventTarget = EventTarget;\r\n//# sourceMappingURL=EventTarget.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return CloseEvent;\r\n}(Event_1.Event));\r\nexports.CloseEvent = CloseEvent;\r\n//# sourceMappingURL=CloseEvent.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar MessageEvent = /** @class */ (function (_super) {\r\n    __extends(MessageEvent, _super);\r\n    function MessageEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return MessageEvent;\r\n}(Event_1.Event));\r\nexports.MessageEvent = MessageEvent;\r\n//# sourceMappingURL=MessageEvent.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event_1.Event));\r\nexports.ErrorEvent = ErrorEvent;\r\n//# sourceMappingURL=ErrorEvent.js.map","const {bech32, hex, utf8} = require('@scure/base')\n\n// defaults for encode; default timestamp is current time at call\nconst DEFAULTNETWORK = {\n  // default network is bitcoin\n  bech32: 'bc',\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  validWitnessVersions: [0]\n}\nconst TESTNETWORK = {\n  bech32: 'tb',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst REGTESTNETWORK = {\n  bech32: 'bcrt',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst SIMNETWORK = {\n  bech32: 'sb',\n  pubKeyHash: 0x3f,\n  scriptHash: 0x7b,\n  validWitnessVersions: [0]\n}\n\nconst FEATUREBIT_ORDER = [\n  'option_data_loss_protect',\n  'initial_routing_sync',\n  'option_upfront_shutdown_script',\n  'gossip_queries',\n  'var_onion_optin',\n  'gossip_queries_ex',\n  'option_static_remotekey',\n  'payment_secret',\n  'basic_mpp',\n  'option_support_large_channel'\n]\n\nconst DIVISORS = {\n  m: BigInt(1e3),\n  u: BigInt(1e6),\n  n: BigInt(1e9),\n  p: BigInt(1e12)\n}\n\nconst MAX_MILLISATS = BigInt('2100000000000000000')\n\nconst MILLISATS_PER_BTC = BigInt(1e11)\n\nconst TAGCODES = {\n  payment_hash: 1,\n  payment_secret: 16,\n  description: 13,\n  payee: 19,\n  description_hash: 23, // commit to longer descriptions (used by lnurl-pay)\n  expiry: 6, // default: 3600 (1 hour)\n  min_final_cltv_expiry: 24, // default: 9\n  fallback_address: 9,\n  route_hint: 3, // for extra routing info (private etc.)\n  feature_bits: 5,\n  metadata: 27\n}\n\n// reverse the keys and values of TAGCODES and insert into TAGNAMES\nconst TAGNAMES = {}\nfor (let i = 0, keys = Object.keys(TAGCODES); i < keys.length; i++) {\n  const currentName = keys[i]\n  const currentCode = TAGCODES[keys[i]].toString()\n  TAGNAMES[currentCode] = currentName\n}\n\nconst TAGPARSERS = {\n  1: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  16: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  13: words => utf8.encode(bech32.fromWordsUnsafe(words)), // string variable length\n  19: words => hex.encode(bech32.fromWordsUnsafe(words)), // 264 bits\n  23: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  27: words => hex.encode(bech32.fromWordsUnsafe(words)), // variable\n  6: wordsToIntBE, // default: 3600 (1 hour)\n  24: wordsToIntBE, // default: 9\n  3: routingInfoParser, // for extra routing info (private etc.)\n  5: featureBitsParser // keep feature bits as array of 5 bit words\n}\n\nfunction getUnknownParser(tagCode) {\n  return words => ({\n    tagCode: parseInt(tagCode),\n    words: bech32.encode('unknown', words, Number.MAX_SAFE_INTEGER)\n  })\n}\n\nfunction wordsToIntBE(words) {\n  return words.reverse().reduce((total, item, index) => {\n    return total + item * Math.pow(32, index)\n  }, 0)\n}\n\n// first convert from words to buffer, trimming padding where necessary\n// parse in 51 byte chunks. See encoder for details.\nfunction routingInfoParser(words) {\n  const routes = []\n  let pubkey,\n    shortChannelId,\n    feeBaseMSats,\n    feeProportionalMillionths,\n    cltvExpiryDelta\n  let routesBuffer = bech32.fromWordsUnsafe(words)\n  while (routesBuffer.length > 0) {\n    pubkey = hex.encode(routesBuffer.slice(0, 33)) // 33 bytes\n    shortChannelId = hex.encode(routesBuffer.slice(33, 41)) // 8 bytes\n    feeBaseMSats = parseInt(hex.encode(routesBuffer.slice(41, 45)), 16) // 4 bytes\n    feeProportionalMillionths = parseInt(\n      hex.encode(routesBuffer.slice(45, 49)),\n      16\n    ) // 4 bytes\n    cltvExpiryDelta = parseInt(hex.encode(routesBuffer.slice(49, 51)), 16) // 2 bytes\n\n    routesBuffer = routesBuffer.slice(51)\n\n    routes.push({\n      pubkey,\n      short_channel_id: shortChannelId,\n      fee_base_msat: feeBaseMSats,\n      fee_proportional_millionths: feeProportionalMillionths,\n      cltv_expiry_delta: cltvExpiryDelta\n    })\n  }\n  return routes\n}\n\nfunction featureBitsParser(words) {\n  const bools = words\n    .slice()\n    .reverse()\n    .map(word => [\n      !!(word & 0b1),\n      !!(word & 0b10),\n      !!(word & 0b100),\n      !!(word & 0b1000),\n      !!(word & 0b10000)\n    ])\n    .reduce((finalArr, itemArr) => finalArr.concat(itemArr), [])\n  while (bools.length < FEATUREBIT_ORDER.length * 2) {\n    bools.push(false)\n  }\n\n  const featureBits = {}\n\n  FEATUREBIT_ORDER.forEach((featureName, index) => {\n    let status\n    if (bools[index * 2]) {\n      status = 'required'\n    } else if (bools[index * 2 + 1]) {\n      status = 'supported'\n    } else {\n      status = 'unsupported'\n    }\n    featureBits[featureName] = status\n  })\n\n  const extraBits = bools.slice(FEATUREBIT_ORDER.length * 2)\n  featureBits.extra_bits = {\n    start_bit: FEATUREBIT_ORDER.length * 2,\n    bits: extraBits,\n    has_required: extraBits.reduce(\n      (result, bit, index) =>\n        index % 2 !== 0 ? result || false : result || bit,\n      false\n    )\n  }\n\n  return featureBits\n}\n\nfunction hrpToMillisat(hrpString, outputString) {\n  let divisor, value\n  if (hrpString.slice(-1).match(/^[munp]$/)) {\n    divisor = hrpString.slice(-1)\n    value = hrpString.slice(0, -1)\n  } else if (hrpString.slice(-1).match(/^[^munp0-9]$/)) {\n    throw new Error('Not a valid multiplier for the amount')\n  } else {\n    value = hrpString\n  }\n\n  if (!value.match(/^\\d+$/))\n    throw new Error('Not a valid human readable amount')\n\n  const valueBN = BigInt(value)\n\n  const millisatoshisBN = divisor\n    ? (valueBN * MILLISATS_PER_BTC) / DIVISORS[divisor]\n    : valueBN * MILLISATS_PER_BTC\n\n  if (\n    (divisor === 'p' && !(valueBN % BigInt(10) === BigInt(0))) ||\n    millisatoshisBN > MAX_MILLISATS\n  ) {\n    throw new Error('Amount is outside of valid range')\n  }\n\n  return outputString ? millisatoshisBN.toString() : millisatoshisBN\n}\n\n// decode will only have extra comments that aren't covered in encode comments.\n// also if anything is hard to read I'll comment.\nfunction decode(paymentRequest, network) {\n  if (typeof paymentRequest !== 'string')\n    throw new Error('Lightning Payment Request must be string')\n  if (paymentRequest.slice(0, 2).toLowerCase() !== 'ln')\n    throw new Error('Not a proper lightning payment request')\n\n  const sections = []\n  const decoded = bech32.decode(paymentRequest, Number.MAX_SAFE_INTEGER)\n  paymentRequest = paymentRequest.toLowerCase()\n  const prefix = decoded.prefix\n  let words = decoded.words\n  let letters = paymentRequest.slice(prefix.length + 1)\n  let sigWords = words.slice(-104)\n  words = words.slice(0, -104)\n\n  // Without reverse lookups, can't say that the multipier at the end must\n  // have a number before it, so instead we parse, and if the second group\n  // doesn't have anything, there's a good chance the last letter of the\n  // coin type got captured by the third group, so just re-regex without\n  // the number.\n  let prefixMatches = prefix.match(/^ln(\\S+?)(\\d*)([a-zA-Z]?)$/)\n  if (prefixMatches && !prefixMatches[2])\n    prefixMatches = prefix.match(/^ln(\\S+)$/)\n  if (!prefixMatches) {\n    throw new Error('Not a proper lightning payment request')\n  }\n\n  // \"ln\" section\n  sections.push({\n    name: 'lightning_network',\n    letters: 'ln'\n  })\n\n  // \"bc\" section\n  const bech32Prefix = prefixMatches[1]\n  let coinNetwork\n  if (!network) {\n    switch (bech32Prefix) {\n      case DEFAULTNETWORK.bech32:\n        coinNetwork = DEFAULTNETWORK\n        break\n      case TESTNETWORK.bech32:\n        coinNetwork = TESTNETWORK\n        break\n      case REGTESTNETWORK.bech32:\n        coinNetwork = REGTESTNETWORK\n        break\n      case SIMNETWORK.bech32:\n        coinNetwork = SIMNETWORK\n        break\n    }\n  } else {\n    if (\n      network.bech32 === undefined ||\n      network.pubKeyHash === undefined ||\n      network.scriptHash === undefined ||\n      !Array.isArray(network.validWitnessVersions)\n    )\n      throw new Error('Invalid network')\n    coinNetwork = network\n  }\n  if (!coinNetwork || coinNetwork.bech32 !== bech32Prefix) {\n    throw new Error('Unknown coin bech32 prefix')\n  }\n  sections.push({\n    name: 'coin_network',\n    letters: bech32Prefix,\n    value: coinNetwork\n  })\n\n  // amount section\n  const value = prefixMatches[2]\n  let millisatoshis\n  if (value) {\n    const divisor = prefixMatches[3]\n    millisatoshis = hrpToMillisat(value + divisor, true)\n    sections.push({\n      name: 'amount',\n      letters: prefixMatches[2] + prefixMatches[3],\n      value: millisatoshis\n    })\n  } else {\n    millisatoshis = null\n  }\n\n  // \"1\" separator\n  sections.push({\n    name: 'separator',\n    letters: '1'\n  })\n\n  // timestamp\n  const timestamp = wordsToIntBE(words.slice(0, 7))\n  words = words.slice(7) // trim off the left 7 words\n  sections.push({\n    name: 'timestamp',\n    letters: letters.slice(0, 7),\n    value: timestamp\n  })\n  letters = letters.slice(7)\n\n  let tagName, parser, tagLength, tagWords\n  // we have no tag count to go on, so just keep hacking off words\n  // until we have none.\n  while (words.length > 0) {\n    const tagCode = words[0].toString()\n    tagName = TAGNAMES[tagCode] || 'unknown_tag'\n    parser = TAGPARSERS[tagCode] || getUnknownParser(tagCode)\n    words = words.slice(1)\n\n    tagLength = wordsToIntBE(words.slice(0, 2))\n    words = words.slice(2)\n\n    tagWords = words.slice(0, tagLength)\n    words = words.slice(tagLength)\n\n    sections.push({\n      name: tagName,\n      tag: letters[0],\n      letters: letters.slice(0, 1 + 2 + tagLength),\n      value: parser(tagWords) // see: parsers for more comments\n    })\n    letters = letters.slice(1 + 2 + tagLength)\n  }\n\n  // signature\n  sections.push({\n    name: 'signature',\n    letters: letters.slice(0, 104),\n    value: hex.encode(bech32.fromWordsUnsafe(sigWords))\n  })\n  letters = letters.slice(104)\n\n  // checksum\n  sections.push({\n    name: 'checksum',\n    letters: letters\n  })\n\n  let result = {\n    paymentRequest,\n    sections,\n\n    get expiry() {\n      let exp = sections.find(s => s.name === 'expiry')\n      if (exp) return getValue('timestamp') + exp.value\n    },\n\n    get route_hints() {\n      return sections.filter(s => s.name === 'route_hint').map(s => s.value)\n    }\n  }\n\n  for (let name in TAGCODES) {\n    if (name === 'route_hint') {\n      // route hints can be multiple, so this won't work for them\n      continue\n    }\n\n    Object.defineProperty(result, name, {\n      get() {\n        return getValue(name)\n      }\n    })\n  }\n\n  return result\n\n  function getValue(name) {\n    let section = sections.find(s => s.name === name)\n    return section ? section.value : undefined\n  }\n}\n\nmodule.exports = {\n  decode,\n  hrpToMillisat\n}\n","// src/index.ts\nimport debug2 from \"debug\";\nimport EventEmitter7 from \"eventemitter3\";\n\n// src/events/dedup.ts\nfunction dedup(event1, event2) {\n  if (event1.created_at > event2.created_at) {\n    return event1;\n  }\n  return event2;\n}\n\n// src/events/index.ts\nimport EventEmitter2 from \"eventemitter3\";\nimport { getEventHash } from \"nostr-tools\";\n\n// src/zap/index.ts\nimport { bech32 } from \"@scure/base\";\nimport EventEmitter from \"eventemitter3\";\nimport { nip57 } from \"nostr-tools\";\nvar Zap = class extends EventEmitter {\n  ndk;\n  zappedEvent;\n  zappedUser;\n  constructor(args) {\n    super();\n    this.ndk = args.ndk;\n    this.zappedEvent = args.zappedEvent;\n    this.zappedUser = args.zappedUser || this.ndk.getUser({ hexpubkey: this.zappedEvent.pubkey });\n  }\n  async getZapEndpoint() {\n    let lud06;\n    let lud16;\n    let zapEndpoint;\n    let zapEndpointCallback;\n    if (this.zappedEvent) {\n      const zapTag = (await this.zappedEvent.getMatchingTags(\"zap\"))[0];\n      if (zapTag) {\n        switch (zapTag[2]) {\n          case \"lud06\":\n            lud06 = zapTag[1];\n            break;\n          case \"lud16\":\n            lud16 = zapTag[1];\n            break;\n          default:\n            throw new Error(`Unknown zap tag ${zapTag}`);\n        }\n      }\n    }\n    if (this.zappedUser && !lud06 && !lud16) {\n      if (!this.zappedUser.profile) {\n        await this.zappedUser.fetchProfile();\n      }\n      lud06 = (this.zappedUser.profile || {}).lud06;\n      lud16 = (this.zappedUser.profile || {}).lud16;\n    }\n    if (lud16) {\n      const [name, domain] = lud16.split(\"@\");\n      zapEndpoint = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else if (lud06) {\n      const { words } = bech32.decode(lud06, 1e3);\n      const data = bech32.fromWords(words);\n      const utf8Decoder = new TextDecoder(\"utf-8\");\n      zapEndpoint = utf8Decoder.decode(data);\n    }\n    if (!zapEndpoint) {\n      throw new Error(\"No zap endpoint found\");\n    }\n    const response = await fetch(zapEndpoint);\n    const body = await response.json();\n    if (body?.allowsNostr && (body?.nostrPubkey || body?.nostrPubKey)) {\n      zapEndpointCallback = body.callback;\n    }\n    return zapEndpointCallback;\n  }\n  async createZapRequest(amount, comment, extraTags) {\n    const zapEndpoint = await this.getZapEndpoint();\n    if (!zapEndpoint) {\n      throw new Error(\"No zap endpoint found\");\n    }\n    if (!this.zappedEvent)\n      throw new Error(\"No zapped event found\");\n    const zapRequest = nip57.makeZapRequest({\n      profile: this.zappedUser.hexpubkey(),\n      // set the event to null since nostr-tools doesn't support nip-33 zaps\n      event: null,\n      amount,\n      comment: comment || \"\",\n      relays: [\n        \"wss://nos.lol\",\n        \"wss://relay.nostr.band\",\n        \"wss://relay.f7z.io\",\n        \"wss://relay.damus.io\",\n        \"wss://nostr.mom\",\n        \"wss://no.str.cr\"\n      ]\n      // TODO: fix this\n    });\n    if (this.zappedEvent) {\n      const tag = this.zappedEvent.tagReference();\n      if (tag) {\n        zapRequest.tags.push(tag);\n      }\n    }\n    zapRequest.tags.push([\"lnurl\", zapEndpoint]);\n    const zapRequestEvent = new NDKEvent(this.ndk, zapRequest);\n    if (extraTags) {\n      zapRequestEvent.tags = zapRequestEvent.tags.concat(extraTags);\n    }\n    await zapRequestEvent.sign();\n    const zapRequestNostrEvent = await zapRequestEvent.toNostrEvent();\n    const response = await fetch(\n      `${zapEndpoint}?` + new URLSearchParams({\n        amount: amount.toString(),\n        nostr: JSON.stringify(zapRequestNostrEvent)\n      })\n    );\n    const body = await response.json();\n    return body.pr;\n  }\n};\n\n// src/events/content-tagger.ts\nimport { nip19 } from \"nostr-tools\";\nfunction generateContentTags(content, tags = []) {\n  const tagRegex = /(@|nostr:)(npub|nprofile|note|nevent)[a-zA-Z0-9]+/g;\n  content = content.replace(tagRegex, (tag) => {\n    try {\n      const entity = tag.split(/(@|nostr:)/)[2];\n      const { type, data } = nip19.decode(entity);\n      let t;\n      switch (type) {\n        case \"npub\":\n          t = [\"p\", data];\n          break;\n        case \"nprofile\":\n          t = [\"p\", data.pubkey];\n          break;\n        case \"nevent\":\n          t = [\"e\", data.id];\n          break;\n        case \"note\":\n          t = [\"e\", data];\n          break;\n        default:\n          return tag;\n      }\n      if (!tags.find((t2) => t2[0] === t2[0] && t2[1] === t2[1])) {\n        tags.push(t);\n      }\n      return `nostr:${entity}`;\n    } catch (error) {\n      return tag;\n    }\n  });\n  return { content, tags };\n}\n\n// src/events/kind.ts\nvar NDKKind = /* @__PURE__ */ ((NDKKind2) => {\n  NDKKind2[NDKKind2[\"Metadata\"] = 0] = \"Metadata\";\n  NDKKind2[NDKKind2[\"Text\"] = 1] = \"Text\";\n  NDKKind2[NDKKind2[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  NDKKind2[NDKKind2[\"Contacts\"] = 3] = \"Contacts\";\n  NDKKind2[NDKKind2[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  NDKKind2[NDKKind2[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  NDKKind2[NDKKind2[\"Repost\"] = 6] = \"Repost\";\n  NDKKind2[NDKKind2[\"Reaction\"] = 7] = \"Reaction\";\n  NDKKind2[NDKKind2[\"BadgeAward\"] = 8] = \"BadgeAward\";\n  NDKKind2[NDKKind2[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  NDKKind2[NDKKind2[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  NDKKind2[NDKKind2[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  NDKKind2[NDKKind2[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  NDKKind2[NDKKind2[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  NDKKind2[NDKKind2[\"Report\"] = 1984] = \"Report\";\n  NDKKind2[NDKKind2[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  NDKKind2[NDKKind2[\"Zap\"] = 9735] = \"Zap\";\n  NDKKind2[NDKKind2[\"MuteList\"] = 1e4] = \"MuteList\";\n  NDKKind2[NDKKind2[\"PinList\"] = 10001] = \"PinList\";\n  NDKKind2[NDKKind2[\"RelayList\"] = 10002] = \"RelayList\";\n  NDKKind2[NDKKind2[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  NDKKind2[NDKKind2[\"NostrConnect\"] = 24133] = \"NostrConnect\";\n  NDKKind2[NDKKind2[\"CategorizedPeopleList\"] = 3e4] = \"CategorizedPeopleList\";\n  NDKKind2[NDKKind2[\"CategorizedBookmarkList\"] = 30001] = \"CategorizedBookmarkList\";\n  NDKKind2[NDKKind2[\"ProfileBadge\"] = 30008] = \"ProfileBadge\";\n  NDKKind2[NDKKind2[\"BadgeDefinition\"] = 30009] = \"BadgeDefinition\";\n  NDKKind2[NDKKind2[\"Article\"] = 30023] = \"Article\";\n  NDKKind2[NDKKind2[\"AppSpecificData\"] = 30078] = \"AppSpecificData\";\n  return NDKKind2;\n})(NDKKind || {});\nfunction isReplaceable() {\n  if (this.kind === void 0)\n    throw new Error(\"Kind not set\");\n  return this.kind >= 1e4 && this.kind < 2e4;\n}\nfunction isParamReplaceable() {\n  if (this.kind === void 0)\n    throw new Error(\"Kind not set\");\n  return this.kind >= 3e4 && this.kind < 4e4;\n}\n\n// src/user/index.ts\nimport { nip05, nip19 as nip193 } from \"nostr-tools\";\n\n// src/user/follows.ts\nimport { nip19 as nip192 } from \"nostr-tools\";\nasync function follows() {\n  if (!this.ndk)\n    throw new Error(\"NDK not set\");\n  const contactListEvents = await this.ndk.fetchEvents({\n    kinds: [3],\n    authors: [this.hexpubkey()]\n  });\n  if (contactListEvents) {\n    const npubs = /* @__PURE__ */ new Set();\n    contactListEvents.forEach((event) => {\n      event.tags.forEach((tag) => {\n        if (tag[0] === \"p\") {\n          try {\n            const npub = nip192.npubEncode(tag[1]);\n            npubs.add(npub);\n          } catch (e) {\n          }\n        }\n      });\n    });\n    return [...npubs].reduce((acc, npub) => {\n      const user = new NDKUser({ npub });\n      user.ndk = this.ndk;\n      acc.add(user);\n      return acc;\n    }, /* @__PURE__ */ new Set());\n  }\n  return /* @__PURE__ */ new Set();\n}\n\n// src/user/profile.ts\nfunction mergeEvent(event, profile) {\n  const payload = JSON.parse(event.content);\n  if (payload.name)\n    profile.name = payload.name;\n  if (payload.display_name)\n    profile.displayName = payload.display_name;\n  if (payload.displayName)\n    profile.displayName = payload.displayName;\n  if (payload.image)\n    profile.image = payload.image;\n  if (payload.picture)\n    profile.image = payload.picture;\n  if (payload.banner)\n    profile.banner = payload.banner;\n  if (payload.bio)\n    profile.bio = payload.bio;\n  if (payload.nip05)\n    profile.nip05 = payload.nip05;\n  if (payload.lud06)\n    profile.lud06 = payload.lud06;\n  if (payload.lud16)\n    profile.lud16 = payload.lud16;\n  if (payload.about)\n    profile.about = payload.about;\n  if (payload.zapService)\n    profile.zapService = payload.zapService;\n  return profile;\n}\n\n// src/user/index.ts\nvar NDKUser = class {\n  ndk;\n  profile;\n  npub = \"\";\n  relayUrls = [];\n  constructor(opts) {\n    if (opts.npub)\n      this.npub = opts.npub;\n    if (opts.hexpubkey) {\n      this.npub = nip193.npubEncode(opts.hexpubkey);\n    }\n    if (opts.relayUrls) {\n      this.relayUrls = opts.relayUrls;\n    }\n  }\n  static async fromNip05(nip05Id) {\n    const profile = await nip05.queryProfile(nip05Id);\n    if (profile) {\n      return new NDKUser({\n        hexpubkey: profile.pubkey,\n        relayUrls: profile.relays\n      });\n    }\n  }\n  hexpubkey() {\n    return nip193.decode(this.npub).data;\n  }\n  async fetchProfile(opts) {\n    if (!this.ndk)\n      throw new Error(\"NDK not set\");\n    if (!this.profile)\n      this.profile = {};\n    const setMetadataEvents = await this.ndk.fetchEvents(\n      {\n        kinds: [0],\n        authors: [this.hexpubkey()]\n      },\n      opts\n    );\n    if (setMetadataEvents) {\n      const sortedSetMetadataEvents = Array.from(setMetadataEvents).sort(\n        (a, b) => a.created_at - b.created_at\n      );\n      sortedSetMetadataEvents.forEach((event) => {\n        try {\n          this.profile = mergeEvent(event, this.profile);\n        } catch (e) {\n        }\n      });\n    }\n    return setMetadataEvents;\n  }\n  /**\n   * Returns a set of users that this user follows.\n   */\n  follows = follows.bind(this);\n  async relayList() {\n    if (!this.ndk)\n      throw new Error(\"NDK not set\");\n    const relayListEvents = await this.ndk.fetchEvents({\n      kinds: [10002],\n      authors: [this.hexpubkey()]\n    });\n    if (relayListEvents) {\n      return relayListEvents;\n    }\n    return /* @__PURE__ */ new Set();\n  }\n  /**\n   * Get the tag that can be used to reference this user in an event\n   * @returns\n   */\n  tagReference() {\n    return [\"p\", this.hexpubkey()];\n  }\n};\n\n// src/events/nip04.ts\nasync function encrypt(recipient, signer) {\n  if (!signer) {\n    if (!this.ndk) {\n      throw new Error(\"No signer available\");\n    }\n    await this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!recipient) {\n    const pTags = this.getMatchingTags(\"p\");\n    if (pTags.length !== 1) {\n      throw new Error(\"No recipient could be determined and no explicit recipient was provided\");\n    }\n    recipient = new NDKUser({ hexpubkey: pTags[0][1] });\n    recipient.ndk = this.ndk;\n  }\n  this.content = await signer.encrypt(recipient, this.content);\n}\nasync function decrypt(sender, signer) {\n  if (!signer) {\n    if (!this.ndk) {\n      throw new Error(\"No signer available\");\n    }\n    await this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!sender) {\n    sender = this.author;\n  }\n  this.content = await signer.decrypt(sender, this.content);\n}\n\n// src/events/nip19.ts\nimport { nip19 as nip194 } from \"nostr-tools\";\nfunction encode() {\n  if (this.isParamReplaceable()) {\n    return nip194.naddrEncode({\n      kind: this.kind,\n      pubkey: this.pubkey,\n      identifier: this.replaceableDTag()\n    });\n  } else {\n    return nip194.noteEncode(this.tagId());\n  }\n}\n\n// src/events/index.ts\nvar NDKEvent = class extends EventEmitter2 {\n  ndk;\n  created_at;\n  content = \"\";\n  tags = [];\n  kind;\n  id = \"\";\n  sig;\n  pubkey = \"\";\n  /**\n   * The relay that this event was first received from.\n   */\n  relay;\n  constructor(ndk, event) {\n    super();\n    this.ndk = ndk;\n    this.created_at = event?.created_at;\n    this.content = event?.content || \"\";\n    this.tags = event?.tags || [];\n    this.id = event?.id || \"\";\n    this.sig = event?.sig;\n    this.pubkey = event?.pubkey || \"\";\n    this.kind = event?.kind;\n  }\n  /**\n   * Returns the event as is.\n   */\n  rawEvent() {\n    return {\n      created_at: this.created_at,\n      content: this.content,\n      tags: this.tags,\n      kind: this.kind,\n      pubkey: this.pubkey,\n      id: this.id,\n      sig: this.sig\n    };\n  }\n  set author(user) {\n    this.pubkey = user.hexpubkey();\n  }\n  /**\n   * Returns an NDKUser for the author of the event.\n   */\n  get author() {\n    const user = new NDKUser({ hexpubkey: this.pubkey });\n    user.ndk = this.ndk;\n    return user;\n  }\n  tag(userOrEvent, marker) {\n    const tag = userOrEvent.tagReference();\n    if (marker)\n      tag.push(marker);\n    this.tags.push(tag);\n    if (userOrEvent instanceof NDKEvent) {\n      const tagEventAuthor = userOrEvent.author;\n      if (tagEventAuthor && this.pubkey !== tagEventAuthor.hexpubkey()) {\n        this.tag(tagEventAuthor);\n      }\n    }\n  }\n  /**\n   * Return a NostrEvent object, trying to fill in missing fields\n   * when possible, adding tags when necessary.\n   */\n  async toNostrEvent(pubkey) {\n    if (!pubkey && this.pubkey === \"\") {\n      const user = await this.ndk?.signer?.user();\n      this.pubkey = user?.hexpubkey() || \"\";\n    }\n    if (!this.created_at)\n      this.created_at = Math.floor(Date.now() / 1e3);\n    const nostrEvent = this.rawEvent();\n    const { content, tags } = this.generateTags();\n    nostrEvent.content = content || \"\";\n    nostrEvent.tags = tags;\n    try {\n      this.id = getEventHash(nostrEvent);\n    } catch (e) {\n    }\n    if (this.id)\n      nostrEvent.id = this.id;\n    if (this.sig)\n      nostrEvent.sig = this.sig;\n    return nostrEvent;\n  }\n  isReplaceable = isReplaceable.bind(this);\n  isParamReplaceable = isParamReplaceable.bind(this);\n  encode = encode.bind(this);\n  encrypt = encrypt.bind(this);\n  decrypt = decrypt.bind(this);\n  /**\n   * Get all tags with the given name\n   */\n  getMatchingTags(tagName) {\n    return this.tags.filter((tag) => tag[0] === tagName);\n  }\n  /**\n   * Get the first tag with the given name\n   * @param tagName Tag name to search for\n   * @returns The value of the first tag with the given name, or undefined if no such tag exists\n   */\n  tagValue(tagName) {\n    const tags = this.getMatchingTags(tagName);\n    if (tags.length === 0)\n      return void 0;\n    return tags[0][1];\n  }\n  /**\n   * Remove all tags with the given name\n   * @param tagName Tag name to search for\n   */\n  removeTag(tagName) {\n    this.tags = this.tags.filter((tag) => tag[0] !== tagName);\n  }\n  async toString() {\n    return await this.toNostrEvent();\n  }\n  /**\n   * Sign the event if a signer is present.\n   *\n   * It will generate tags.\n   * Repleacable events will have their created_at field set to the current time.\n   */\n  async sign(signer) {\n    signer || this.ndk?.assertSigner();\n    await this.generateTags();\n    if (this.isReplaceable()) {\n      this.created_at = Math.floor(Date.now() / 1e3);\n    }\n    const nostrEvent = await this.toNostrEvent();\n    const _signer = signer || this.ndk?.signer;\n    this.sig = await _signer.sign(nostrEvent);\n  }\n  async publish(relaySet) {\n    if (!this.sig)\n      await this.sign();\n    return this.ndk?.publish(this, relaySet);\n  }\n  generateTags() {\n    let tags = [];\n    const g = generateContentTags(this.content, this.tags);\n    const content = g.content;\n    tags = g.tags;\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTag = this.getMatchingTags(\"d\")[0];\n      if (!dTag) {\n        const str = [...Array(16)].map(() => Math.random().toString(36)[2]).join(\"\");\n        tags.push([\"d\", str]);\n      }\n    }\n    return { content: content || \"\", tags };\n  }\n  /**\n   * @returns the `d` tag of a parameterized replaceable event\n   */\n  replaceableDTag() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTag = this.getMatchingTags(\"d\")[0];\n      const dTagId = dTag ? dTag[1] : \"\";\n      return dTagId;\n    }\n    throw new Error(\"Event is not a parameterized replaceable event\");\n  }\n  /**\n   * @returns the id of the event, or if it's a parameterized event, the id of the event with the d tag\n   */\n  tagId() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTagId = this.replaceableDTag();\n      return `${this.kind}:${this.pubkey}:${dTagId}`;\n    }\n    return this.id;\n  }\n  /**\n   * Get the tag that can be used to reference this event from another event\n   * @example\n   *     event = new NDKEvent(ndk, { kind: 30000, pubkey: 'pubkey', tags: [ [\"d\", \"d-code\"] ] });\n   *     event.tagReference(); // [\"a\", \"30000:pubkey:d-code\"]\n   *\n   *     event = new NDKEvent(ndk, { kind: 1, pubkey: 'pubkey', id: \"eventid\" });\n   *     event.tagReference(); // [\"e\", \"eventid\"]\n   */\n  tagReference() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      return [\"a\", this.tagId()];\n    }\n    return [\"e\", this.tagId()];\n  }\n  /**\n   * Create a zap request for an existing event\n   *\n   * @param amount The amount to zap in millisatoshis\n   * @param comment A comment to add to the zap request\n   * @param extraTags Extra tags to add to the zap request\n   */\n  async zap(amount, comment, extraTags) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    const zap = new Zap({\n      ndk: this.ndk,\n      zappedEvent: this\n    });\n    const paymentRequest = await zap.createZapRequest(amount, comment, extraTags);\n    return paymentRequest;\n  }\n  /**\n   * Generates a deletion event of the current event\n   *\n   * @param reason The reason for the deletion\n   * @returns The deletion event\n   */\n  async delete(reason) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    const e = new NDKEvent(this.ndk, {\n      kind: 5 /* EventDeletion */,\n      content: reason || \"\"\n    });\n    e.tag(this);\n    await e.publish();\n    return e;\n  }\n};\n\n// src/relay/pool/index.ts\nimport EventEmitter4 from \"eventemitter3\";\n\n// src/relay/index.ts\nimport EventEmitter3 from \"eventemitter3\";\nimport { relayInit } from \"nostr-tools\";\nimport \"websocket-polyfill\";\nimport debug from \"debug\";\nvar NDKRelayStatus = /* @__PURE__ */ ((NDKRelayStatus2) => {\n  NDKRelayStatus2[NDKRelayStatus2[\"CONNECTING\"] = 0] = \"CONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"CONNECTED\"] = 1] = \"CONNECTED\";\n  NDKRelayStatus2[NDKRelayStatus2[\"DISCONNECTING\"] = 2] = \"DISCONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"DISCONNECTED\"] = 3] = \"DISCONNECTED\";\n  NDKRelayStatus2[NDKRelayStatus2[\"RECONNECTING\"] = 4] = \"RECONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"FLAPPING\"] = 5] = \"FLAPPING\";\n  return NDKRelayStatus2;\n})(NDKRelayStatus || {});\nvar NDKRelay2 = class extends EventEmitter3 {\n  url;\n  scores;\n  relay;\n  _status;\n  connectedAt;\n  _connectionStats = { attempts: 0, success: 0, durations: [] };\n  complaining = false;\n  debug;\n  /**\n   * Active subscriptions this relay is connected to\n   */\n  activeSubscriptions = /* @__PURE__ */ new Set();\n  constructor(url) {\n    super();\n    this.url = url;\n    this.relay = relayInit(url);\n    this.scores = /* @__PURE__ */ new Map();\n    this._status = 3 /* DISCONNECTED */;\n    this.debug = debug(`ndk:relay:${url}`);\n    this.relay.on(\"connect\", () => {\n      this.updateConnectionStats.connected();\n      this.emit(\"connect\");\n      this._status = 1 /* CONNECTED */;\n    });\n    this.relay.on(\"disconnect\", () => {\n      this.updateConnectionStats.disconnected();\n      this.emit(\"disconnect\");\n      if (this._status === 1 /* CONNECTED */) {\n        this._status = 3 /* DISCONNECTED */;\n        this.handleReconnection();\n      }\n    });\n    this.relay.on(\"notice\", (notice) => this.handleNotice(notice));\n  }\n  /**\n   * Evaluates the connection stats to determine if the relay is flapping.\n   */\n  isFlapping() {\n    const durations = this._connectionStats.durations;\n    if (durations.length < 10)\n      return false;\n    const sum = durations.reduce((a, b) => a + b, 0);\n    const avg = sum / durations.length;\n    const variance = durations.map((x) => Math.pow(x - avg, 2)).reduce((a, b) => a + b, 0) / durations.length;\n    const stdDev = Math.sqrt(variance);\n    const isFlapping = stdDev < 1e3;\n    return isFlapping;\n  }\n  /**\n   * Called when the relay is unexpectedly disconnected.\n   */\n  handleReconnection() {\n    if (this.isFlapping()) {\n      this.emit(\"flapping\", this, this._connectionStats);\n      this._status = 5 /* FLAPPING */;\n    }\n    if (this.connectedAt && Date.now() - this.connectedAt < 5e3) {\n      setTimeout(() => this.connect(), 6e4);\n    } else {\n      this.connect();\n    }\n  }\n  get status() {\n    return this._status;\n  }\n  /**\n   * Connects to the relay.\n   */\n  async connect() {\n    try {\n      this.updateConnectionStats.attempt();\n      this._status = 0 /* CONNECTING */;\n      await this.relay.connect();\n    } catch (e) {\n      this.debug(\"Failed to connect\", e);\n      this._status = 3 /* DISCONNECTED */;\n      throw e;\n    }\n  }\n  /**\n   * Disconnects from the relay.\n   */\n  disconnect() {\n    this._status = 2 /* DISCONNECTING */;\n    this.relay.close();\n  }\n  async handleNotice(notice) {\n    if (notice.includes(\"oo many\") || notice.includes(\"aximum\")) {\n      this.disconnect();\n      setTimeout(() => this.connect(), 2e3);\n      console.log(this.relay.url, \"Relay complaining?\", notice);\n    }\n    this.emit(\"notice\", this, notice);\n  }\n  /**\n   * Subscribes to a subscription.\n   */\n  subscribe(subscription) {\n    const { filter } = subscription;\n    const sub = this.relay.sub([filter], {\n      id: subscription.subId\n    });\n    this.debug(`Subscribed to ${JSON.stringify(filter)}`);\n    sub.on(\"event\", (event) => {\n      const e = new NDKEvent(void 0, event);\n      e.relay = this;\n      subscription.eventReceived(e, this);\n    });\n    sub.on(\"eose\", () => {\n      subscription.eoseReceived(this);\n    });\n    const unsub = sub.unsub;\n    sub.unsub = () => {\n      this.debug(`Unsubscribing from ${JSON.stringify(filter)}`);\n      this.activeSubscriptions.delete(subscription);\n      unsub();\n    };\n    this.activeSubscriptions.add(subscription);\n    subscription.on(\"close\", () => {\n      this.activeSubscriptions.delete(subscription);\n    });\n    return sub;\n  }\n  /**\n   * Publishes an event to the relay.\n   */\n  async publish(event) {\n    const nostrEvent = await event.toNostrEvent();\n    const a = this.relay.publish(nostrEvent);\n    a.on(\"failed\", (err) => {\n      this.debug(\"Publish failed\", err, event.rawEvent());\n    });\n    a.on(\"ok\", () => {\n      this.debug(\"Publish ok\", event.rawEvent());\n    });\n    this.debug(`Published event ${event.id}`, event.rawEvent());\n  }\n  /**\n   * Called when this relay has responded with an event but\n   * wasn't the fastest one.\n   * @param timeDiffInMs The time difference in ms between the fastest and this relay in milliseconds\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  scoreSlowerEvent(timeDiffInMs) {\n  }\n  /**\n   * Utility functions to update the connection stats.\n   */\n  updateConnectionStats = {\n    connected: () => {\n      this._connectionStats.success++;\n      this._connectionStats.connectedAt = Date.now();\n    },\n    disconnected: () => {\n      if (this._connectionStats.connectedAt) {\n        this._connectionStats.durations.push(\n          Date.now() - this._connectionStats.connectedAt\n        );\n        if (this._connectionStats.durations.length > 100) {\n          this._connectionStats.durations.shift();\n        }\n      }\n      this._connectionStats.connectedAt = void 0;\n    },\n    attempt: () => {\n      this._connectionStats.attempts++;\n    }\n  };\n  /**\n   * Returns the connection stats.\n   */\n  get connectionStats() {\n    return this._connectionStats;\n  }\n};\n\n// src/relay/pool/index.ts\nvar NDKPool = class extends EventEmitter4 {\n  relays = /* @__PURE__ */ new Map();\n  debug;\n  constructor(relayUrls = [], ndk) {\n    super();\n    this.debug = ndk.debug.extend(\"pool\");\n    for (const relayUrl of relayUrls) {\n      const relay = new NDKRelay2(relayUrl);\n      relay.on(\"notice\", (relay2, notice) => this.emit(\"notice\", relay2, notice));\n      relay.on(\"connect\", () => this.handleRelayConnect(relayUrl));\n      relay.on(\"disconnect\", () => this.emit(\"relay:disconnect\", relay));\n      relay.on(\"flapping\", () => this.handleFlapping(relay));\n      this.relays.set(relayUrl, relay);\n    }\n  }\n  handleRelayConnect(relayUrl) {\n    this.debug(`Relay ${relayUrl} connected`);\n    this.emit(\"relay:connect\", this.relays.get(relayUrl));\n    if (this.stats().connected === this.relays.size) {\n      this.emit(\"connect\");\n    }\n  }\n  /**\n   * Attempts to establish a connection to each relay in the pool.\n   *\n   * @async\n   * @param {number} [timeoutMs] - Optional timeout in milliseconds for each connection attempt.\n   * @returns {Promise<void>} A promise that resolves when all connection attempts have completed.\n   * @throws {Error} If any of the connection attempts result in an error or timeout.\n   */\n  async connect(timeoutMs) {\n    const promises = [];\n    this.debug(\n      `Connecting to ${this.relays.size} relays${timeoutMs ? `, timeout ${timeoutMs}...` : \"\"}`\n    );\n    for (const relay of this.relays.values()) {\n      if (timeoutMs) {\n        const timeoutPromise = new Promise((_, reject) => {\n          setTimeout(() => reject(`Timed out after ${timeoutMs}ms`), timeoutMs);\n        });\n        promises.push(\n          Promise.race([relay.connect(), timeoutPromise]).catch((e) => {\n            this.debug(`Failed to connect to relay ${relay.url}: ${e}`);\n          })\n        );\n      } else {\n        promises.push(relay.connect());\n      }\n    }\n    await Promise.all(promises);\n  }\n  handleFlapping(relay) {\n    this.debug(`Relay ${relay.url} is flapping`);\n    this.relays.delete(relay.url);\n    this.emit(\"flapping\", relay);\n  }\n  size() {\n    return this.relays.size;\n  }\n  /**\n   * Returns the status of each relay in the pool.\n   * @returns {NDKPoolStats} An object containing the number of relays in each status.\n   */\n  stats() {\n    const stats = {\n      total: 0,\n      connected: 0,\n      disconnected: 0,\n      connecting: 0\n    };\n    for (const relay of this.relays.values()) {\n      stats.total++;\n      if (relay.status === 1 /* CONNECTED */) {\n        stats.connected++;\n      } else if (relay.status === 3 /* DISCONNECTED */) {\n        stats.disconnected++;\n      } else if (relay.status === 0 /* CONNECTING */) {\n        stats.connecting++;\n      }\n    }\n    return stats;\n  }\n};\n\n// src/relay/sets/index.ts\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\n\n// src/subscription/index.ts\nimport EventEmitter5 from \"eventemitter3\";\nimport { matchFilter, nip19 as nip195 } from \"nostr-tools\";\nvar NDKSubscriptionCacheUsage = /* @__PURE__ */ ((NDKSubscriptionCacheUsage2) => {\n  NDKSubscriptionCacheUsage2[\"ONLY_CACHE\"] = \"ONLY_CACHE\";\n  NDKSubscriptionCacheUsage2[\"CACHE_FIRST\"] = \"CACHE_FIRST\";\n  NDKSubscriptionCacheUsage2[\"PARALLEL\"] = \"PARALLEL\";\n  NDKSubscriptionCacheUsage2[\"ONLY_RELAY\"] = \"ONLY_RELAY\";\n  return NDKSubscriptionCacheUsage2;\n})(NDKSubscriptionCacheUsage || {});\nvar defaultOpts = {\n  closeOnEose: true,\n  cacheUsage: \"CACHE_FIRST\" /* CACHE_FIRST */,\n  groupable: true,\n  groupableDelay: 100\n};\nvar NDKSubscription = class extends EventEmitter5 {\n  subId;\n  filter;\n  opts;\n  relaySet;\n  ndk;\n  relaySubscriptions;\n  debug;\n  /**\n   * Events that have been seen by the subscription, with the time they were first seen.\n   */\n  eventFirstSeen = /* @__PURE__ */ new Map();\n  /**\n   * Relays that have sent an EOSE.\n   */\n  eosesSeen = /* @__PURE__ */ new Set();\n  /**\n   * Events that have been seen by the subscription per relay.\n   */\n  eventsPerRelay = /* @__PURE__ */ new Map();\n  constructor(ndk, filter, opts, relaySet, subId) {\n    super();\n    this.ndk = ndk;\n    this.subId = subId || Math.floor(Math.random() * 9999991e3).toString();\n    this.filter = filter;\n    this.relaySet = relaySet;\n    this.opts = { ...defaultOpts, ...opts || {} };\n    this.relaySubscriptions = /* @__PURE__ */ new Map();\n    this.debug = ndk.debug.extend(\"subscription\");\n    if (this.opts.cacheUsage === \"ONLY_CACHE\" /* ONLY_CACHE */ && !this.opts.closeOnEose) {\n      throw new Error(\"Cannot use cache-only options with a persistent subscription\");\n    }\n  }\n  /**\n   * Calculates the groupable ID for this subscription.\n   *\n   * @returns The groupable ID, or null if the subscription is not groupable.\n   */\n  groupableId() {\n    if (!this.opts?.groupable) {\n      return null;\n    }\n    const hasKind = (this.filter.kinds?.length || 0) > 0;\n    const noTimeConstraints = !this.filter.since && !this.filter.until;\n    const noLimit = !this.filter.limit;\n    if (hasKind && noTimeConstraints && noLimit) {\n      let id = this.filter.kinds.join(\",\");\n      const keys = Object.keys(this.filter || {}).sort().join(\"-\");\n      id += `-${keys}`;\n      return id;\n    }\n    return null;\n  }\n  shouldQueryCache() {\n    return this.opts?.cacheUsage !== \"ONLY_RELAY\" /* ONLY_RELAY */;\n  }\n  shouldQueryRelays() {\n    return this.opts?.cacheUsage !== \"ONLY_CACHE\" /* ONLY_CACHE */;\n  }\n  /**\n   * Start the subscription. This is the main method that should be called\n   * after creating a subscription.\n   */\n  async start() {\n    let cachePromise;\n    if (this.shouldQueryCache()) {\n      cachePromise = this.startWithCache();\n      const shouldWaitForCache = this.ndk.cacheAdapter?.locking && this.shouldQueryRelays() && this.opts?.cacheUsage !== \"PARALLEL\" /* PARALLEL */;\n      if (shouldWaitForCache) {\n        this.debug(\"waiting for cache to finish\");\n        await cachePromise;\n        if (this.eventFirstSeen.size > 0) {\n          this.debug(\"cache hit, skipping relay query\");\n          this.emit(\"eose\", this);\n          return;\n        }\n      }\n    }\n    if (this.shouldQueryRelays()) {\n      this.startWithRelaySet();\n    }\n    return;\n  }\n  stop() {\n    this.relaySubscriptions.forEach((sub) => sub.unsub());\n    this.relaySubscriptions.clear();\n    this.emit(\"close\", this);\n  }\n  async startWithCache() {\n    if (this.ndk.cacheAdapter?.query) {\n      this.debug(\"querying cache\");\n      const promise = this.ndk.cacheAdapter.query(this);\n      if (this.ndk.cacheAdapter.locking) {\n        await promise;\n      }\n    }\n  }\n  startWithRelaySet() {\n    if (!this.relaySet) {\n      this.relaySet = calculateRelaySetFromFilter(this.ndk, this.filter);\n    }\n    if (this.relaySet) {\n      this.debug(\"querying relays\");\n      this.relaySet.subscribe(this);\n    }\n  }\n  // EVENT handling\n  /**\n   * Called when an event is received from a relay or the cache\n   * @param event\n   * @param relay\n   * @param fromCache Whether the event was received from the cache\n   */\n  eventReceived(event, relay, fromCache = false) {\n    if (!fromCache && relay) {\n      let events = this.eventsPerRelay.get(relay);\n      if (!events) {\n        events = /* @__PURE__ */ new Set();\n        this.eventsPerRelay.set(relay, events);\n      }\n      events.add(event.id);\n      const eventAlreadySeen = this.eventFirstSeen.has(event.id);\n      if (eventAlreadySeen) {\n        const timeSinceFirstSeen = Date.now() - (this.eventFirstSeen.get(event.id) || 0);\n        relay.scoreSlowerEvent(timeSinceFirstSeen);\n        this.emit(\"event:dup\", event, relay, timeSinceFirstSeen, this);\n        return;\n      }\n      if (this.ndk.cacheAdapter) {\n        this.ndk.cacheAdapter.setEvent(event, this.filter);\n      }\n      this.eventFirstSeen.set(`${event.id}`, Date.now());\n    } else {\n      this.eventFirstSeen.set(`${event.id}`, 0);\n    }\n    this.emit(\"event\", event, relay, this);\n  }\n  // EOSE handling\n  eoseTimeout;\n  eoseReceived(relay) {\n    if (this.opts?.closeOnEose) {\n      this.relaySubscriptions.get(relay)?.unsub();\n      this.relaySubscriptions.delete(relay);\n      if (this.relaySubscriptions.size === 0) {\n        this.emit(\"close\", this);\n      }\n    }\n    this.eosesSeen.add(relay);\n    const hasSeenAllEoses = this.eosesSeen.size === this.relaySet?.size();\n    if (hasSeenAllEoses) {\n      this.emit(\"eose\");\n    } else {\n      if (this.eoseTimeout) {\n        clearTimeout(this.eoseTimeout);\n      }\n      this.eoseTimeout = setTimeout(() => {\n        this.emit(\"eose\");\n      }, 500);\n    }\n  }\n};\nvar NDKSubscriptionGroup = class extends NDKSubscription {\n  subscriptions;\n  constructor(ndk, subscriptions) {\n    const debug3 = ndk.debug.extend(\"subscription-group\");\n    const filters = mergeFilters(subscriptions.map((s) => s.filter));\n    super(\n      ndk,\n      filters,\n      subscriptions[0].opts,\n      // TODO: This should be merged\n      subscriptions[0].relaySet\n      // TODO: This should be merged\n    );\n    this.subscriptions = subscriptions;\n    debug3(\"merged filters\", {\n      count: subscriptions.length,\n      mergedFilters: this.filter\n    });\n    this.on(\"event\", this.forwardEvent);\n    this.on(\"event:dup\", this.forwardEventDup);\n    this.on(\"eose\", this.forwardEose);\n    this.on(\"close\", this.forwardClose);\n  }\n  isEventForSubscription(event, subscription) {\n    const { filter } = subscription;\n    if (!filter)\n      return false;\n    return matchFilter(filter, event.rawEvent());\n  }\n  forwardEvent(event, relay) {\n    for (const subscription of this.subscriptions) {\n      if (!this.isEventForSubscription(event, subscription)) {\n        continue;\n      }\n      subscription.emit(\"event\", event, relay, subscription);\n    }\n  }\n  forwardEventDup(event, relay, timeSinceFirstSeen) {\n    for (const subscription of this.subscriptions) {\n      if (!this.isEventForSubscription(event, subscription)) {\n        continue;\n      }\n      subscription.emit(\"event:dup\", event, relay, timeSinceFirstSeen, subscription);\n    }\n  }\n  forwardEose() {\n    for (const subscription of this.subscriptions) {\n      subscription.emit(\"eose\", subscription);\n    }\n  }\n  forwardClose() {\n    for (const subscription of this.subscriptions) {\n      subscription.emit(\"close\", subscription);\n    }\n  }\n};\nfunction mergeFilters(filters) {\n  const result = {};\n  filters.forEach((filter) => {\n    Object.entries(filter).forEach(([key, value]) => {\n      if (Array.isArray(value)) {\n        if (result[key] === void 0) {\n          result[key] = [...value];\n        } else {\n          result[key] = Array.from(/* @__PURE__ */ new Set([...result[key], ...value]));\n        }\n      } else {\n        result[key] = value;\n      }\n    });\n  });\n  return result;\n}\nfunction filterFromId(id) {\n  let decoded;\n  try {\n    decoded = nip195.decode(id);\n    switch (decoded.type) {\n      case \"nevent\":\n        return { ids: [decoded.data.id] };\n      case \"note\":\n        return { ids: [decoded.data] };\n      case \"naddr\":\n        return {\n          authors: [decoded.data.pubkey],\n          \"#d\": [decoded.data.identifier],\n          kinds: [decoded.data.kind]\n        };\n    }\n  } catch (e) {\n  }\n  return { ids: [id] };\n}\n\n// src/relay/sets/index.ts\nvar NDKRelaySet2 = class {\n  relays;\n  debug;\n  ndk;\n  constructor(relays, ndk) {\n    this.relays = relays;\n    this.ndk = ndk;\n    this.debug = ndk.debug.extend(\"relayset\");\n  }\n  /**\n   * Creates a relay set from a list of relay URLs.\n   *\n   * This is useful for testing in development to pass a local relay\n   * to publish methods.\n   *\n   * @param relayUrls - list of relay URLs to include in this set\n   * @param ndk\n   * @returns NDKRelaySet\n   */\n  static fromRelayUrls(relayUrls, ndk) {\n    const relays = /* @__PURE__ */ new Set();\n    for (const url of relayUrls) {\n      const relay = ndk.pool.relays.get(url);\n      if (relay) {\n        relays.add(relay);\n      }\n    }\n    return new NDKRelaySet2(new Set(relays), ndk);\n  }\n  subscribeOnRelay(relay, subscription) {\n    const sub = relay.subscribe(subscription);\n    subscription.relaySubscriptions.set(relay, sub);\n  }\n  /**\n   * Calculates an ID of this specific combination of relays.\n   */\n  getId() {\n    const urls = Array.from(this.relays).map((r) => r.url);\n    const urlString = urls.sort().join(\",\");\n    return bytesToHex(sha256(urlString));\n  }\n  /**\n   * Add a subscription to this relay set\n   */\n  subscribe(subscription) {\n    const subGroupableId = subscription.groupableId();\n    const groupableId = `${this.getId()}:${subGroupableId}`;\n    if (!groupableId) {\n      this.executeSubscription(subscription);\n      return subscription;\n    }\n    const delayedSubscription = this.ndk.delayedSubscriptions.get(groupableId);\n    if (delayedSubscription) {\n      delayedSubscription.push(subscription);\n    } else {\n      setTimeout(() => {\n        this.executeDelayedSubscription(groupableId);\n      }, subscription.opts.groupableDelay);\n      this.ndk.delayedSubscriptions.set(groupableId, [subscription]);\n    }\n    return subscription;\n  }\n  executeDelayedSubscription(groupableId) {\n    const subscriptions = this.ndk.delayedSubscriptions.get(groupableId);\n    this.ndk.delayedSubscriptions.delete(groupableId);\n    if (subscriptions) {\n      if (subscriptions.length > 1) {\n        this.executeSubscriptions(subscriptions);\n      } else {\n        this.executeSubscription(subscriptions[0]);\n      }\n    }\n  }\n  /**\n   * This function takes a similar group of subscriptions, merges the filters\n   * and sends a single subscription to the relay.\n   */\n  executeSubscriptions(subscriptions) {\n    const ndk = subscriptions[0].ndk;\n    const subGroup = new NDKSubscriptionGroup(ndk, subscriptions);\n    this.executeSubscription(subGroup);\n  }\n  executeSubscription(subscription) {\n    this.debug(\"subscribing\", { filter: subscription.filter });\n    for (const relay of this.relays) {\n      if (relay.status === 1 /* CONNECTED */) {\n        this.subscribeOnRelay(relay, subscription);\n      } else {\n        const connectedListener = () => {\n          this.debug(\"new relay coming online for active subscription\", {\n            relay: relay.url,\n            filter: subscription.filter\n          });\n          this.subscribeOnRelay(relay, subscription);\n        };\n        relay.once(\"connect\", connectedListener);\n        subscription.once(\"close\", () => {\n          relay.removeListener(\"connect\", connectedListener);\n        });\n      }\n    }\n    return subscription;\n  }\n  async publish(event) {\n    this.relays.forEach(async (relay) => {\n      try {\n        await relay.publish(event);\n      } catch (e) {\n      }\n    });\n  }\n  size() {\n    return this.relays.size;\n  }\n};\n\n// src/relay/sets/calculate.ts\nfunction calculateRelaySetFromEvent(ndk, event) {\n  const relays = /* @__PURE__ */ new Set();\n  ndk.pool?.relays.forEach((relay) => relays.add(relay));\n  return new NDKRelaySet2(relays, ndk);\n}\nfunction calculateRelaySetFromFilter(ndk, filter) {\n  const relays = /* @__PURE__ */ new Set();\n  ndk.pool?.relays.forEach((relay) => {\n    if (!relay.complaining) {\n      relays.add(relay);\n    } else {\n      ndk.debug(`Relay ${relay.url} is complaining, not adding to set`);\n    }\n  });\n  return new NDKRelaySet2(relays, ndk);\n}\n\n// src/signers/nip07/index.ts\nvar NDKNip07Signer = class {\n  _userPromise;\n  constructor() {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n  }\n  async blockUntilReady() {\n    const pubkey = await window.nostr?.getPublicKey();\n    if (!pubkey) {\n      throw new Error(\"User rejected access\");\n    }\n    return new NDKUser({ hexpubkey: pubkey });\n  }\n  /**\n   * Getter for the user property.\n   * @returns The NDKUser instance.\n   */\n  async user() {\n    if (!this._userPromise) {\n      this._userPromise = this.blockUntilReady();\n    }\n    return this._userPromise;\n  }\n  /**\n   * Signs the given Nostr event.\n   * @param event - The Nostr event to be signed.\n   * @returns The signature of the signed event.\n   * @throws Error if the NIP-07 is not available on the window object.\n   */\n  async sign(event) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const signedEvent = await window.nostr.signEvent(event);\n    return signedEvent.sig;\n  }\n  async encrypt(recipient, value) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const recipientHexPubKey = recipient.hexpubkey();\n    return window.nostr.nip04.encrypt(recipientHexPubKey, value);\n  }\n  async decrypt(sender, value) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const senderHexPubKey = sender.hexpubkey();\n    return window.nostr.nip04.decrypt(senderHexPubKey, value);\n  }\n};\n\n// src/signers/nip46/rpc.ts\nimport EventEmitter6 from \"eventemitter3\";\nvar NDKNostrRpc = class extends EventEmitter6 {\n  ndk;\n  signer;\n  debug;\n  constructor(ndk, signer, debug3) {\n    super();\n    this.ndk = ndk;\n    this.signer = signer;\n    this.debug = debug3.extend(\"rpc\");\n  }\n  /**\n   * Subscribe to a filter. This function will resolve once the subscription is ready.\n   */\n  async subscribe(filter) {\n    const sub = this.ndk.subscribe(filter, { closeOnEose: false });\n    sub.on(\"event\", async (event) => {\n      try {\n        const parsedEvent = await this.parseEvent(event);\n        if (parsedEvent.method) {\n          this.emit(\"request\", parsedEvent);\n        } else {\n          this.emit(`response-${parsedEvent.id}`, parsedEvent);\n        }\n      } catch (e) {\n        this.debug(\"error parsing event\", e, event);\n      }\n    });\n    return new Promise((resolve, reject) => {\n      sub.on(\"eose\", () => resolve(sub));\n    });\n  }\n  async parseEvent(event) {\n    const remoteUser = this.ndk.getUser({ hexpubkey: event.pubkey });\n    remoteUser.ndk = this.ndk;\n    const decryptedContent = await this.signer.decrypt(remoteUser, event.content);\n    const parsedContent = JSON.parse(decryptedContent);\n    const { id, method, params, result, error } = parsedContent;\n    if (method) {\n      return { id, pubkey: event.pubkey, method, params, event };\n    } else {\n      return { id, result, error, event };\n    }\n  }\n  async sendResponse(id, remotePubkey, result, kind = 24133, error) {\n    const res = { id, result };\n    if (error) {\n      res.error = error;\n    }\n    const localUser = await this.signer.user();\n    const remoteUser = this.ndk.getUser({ hexpubkey: remotePubkey });\n    const event = new NDKEvent(this.ndk, {\n      kind,\n      content: JSON.stringify(res),\n      tags: [[\"p\", remotePubkey]],\n      pubkey: localUser.hexpubkey()\n    });\n    event.content = await this.signer.encrypt(remoteUser, event.content);\n    await event.sign(this.signer);\n    await this.ndk.publish(event);\n  }\n  /**\n   * Sends a request.\n   * @param remotePubkey\n   * @param method\n   * @param params\n   * @param kind\n   * @param id\n   */\n  async sendRequest(remotePubkey, method, params = [], kind = 24133, cb) {\n    const id = Math.random().toString(36).substring(7);\n    const localUser = await this.signer.user();\n    const remoteUser = this.ndk.getUser({ hexpubkey: remotePubkey });\n    const request = { id, method, params };\n    const promise = new Promise((resolve) => {\n      if (cb)\n        this.once(`response-${id}`, cb);\n    });\n    const event = new NDKEvent(this.ndk, {\n      kind,\n      content: JSON.stringify(request),\n      tags: [[\"p\", remotePubkey]],\n      pubkey: localUser.hexpubkey()\n    });\n    event.content = await this.signer.encrypt(remoteUser, event.content);\n    await event.sign(this.signer);\n    this.debug(\"sending request to\", remotePubkey);\n    await this.ndk.publish(event);\n    return promise;\n  }\n};\n\n// src/signers/nip46/backend/connect.ts\nvar ConnectEventHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [pubkey, token] = params;\n    const debug3 = backend.debug.extend(\"connect\");\n    debug3(`connection request from ${pubkey}`);\n    if (token && backend.applyToken) {\n      debug3(`applying token`);\n      await backend.applyToken(pubkey, token);\n    }\n    if (await backend.pubkeyAllowed(pubkey, \"connect\", token)) {\n      debug3(`connection request from ${pubkey} allowed`);\n      return \"ack\";\n    } else {\n      debug3(`connection request from ${pubkey} rejected`);\n    }\n    return void 0;\n  }\n};\n\n// src/signers/nip46/backend/describe.ts\nvar DescribeHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const keys = Object.keys(backend.handlers);\n    return JSON.stringify(keys);\n  }\n};\n\n// src/signers/nip46/backend/get-public-key.ts\nvar GetPublicKeyHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    return backend.localUser?.hexpubkey();\n  }\n};\n\n// src/signers/nip46/backend/sign-event.ts\nvar SignEventHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const event = await backend.signEvent(remotePubkey, params);\n    if (!event)\n      return void 0;\n    return JSON.stringify(await event.toNostrEvent());\n  }\n};\n\n// src/signers/nip46/backend/nip04-decrypt.ts\nvar Nip04DecryptHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [senderPubkey, payload] = params;\n    const senderUser = new NDKUser({ hexpubkey: senderPubkey });\n    const decryptedPayload = await backend.decrypt(remotePubkey, senderUser, payload);\n    return JSON.stringify([decryptedPayload]);\n  }\n};\n\n// src/signers/nip46/backend/nip04-encrypt.ts\nvar Nip04EncryptHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [recipientPubkey, payload] = params;\n    const recipientUser = new NDKUser({ hexpubkey: recipientPubkey });\n    const decryptedPayload = await backend.encrypt(remotePubkey, recipientUser, payload);\n    return decryptedPayload;\n  }\n};\n\n// src/signers/nip46/backend/index.ts\nvar NDKNip46Backend = class {\n  ndk;\n  signer;\n  localUser;\n  debug;\n  rpc;\n  permitCallback;\n  /**\n   * @param ndk The NDK instance to use\n   * @param privateKey The private key of the npub that wants to be published as\n   */\n  constructor(ndk, privateKey, permitCallback) {\n    this.ndk = ndk;\n    this.signer = new NDKPrivateKeySigner(privateKey);\n    this.debug = ndk.debug.extend(\"nip46:backend\");\n    this.rpc = new NDKNostrRpc(ndk, this.signer, this.debug);\n    this.permitCallback = permitCallback;\n  }\n  /**\n   * This method starts the backend, which will start listening for incoming\n   * requests.\n   */\n  async start() {\n    this.localUser = await this.signer.user();\n    const sub = this.ndk.subscribe(\n      {\n        kinds: [24133],\n        \"#p\": [this.localUser.hexpubkey()]\n      },\n      { closeOnEose: false }\n    );\n    sub.on(\"event\", (e) => this.handleIncomingEvent(e));\n  }\n  handlers = {\n    connect: new ConnectEventHandlingStrategy(),\n    sign_event: new SignEventHandlingStrategy(),\n    nip04_encrypt: new Nip04EncryptHandlingStrategy(),\n    nip04_decrypt: new Nip04DecryptHandlingStrategy(),\n    get_public_key: new GetPublicKeyHandlingStrategy(),\n    describe: new DescribeHandlingStrategy()\n  };\n  /**\n   * Enables the user to set a custom strategy for handling incoming events.\n   * @param method - The method to set the strategy for\n   * @param strategy - The strategy to set\n   */\n  setStrategy(method, strategy) {\n    this.handlers[method] = strategy;\n  }\n  /**\n   * Overload this method to apply tokens, which can\n   * wrap permission sets to be applied to a pubkey.\n   * @param pubkey public key to apply token to\n   * @param token token to apply\n   */\n  async applyToken(pubkey, token) {\n    throw new Error(\"connection token not supported\");\n  }\n  async handleIncomingEvent(event) {\n    const { id, method, params } = await this.rpc.parseEvent(event);\n    const remotePubkey = event.pubkey;\n    let response;\n    this.debug(\"incoming event\", { id, method, params });\n    const strategy = this.handlers[method];\n    if (strategy) {\n      try {\n        response = await strategy.handle(this, remotePubkey, params);\n      } catch (e) {\n        this.debug(\"error handling event\", e, { id, method, params });\n        this.rpc.sendResponse(id, remotePubkey, \"error\", void 0, e.message);\n      }\n    } else {\n      this.debug(\"unsupported method\", { method, params });\n    }\n    if (response) {\n      this.debug(`sending response to ${remotePubkey}`, response);\n      this.rpc.sendResponse(id, remotePubkey, response);\n    }\n  }\n  async decrypt(remotePubkey, senderUser, payload) {\n    if (!await this.pubkeyAllowed(remotePubkey, \"decrypt\", payload)) {\n      this.debug(`decrypt request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    return await this.signer.decrypt(senderUser, payload);\n  }\n  async encrypt(remotePubkey, recipientUser, payload) {\n    if (!await this.pubkeyAllowed(remotePubkey, \"encrypt\", payload)) {\n      this.debug(`encrypt request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    return await this.signer.encrypt(recipientUser, payload);\n  }\n  async signEvent(remotePubkey, params) {\n    const [eventString] = params;\n    this.debug(`sign event request from ${remotePubkey}`);\n    const event = new NDKEvent(this.ndk, JSON.parse(eventString));\n    this.debug(\"event to sign\", event.rawEvent());\n    if (!await this.pubkeyAllowed(remotePubkey, \"sign_event\", event)) {\n      this.debug(`sign event request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    this.debug(`sign event request from ${remotePubkey} allowed`);\n    await event.sign(this.signer);\n    return event;\n  }\n  /**\n   * This method should be overriden by the user to allow or reject incoming\n   * connections.\n   */\n  async pubkeyAllowed(pubkey, method, params) {\n    return this.permitCallback(pubkey, method, params);\n  }\n};\n\n// src/signers/nip46/index.ts\nvar NDKNip46Signer = class {\n  ndk;\n  remoteUser;\n  remotePubkey;\n  token;\n  localSigner;\n  rpc;\n  debug;\n  /**\n   * @param ndk - The NDK instance to use\n   * @param tokenOrRemotePubkey - The public key, or a connection token, of the npub that wants to be published as\n   * @param localSigner - The signer that will be used to request events to be signed\n   */\n  constructor(ndk, tokenOrRemotePubkey, localSigner) {\n    let remotePubkey;\n    let token;\n    if (tokenOrRemotePubkey.includes(\"#\")) {\n      const parts = tokenOrRemotePubkey.split(\"#\");\n      remotePubkey = new NDKUser({ npub: parts[0] }).hexpubkey();\n      token = parts[1];\n    } else if (tokenOrRemotePubkey.startsWith(\"npub\")) {\n      remotePubkey = new NDKUser({ npub: tokenOrRemotePubkey }).hexpubkey();\n    } else {\n      remotePubkey = tokenOrRemotePubkey;\n    }\n    this.ndk = ndk;\n    this.remotePubkey = remotePubkey;\n    this.token = token;\n    this.debug = ndk.debug.extend(\"nip46:signer\");\n    this.remoteUser = new NDKUser({ hexpubkey: remotePubkey });\n    if (!localSigner) {\n      this.localSigner = NDKPrivateKeySigner.generate();\n    } else {\n      this.localSigner = localSigner;\n    }\n    this.rpc = new NDKNostrRpc(ndk, this.localSigner, this.debug);\n  }\n  /**\n   * Get the user that is being published as\n   */\n  async user() {\n    return this.remoteUser;\n  }\n  async blockUntilReady() {\n    const localUser = await this.localSigner.user();\n    const user = this.ndk.getUser({ npub: localUser.npub });\n    await this.rpc.subscribe({\n      kinds: [24133],\n      \"#p\": [localUser.hexpubkey()]\n    });\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const connectParams = [localUser.hexpubkey()];\n        if (this.token) {\n          connectParams.push(this.token);\n        }\n        this.rpc.sendRequest(\n          this.remotePubkey,\n          \"connect\",\n          connectParams,\n          24133,\n          (response) => {\n            if (response.result === \"ack\") {\n              resolve(user);\n            } else {\n              reject(response.error);\n            }\n          }\n        );\n      }, 100);\n    });\n  }\n  async encrypt(recipient, value) {\n    this.debug(\"asking for encryption\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"nip04_encrypt\",\n        [recipient.hexpubkey(), value],\n        24133,\n        (response) => {\n          if (!response.error) {\n            resolve(response.result);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n  async decrypt(sender, value) {\n    this.debug(\"asking for decryption\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"nip04_decrypt\",\n        [sender.hexpubkey(), value],\n        24133,\n        (response) => {\n          if (!response.error) {\n            const value2 = JSON.parse(response.result);\n            resolve(value2[0]);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n  async sign(event) {\n    this.debug(\"asking for a signature\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"sign_event\",\n        [JSON.stringify(event)],\n        24133,\n        (response) => {\n          this.debug(\"got a response\", response);\n          if (!response.error) {\n            const json = JSON.parse(response.result);\n            resolve(json.sig);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n};\n\n// src/signers/private-key/index.ts\nimport { generatePrivateKey, getPublicKey, nip04, getSignature } from \"nostr-tools\";\nvar NDKPrivateKeySigner = class {\n  _user;\n  privateKey;\n  constructor(privateKey) {\n    if (privateKey) {\n      this.privateKey = privateKey;\n      this._user = new NDKUser({ hexpubkey: getPublicKey(this.privateKey) });\n    }\n  }\n  static generate() {\n    const privateKey = generatePrivateKey();\n    return new NDKPrivateKeySigner(privateKey);\n  }\n  async blockUntilReady() {\n    if (!this._user) {\n      throw new Error(\"NDKUser not initialized\");\n    }\n    return this._user;\n  }\n  async user() {\n    await this.blockUntilReady();\n    return this._user;\n  }\n  async sign(event) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to sign without a private key\");\n    }\n    return getSignature(event, this.privateKey);\n  }\n  async encrypt(recipient, value) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to encrypt without a private key\");\n    }\n    const recipientHexPubKey = recipient.hexpubkey();\n    return await nip04.encrypt(this.privateKey, recipientHexPubKey, value);\n  }\n  async decrypt(sender, value) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to decrypt without a private key\");\n    }\n    const senderHexPubKey = sender.hexpubkey();\n    return await nip04.decrypt(this.privateKey, senderHexPubKey, value);\n  }\n};\n\n// src/zap/invoice.ts\nimport { decode } from \"light-bolt11-decoder\";\nfunction zapInvoiceFromEvent(event) {\n  const description = event.getMatchingTags(\"description\")[0];\n  const bolt11 = event.getMatchingTags(\"bolt11\")[0];\n  let decodedInvoice;\n  let zapRequest;\n  if (!description || !bolt11 || !bolt11[1]) {\n    return null;\n  }\n  try {\n    let zapRequestPayload = description[1];\n    if (zapRequestPayload.startsWith(\"%\")) {\n      zapRequestPayload = decodeURIComponent(zapRequestPayload);\n    }\n    if (zapRequestPayload === \"\") {\n      return null;\n    }\n    zapRequest = JSON.parse(zapRequestPayload);\n    decodedInvoice = decode(bolt11[1]);\n  } catch (e) {\n    return null;\n  }\n  const amountSection = decodedInvoice.sections.find((s) => s.name === \"amount\");\n  if (!amountSection) {\n    return null;\n  }\n  const amount = parseInt(amountSection.value);\n  if (!amount) {\n    return null;\n  }\n  const content = zapRequest.content;\n  const sender = zapRequest.pubkey;\n  const recipientTag = event.getMatchingTags(\"p\")[0];\n  const recipient = recipientTag[1];\n  let zappedEvent = event.getMatchingTags(\"e\")[0];\n  if (!zappedEvent) {\n    zappedEvent = event.getMatchingTags(\"a\")[0];\n  }\n  const zappedEventId = zappedEvent ? zappedEvent[1] : void 0;\n  const zapInvoice = {\n    id: event.id,\n    zapper: event.pubkey,\n    zappee: sender,\n    zapped: recipient,\n    zappedEvent: zappedEventId,\n    amount,\n    comment: content\n  };\n  return zapInvoice;\n}\n\n// src/index.ts\nvar NDK5 = class extends EventEmitter7 {\n  pool;\n  signer;\n  cacheAdapter;\n  debug;\n  devWriteRelaySet;\n  delayedSubscriptions;\n  constructor(opts = {}) {\n    super();\n    this.debug = opts.debug || debug2(\"ndk\");\n    this.pool = new NDKPool(opts.explicitRelayUrls || [], this);\n    this.signer = opts.signer;\n    this.cacheAdapter = opts.cacheAdapter;\n    this.delayedSubscriptions = /* @__PURE__ */ new Map();\n    if (opts.devWriteRelayUrls) {\n      this.devWriteRelaySet = NDKRelaySet2.fromRelayUrls(opts.devWriteRelayUrls, this);\n    }\n  }\n  /**\n   * Connect to relays with optional timeout.\n   * If the timeout is reached, the connection will be continued to be established in the background.\n   */\n  async connect(timeoutMs) {\n    this.debug(\"Connecting to relays\", { timeoutMs });\n    return this.pool.connect(timeoutMs);\n  }\n  /**\n   * Get a NDKUser object\n   *\n   * @param opts\n   * @returns\n   */\n  getUser(opts) {\n    const user = new NDKUser(opts);\n    user.ndk = this;\n    return user;\n  }\n  /**\n   * Create a new subscription. Subscriptions automatically start and finish when all relays\n   * on the set send back an EOSE. (set `opts.closeOnEose` to `false` in order avoid this)\n   *\n   * @param filter\n   * @param opts\n   * @param relaySet explicit relay set to use\n   * @returns NDKSubscription\n   */\n  subscribe(filter, opts, relaySet) {\n    const subscription = new NDKSubscription(this, filter, opts, relaySet);\n    subscription.start();\n    return subscription;\n  }\n  /**\n   * Publish an event\n   * @param event event to publish\n   * @returns\n   */\n  async publish(event, relaySet) {\n    if (!relaySet) {\n      relaySet = this.devWriteRelaySet || calculateRelaySetFromEvent(this, event);\n    }\n    return relaySet.publish(event);\n  }\n  async fetchEvent(idOrFilter, opts = {}) {\n    let filter;\n    if (typeof idOrFilter === \"string\") {\n      filter = filterFromId(idOrFilter);\n    } else {\n      filter = idOrFilter;\n    }\n    if (!filter) {\n      throw new Error(`Invalid filter: ${JSON.stringify(idOrFilter)}`);\n    }\n    return new Promise((resolve) => {\n      const s = this.subscribe(filter, { ...opts, closeOnEose: true });\n      s.on(\"event\", (event) => {\n        event.ndk = this;\n        resolve(event);\n      });\n      s.on(\"eose\", () => {\n        resolve(null);\n      });\n    });\n  }\n  /**\n   * Fetch events\n   */\n  async fetchEvents(filter, opts = {}) {\n    return new Promise((resolve) => {\n      const events = /* @__PURE__ */ new Map();\n      const relaySetSubscription = this.subscribe(filter, { ...opts, closeOnEose: true });\n      relaySetSubscription.on(\"event\", (event) => {\n        const existingEvent = events.get(event.tagId());\n        if (existingEvent) {\n          event = dedup(existingEvent, event);\n        }\n        event.ndk = this;\n        events.set(event.tagId(), event);\n      });\n      relaySetSubscription.on(\"eose\", () => {\n        resolve(new Set(events.values()));\n      });\n    });\n  }\n  /**\n   * Ensures that a signer is available to sign an event.\n   */\n  async assertSigner() {\n    if (!this.signer) {\n      this.emit(\"signerRequired\");\n      throw new Error(\"Signer required\");\n    }\n  }\n};\nexport {\n  NDKEvent,\n  NDKKind,\n  NDKNip07Signer,\n  NDKNip46Backend,\n  NDKNip46Signer,\n  NDKNostrRpc,\n  NDKPrivateKeySigner,\n  NDKRelay2 as NDKRelay,\n  NDKRelaySet2 as NDKRelaySet,\n  NDKRelayStatus,\n  NDKSubscription,\n  NDKSubscriptionCacheUsage,\n  NDKSubscriptionGroup,\n  NDKUser,\n  NDK5 as default,\n  defaultOpts,\n  filterFromId,\n  mergeEvent,\n  mergeFilters,\n  zapInvoiceFromEvent\n};\n","import { chatData } from '../store';\nimport { getEventHash, relayInit } from 'nostr-tools';\nimport RelayPool from 'nostr/lib/relay-pool';\nimport { createEventDispatcher } from 'svelte';\nimport EventEmitter from 'events';\nimport * as uuid from 'uuid';\nimport debug from 'debug';\nimport { NDKEvent, zapInvoiceFromEvent } from '@nostr-dev-kit/ndk';\n\nconst log = new debug('nostr:adapter');\nconst profilesLog = new debug('nostr:adapter:profiles');\nconst writeLog = new debug('nostr:adapter:write');\n\nclass NstrAdapter {\n    relayStatus = {};\n    #pool = null;\n    #messages = {};\n    #eventEmitter = new EventEmitter();\n    #handlers = {}\n    tags;\n    referenceTags;\n    type;\n    #websiteOwnerPubkey;\n    chatId;\n    relayUrls = [];\n\n    #profileRequestQueue = [];\n    #requestedProfiles = [];\n    #profileRequestTimer;\n    #delayedSubscriptions = {};\n    #delayedSubscriptionTimeouts = {};\n\n    constructor(clientPubkey, {tags, referenceTags, type='DM', chatId, websiteOwnerPubkey, relays} = {}) {\n        this.pubkey = clientPubkey;\n        this.#websiteOwnerPubkey = websiteOwnerPubkey;\n        this.relayUrls = relays\n\n        if (type) {\n            this.setChatConfiguration(type, tags, referenceTags, chatId);\n        }\n    }\n\n    setChatConfiguration(type, tags, referenceTags, chatId) {\n        this.type = type;\n        this.tags = tags;\n        this.chatId = chatId;\n        this.referenceTags = referenceTags;\n\n        // handle connection\n        if (this.#pool) { this.#disconnect() }\n\n        let filters = [];\n\n        // handle subscriptions\n        // if this is DM type then subscribe to chats with this website owner\n        switch (this.type) {\n            case 'DM':\n                filters.push({\n                    kinds: [4],\n                    '#p': [this.pubkey, this.#websiteOwnerPubkey],\n                    'authors': [this.pubkey, this.#websiteOwnerPubkey]\n                });\n                break;\n            case 'GROUP':\n                if (this.chatId) {\n                    filters.push({\n                        kinds: [41, 42],\n                        \"#e\": [this.chatId],\n                        limit: 200,\n                    })\n                }\n            case 'GLOBAL':\n                if (this.tags && this.tags.length > 0) {\n                    filters.push({kinds: [1], '#t': this.tags, limit: 20});\n                }\n                if (this.referenceTags && this.referenceTags.length > 0) {\n                    filters.push({kinds: [1], '#r': this.referenceTags, limit: 20});\n                }\n\n                break;\n        }\n\n        if (filters && filters.length > 0) {\n            this.#connect()\n            this.subscribe(filters, (e) => { this.#emitMessage(e) })\n        }\n    }\n\n    async getPubKey() {\n        return this.pubkey;\n    }\n\n    on(event, callback) {\n        this.#eventEmitter.on(event, callback);\n    }\n\n    /**\n     * Send a message to the relay\n     * @param {String} message - The message to send\n     */\n    async send(message, {tagPubKeys, tags} = {}) {\n        let event;\n\n        if (!tags) { tags = []}\n\n        if (this.type === 'DM') {\n            event = await this.sendKind4(message, {tagPubKeys, tags});\n        } else if (this.type === 'GROUP') {\n            event = await this.sendKind42(message, {tagPubKeys, tags, chatId: this.chatId});\n        } else {\n            event = await this.sendKind1(message, {tagPubKeys, tags});\n        }\n\n        event.id = getEventHash(event)\n        const signedEvent = await this.signEvent(event)\n\n        this.#_publish(signedEvent);\n\n        return event.id;\n    }\n\n    async sendKind4(message, {tagPubKeys, tags} = {}) {\n        let ciphertext = await this.encrypt(this.#websiteOwnerPubkey, message);\n        let event = {\n            kind: 4,\n            pubkey: this.pubkey,\n            created_at: Math.floor(Date.now() / 1000),\n            content: ciphertext,\n            tags: [\n                ['p', this.#websiteOwnerPubkey],\n                ...tags\n            ],\n        }\n\n        return event;\n    }\n\n    async sendKind42(message, {tagPubKeys, tags, chatId} = {}) {\n        if (!tags) { tags = []; }\n\n        if (this.tags) {\n            this.tags.forEach((t) => tags.push(['t', t]));\n        }\n\n        // check if there is an e tag\n        const reply = !!tags.find((t) => t[0] === 'e');\n\n        if (!reply) {\n            tags.push(['e', chatId, \"wss://nos.lol\", reply ? \"reply\" : \"root\"]);\n        }\n\n        if (this.referenceTags) {\n            this.referenceTags.forEach((t) => tags.push(['r', t]));\n        }\n\n        let event = {\n            kind: 42,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: message,\n            pubkey: this.pubkey,\n        }\n\n        if (tagPubKeys) {\n            for (let pubkey of tagPubKeys) {\n                if (pubkey) {\n                    event.tags.push(['p', pubkey]);\n                }\n            }\n        }\n\n        event.id = getEventHash(event)\n        this.subscribeToEventAndResponses(event.id);\n\n        return event;\n    }\n\n    async sendKind1(message, {tagPubKeys, tags} = {}) {\n        if (!tags) { tags = []; }\n\n        if (this.tags) {\n            this.tags.forEach((t) => tags.push(['t', t]));\n        }\n\n        if (this.referenceTags) {\n            this.referenceTags.forEach((t) => tags.push(['r', t]));\n        }\n\n        let event = {\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: message,\n            pubkey: this.pubkey,\n        }\n\n        if (tagPubKeys) {\n            for (let pubkey of tagPubKeys) {\n                if (pubkey) {\n                    event.tags.push(['p', pubkey]);\n                }\n            }\n        }\n\n        event.id = getEventHash(event)\n        this.subscribeToEventAndResponses(event.id);\n\n        return event;\n    }\n\n    async #_publish(event) {\n        writeLog('publish', event);\n        this.#pool.send([ 'EVENT', event ]);\n    }\n\n    async onEvent(event, messageCallback) {\n        this.#addProfileRequest(event.pubkey);\n\n        messageCallback(event)\n    }\n\n    async delayedSubscribe(filters, family, timeout) {\n        this.#delayedSubscriptions[family] = this.#delayedSubscriptions[family] || []\n        this.#delayedSubscriptions[family].push(filters);\n\n        if (!this.#delayedSubscriptionTimeouts[family]) {\n            this.#delayedSubscriptionTimeouts[family] = setTimeout(() => {\n                delete this.#delayedSubscriptionTimeouts[family];\n\n                // if there are more than 10 filters then we need to split them up\n                // into multiple subscriptions\n                let filters = this.#delayedSubscriptions[family];\n                delete this.#delayedSubscriptions[family];\n\n                // split filters into groups of 10\n                let groups = [];\n                groups = filters.reduce((groups, filter, index) => {\n                    if (index % 10 === 0) {\n                        groups.push([]);\n                    }\n                    groups[groups.length - 1].push(filter);\n                    return groups;\n                }, groups);\n\n                groups.forEach((filters) => {\n                    this.subscribe(filters, (e) => { this.#emitMessage(e)});\n                });\n            }, timeout)\n        }\n    }\n\n    async subscribe(filters, messageCallback=null) {\n        if (!messageCallback) { messageCallback = (e) => { this.#emitMessage(e) } }\n        return this.#_subscribe(filters, messageCallback)\n    }\n\n    async #_subscribe(filters, messageCallback) {\n        const subId = uuid.v4();\n        this.#handlers[subId] = messageCallback;\n        if (!Array.isArray(filters)) { filters = [filters] }\n\n\n\n        this.#pool.subscribe(subId, filters);\n        this.#pool.on('event', (relay, recSubId, e) => {\n            this.onEvent(e, this.#handlers[recSubId])\n        });\n\n        return subId;\n    }\n\n    async #emitMessage(event) {\n        // has already been emitted\n        if (this.#messages[event.id]) {\n            return;\n        }\n\n        this.#messages[event.id] = true;\n\n        // decrypt\n        if (event.kind === 4) {\n            event.content = await this.decrypt(this.#websiteOwnerPubkey, event.content);\n        }\n\n        let deletedEvents = []\n        if (event.kind === 5) {\n            deletedEvents = event.tags.filter(tag => tag[0] === 'e').map(tag => tag[1]);\n        }\n\n        let zap;\n        if (event.kind === 9735) {\n            const ndkEvent = new NDKEvent(null, event);\n            zap = zapInvoiceFromEvent(ndkEvent);\n            console.log(`received a zap invoice: ${zap}`, event);\n        }\n\n        switch (event.kind) {\n            case 1:\n            case 42:\n                this.#eventEmitter.emit('message', event); break;\n            case 41:\n                this.#eventEmitter.emit('channelMetadata', event); break;\n            case 4: this.#eventEmitter.emit('message', event); break;\n            case 5: this.#eventEmitter.emit('deleted', deletedEvents); break;\n            case 7: this.#eventEmitter.emit('reaction', event); break;\n            case 9735: this.#eventEmitter.emit('zap', zap); break;\n            default:\n                // alert('unknown event kind ' + event.kind)\n                console.log('unknown event kind', event.kind, event);\n        }\n\n    }\n\n    subscribeToEventAndResponses(eventId) {\n        this.subscribe([\n            {ids: [eventId]},\n            {'#e': [eventId]},\n        ], (e) => {\n            this.#emitMessage(e);\n            // this.subscribeToResponses(e)\n        })\n    }\n\n    subscribeToResponses(event) {\n        this.subscribe([\n            {'#e': [event.id]},\n        ], (e) => {\n            this.#emitMessage(e);\n            this.subscribeToResponses(e)\n        })\n    }\n\n    /**\n     * Connect to the relay\n     */\n    #connect() {\n        this.relayUrls.forEach((url) => {\n            this.relayStatus[url] = 'disconnected';\n        });\n        this.#eventEmitter.emit('connectivity', this.relayStatus);\n\n        // console.log('connecting to relay', this.relayUrls);\n        this.#pool = new RelayPool(this.relayUrls)\n        this.#pool.on('open', (relay) => {\n            // console.log(`connected to ${relay.url}`, new Date())\n            this.relayStatus[relay.url] = 'connected';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n        })\n\n        this.#pool.on('error', (relay, r, e) => {\n            this.relayStatus[relay.url] = 'error';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n            console.log('error from relay', relay.url, r, e)\n        })\n\n        this.#pool.on('close', (relay, r) => {\n            this.relayStatus[relay.url] = 'closed';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n            console.log('error from relay', relay.url, r)\n        })\n\n        this.#pool.on('notice', (relay, r) => {\n            console.log('notice', relay.url, r)\n        })\n    }\n\n    #disconnect() {\n        this.relayUrls.forEach((url) => {\n            this.relayStatus[url] = 'disconnected';\n        });\n        this.#eventEmitter.emit('connectivity', this.relayStatus);\n        this.#pool.close();\n        this.#pool = null;\n    }\n\n    //\n    //\n    // Profiles\n    //\n    //\n    reqProfile(pubkey) {\n        this.#addProfileRequest(pubkey);\n    }\n\n    #addProfileRequest(pubkey, event=null) {\n        if (this.#profileRequestQueue.includes(pubkey)) { return; }\n        if (this.#requestedProfiles.includes(pubkey)) { return; }\n        this.#profileRequestQueue.push(pubkey);\n        this.#requestedProfiles.push(pubkey);\n\n        if (!this.#profileRequestTimer) {\n            this.#profileRequestTimer = setTimeout(() => {\n                this.#profileRequestTimer = null;\n                this.#requestProfiles();\n            }, 500);\n        }\n    }\n\n    /**\n     * Send request for all queued profiles\n     */\n    async #requestProfiles() {\n        if (this.#profileRequestQueue.length > 0) {\n            profilesLog('requesting profiles', this.#profileRequestQueue);\n\n            // send request\n            const subId = await this.subscribe({ kinds: [0], authors: this.#profileRequestQueue }, (e) => {\n                this.#processReceivedProfile(e);\n            });\n            profilesLog('subscribed to request', {subId})\n            this.#profileRequestQueue = [];\n\n            setTimeout(() => {\n                profilesLog('unsubscribing from request', {subId})\n                this.#pool.unsubscribe(subId);\n            }, 5000);\n        }\n    }\n\n    #processReceivedProfile(event) {\n        profilesLog('received profile', event)\n        let profile;\n        try {\n            profile = JSON.parse(event.content);\n        } catch (e) {\n            profilesLog('failed to parse profile', event);\n            return;\n        }\n        this.#eventEmitter.emit('profile', {pubkey: event.pubkey, profile});\n    }\n}\n\nexport default NstrAdapter;","import NstrAdapter from './index.js';\n\nclass NstrAdapterNip07 extends NstrAdapter {\n    constructor(pubkey, adapterConfig={}) {\n        super(pubkey, adapterConfig);\n    }\n\n    async signEvent(event) {\n        return await window.nostr.signEvent(event);\n    }\n\n    async encrypt(destPubkey, message) {\n        return await window.nostr.nip04.encrypt(destPubkey, message);\n    }\n\n    async decrypt(destPubkey, message) {\n        return await window.nostr.nip04.decrypt(destPubkey, message);\n    }\n}\n\nexport default NstrAdapterNip07;\n","import EventEmitter from 'events';\nimport { relayInit, getPublicKey, getEventHash, signEvent, validateEvent, verifySignature, nip04 } from 'nostr-tools';\n\nfunction _regeneratorRuntime() {\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function (method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nvar NostrRPC = /*#__PURE__*/function () {\n  function NostrRPC(opts) {\n    // events\n    this.events = new EventEmitter();\n    this.relay = opts.relay || 'wss://nostr.vulpem.com';\n    this.self = {\n      pubkey: getPublicKey(opts.secretKey),\n      secret: opts.secretKey\n    };\n  }\n  var _proto = NostrRPC.prototype;\n  _proto.call = /*#__PURE__*/function () {\n    var _call = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref, opts) {\n      var _this = this;\n      var target, _ref$request, _ref$request$id, id, method, _ref$request$params, params, relay, request, event;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            target = _ref.target, _ref$request = _ref.request, _ref$request$id = _ref$request.id, id = _ref$request$id === void 0 ? /*#__PURE__*/randomID() : _ref$request$id, method = _ref$request.method, _ref$request$params = _ref$request.params, params = _ref$request$params === void 0 ? [] : _ref$request$params;\n            _context3.next = 3;\n            return connectToRelay(this.relay);\n          case 3:\n            relay = _context3.sent;\n            // prepare request to be sent\n            request = prepareRequest(id, method, params);\n            _context3.next = 7;\n            return prepareEvent(this.self.secret, target, request);\n          case 7:\n            event = _context3.sent;\n            return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                var sub;\n                return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                  while (1) switch (_context2.prev = _context2.next) {\n                    case 0:\n                      sub = relay.sub([{\n                        kinds: [24133],\n                        authors: [target],\n                        '#p': [_this.self.pubkey],\n                        limit: 1\n                      }]);\n                      _context2.next = 3;\n                      return broadcastToRelay(relay, event, true);\n                    case 3:\n                      // skip waiting for response from remote\n                      if (opts && opts.skipResponse === true) resolve();\n                      sub.on('event', /*#__PURE__*/function () {\n                        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n                          var payload, plaintext;\n                          return _regeneratorRuntime().wrap(function _callee$(_context) {\n                            while (1) switch (_context.prev = _context.next) {\n                              case 0:\n                                _context.prev = 0;\n                                _context.next = 3;\n                                return nip04.decrypt(_this.self.secret, event.pubkey, event.content);\n                              case 3:\n                                plaintext = _context.sent;\n                                if (plaintext) {\n                                  _context.next = 6;\n                                  break;\n                                }\n                                throw new Error('failed to decrypt event');\n                              case 6:\n                                payload = JSON.parse(plaintext);\n                                _context.next = 12;\n                                break;\n                              case 9:\n                                _context.prev = 9;\n                                _context.t0 = _context[\"catch\"](0);\n                                return _context.abrupt(\"return\");\n                              case 12:\n                                if (isValidResponse(payload)) {\n                                  _context.next = 14;\n                                  break;\n                                }\n                                return _context.abrupt(\"return\");\n                              case 14:\n                                if (!(payload.id !== id)) {\n                                  _context.next = 16;\n                                  break;\n                                }\n                                return _context.abrupt(\"return\");\n                              case 16:\n                                // if the response is an error, reject the promise\n                                if (payload.error) {\n                                  reject(payload.error);\n                                }\n                                // if the response is a result, resolve the promise\n                                if (payload.result) {\n                                  resolve(payload.result);\n                                }\n                              case 18:\n                              case \"end\":\n                                return _context.stop();\n                            }\n                          }, _callee, null, [[0, 9]]);\n                        }));\n                        return function (_x5) {\n                          return _ref3.apply(this, arguments);\n                        };\n                      }());\n                    case 5:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }, _callee2);\n              }));\n              return function (_x3, _x4) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, this);\n    }));\n    function call(_x, _x2) {\n      return _call.apply(this, arguments);\n    }\n    return call;\n  }();\n  _proto.listen = /*#__PURE__*/function () {\n    var _listen = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      var _this2 = this;\n      var relay, sub;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return connectToRelay(this.relay);\n          case 2:\n            relay = _context5.sent;\n            sub = relay.sub([{\n              kinds: [24133],\n              '#p': [this.self.pubkey],\n              since: now()\n            }]);\n            sub.on('event', /*#__PURE__*/function () {\n              var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event) {\n                var payload, plaintext, response, body, responseEvent;\n                return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                  while (1) switch (_context4.prev = _context4.next) {\n                    case 0:\n                      _context4.prev = 0;\n                      _context4.next = 3;\n                      return nip04.decrypt(_this2.self.secret, event.pubkey, event.content);\n                    case 3:\n                      plaintext = _context4.sent;\n                      if (plaintext) {\n                        _context4.next = 6;\n                        break;\n                      }\n                      throw new Error('failed to decrypt event');\n                    case 6:\n                      payload = JSON.parse(plaintext);\n                      _context4.next = 12;\n                      break;\n                    case 9:\n                      _context4.prev = 9;\n                      _context4.t0 = _context4[\"catch\"](0);\n                      return _context4.abrupt(\"return\");\n                    case 12:\n                      if (isValidRequest(payload)) {\n                        _context4.next = 14;\n                        break;\n                      }\n                      return _context4.abrupt(\"return\");\n                    case 14:\n                      _context4.next = 17;\n                      return _this2.handleRequest(payload, event);\n                    case 17:\n                      response = _context4.sent;\n                      body = prepareResponse(response.id, response.result, response.error);\n                      _context4.next = 21;\n                      return prepareEvent(_this2.self.secret, event.pubkey, body);\n                    case 21:\n                      responseEvent = _context4.sent;\n                      // send response via relay\n                      relay.publish(responseEvent);\n                    case 23:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }, _callee4, null, [[0, 9]]);\n              }));\n              return function (_x6) {\n                return _ref4.apply(this, arguments);\n              };\n            }());\n            return _context5.abrupt(\"return\", sub);\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, this);\n    }));\n    function listen() {\n      return _listen.apply(this, arguments);\n    }\n    return listen;\n  }();\n  _proto.handleRequest = /*#__PURE__*/function () {\n    var _handleRequest = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(request, event) {\n      var id, method, params, result, error;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            id = request.id, method = request.method, params = request.params;\n            result = null;\n            error = null;\n            _context6.prev = 3;\n            this.event = event;\n            _context6.next = 7;\n            return this[method].apply(this, params);\n          case 7:\n            result = _context6.sent;\n            this.event = undefined;\n            _context6.next = 14;\n            break;\n          case 11:\n            _context6.prev = 11;\n            _context6.t0 = _context6[\"catch\"](3);\n            if (_context6.t0 instanceof Error) {\n              error = _context6.t0.message;\n            } else {\n              error = 'unknown error';\n            }\n          case 14:\n            return _context6.abrupt(\"return\", {\n              id: id,\n              result: result,\n              error: error\n            });\n          case 15:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this, [[3, 11]]);\n    }));\n    function handleRequest(_x7, _x8) {\n      return _handleRequest.apply(this, arguments);\n    }\n    return handleRequest;\n  }();\n  return NostrRPC;\n}();\nfunction now() {\n  return Math.floor(Date.now() / 1000);\n}\nfunction randomID() {\n  return Math.random().toString().slice(2);\n}\nfunction prepareRequest(id, method, params) {\n  return JSON.stringify({\n    id: id,\n    method: method,\n    params: params\n  });\n}\nfunction prepareResponse(id, result, error) {\n  return JSON.stringify({\n    id: id,\n    result: result,\n    error: error\n  });\n}\nfunction prepareEvent(_x9, _x10, _x11) {\n  return _prepareEvent.apply(this, arguments);\n}\nfunction _prepareEvent() {\n  _prepareEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(secretKey, pubkey, content) {\n    var cipherText, event, id, sig, signedEvent, ok, veryOk;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return nip04.encrypt(secretKey, pubkey, content);\n        case 2:\n          cipherText = _context7.sent;\n          event = {\n            kind: 24133,\n            created_at: now(),\n            pubkey: getPublicKey(secretKey),\n            tags: [['p', pubkey]],\n            content: cipherText\n          };\n          id = getEventHash(event);\n          sig = signEvent(event, secretKey);\n          signedEvent = _extends({}, event, {\n            id: id,\n            sig: sig\n          });\n          ok = validateEvent(signedEvent);\n          veryOk = verifySignature(signedEvent);\n          if (!(!ok || !veryOk)) {\n            _context7.next = 11;\n            break;\n          }\n          throw new Error('Event is not valid');\n        case 11:\n          return _context7.abrupt(\"return\", signedEvent);\n        case 12:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return _prepareEvent.apply(this, arguments);\n}\nfunction isValidRequest(payload) {\n  if (!payload) return false;\n  var keys = Object.keys(payload);\n  if (!keys.includes('id') || !keys.includes('method') || !keys.includes('params')) return false;\n  return true;\n}\nfunction isValidResponse(payload) {\n  if (!payload) return false;\n  var keys = Object.keys(payload);\n  if (!keys.includes('id') || !keys.includes('result') || !keys.includes('error')) return false;\n  return true;\n}\nfunction connectToRelay(_x12) {\n  return _connectToRelay.apply(this, arguments);\n}\nfunction _connectToRelay() {\n  _connectToRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(realayURL) {\n    var relay;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          relay = relayInit(realayURL);\n          _context8.next = 3;\n          return relay.connect();\n        case 3:\n          _context8.next = 5;\n          return new Promise(function (resolve, reject) {\n            relay.on('connect', function () {\n              resolve();\n            });\n            relay.on('error', function () {\n              reject(new Error(\"not possible to connect to \" + relay.url));\n            });\n          });\n        case 5:\n          return _context8.abrupt(\"return\", relay);\n        case 6:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return _connectToRelay.apply(this, arguments);\n}\nfunction broadcastToRelay(_x13, _x14, _x15) {\n  return _broadcastToRelay.apply(this, arguments);\n}\nfunction _broadcastToRelay() {\n  _broadcastToRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(relay, event, skipSeen) {\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          if (skipSeen === void 0) {\n            skipSeen = false;\n          }\n          _context9.next = 3;\n          return new Promise(function (resolve, reject) {\n            relay.on('error', function () {\n              reject(new Error(\"failed to connect to \" + relay.url));\n            });\n            var pub = relay.publish(event);\n            if (skipSeen) resolve();\n            pub.on('failed', function (reason) {\n              reject(reason);\n            });\n            pub.on('seen', function () {\n              resolve();\n            });\n          });\n        case 3:\n          return _context9.abrupt(\"return\", _context9.sent);\n        case 4:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return _broadcastToRelay.apply(this, arguments);\n}\n\nvar ConnectURI = /*#__PURE__*/function () {\n  function ConnectURI(_ref) {\n    var target = _ref.target,\n      metadata = _ref.metadata,\n      relay = _ref.relay;\n    this.target = target;\n    this.metadata = metadata;\n    this.relay = relay;\n  }\n  ConnectURI.fromURI = function fromURI(uri) {\n    var url = new URL(uri);\n    var target = url.hostname || url.pathname.substring(2);\n    if (!target) throw new Error('Invalid connect URI: missing target');\n    var relay = url.searchParams.get('relay');\n    if (!relay) {\n      throw new Error('Invalid connect URI: missing relay');\n    }\n    var metadata = url.searchParams.get('metadata');\n    if (!metadata) {\n      throw new Error('Invalid connect URI: missing metadata');\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    try {\n      var md = JSON.parse(metadata);\n      return new ConnectURI({\n        target: target,\n        metadata: md,\n        relay: relay\n      });\n    } catch (ignore) {\n      throw new Error('Invalid connect URI: metadata is not valid JSON');\n    }\n  };\n  var _proto = ConnectURI.prototype;\n  _proto.toString = function toString() {\n    return \"nostrconnect://\" + this.target + \"?metadata=\" + encodeURIComponent(JSON.stringify(this.metadata)) + \"&relay=\" + encodeURIComponent(this.relay);\n  };\n  _proto.approve = /*#__PURE__*/function () {\n    var _approve = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(secretKey) {\n      var rpc;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            rpc = new NostrRPC({\n              relay: this.relay,\n              secretKey: secretKey\n            });\n            _context.next = 3;\n            return rpc.call({\n              target: this.target,\n              request: {\n                method: 'connect',\n                params: [getPublicKey(secretKey)]\n              }\n            }, {\n              skipResponse: true\n            });\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function approve(_x) {\n      return _approve.apply(this, arguments);\n    }\n    return approve;\n  }();\n  _proto.reject = /*#__PURE__*/function () {\n    var _reject = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(secretKey) {\n      var rpc;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            rpc = new NostrRPC({\n              relay: this.relay,\n              secretKey: secretKey\n            });\n            _context2.next = 3;\n            return rpc.call({\n              target: this.target,\n              request: {\n                method: 'disconnect',\n                params: []\n              }\n            }, {\n              skipResponse: true\n            });\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, this);\n    }));\n    function reject(_x2) {\n      return _reject.apply(this, arguments);\n    }\n    return reject;\n  }();\n  return ConnectURI;\n}();\nvar Connect = /*#__PURE__*/function () {\n  function Connect(_ref2) {\n    var target = _ref2.target,\n      relay = _ref2.relay,\n      secretKey = _ref2.secretKey;\n    this.events = new EventEmitter();\n    this.nip04 = {\n      encrypt: function () {\n        var _encrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_pubkey, _plaintext) {\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                throw new Error('Not implemented');\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        function encrypt(_x3, _x4) {\n          return _encrypt.apply(this, arguments);\n        }\n        return encrypt;\n      }(),\n      decrypt: function () {\n        var _decrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_pubkey, _ciphertext) {\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                throw new Error('Not implemented');\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4);\n        }));\n        function decrypt(_x5, _x6) {\n          return _decrypt.apply(this, arguments);\n        }\n        return decrypt;\n      }()\n    };\n    this.rpc = new NostrRPC({\n      relay: relay,\n      secretKey: secretKey\n    });\n    if (target) {\n      this.target = target;\n    }\n  }\n  var _proto2 = Connect.prototype;\n  _proto2.init = /*#__PURE__*/function () {\n    var _init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      var _this = this;\n      var sub;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return this.rpc.listen();\n          case 2:\n            sub = _context6.sent;\n            sub.on('event', /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event) {\n                var payload, plaintext, _payload$params, pubkey;\n                return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                  while (1) switch (_context5.prev = _context5.next) {\n                    case 0:\n                      _context5.prev = 0;\n                      _context5.next = 3;\n                      return nip04.decrypt(_this.rpc.self.secret, event.pubkey, event.content);\n                    case 3:\n                      plaintext = _context5.sent;\n                      if (plaintext) {\n                        _context5.next = 6;\n                        break;\n                      }\n                      throw new Error('failed to decrypt event');\n                    case 6:\n                      payload = JSON.parse(plaintext);\n                      _context5.next = 12;\n                      break;\n                    case 9:\n                      _context5.prev = 9;\n                      _context5.t0 = _context5[\"catch\"](0);\n                      return _context5.abrupt(\"return\");\n                    case 12:\n                      if (isValidRequest(payload)) {\n                        _context5.next = 14;\n                        break;\n                      }\n                      return _context5.abrupt(\"return\");\n                    case 14:\n                      _context5.t1 = payload.method;\n                      _context5.next = _context5.t1 === 'connect' ? 17 : _context5.t1 === 'disconnect' ? 23 : 26;\n                      break;\n                    case 17:\n                      if (!(!payload.params || payload.params.length !== 1)) {\n                        _context5.next = 19;\n                        break;\n                      }\n                      throw new Error('connect: missing pubkey');\n                    case 19:\n                      _payload$params = payload.params, pubkey = _payload$params[0];\n                      _this.target = pubkey;\n                      _this.events.emit('connect', pubkey);\n                      return _context5.abrupt(\"break\", 26);\n                    case 23:\n                      _this.target = undefined;\n                      _this.events.emit('disconnect');\n                      return _context5.abrupt(\"break\", 26);\n                    case 26:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }, _callee5, null, [[0, 9]]);\n              }));\n              return function (_x7) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this);\n    }));\n    function init() {\n      return _init.apply(this, arguments);\n    }\n    return init;\n  }();\n  _proto2.on = function on(evt, cb) {\n    this.events.on(evt, cb);\n  };\n  _proto2.off = function off(evt, cb) {\n    this.events.off(evt, cb);\n  };\n  _proto2.disconnect = /*#__PURE__*/function () {\n    var _disconnect = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            if (this.target) {\n              _context7.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            // notify the UI that we are disconnecting\n            this.events.emit('disconnect');\n            _context7.prev = 3;\n            _context7.next = 6;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'disconnect',\n                params: []\n              }\n            }, {\n              skipResponse: true\n            });\n          case 6:\n            _context7.next = 11;\n            break;\n          case 8:\n            _context7.prev = 8;\n            _context7.t0 = _context7[\"catch\"](3);\n            throw new Error('Failed to disconnect');\n          case 11:\n            this.target = undefined;\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7, this, [[3, 8]]);\n    }));\n    function disconnect() {\n      return _disconnect.apply(this, arguments);\n    }\n    return disconnect;\n  }();\n  _proto2.getPublicKey = /*#__PURE__*/function () {\n    var _getPublicKey = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n      var response;\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) switch (_context8.prev = _context8.next) {\n          case 0:\n            if (this.target) {\n              _context8.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context8.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'get_public_key',\n                params: []\n              }\n            });\n          case 4:\n            response = _context8.sent;\n            return _context8.abrupt(\"return\", response);\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }, _callee8, this);\n    }));\n    function getPublicKey() {\n      return _getPublicKey.apply(this, arguments);\n    }\n    return getPublicKey;\n  }();\n  _proto2.signEvent = /*#__PURE__*/function () {\n    var _signEvent = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(event) {\n      var signature;\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) switch (_context9.prev = _context9.next) {\n          case 0:\n            if (this.target) {\n              _context9.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context9.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'sign_event',\n                params: [event]\n              }\n            });\n          case 4:\n            signature = _context9.sent;\n            return _context9.abrupt(\"return\", signature);\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }, _callee9, this);\n    }));\n    function signEvent(_x8) {\n      return _signEvent.apply(this, arguments);\n    }\n    return signEvent;\n  }();\n  _proto2.getRelays = /*#__PURE__*/function () {\n    var _getRelays = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n      return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n        while (1) switch (_context10.prev = _context10.next) {\n          case 0:\n            throw new Error('Not implemented');\n          case 1:\n          case \"end\":\n            return _context10.stop();\n        }\n      }, _callee10);\n    }));\n    function getRelays() {\n      return _getRelays.apply(this, arguments);\n    }\n    return getRelays;\n  }();\n  return Connect;\n}();\n\nvar NostrSigner = /*#__PURE__*/function (_NostrRPC) {\n  _inheritsLoose(NostrSigner, _NostrRPC);\n  function NostrSigner() {\n    return _NostrRPC.apply(this, arguments) || this;\n  }\n  var _proto = NostrSigner.prototype;\n  _proto.disconnect = /*#__PURE__*/function () {\n    var _disconnect = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            this.events.emit('disconnect');\n            return _context.abrupt(\"return\", null);\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function disconnect() {\n      return _disconnect.apply(this, arguments);\n    }\n    return disconnect;\n  }();\n  _proto.isConnected = function isConnected() {\n    throw new Error('Method not implemented yet.');\n  };\n  return NostrSigner;\n}(NostrRPC);\n\nexport { Connect, ConnectURI, NostrRPC, NostrSigner, broadcastToRelay, connectToRelay, isValidRequest, isValidResponse, now, prepareEvent, prepareRequest, prepareResponse, randomID };\n//# sourceMappingURL=connect.esm.js.map\n","import NstrAdapter from './index.js';\nimport { Connect } from '@nostr-connect/connect';\n\nclass NstrAdapterNip46 extends NstrAdapter {\n    #secretKey = null;\n    \n    constructor(pubkey, secretKey, adapterConfig = {}) {\n        super(pubkey, adapterConfig);\n        this.#secretKey = secretKey;\n    }\n\n    async signEvent(event) {\n        const connect = new Connect({\n            secretKey: this.#secretKey,\n            target: this.pubkey,\n        });\n        await connect.init();\n        \n        event.sig = await connect.signEvent('12323423434');\n        return event;\n    }\n}\n\nexport default NstrAdapterNip46;\n","import { generatePrivateKey, signEvent, getPublicKey, nip04 } from 'nostr-tools';\nimport NstrAdapter from './index.js';\n\nclass NstrAdapterDiscadableKeys extends NstrAdapter {\n    #privateKey;\n\n    constructor(adapterConfig={}) {\n        let key = localStorage.getItem('nostrichat-discardable-key');\n        let publicKey = localStorage.getItem('nostrichat-discardable-public-key');\n\n        if (!key) {\n            key = generatePrivateKey();\n            console.log('generated key', key);\n            publicKey = getPublicKey(key);\n        }\n\n        localStorage.setItem('nostrichat-discardable-key', key);\n        localStorage.setItem('nostrichat-discardable-public-key', publicKey);\n\n        super(publicKey, adapterConfig);\n        \n        this.#privateKey = key;\n        console.log(key);\n    }\n\n    async signEvent(event) {\n        event.sig = await signEvent(event, this.#privateKey);\n        return event;\n    }\n\n    async encrypt(destPubkey, message) {\n        console.log(this.#privateKey);\n        return await nip04.encrypt(this.#privateKey, destPubkey, message);\n    }\n\n    async decrypt(destPubkey, message) {\n        return await nip04.decrypt(this.#privateKey, destPubkey, message);\n    }\n}\n\nexport default NstrAdapterDiscadableKeys;\n","<script>\n    import { onMount } from \"svelte\";\n    // import QR from 'svelte-qr';\n    import { chatAdapter } from './lib/store';\n    import NstrAdapterNip07 from './lib/adapters/nip07.js';\n    import NstrAdapterNip46 from './lib/adapters/nip46.js';\n\timport NstrAdapterDiscadableKeys from './lib/adapters/discardable-keys.js';\n\n    export let websiteOwnerPubkey;\n    export let chatConfiguration;\n    export let relays;\n\n    let hasNostrNip07 = true;\n    let publicKey = null;\n    let nip46URI;\n    let adapterConfig;\n\n    onMount(() => {\n        // hasNostrNip07 = !!window.nostr;\n\n        const type = localStorage.getItem('nostrichat-type');\n\n        if (type === 'nip07') {\n            useNip07();\n        } else if (type === 'nip-46') {\n            useNip46();\n        }\n\n        adapterConfig = {\n            type: chatConfiguration.chatType,\n            tags: chatConfiguration.chatTags,\n            referenceTags: chatConfiguration.chatReferenceTags,\n            websiteOwnerPubkey,\n            relays\n        }\n    });\n\n    function useNip07() {\n        window.nostr.getPublicKey().then((pubkey) => {\n            localStorage.setItem('nostrichat-type', 'nip07');\n            chatAdapter.set(new NstrAdapterNip07(pubkey, adapterConfig))\n        });\n    }\n\n    import { generatePrivateKey, getPublicKey } from 'nostr-tools';\n    import { Connect, ConnectURI } from '@nostr-connect/connect';\n\n    async function useDiscardableKeys() {\n        chatAdapter.set(new NstrAdapterDiscadableKeys(adapterConfig))\n    }\n\n\n    async function useNip46() {\n        let key = localStorage.getItem('nostrichat-nostr-connect-key');\n        let publicKey = localStorage.getItem('nostrichat-nostr-connect-public-key');\n\n        if (key) {\n            chatAdapter.set(new NstrAdapterNip46(publicKey, key, adapterConfig))\n            return;\n        }\n\n        key = generatePrivateKey();\n\n        const connect = new Connect({ secretKey: key, relay: 'wss://nostr.vulpem.com' });\n        connect.events.on('connect', (connectedPubKey) => {\n            localStorage.setItem('nostrichat-nostr-connect-key', key);\n            localStorage.setItem('nostrichat-nostr-connect-public-key', connectedPubKey);\n            localStorage.setItem('nostrichat-type', 'nip-46');\n\n            console.log('connected to nostr connect relay')\n            publicKey = connectedPubKey;\n            chatAdapter.set(new NstrAdapterNip46(publicKey, key))\n            nip46URI = null;\n        });\n        connect.events.on('disconnect', () => {\n            console.log('disconnected from nostr connect relay')\n        })\n        await connect.init();\n\n        let windowTitle, currentUrl, currentDomain;\n\n        try {\n            windowTitle = window.document.title || 'Nostrichat';\n            currentUrl = new URL(window.location.href);\n            currentDomain = currentUrl.hostname;\n        } catch (e) {\n            currentUrl = window.location.href;\n            currentDomain = currentUrl;\n        }\n\n        const connectURI = new ConnectURI({\n            target: getPublicKey(key),\n            relay: 'wss://nostr.vulpem.com',\n            metadata: {\n                name: windowTitle,\n                description: '',\n                url: currentUrl,\n            },\n        });\n\n        nip46URI = connectURI.toString();\n    }\n\n    function Nip46Copy() {\n        navigator.clipboard.writeText(nip46URI);\n    }\n</script>\n\n<h1 class=\"font-bold text-xl mb-3\">\n    How would you like to connect?\n</h1>\n\n{#if publicKey}\n    <p class=\"text-gray-400 mb-3 font-bold\">\n        Nostr Connect is a WIP, not fully implemented yet!\n    </p>\n\n    <p class=\"text-gray-400 mb-3\">\n        You are currently connected with the following public key:\n        <span>{publicKey}</span>\n    </p>\n{/if}\n\n{#if nip46URI}\n    <p class=\"text-gray-600 mb-3\">\n        Scan this with your Nostr Connect (click to copy to clipboard)\n    </p>\n\n    <div class=\"bg-white w-full p-3\"\n        on:click|preventDefault={Nip46Copy}>\n        <!-- <QR text={nip46URI} /> -->\n    </div>\n\n    <button class=\"\n        bg-purple-900\n        hover:bg-purple-700\n        w-full\n        p-2\n        rounded-xl\n        text-center\n        font-regular\n        text-white\n    \" on:click|preventDefault={() => { nip46URI = null; }}>\n        Cancel\n    </button>\n{:else if !publicKey}\n    <div class=\"flex flex-col gap-1\">\n        {#if hasNostrNip07}\n            <button class=\"\n                bg-purple-900\n                hover:bg-purple-700\n                w-full\n                p-4\n                rounded-xl\n                text-center\n                font-regular\n                text-gray-200\n            \" on:click|preventDefault={useNip07}>\n                Browser Extension (NIP-07)\n            </button>\n        {/if}\n\n\n        <button class=\"\n            bg-purple-900\n            hover:bg-purple-700\n            w-full\n            p-4\n            rounded-xl\n            text-center\n            font-regular\n            text-gray-200\n        \" on:click|preventDefault={useNip46}>\n            Nostr Connect (NIP-46)\n        </button>\n\n        <button class=\"\n            bg-purple-900\n            hover:bg-purple-700\n            w-full\n            p-4\n            rounded-xl\n            text-center\n            font-regular\n            text-gray-200\n        \" on:click|preventDefault={useDiscardableKeys}>\n            Anonymous\n            <span class=\"text-xs text-gray-300\">\n                (Ephemeral Keys)\n            </span>\n        </button>\n    </div>\n{/if}\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","\"use strict\";\n/* tslint:disable:max-classes-per-file */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InternalError = exports.InvalidDataError = exports.RoutingError = exports.UnsupportedMethodError = exports.ConnectionError = exports.RejectionError = exports.MissingProviderError = void 0;\n/**\n * Workaround for custom errors when compiling typescript targeting 'ES5'.\n * see: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n * @param {CustomError} error\n * @param newTarget the value of `new.target`\n * @param {Function} errorType\n */\nfunction fixError(error, newTarget, errorType) {\n    Object.setPrototypeOf(error, errorType.prototype);\n    // when an error constructor is invoked with the `new` operator\n    if (newTarget === errorType) {\n        error.name = newTarget.name;\n        // exclude the constructor call of the error type from the stack trace.\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(error, errorType);\n        }\n        else {\n            var stack = new Error(error.message).stack;\n            if (stack) {\n                error.stack = fixStack(stack, \"new \".concat(newTarget.name));\n            }\n        }\n    }\n}\nfunction fixStack(stack, functionName) {\n    if (!stack)\n        return stack;\n    if (!functionName)\n        return stack;\n    // exclude lines starts with:  \"  at functionName \"\n    var exclusion = new RegExp(\"\\\\s+at\\\\s\".concat(functionName, \"\\\\s\"));\n    var lines = stack.split(\"\\n\");\n    var resultLines = lines.filter(function (line) { return !line.match(exclusion); });\n    return resultLines.join(\"\\n\");\n}\n/// CUSTOM ERRORS ///\n// When no WebLN provider is available\nvar MissingProviderError = /** @class */ (function (_super) {\n    __extends(MissingProviderError, _super);\n    function MissingProviderError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, MissingProviderError);\n        return _this;\n    }\n    return MissingProviderError;\n}(Error));\nexports.MissingProviderError = MissingProviderError;\n// When the user rejects a request\nvar RejectionError = /** @class */ (function (_super) {\n    __extends(RejectionError, _super);\n    function RejectionError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, RejectionError);\n        return _this;\n    }\n    return RejectionError;\n}(Error));\nexports.RejectionError = RejectionError;\n// When the node can't be connected to (i.e. the app did nothing wrong)\nvar ConnectionError = /** @class */ (function (_super) {\n    __extends(ConnectionError, _super);\n    function ConnectionError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, ConnectionError);\n        return _this;\n    }\n    return ConnectionError;\n}(Error));\nexports.ConnectionError = ConnectionError;\n// The WebLN provider doesn't support this method\nvar UnsupportedMethodError = /** @class */ (function (_super) {\n    __extends(UnsupportedMethodError, _super);\n    function UnsupportedMethodError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, UnsupportedMethodError);\n        return _this;\n    }\n    return UnsupportedMethodError;\n}(Error));\nexports.UnsupportedMethodError = UnsupportedMethodError;\n// The desired node couldn't be routed to\nvar RoutingError = /** @class */ (function (_super) {\n    __extends(RoutingError, _super);\n    function RoutingError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, RoutingError);\n        return _this;\n    }\n    return RoutingError;\n}(Error));\nexports.RoutingError = RoutingError;\n// An argument passed was somehow invalid (e.g. malformed invoice)\nvar InvalidDataError = /** @class */ (function (_super) {\n    __extends(InvalidDataError, _super);\n    function InvalidDataError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, InvalidDataError);\n        return _this;\n    }\n    return InvalidDataError;\n}(Error));\nexports.InvalidDataError = InvalidDataError;\n// Something broke in the WebLN provider internally, nothing to do with the app\nvar InternalError = /** @class */ (function (_super) {\n    __extends(InternalError, _super);\n    function InternalError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, InternalError);\n        return _this;\n    }\n    return InternalError;\n}(Error));\nexports.InternalError = InternalError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.requestProvider = void 0;\nvar errors_1 = require(\"./errors\");\nfunction requestProvider(_) {\n    if (_ === void 0) { _ = {}; }\n    return new Promise(function (resolve, reject) {\n        if (typeof window === 'undefined') {\n            return reject(new Error('Must be called in a browser context'));\n        }\n        var webln = window.webln;\n        if (!webln) {\n            return reject(new errors_1.MissingProviderError('Your browser has no WebLN provider'));\n        }\n        webln.enable()\n            .then(function () { return resolve(webln); })\n            .catch(function (err) { return reject(err); });\n    });\n}\nexports.requestProvider = requestProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./client\"), exports);\n__exportStar(require(\"./provider\"), exports);\n__exportStar(require(\"./errors\"), exports);\n","<script>\n    export let icon, amount, amountDisplay, event, mobilePR;\n    import { zappingMessage } from './lib/store';\n    import NDK, { NDKEvent, NDKNip07Signer } from '@nostr-dev-kit/ndk';\n    import { requestProvider } from 'webln';\n\n    let hover = false;\n\n    async function zap() {\n        const signer = new NDKNip07Signer();\n        const ndk = new NDK({ explicitRelayUrls: ['wss://nos.lol', 'wss://relay.nostr.band', 'wss://relay.damus.io', 'wss://nostr.mom', 'wss://no.str.cr'] });\n        ndk.signer = signer;\n        await ndk.connect();\n        let pr;\n        try {\n            const ndkEvent = new NDKEvent(ndk, event);\n            pr = await ndkEvent.zap(amount * 1000);\n        } catch (e) {\n            alert(e)\n            return;\n        }\n\n\n        let webln;\n\n        try {\n            webln = await requestProvider();\n        } catch (err) {\n            mobilePR = pr;\n            return;\n        }\n\n        try {\n            await webln.sendPayment(pr);\n            $zappingMessage = null;\n        } catch (err) {\n            mobilePR = pr;\n        }\n    }\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n    on:mouseenter={() => (hover = true)}\n    on:mouseleave={() => (hover = false)}\n    on:click|preventDefault={zap}\n>\n    {#if !hover}\n        <span class=\"text-xl\">{icon}</span>\n    {:else}\n        <span class=\"text-base text-white flex flex-col items-center\">\n            {amountDisplay||amount}\n        </span>\n    {/if}\n</div>","\"use strict\";\n/**\n * Everything needed to implement your own provider.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","<script>\n    import { afterUpdate, onMount } from 'svelte';\n\timport { selectedMessage, zappingMessage, zapsPerMessage } from './lib/store';\n    import { chatData, chatAdapter } from './lib/store';\n    import { nip19 } from 'nostr-tools';\n    import ZapAmountButton from './ZapAmountButton.svelte';\n    // import { prettifyContent } from '$lib/utils';\n    export let event;\n    export let responses;\n    export let websiteOwnerPubkey;\n\n    let profiles = {};\n    let profilePicture;\n    let npub;\n    let zappingIt;\n    let hovering;\n    let mobilePR;\n\n    let zappedAmount = 0;\n\n    function selectMessage() {\n        if ($selectedMessage === event.id) {\n            $selectedMessage = null;\n        } else {\n            $selectedMessage = event.id;\n        }\n    }\n\n    // delay-fetch responses\n    onMount(() => {\n        $chatAdapter.delayedSubscribe(\n            {kinds: [1, 42, 9735], '#e': [event.id]}\n        , 'responses', 500)\n    })\n\n    const byWebsiteOwner = !!websiteOwnerPubkey === event.pubkey;\n\n    $: profiles = $chatData.profiles;\n    $: displayName = profiles[event.pubkey] && profiles[event.pubkey].display_name || `[${event.pubkey.slice(0, 6)}]`;\n    // $: nip05 = profiles[event.pubkey] && profiles[event.pubkey].nip05;\n    $: zappingIt = $zappingMessage === event.id;\n    $: {\n        try {\n            npub = nip19.npubEncode(event.pubkey);\n        } catch (e) {\n            npub = event.pubkey;\n        }\n    }\n\n    $chatAdapter.on('zap', () => {\n        zappedAmount = $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n    });\n\n    $: {\n        zappedAmount = $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n    }\n\n    afterUpdate(() => {\n        zappedAmount = $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n    });\n\n    $: profilePicture = profiles[event.pubkey] && profiles[event.pubkey].picture || `https://robohash.org/${event.pubkey.slice(0, 1)}.png?set=set1`;\n\n    // const repliedIds = event.tags.filter(e => e[0] === 'e').map(e => e[1]);\n\n    let timestamp = new Date(event.created_at * 1000);\n</script>\n\n<div\n    class=\"\n        flex flex-col gap-4\n        p-2-lg mb-3\n        text-wrap\n        relative\n    \"\n    on:mouseenter={() => (hovering = true)}\n    on:mouseleave={() => (hovering = false)}\n>\n    <div class=\"flex flex-row gap-3\">\n        <div class=\"min-w-fit flex flex-col gap-2\">\n            <a href={`nostr:${npub}`}>\n                <img src=\"{profilePicture}\" class=\"\n                    block w-8 h-8 rounded-full\n                    {byWebsiteOwner ? 'ring-purple-700 ring-4' : ''}\n                \" alt=\"\" />\n            </a>\n\n            <button\n                    class=\"\n                        rounded-full\n                        {zappedAmount > 0 ? 'opacity-100 text-base' : 'bg-orange-500 opacity-10 text-xl'}\n                        w-8 h-8\n                        flex items-center\n                        justify-center\n                        hover:opacity-100\n                    \"\n                    on:click|preventDefault={() => $zappingMessage = $zappingMessage === event.id ? null : event.id}\n                >\n                {#if zappedAmount > 0}\n                    <p class=\"flex flex-col items-center my-4\">\n                        \n                        <span class=\"text-orange-500 font-semibold\">\n                            {zappedAmount/1000}\n                        </span>\n                    </p>\n                {:else}\n                    \n                {/if}\n                </button>\n\n            <div class=\"\n                {zappingIt ?\n                    'w-full rounded-full bg-white  drop-shadow-xl justify-between border-2 border-gray-200' :\n                    ' rounded-full w-8 h-8 justify-center'\n                }\n                flex items-center absolute ml-5 mt-10 z-10\">\n                {#if zappingIt}\n                    {#if mobilePR}\n                        <div class=\"flex flex-col gap-3 w-full\">\n                            <a href={`lightning:${mobilePR}`} class=\"text-center w-full p-3 bg-black text-white rounded-t-xl\">Open in wallet</a>\n                            <button class=\"bg-white rounder-b-xl p-3\" on:click={() => { $zappingMessage = null; }}>\n                                Cancel\n                            </button>\n                        </div>\n                    {:else}\n                        <div class=\"flex flex-row items-stretch justify-between w-full\">\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={500} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={2500} amountDisplay={'2.5k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={5000} amountDisplay={'5k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={10000} amountDisplay={'10k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={100000} amountDisplay={'100k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={1000000} amountDisplay={'1M'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                        </div>\n                    {/if}\n                {/if}\n            </div>\n\n            <!-- <span class=\"text-base font-semibold text-clip\">{displayName}</span>\n                {#if nip05}\n                    <span class=\"text-sm text-gray-400\">{nip05}</span>\n                {/if} -->\n        </div>\n\n        <div class=\"w-full overflow-hidden\">\n            <div class=\"flex flex-row justify-between text-center overflow-clip text-clip w-full\">\n            </div>\n\n            <div class=\"\n                max-h-64 text-base\n                cursor-pointer\n                border border-slate-200\n                {$selectedMessage === event.id ? 'bg-purple-700 text-white' : 'bg-white text-gray-900 hover:bg-slate-100'}\n                p-4 py-2 overflow-auto rounded-2xl\n                shadow-sm\n            \" on:click|preventDefault={()=>{selectMessage(event.id)}}\n            on:keydown|preventDefault={()=>{selectMessage(event.id)}}\n            on:keyup|preventDefault={()=>{selectMessage(event.id)}}\n            >\n                {event.content}\n            </div>\n\n            <div class=\"flex flex-row-reverse justify-between mt-1 overflow-clip items-center relative\">\n                <div class=\"text-xs text-gray-400 text-ellipsis overflow-clip whitespace-nowrap\">\n                    <span class=\"py-2\">\n                        {timestamp.toLocaleString()}\n                    </span>\n                </div>\n\n                {#if byWebsiteOwner}\n                    <div class=\"text-purple-500 text-xs\">\n                        Website owner\n                    </div>\n                {:else}\n                    <div class=\"text-xs text-gray-400\">\n                        {displayName}\n                    </div>\n                {/if}\n            </div>\n        </div>\n    </div>\n</div>\n\n{#if responses[event.id].length > 0}\n    <div class=\"pl-5 border-l border-l-gray-400 flex flex-col gap-4\">\n        {#each responses[event.id] as response}\n            <svelte:self {websiteOwnerPubkey} event={response} {responses} />\n        {/each}\n    </div>\n{/if}\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","export default {\n  $(selector) {\n    if (typeof selector === \"string\") {\n      return document.querySelector(selector);\n    }\n    return selector;\n  },\n  extend(...args) {\n    return Object.assign(...args);\n  },\n  cumulativeOffset(element) {\n    let top = 0;\n    let left = 0;\n\n    do {\n      top += element.offsetTop || 0;\n      left += element.offsetLeft || 0;\n      element = element.offsetParent;\n    } while (element);\n\n    return {\n      top: top,\n      left: left\n    };\n  },\n  directScroll(element) {\n    return element && element !== document && element !== document.body;\n  },\n  scrollTop(element, value) {\n    let inSetter = value !== undefined;\n    if (this.directScroll(element)) {\n      return inSetter ? (element.scrollTop = value) : element.scrollTop;\n    } else {\n      return inSetter\n        ? (document.documentElement.scrollTop = document.body.scrollTop = value)\n        : window.pageYOffset ||\n            document.documentElement.scrollTop ||\n            document.body.scrollTop ||\n            0;\n    }\n  },\n  scrollLeft(element, value) {\n    let inSetter = value !== undefined;\n    if (this.directScroll(element)) {\n      return inSetter ? (element.scrollLeft = value) : element.scrollLeft;\n    } else {\n      return inSetter\n        ? (document.documentElement.scrollLeft = document.body.scrollLeft = value)\n        : window.pageXOffset ||\n            document.documentElement.scrollLeft ||\n            document.body.scrollLeft ||\n            0;\n    }\n  }\n};\n","import { cubicInOut } from \"svelte/easing\";\nimport { noop, loop, now } from \"svelte/internal\";\nimport _ from \"./helper\";\n\nconst defaultOptions = {\n  container: \"body\",\n  duration: 500,\n  delay: 0,\n  offset: 0,\n  easing: cubicInOut,\n  onStart: noop,\n  onDone: noop,\n  onAborting: noop,\n  scrollX: false,\n  scrollY: true\n};\n\nconst _scrollTo = options => {\n  let {\n    offset,\n    duration,\n    delay,\n    easing,\n    x=0,\n    y=0,\n    scrollX,\n    scrollY,\n    onStart,\n    onDone,\n    container,\n    onAborting,\n    element\n  } = options;\n\n  if (typeof offset === \"function\") {\n    offset = offset();\n  }\n\n  var cumulativeOffsetContainer = _.cumulativeOffset(container);\n  var cumulativeOffsetTarget = element\n    ? _.cumulativeOffset(element)\n    : { top: y, left: x };\n\n  var initialX = _.scrollLeft(container);\n  var initialY = _.scrollTop(container);\n\n  var targetX =\n    cumulativeOffsetTarget.left - cumulativeOffsetContainer.left + offset;\n  var targetY =\n    cumulativeOffsetTarget.top - cumulativeOffsetContainer.top + offset;\n\n  var diffX = targetX - initialX;\n\tvar diffY = targetY - initialY;\n\n  let scrolling = true;\n  let started = false;\n  let start_time = now() + delay;\n  let end_time = start_time + duration;\n\n  function scrollToTopLeft(element, top, left) {\n    if (scrollX) _.scrollLeft(element, left);\n    if (scrollY) _.scrollTop(element, top);\n  }\n\n  function start(delayStart) {\n    if (!delayStart) {\n      started = true;\n      onStart(element, {x, y});\n    }\n  }\n\n  function tick(progress) {\n    scrollToTopLeft(\n      container,\n      initialY + diffY * progress,\n      initialX + diffX * progress\n    );\n  }\n\n  function stop() {\n    scrolling = false;\n  }\n\n  loop(now => {\n    if (!started && now >= start_time) {\n      start(false)\n    }\n\n    if (started && now >= end_time) {\n      tick(1);\n      stop();\n      onDone(element, {x, y});\n    }\n\n    if (!scrolling) {\n      onAborting(element, {x, y});\n      return false;\n    }\n    if (started) {\n      const p = now - start_time;\n      const t = 0 + 1 * easing(p / duration);\n      tick(t);\n    }\n\n    return true;\n  });\n\n  start(delay);\n\n  tick(0);\n\n  return stop;\n};\n\nconst proceedOptions = options => {\n\tlet opts = _.extend({}, defaultOptions, options);\n  opts.container = _.$(opts.container);\n  opts.element = _.$(opts.element);\n  return opts;\n};\n\nconst scrollContainerHeight = containerElement => {\n  if (\n    containerElement &&\n    containerElement !== document &&\n    containerElement !== document.body\n  ) {\n    return containerElement.scrollHeight - containerElement.offsetHeight;\n  } else {\n    let body = document.body;\n    let html = document.documentElement;\n\n    return Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n  }\n};\n\nexport const setGlobalOptions = options => {\n\t_.extend(defaultOptions, options || {});\n};\n\nexport const scrollTo = options => {\n  return _scrollTo(proceedOptions(options));\n};\n\nexport const scrollToBottom = options => {\n  options = proceedOptions(options);\n\n  return _scrollTo(\n    _.extend(options, {\n      element: null,\n      y: scrollContainerHeight(options.container)\n    })\n  );\n};\n\nexport const scrollToTop = options => {\n  options = proceedOptions(options);\n\n  return _scrollTo(\n    _.extend(options, {\n      element: null,\n      y: 0\n    })\n  );\n};\n\nexport const makeScrollToAction = scrollToFunc => {\n  return (node, options) => {\n    let current = options;\n    const handle = e => {\n      e.preventDefault();\n      scrollToFunc(\n        typeof current === \"string\" ? { element: current } : current\n      );\n    };\n    node.addEventListener(\"click\", handle);\n    node.addEventListener(\"touchstart\", handle);\n    return {\n      update(options) {\n        current = options;\n      },\n      destroy() {\n        node.removeEventListener(\"click\", handle);\n        node.removeEventListener(\"touchstart\", handle);\n      }\n    };\n  };\n};\n\nexport const scrollto = makeScrollToAction(scrollTo);\nexport const scrolltotop = makeScrollToAction(scrollToTop);\nexport const scrolltobottom = makeScrollToAction(scrollToBottom);\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","<script>\n    import { chatAdapter, chatData, selectedMessage, zapsPerMessage } from './lib/store';\n    import { onMount } from 'svelte';\n    import NostrNote from './NostrNote.svelte';\n    import * as animateScroll from \"svelte-scrollto\";\n\n    let events = [];\n    let responseEvents = [];\n    let responses = {};\n    let profiles = {};\n\n    export let websiteOwnerPubkey;\n    export let chatConfiguration;\n    let prevChatConfiguration;\n\n    $: {\n        if (chatConfiguration !== prevChatConfiguration && $chatAdapter) {\n            $chatAdapter.setChatConfiguration(\n                chatConfiguration.chatType,\n                chatConfiguration.chatTags,\n                chatConfiguration.chatReferenceTags,\n                chatConfiguration.chatId);\n            events = [];\n            responses = {};\n            rootNoteId = null;\n            localStorage.removeItem('rootNoteId');\n\n            // rootNoteId = localStorage.getItem('rootNoteId');\n            // if (rootNoteId) {\n            //     $chatAdapter.subscribeToEventAndResponses(rootNoteId);\n            // }\n        }\n        prevChatConfiguration = chatConfiguration;\n    }\n\n    function getEventById(eventId) {\n        let event = events.find(e => e.id === eventId);\n        event = event || responseEvents.find(e => e.id === eventId);\n        return event;\n    }\n\n    async function sendMessage() {\n        const input = document.getElementById('message-input');\n        const message = input.value;\n        input.value = '';\n        let extraParams = { tags: [], tagPubKeys: [] };\n\n        // if this is the rootLevel we want to tag the owner of the site's pubkey\n        if (!rootNoteId && websiteOwnerPubkey) { extraParams.tagPubKeys = [websiteOwnerPubkey] }\n\n        // if we are responding to an event, we want to tag the event and the pubkey\n        if ($selectedMessage) {\n            extraParams.tags.push(['e', $selectedMessage, \"wss://nos.lol\", \"root\"]);\n            extraParams.tagPubKeys.push(getEventById($selectedMessage).pubkey);\n        }\n\n        // if (rootNoteId) {\n        //     // mark it as a response to the most recent event\n        //     const mostRecentEvent = events[events.length - 1];\n        //     // go through all the tags and add them to the new message\n        //     if (mostRecentEvent) {\n        //         mostRecentEvent.tags.forEach(tag => {\n        //             if (tag[0] === 'e') {\n        //                 extraParams.tags.push(tag);\n        //             }\n        //         })\n        //         extraParams.tags.push(['e', mostRecentEvent.id]);\n        //         extraParams.tags.push(['p', mostRecentEvent.pubkey]);\n        //     }\n        // }\n\n        const noteId = await $chatAdapter.send(message, extraParams);\n\n        if (!rootNoteId) {\n            rootNoteId = noteId;\n            localStorage.setItem('rootNoteId', rootNoteId);\n        }\n    }\n\n    async function inputKeyDown(event) {\n        if (event.key === 'Enter') {\n            sendMessage();\n            event.preventDefault();\n        }\n    }\n\n    function messageReceived(message) {\n        const messageLastEventTag = message.tags.filter(tag => tag[0] === 'e').pop();\n        let isThread;\n\n        if (chatConfiguration.chatType === 'GLOBAL') {\n            isThread = message.tags.filter(tag => tag[0] === 'e').length >= 1;\n        } else if (chatConfiguration.chatType === 'GROUP') {\n            isThread = message.tags.filter(tag => tag[0] === 'e' && tag[1] !== chatConfiguration.chatId).length >= 1;\n        } else {\n            const pubkeysTagged = message.tags.filter(tag => tag[0] === 'p').map(tag => tag[1]);\n            isThread = new Set(pubkeysTagged).size >= 2;\n        }\n\n        if (!responses[message.id]) { responses[message.id] = [] };\n\n        if (isThread) {\n            // get the last \"e\" tag, which is tagging the immediate parent\n            const lastETag = message.tags.filter(tag => tag[0] === 'e').pop();\n            if (lastETag && lastETag[1]) {\n                // if there is one, add it to the response\n                if (!responses[lastETag[1]]) {\n                    responses[lastETag[1]] = [];\n                }\n                responses[lastETag[1]].push(message);\n            }\n\n            responseEvents.push(message);\n            responseEvents = responseEvents;\n        } else {\n            // insert message so that it's chronologically ordered by created_at\n            let index = 0;\n            while (index < events.length && events[index].created_at < message.created_at) {\n                index++;\n            }\n            events.splice(index, 0, message);\n            events = events;\n        }\n\n        responses = responses;\n\n        scrollDown()\n    }\n\n    function scrollDown() {\n        animateScroll.scrollToBottom({\n            container: document.getElementById('messages-container'),\n            offset: 999999, // hack, oh well, browsers suck\n            duration: 50\n        })\n    }\n\n    function zapReceived(zap) {\n        const event = events.find(event => event.id === zap.zappedEvent);\n        if (!event) { return; }\n\n        if (!$zapsPerMessage[event.id]) $zapsPerMessage[event.id] = [];\n        $zapsPerMessage[event.id].push(zap);\n    }\n\n    function reactionReceived(reaction) {\n        const event = events.find(event => event.id === reaction.id);\n        if (!event) { return; }\n\n        event.reactions = event.reactions || [];\n        event.reactions.push(reaction);\n        events = events;\n    }\n\n    let rootNoteId;\n    let channelMetadata = {};\n\n    onMount(() => {\n        $chatAdapter.on('message', messageReceived);\n\n        $chatAdapter.on('connectivity', (e) => {\n            connectivityStatus = e;\n        })\n\n        $chatAdapter.on('reaction', reactionReceived);\n        $chatAdapter.on('zap', zapReceived);\n        $chatAdapter.on('deleted', (deletedEvents) => {\n            deletedEvents.forEach(deletedEventId => {\n                const index = events.findIndex(event => event.id === deletedEventId);\n                if (index !== -1) {\n                    events[index].deleted = true;\n                    events = events;\n                }\n            })\n        });\n\n        $chatAdapter.on('profile', ({pubkey, profile}) => {\n            let profiles = $chatData.profiles;\n            profiles[pubkey] = profile;\n\n            chatData.set({ profiles, ...$chatData })\n        })\n\n        $chatAdapter.on('channelMetadata', (event) => {\n            channelMetadata = JSON.parse(event.content);\n        })\n    });\n\n    let connectivityStatus = {};\n    let connectedRelays = 0;\n    let totalRelays = 0;\n\n    $: {\n        connectedRelays = Object.values(connectivityStatus).filter(status => status === 'connected').length;\n        totalRelays = Object.values(connectivityStatus).length;\n\n        if ($chatAdapter?.pubkey && !profiles[$chatAdapter.pubkey]) {\n            $chatAdapter.reqProfile($chatAdapter.pubkey)\n        }\n    }\n\n    let connectedChatId;\n\n    $: if (connectedChatId !== $chatAdapter?.chatId) {\n        connectedChatId = $chatAdapter?.chatId;\n        channelMetadata = {};\n    }\n\n    $: profiles = $chatData.profiles;\n\n    function selectParent() {\n        if (chatConfiguration.chatType === 'GROUP') {\n            $selectedMessage = null;\n        } else {\n            // get the last tagged event in the tags array of the current $selectedMessage\n            const lastETag = getEventById($selectedMessage).tags.filter(tag => tag[0] === 'e').pop();\n            const lastETagId = lastETag && lastETag[1];\n\n            $selectedMessage = lastETagId;\n        }\n\n        scrollDown()\n    }\n\n    let ownName;\n    $: ownName = $chatAdapter?.pubkey ? pubkeyName($chatAdapter.pubkey) : \"\";\n\n    function pubkeyName(pubkey) {\n        let name;\n\n        if (profiles[$chatAdapter.pubkey]) {\n            let self = profiles[$chatAdapter.pubkey];\n\n            // https://xkcd.com/927/\n            name = self.display_name ||\n                    self.displayName ||\n                    self.name ||\n                    self.nip05;\n\n        }\n\n        if (!name) { name = `[${pubkey.slice(0, 6)}]`; }\n\n        return name;\n    }\n\n</script>\n\n<div class=\"\n    bg-purple-700 text-white\n    -mx-5 -mt-5 mb-3\n    px-4 py-3\n    overflow-clip\n    flex flex-row justify-between items-center\n\">\n\n    <div class=\"text-lg font-semibold\">\n        {#if $chatAdapter?.pubkey}\n            {ownName}\n        {/if}\n    </div>\n\n    <span class=\"text-xs flex flex-col items-end mt-2 text-gray-200 gap-1\">\n        <div class=\"flex flex-row gap-1 overflow-clip\">\n            {#each Array(totalRelays) as _, i}\n                <span class=\"\n                    inline-block\n                    rounded-full\n                    {connectedRelays > i ? 'bg-green-500' : 'bg-gray-300'}\n                    w-2 h-2\n                \"></span>\n            {/each}\n        </div>\n\n        {connectedRelays}/{totalRelays} relays\n    </span>\n</div>\n\n{#if channelMetadata.name}\n    <div class=\"flex flex-row gap-2 mb-3 bg-zinc-300 text-zinc-800 px-4 py-2 -mx-5 -mt-3\">\n        {#if channelMetadata.picture}\n            <img src={channelMetadata.picture} class=\"w-12 h-12 rounded-full\" alt=\"Channel Picture\"/>\n        {/if}\n\n        <div class=\"flex flex-col\">\n            <div class=\"font-extrabold text-xl\">{channelMetadata.name}</div>\n            {#if channelMetadata.about}\n                <div class=\"text-sm truncate font-regular\">{channelMetadata.about}</div>\n            {/if}\n        </div>\n    </div>\n{/if}\n\n{#if $selectedMessage}\n    {#if !getEventById($selectedMessage)}\n        <h1>Couldn't find event with ID {$selectedMessage}</h1>\n    {:else}\n    <div class=\"flex flex-row mb-3\">\n        <a href='#' on:click|preventDefault={selectParent}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75\" />\n            </svg>\n        </a>\n\n        <div class=\"flex flex-col ml-2\">\n            <span class=\"text-lg text-black overflow-hidden whitespace-nowrap text-ellipsis\">\n                {getEventById($selectedMessage).content}\n            </span>\n        </div>\n    </div>\n    {/if}\n{/if}\n\n<div id=\"messages-container\" class=\"overflow-auto -mx-4 px-4 relative top-[-12px] mb-[-20px]\" style=\"height: calc(50vh + 12px); min-height: 300px;\">\n    <div id=\"messages-container-inner\" class=\"flex flex-col gap-4\">\n        {#if $selectedMessage}\n            <NostrNote event={getEventById($selectedMessage)} {responses} {websiteOwnerPubkey} />\n        {:else}\n            {#each events as event}\n                <NostrNote {event} {responses} {websiteOwnerPubkey} />\n                {#if event.deleted}\n                     deleted\n                {/if}\n            {/each}\n        {/if}\n    </div>\n</div>\n\n\n<div class=\"flex flex-col\">\n    <div class=\"\n        border-y border-y-slate-200\n        -mx-4 my-2 bg-slate-100 text-black text-sm\n        px-4 py-2\n    \">\n        {#if chatConfiguration.chatType === 'DM'}\n            <b>Encrypted chat:</b>\n            only your chat partner can see these messages.\n        {:else if chatConfiguration.chatType === 'GROUP'}\n            <b>Public chat:</b>\n            anyone can see these messages.\n        {:else}\n            <b>Public notes:</b>\n            your followers see your messages on their timeline\n        {/if}\n    </div>\n\n    <div class=\"flex flex-row gap-2 -mx-1\">\n        <textarea\n            type=\"text\"\n            id=\"message-input\"\n            class=\"\n                -mb-2\n                p-2\n                w-full\n                resize-none\n                rounded-xl\n                text-gray-600\n                border\n            \" placeholder=\"Say hello!\"\n            rows=1\n            on:keydown={inputKeyDown}\n        ></textarea>\n        <button type=\"button\" class=\"inline-flex items-center rounded-full border border-transparent bg-purple-700 p-3 text-white shadow-sm hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2\" on:click|preventDefault={sendMessage}>\n            <!-- Heroicon name: outline/plus -->\n            <svg aria-hidden=\"true\" class=\"w-6 h-6 rotate-90\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"></path></svg>\n        </button>\n    </div>\n</div>\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>\n","<script>\n    import { chatAdapter } from './lib/store';\n    import KeyPrompt from './KeyPrompt.svelte';\n    import ConnectedWidget from './ConnectedWidget.svelte';\n\n    export let websiteOwnerPubkey;\n    export let chatStarted;\n    export let chatConfiguration;\n    export let relays;\n\n    $: chatStarted = !!$chatAdapter\n</script>\n\n{#if !chatStarted}\n    <KeyPrompt {websiteOwnerPubkey} {chatConfiguration} {relays} />\n{:else}\n    <ConnectedWidget {websiteOwnerPubkey} {chatConfiguration} {relays} />\n{/if}\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","<script>\n    import Container from './Container.svelte';\n\n    export let websiteOwnerPubkey;\n    export let chatType;\n    export let chatTags;\n    export let chatReferenceTags;\n    export let relays;\n    export let chatId;\n\n    let showChat = false;\n    let minimizeChat = false;\n\n    function toggleChat() {\n        if (showChat) {\n            minimizeChat = !minimizeChat;\n        } else {\n            showChat = !showChat;\n        }\n    }\n</script>\n\n<div id=\"nostri-chat\" class=\"fixed bottom-5 right-5 mb-5 flex flex-col item-end font-sans\">\n    {#if showChat}\n        <div class=\"\n\t\t\tshadow-2xl\n            bg-white/90 backdrop-brightness-150 backdrop-blur-md mb-5 w-96 max-w-screen-sm text-black rounded-3xl p-5\n            overflow-auto\n            overflow-hidden\n            flex flex-col justify-end\n            {minimizeChat ? 'hidden' : ''}\n        \" style=\"max-height: 80vh;\">\n            <Container\n                {websiteOwnerPubkey}\n                chatConfiguration={{\n                    chatType,\n                    chatTags,\n                    chatId,\n                    chatReferenceTags,\n                }}\n                {relays}\n            />\n        </div>\n    {/if}\n\n\n    <div class=\"self-end\">\n        <a href=\"#\" class=\"text-white bg-purple-900 hover:bg-purple-700 w-full p-5 rounded-full flex-shrink-1 text-center font-semibold flex flex-row items-center gap-4\" on:click|preventDefault={toggleChat}>\n            <span class=\"tracking-wider flex\">\n                <span class=\"\n\t\t\t\t\ttext-white\n\t\t\t\t\">Nostri</span><span class=\"text-purple-300\">Chat</span>\n            </span>\n            <svg fill=\"#ffffff\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25px\" height=\"25px\" viewBox=\"0 0 571.004 571.004\" xml:space=\"preserve\">\n                <g>\n                    <g>\n                        <path d=\"M533.187,269.019c-1.432-1.746-2.219-3.876-1.252-5.993c1.868-4.08,0.611-7.658-0.931-11.465\n                            c-0.877-2.167-0.796-4.716-1.15-7.095c-0.221-1.493-0.057-3.199-0.742-4.435c-1.775-3.199-3.812-6.275-5.949-9.245\n                            c-2.681-3.717-5.564-7.291-8.38-10.914c-3.325-4.284-6.581-8.633-10.09-12.766c-0.706-0.833-2.604-1.42-3.607-1.085\n                            c-2.411,0.808-4.732,2.052-6.874,3.452c-2.771,1.812-5.435,3.317-8.928,3.713c-3.953,0.453-8.062,1.403-11.604,3.154\n                            c-5.189,2.562-9.747,6.401-14.924,9c-4.913,2.464-8.328,6.112-11.184,10.567c-0.783,1.22-1.705,2.371-2.685,3.444\n                            c-3.252,3.574-5.549,7.629-7.051,12.248c-1.154,3.554-2.378,7.226-4.373,10.322c-1.963,3.044-3.256,6.194-4.162,9.601\n                            c-0.285,1.065-0.44,2.167-0.656,3.251c-2.212-0.539-4.19-0.873-6.06-1.518c-1.709-0.592-3.684-1.15-4.879-2.375\n                            c-2.979-3.052-6.528-5.059-10.388-6.577c-3.448-1.354-6.581-3.06-9.441-5.496c-1.514-1.29-3.771-1.738-5.721-2.489\n                            c-1.419-0.547-3.043-0.714-4.3-1.501c-3.439-2.146-6.639-4.68-10.11-6.765c-2.256-1.359-4.737-2.542-7.271-3.166\n                            c-1.722-0.424-2.293-0.865-2.216-2.599c0.241-5.227-0.832-10.175-3.235-14.872c-2.855-5.582-8.723-8.625-14.777-7.589\n                            c-2.697,0.461-5.573,1.347-8.128,0.833c-3.329-0.669-6.516-2-10.028-1.861c-0.612,0.025-1.31-0.437-1.864-0.82\n                            c-4.076-2.832-8.152-5.663-12.163-8.584c-1.489-1.085-2.782-1.154-4.442-0.322c-1.221,0.612-2.705,0.955-4.08,0.967\n                            c-6.047,0.062-12.098-0.082-18.148-0.077c-5.173,0.004-10.498,1.815-15.377-1.399c-0.241-0.159-0.588-0.216-0.886-0.221\n                            c-3.023-0.028-4.488-1.632-5.096-4.524c-0.171-0.82-1.436-1.971-2.236-2c-3.986-0.143-7.984-0.041-11.971,0.139\n                            c-2.187,0.102-4.619,0.004-6.483,0.922c-3.941,1.942-7.556,4.533-11.355,6.773c-1.505,0.889-3.023,1.085-3.872-0.763\n                            c0.979-1.261,2.337-2.272,2.627-3.525c0.771-3.37-3.705-7.181-6.969-6.059c-1.498,0.514-3.003,1.208-4.272,2.138\n                            c-2.464,1.807-4.725,3.896-7.144,5.769c-3.011,2.33-6.055,4.655-10.449,4.737c0.983-3.753-1.718-5.104-4.108-6.597\n                            c-1.094-0.686-2.293-1.281-3.525-1.652c-3.276-1-6.348-0.763-8.956,1.828c-2.158,2.142-3.488,2.179-6.014,0.367\n                            c-3.081-2.208-3.986-2.175-7.128,0c-1.122,0.775-2.346,1.832-3.586,1.926c-4.268,0.318-6.646,3.052-8.931,6.132\n                            c-1.632,2.203-3.244,4.472-5.173,6.405c-4.378,4.39-8.911,8.629-13.48,12.815c-0.608,0.559-1.95,0.873-2.709,0.608\n                            c-3.378-1.191-5.582-3.823-6.899-7.001c-2.521-6.075-4.957-12.203-7.07-18.429c-0.816-2.399-1.11-5.165-0.865-7.687\n                            c0.559-5.786,1.771-11.51,2.411-17.291c1.196-10.796,3.583-21.343,7.405-31.445c6.773-17.891,13.934-35.643,21.2-53.342\n                            c4.619-11.249,7.817-22.852,10.167-34.75c1.644-8.319,2.477-16.63,1.901-25.137c-0.286-4.227,0.232-8.56,0.808-12.787\n                            c1.669-12.232-2.46-19.547-13.843-24.068c-1.403-0.559-2.766-1.228-4.149-1.844c-2.15,0-4.3,0-6.455,0\n                            c-2.909,0.91-5.871,1.681-8.715,2.762c-3.827,1.457-7.989,2.484-10.51,6.145c-1.701,2.472-4.088,3.5-6.916,4.06\n                            c-3.9,0.771-7.797,1.62-11.62,2.705c-3.378,0.959-6.369,2.709-9.135,5.872c6.863,1.652,13.211,3.305,19.617,4.692\n                            c7.629,1.652,14.558,4.729,20.518,9.763c2.954,2.493,5.667,5.447,6.165,9.425c0.51,4.084,0.608,8.271,0.392,12.383\n                            c-0.563,10.694-4.137,20.661-7.976,30.515c-2.358,6.059-5.406,11.876-7.36,18.054c-4.321,13.656-8.486,27.348-14.19,40.522\n                            c-3.309,7.646-6.83,15.251-8.307,23.534c-1.722,9.657-3.264,19.343-4.917,29.013c-0.845,4.958-0.877,10.049-2.864,14.819\n                            c-0.873,2.093-1.269,4.406-1.693,6.654c-0.975,5.182-1.832,10.379-2.733,15.573c0,7.838,0,15.675,0,23.513\n                            c0.632,3.905,1.363,7.801,1.877,11.722c1.481,11.232,4.773,21.955,8.825,32.489c0.816,2.121,1.322,4.378,1.783,6.613\n                            c0.718,3.473,1.069,7.365,4.309,9.303c2.427,1.452,2.982,3.402,3.603,5.671c1.828,6.684,1.318,13.428,0.147,20.086\n                            c-1.114,6.341-0.845,12.525,0.861,18.65c2.313,8.318,4.72,16.613,7.291,24.859c0.461,1.48,1.71,2.896,2.946,3.916\n                            c5.3,4.382,10.735,8.605,16.108,12.897c0.355,0.281,0.645,0.656,0.914,1.028c2.652,3.672,6.373,5.879,10.677,6.638\n                            c8.262,1.457,16.275,4.117,24.664,4.929c1.363,0.131,2.742,0.453,4.035,0.906c2.362,0.828,4.696,1.733,7.038,2.623\n                            c1.257,0.824,2.391,1.832,3.415,3.064c-0.698,2.239-1.901,4.234-3.199,6.164c-3.529,5.239-8.344,8.948-14.007,11.633\n                            c-5.818,2.754-11.975,4.442-18.242,5.744c-8.115,1.686-16.259,3.231-24.378,4.88c-6.789,1.379-13.248,3.79-19.633,6.414\n                            c-8.25,3.39-16.463,6.879-24.77,10.13c-6.447,2.525-13.158,4.149-20.086,4.68c-2.077,0.159-4.178,0.017-6.267,0.065\n                            c-0.604,0.017-1.326,0.045-1.783,0.367c-3.46,2.437-7.446,3.407-11.481,4.272c-1.607,0.347-3.203,0.742-4.802,1.117\n                            c-4.423,1.049-7.703,3.672-10.237,7.36c-2.481,3.619-3.827,7.691-4.762,11.914c-1.26,5.708-1.685,11.521-1.921,17.344\n                            c-0.306,7.405-0.526,14.814-0.828,22.22c-0.082,2.023-0.367,4.035-0.486,6.059c-0.033,0.592,0.012,1.302,0.314,1.779\n                            c3.525,5.654,7.299,11.126,12.276,15.643c4.251,3.859,8.993,6.769,14.819,7.557c0.171,0.024,0.326,0.175,0.485,0.265\n                            c1.775,0,3.55,0,5.32,0c1.032-0.253,2.085-0.444,3.097-0.767c2.216-0.702,4.415-1.461,6.663-2.212\n                            c-0.196-1.881-0.971-3.166-2.317-3.962c-1.236-0.734-2.595-1.301-3.958-1.771c-1.73-0.596-3.55-0.942-5.275-1.554\n                            c-1.114-0.396-2.208-0.968-3.174-1.648c-1.367-0.968-1.979-2.424-2.052-4.097c0.069-0.102,0.118-0.257,0.212-0.298\n                            c4.643-1.885,7.16-5.879,9.694-9.837c0.298-0.461,0.294-1.195,0.241-1.787c-0.445-4.696-1.775-9.184-3.354-13.599\n                            c-1.75-4.884-3.595-9.73-5.333-14.614c-0.551-1.547-0.836-3.183-1.326-4.749c-0.318-1.017,0.11-1.543,0.938-1.971\n                            c1.64-0.841,3.423-0.832,5.189-0.886c2.464-0.073,4.945,0.041,7.393-0.188c1.408-0.131,2.925-0.515,4.121-1.236\n                            c13.692-8.303,28.474-14.003,43.791-18.413c13.876-3.998,27.997-6.915,42.244-9.229c6.247-1.012,12.501-1.967,18.76-2.897\n                            c0.918-0.134,1.665-0.428,2.371-1.027c4.227-3.595,9.217-5.586,14.635-6.259c5.773-0.715,11.608-0.951,17.393-1.563\n                            c3.578-0.379,7.161-0.905,10.678-1.656c4.308-0.918,8.045-3.129,11.146-6.205c2.688-2.669,5.132-5.59,7.593-8.482\n                            c3.28-3.855,6.414-7.834,9.727-11.661c1.02-1.179,2.432-2.012,3.631-3.039c0.792-0.674,1.501-0.653,2.391-0.11\n                            c4.125,2.529,8.576,4.32,13.199,5.712c5.716,1.722,11.566,2.75,17.495,3.374c10.983,1.159,22,1.204,33.023,0.906\n                            c3.166-0.086,6.333-0.09,9.503-0.184c0.93-0.029,1.718,0.171,2.473,0.729c3.309,2.444,6.646,4.852,9.963,7.291\n                            c3.117,2.293,6.345,4.402,9.927,5.92c0.641,0.273,1.277,0.612,1.95,0.735c2.758,0.497,4.741,2.235,6.744,4.002\n                            c5.908,5.214,11.343,10.894,16.161,17.111c6.324,8.156,12.468,16.455,18.617,24.745c6.152,8.295,12.342,16.557,19.396,24.125\n                            c6.863,7.36,14.423,13.868,23.122,18.984c0.775,0.457,1.432,0.955,1.844,1.815c3.187,6.655,8.475,11.09,15.076,14.093\n                            c6.81,3.097,14.006,4.256,21.444,4.142c10.33-0.159,20.062-2.53,28.906-8.014c5.264-3.264,9.572-7.471,12.347-13.097\n                            c1.15-2.338,2.109-4.737,2.269-7.385c0.016-0.29,0.212-0.571,0.326-0.853c0-0.633,0-1.27,0-1.901\n                            c-3.488-0.6-6.802,0.208-10.045,1.362c-3.101,1.102-6.124,2.416-9.25,3.443c-2.692,0.886-5.442,1.673-8.225,2.195\n                            c-4.554,0.853-8.042-1.113-10.037-5.41c0.804-1.049,1.995-1.195,3.194-1.253c2.338-0.113,4.685-0.143,7.022-0.302\n                            c0.799-0.053,1.664-0.249,2.338-0.648c0.6-0.359,1.121-1.024,1.411-1.673c0.498-1.126,0.311-1.44-0.869-2.085\n                            c-3.402-1.856-6.993-3.264-10.714-4.324c-8.421-2.399-17.055-3.028-25.757-3.061c-1.836-0.008-3.677-0.004-5.513,0.082\n                            c-0.963,0.045-1.66-0.249-2.366-0.906c-4.843-4.5-9.094-9.53-13.166-14.721c-6.613-8.429-12.48-17.389-18.47-26.259\n                            c-2.836-4.198-5.786-8.319-8.769-12.411c-0.999-1.375-2.244-2.574-3.419-3.811c-0.384-0.404-0.885-0.727-1.383-0.991\n                            c-1.358-0.727-2.269-0.408-2.905,1.003c-0.229,0.511-0.379,1.062-0.648,1.828c-0.633-0.465-1.179-0.841-1.697-1.253\n                            c-5.03-4.019-8.866-9.058-11.905-14.655c-2.954-5.446-5.627-11.048-8.344-16.626c-2.607-5.353-5.092-10.767-8.438-15.712\n                            c-1.521-2.248-3.317-4.312-4.9-6.523c-0.783-1.094-1.709-1.229-2.949-1.094c-5.324,0.579-10.625,0.494-15.843-0.894\n                            c-2.591-0.689-5.035-1.718-7.1-3.488c-1.473-1.269-2.562-2.746-3.211-4.513c1.95-0.433,3.893-0.897,5.818-1.424\n                            c6.459-1.767,12.926-2.469,19.552-2.081c7.964,0.466,15.92,1.159,23.892,1.437c2.853,0.098,5.966-0.172,8.557-1.244\n                            c3.859-1.596,7.544-3.799,10.971-6.206c5.075-3.566,9.702-7.78,14.847-11.232c2.379-1.595,3.203-3.292,3.306-5.92\n                            c0.134-3.509,1.9-4.781,5.3-4.149c0.6,0.114,1.203,0.253,1.787,0.44c3.852,1.229,7.633,1.028,11.489-0.163\n                            c2.962-0.914,6.066-1.354,9.053-2.195c0.547-0.154,1.024-1.199,1.163-1.909c0.094-0.481-0.616-1.068-0.693-1.648\n                            c-0.127-0.922-0.384-2.402,0.057-2.705c0.854-0.575,2.154-0.656,3.265-0.636c0.881,0.016,1.733,0.62,2.627,0.729\n                            c2.064,0.258,3.995,0.021,5.247-1.986c1.232-1.971,1.277-3.864-0.163-5.757c-0.465-0.608-1.069-1.249-1.191-1.946\n                            c-0.163-0.938-0.273-2.199,0.212-2.881c1.779-2.488,3.771-4.83,5.77-7.152c1.828-2.121,4.251-3.354,6.997-3.541\n                            c0.967-0.065,2.158,0.742,2.966,1.465c0.633,0.562,0.686,1.729,1.261,2.407c0.674,0.795,1.628,1.347,2.465,2.007\n                            c0.571-0.877,1.358-1.688,1.656-2.651c0.311-0.992-0.028-2.175,0.236-3.187c0.213-0.812,0.743-1.738,1.416-2.195\n                            c3.591-2.439,7.442-4.524,10.861-7.177c2.574-1.991,4.508-4.786,6.944-6.98c4.182-3.771,9.526-5.097,14.789-6.472\n                            c3.452-0.901,4.194-1.921,3.134-5.365c-0.514-1.673-1.228-3.309-2.052-4.854c-1.062-1.987-0.531-3.362,1.297-4.402\n                            c0.727-0.412,1.498-0.751,2.252-1.114c2.387-1.139,4.08-2.701,4.688-5.521c0.612-2.827,1.75-5.549,2.741-8.286\n                            c1.339-3.692,2.432-7.65,7.34-8.144c0.147-0.017,0.294-0.061,0.441-0.094c0-1.077,0-2.15,0-3.228\n                            c-1.135-1.775-2.15-3.639-3.432-5.3C536.084,271.981,534.492,270.614,533.187,269.019z\"></path>\n                    </g>\n                </g>\n            </svg>\n        </a>\n    </div>\n</div>\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>\n","import Widget from './Widget.svelte';\n\nvar div = document.createElement('DIV');\nvar script = document.currentScript;\nconst websiteOwnerPubkey = script.getAttribute('data-website-owner-pubkey');\nconst chatType = script.getAttribute('data-chat-type');\nlet chatTags = script.getAttribute('data-chat-tags');\nlet chatId = script.getAttribute('data-chat-id');\nlet chatReferenceTags = script.getAttribute('data-chat-reference-tags');\nlet relays = script.getAttribute('data-relays');\nscript.parentNode.insertBefore(div, script);\n\nif (!relays) {\n  relays = 'wss://relay.f7z.io,wss://nos.lol,wss://relay.nostr.info,wss://nostr-pub.wellorder.net,wss://relay.current.fyi,wss://relay.nostr.band'\n}\n\nrelays = relays.split(',');\nchatTags = chatTags ? chatTags.split(',') : [];\nchatReferenceTags = chatReferenceTags ? chatReferenceTags.split(',') : [];\n\nconst embed = new Widget({\n  target: div,\n  props: {\n    websiteOwnerPubkey,\n    chatType,\n    chatTags,\n    chatId,\n    chatReferenceTags,\n    relays\n  },\n});\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","document","createElement","href","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","unsub","subscribe","unsubscribe","set_store_value","ret","value","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","set_style","key","important","style","removeProperty","setProperty","current_component","set_current_component","get_current_component","Error","onMount","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","seen_callbacks","flushidx","flush","saved_component","update","e","pop","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","bind","index","props","undefined","bound","create_component","mount_component","customElement","m","new_on_destroy","map","filter","destroy_component","filtered","targets","indexOf","flush_render_callbacks","make_dirty","then","fill","init","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","context","Map","skip_bound","root","ready","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","$destroy","$on","type","splice","$set","$$props","obj","$$set","keys","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","chatAdapter","chatData","events","profiles","selectedMessage","zappingMessage","zapsPerMessage","number","n","Number","isSafeInteger","bytes","lengths","Uint8Array","TypeError","includes","assert","bool","hash","outputLen","blockLen","exists","checkFinished","destroyed","finished","output","out","min","crypto","globalThis","createView","arr","DataView","buffer","byteOffset","byteLength","rotr","word","shift","Uint32Array","hexes","v","toString","padStart","bytesToHex","uint8a","hex","hexToBytes","array","j","hexByte","slice","byte","parseInt","isNaN","utf8ToBytes","str","TextEncoder","encode","toBytes","concatBytes","arrays","every","reduce","result","pad","Hash","clone","_cloneInto","wrapConstructor","hashConstructor","hashC","message","digest","tmp","randomBytes","bytesLength","getRandomValues","SHA2","constructor","padOffset","isLE","super","pos","view","len","take","Math","subarray","process","dataView","roundClean","digestInto","setBigUint64","_32n","BigInt","_u32_max","wh","wl","h","setUint32","oview","outLen","state","get","res","destroy","to","Maj","SHA256_K","IV","SHA256_W","SHA256","A","B","C","D","E","F","G","H","offset","getUint32","W15","W2","s0","s1","T1","T2","SHA224","sha256","_0n","_1n","_2n","u8a","numberToHexUnpadded","num","hexToNumber","bytesToNumberBE","bytesToNumberLE","reverse","numberToBytesBE","numberToBytesLE","ensureBytes","title","expectedLength","arrs","sum","bitMask","u8n","u8fr","createHmacDrbg","hashLen","qByteLen","hmacFn","k","reset","reseed","seed","gen","sl","pred","validatorFns","bigint","val","function","boolean","string","isArray","field","object","Fp","isValid","validateObject","validators","optValidators","checkField","fieldName","isOptional","checkVal","String","entries","b1","b2","_3n","_4n","_5n","_8n","mod","pow","power","modulo","pow2","x","invert","u","FpSqrt","P","p1div4","eql","sqr","c1","n2","mul","nv","sub","ONE","legendreC","Q","S","Z","Q1div2","neg","g","ZERO","t2","ge","tonelliShanks","FIELD_FIELDS","validateField","ORDER","MASK","BYTES","BITS","nLength","nBitLength","_nBitLength","nByteLength","ceil","validateBasic","curve","Gx","Gy","freeze","b2n","h2b","ut","DER","Err","_parseInt","toSig","sBytes","s","rBytesLeft","hexFromSig","sig","shl","rhl","rl","weierstrassPoints","opts","CURVE","ut.validateObject","allowedPrivateKeyLengths","wrapPrivateKey","isTorsionFree","clearCofactor","allowInfinityPoint","fromBytes","endo","beta","splitScalar","validatePointOpts","point","isCompressed","toAffine","ut.concatBytes","y","tail","weierstrassEquation","x2","x3","isWithinCurveOrder","assertGE","normPrivateKeyToScalar","ut.bytesToHex","ut.bytesToNumberBE","error","mod.mod","pointPrecomputes","assertPrjPoint","other","Point","px","py","pz","static","is0","points","toInv","invertBatch","fromAffine","assertValidity","privateKey","BASE","multiply","_setWindowSize","windowSize","_WINDOW_SIZE","left","right","hasEvenY","isOdd","equals","X1","Y1","Z1","X2","Y2","Z2","U1","U2","negate","double","b3","X3","Y3","Z3","t0","t1","t3","t4","t5","subtract","wNAF","wnaf","wNAFCached","comp","multiplyUnsafe","I","unsafeLadder","k1neg","k1","k2neg","k2","k1p","k2p","scalar","fake","f1p","f2p","constTimeNegate","normalizeZ","multiplyAndAddUnsafe","iz","z","inv","ax","ay","zz","cofactor","toRawBytes","toHex","_bits","bits","condition","item","W","windows","elm","precomputeWindow","base","precomputes","mask","maxNumber","shiftBy","wbits","offset1","offset2","abs","cond1","cond2","precomputesMap","transform","ProjectivePoint","weierstrass","curveDef","hmac","bits2int","bits2int_modN","lowS","validateOpts","CURVE_ORDER","compressedLen","uncompressedLen","modN","invN","mod.invert","cat","head","y2","sqrt","numToNByteStr","ut.numberToBytesBE","isBiggerThanHalfOrder","slcNum","Signature","recovery","addRecoveryBit","recoverPublicKey","msgHash","rec","radj","prefix","R","fromHex","ir","u1","u2","hasHighS","normalizeS","toDERRawBytes","ut.hexToBytes","toDERHex","toCompactRawBytes","toCompactHex","utils","isValidPrivateKey","randomPrivateKey","groupOrder","minLen","mod.hashToPrivateScalar","precompute","isProbPub","delta","ORDER_MASK","ut.bitMask","int2octets","prepSig","defaultSigOpts","some","prehash","extraEntropy","ent","h1int","seedArgs","k2sig","kBytes","ik","q","normS","defaultVerOpts","getPublicKey","fromPrivateKey","getSharedSecret","privateA","publicB","sign","privKey","ut.createHmacDrbg","drbg","verify","signature","publicKey","sg","_sig","fromDER","derError","fromCompact","is","HMAC","_key","iHash","oHash","buf","getPrototypeOf","getHash","msgs","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b6","b9","b11","b22","b44","b88","b176","b220","b223","bitLen","redef","sqrtP","lhs","rhs","FpPow","div","sqrN","addN","subN","mulN","lst","nums","lastMultiplied","acc","inverted","reduceRight","FpInvertBatch","cmov","Field","secp256k1","defHash","createCurve","a1","a2","POW_2_128","c2","fe","TAGGED_HASH_PREFIXES","taggedHash","tag","messages","tagP","tagH","charCodeAt","pointToBytes","numTo32b","modP","GmulAdd","schnorrGetExtPubKey","priv","d_","lift_x","xx","challenge","args","schnorrVerify","pub","schnorr","auxRand","t","rand","k_","rx","isoMap","COEFF","xNum","xDen","yNum","yDen","htf.isogenyMap","mapSWU","mod.validateField","sqrtRatio","c3","c4","c5","c6","c7","tv1","tv2","tv3","tv5","tv4","isQR","tvv5","e1","y1","SWUFpSqrtRatio","tv6","mapToCurveSimpleSWU","assertNumber","chain","wrap","decode","alphabet","digits","input","letter","join","separator","split","padding","chr","end","normalize","convertRadix","carry","done","digit","digitBase","floor","mapToCurve","def","htf.createHasher","scalars","DST","encodeDST","expand","gcd","radix2carry","convertRadix2","radix2","revPadding","unsafeWrapper","apply","base16","base32","toUpperCase","replace","base64","base64url","genBase58","abc","base58","XMR_BLOCK_LEN","base58xmr","concat","BECH_ALPHABET","POLYMOD_GENERATORS","bech32Polymod","pre","chk","bechChecksum","words","encodingConst","genBech32","encoding","ENCODING_CONST","_words","fromWords","toWords","fromWordsUnsafe","limit","lowered","toLowerCase","sepIndex","lastIndexOf","endsWith","actualLength","decodeToBytes","decodeUnsafe","bech32","CODERS","utf8","TextDecoder","defineProperty","english","wordlist","_assert","default","exports","checkOpts","asyncLoop","nextTick","u8","crypto_1","require$$0","u32","async","iters","tick","ts","diff","defaults","prototype","assign","wrapConstructorWithOpts","hashCons","msg","_assert_js_1","utils_js_1","require$$1","pbkdf2_1","pbkdf2$1","pbkdf2Async","pbkdf2","hmac_js_1","require$$2","pbkdf2Init","_password","_salt","_opts","dkLen","asyncTick","password","salt","DK","PRF","PRFSalt","pbkdf2Output","prfW","ti","Ti","setInt32","ui","_sha2","sha224","_sha2_js_1","toBig","fromBig","U32_MASK64","le","Ah","Al","Bh","Bl","u64","shrSH","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5H","Eh","add5L","El","sha512","sha512$1","sha384","sha512_256","sha512_224","SHA512","_u64_js_1","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","SHA512_224","SHA512_256","SHA384","stringToBytes","bytesToString","bech32m","base58check","base58xrp","base58flickr","base32hex","radix","checksum","payload","newChecksum","oldChecksum","base32crockford","coderTypeError","hasOwnProperty","bip39","mnemonicToSeedSync_1","mnemonicToSeedSync","mnemonicToSeed","validateMnemonic_1","validateMnemonic","entropyToMnemonic","mnemonicToEntropy","generateMnemonic_1","generateMnemonic","_assert_1","sha256_1","sha512_1","require$$3","utils_1","require$$4","base_1","require$$5","isJapanese","nfkd","norm","assertEntropy","entropy","strength","calcChecksum","bitsLeft","getCoder","mnemonic","passphrase","Rho","Id","_","Pi","idxL","idxR","shifts","shiftsL","idx","shiftsR","Kl","Kr","rotl","group","BUF","RIPEMD160","h0","h1","h2","h3","h4","al","ar","bl","br","cl","cr","dl","dr","el","er","rGroup","hbl","hbr","rr","sr","tl","tr","ripemd160","secp","base58checker","bytesToNumber","MASTER_SECRET","BITCOIN_VERSIONS","private","public","HARDENED_OFFSET","toU32","HDKey","fingerprint","pubHash","identifier","pubKeyHash","privKeyBytes","pubKey","privateExtendedKey","serialize","versions","publicExtendedKey","assertBytes","chainCode","base58key","keyBuffer","keyView","version","opt","depth","parentFingerprint","isPriv","json","fromExtendedKey","xpriv","derive","path","test","parts","child","exec","deriveChild","childTweak","added","err","wipePrivateData","toJSON","xpub","__defProp","__export","all","enumerable","generatePrivateKey","MessageNode","MessageQueue","insertEventIntoAscendingList","insertEventIntoDescendingList","normalizeURL","utf8Decoder","utf8Encoder","URL","pathname","port","protocol","searchParams","sort","sortedArray","midPoint","position","created_at","id","_value","_next","next","_first","_last","first","messageNode","last","_size","enqueue","newNode","dequeue","prev","finishEvent","pubkey","getEventHash","getSignature","bytesToHex2","evt","validateEvent","JSON","stringify","kind","tags","content","serializeEvent","isRecord","match","verifySignature","schnorr2","signEvent","console","warn","matchFilter","ids","startsWith","kinds","authors","values","find","since","until","getHex64","getInt","sliced","getSubscriptionId","pstart","pend","matchEventId","matchEventPubkey","matchEventKind","newListeners","connect","disconnect","notice","auth","relayInit","listTimeout","getTimeout","countTimeout","ws","connectionPromise","openSubs","listeners","subListeners","pubListeners","connectRelay","reject","WebSocket","onopen","onerror","onclose","handleNextInterval","incomingMessageQueue","handleNext","clearInterval","subid","so","alreadyHaveEvent","parse","id2","skipVerification","filters","matchFilters","count","eose","ok","reason","failed","onmessage","setInterval","connected","readyState","trySend","params","setTimeout","send","log","verb","random","newFilters","newOpts","on","off","listeners2","_publishEvent","type2","list","timeout","clearTimeout","publish","close","OPEN","status","nip19_exports","BECH32_REGEX","naddrEncode","neventEncode","noteEncode","nprofileEncode","npubEncode","nrelayEncode","nsecEncode","Bech32MaxSize","nip19","tlv","parseTLV","bytesToHex3","relays","author","encodeBytes","profile","encodeTLV","addr","ArrayBuffer","vs","entry","nip04_exports","encrypt","privkey","normalizedKey","getNormalizedX","iv","plaintext","cryptoKey","subtle","importKey","ciphertext","decrypt","ctb64","ivb64","webcrypto","nip05_exports","NIP05_REGEX","queryProfile","searchDomain","useFetchImplementation","_fetch","fetch","fetchImplementation","domain","query","names","fullname","relay","parseNIP05Result","_e","privateKeyFromSeedWords","fromMasterSeed","bytesToHex4","generateSeedWords","validateWords","reply","mentions","eTags","eTagIndex","eTag","eTagEventId","eTagRelayUrl","eTagMarker","eventPointer","isFirstETag","isLastETag","getPow","total","msb","getLeadingZeroBits","hexToBytes2","finishRepostEvent","reposted","relayUrl","getRepostedEventPointer","lastETag","lastPTag","getRepostedEvent","pointer","repostedEvent","NOSTR_URI_REGEX","parse2","RegExp","source","uri","decoded","finishReactionEvent","reacted","inheritedTags","getReactedEventPointer","createDelegation","parameters","conditions","cond","sighash","sha2562","bytesToHex5","schnorr3","getDelegator","tag2","operator","matchAll","regex","replaceAll","matches","replacer","_fetch2","useFetchImplementation2","validateGithub","username","proof","authenticate","_fetch3","fail","nip57_exports","getZapEndpoint","makeZapReceipt","makeZapRequest","useFetchImplementation3","validateZapRequest","metadata","lnurl","lud06","lud16","bech322","body","allowsNostr","nostrPubkey","amount","comment","zr","round","zapRequestString","zapRequest","preimage","bolt11","paidAt","tagsFromZapRequest","zap","getTime","WS","browser","Relay","reconnect","me","onfn","init_websocket","catch","resolved","handle_nostr_message","reconnecting","manualClose","open","sleep","ms","Relay$1","wait_connected","retry","method","sub_id","RelayPool","relay_ids","find_relays","setupHandlers","remove","replays","rid","rnds8","rng","byteToHex","native","randomUUID","v4","rnds","unsafeStringify","w","plural","msAbs","isPlural","parseFloat","isFinite","long","fmtLong","fmtShort","common","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","enabled","self","curr","coerce","unshift","format","formatter","formatters","formatArgs","useColors","color","selectColor","extend","configurable","namespaces","delimiter","newDebug","toNamespace","regexp","substring","stack","disable","skips","enable","save","humanize","colors","load","module","lastC","storage","setItem","removeItem","getItem","DEBUG","__nwjs","navigator","userAgent","documentElement","WebkitAppearance","firebug","exception","table","$1","localStorage","localstorage","warned","Events","EE","once","addListener","emitter","listener","_events","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","getOwnPropertySymbols","handlers","ee","listenerCount","emit","a3","a4","a5","arguments","removeListener","removeAllListeners","prefixed","is_node","is_node_","global","_globalThis","naiveFallback","__global__","NativeWebSocket","MozWebSocket","websocket_version","W3CWebSocket","protocols","prop","w3cwebsocket","__values","Symbol","iterator","Container_1","Container","ForOfAdaptor_1","ForOfAdaptor","it_","last_","it","rbegin","rend","begin","e_1","_a","_b","_c","elem","e_1_1","return","__read","NativeArrayIterator_1","NativeArrayIterator","data_","index_","advance","swap","extendStatics","__extends","setPrototypeOf","__","LogicError_1","LogicError","Exception_1","Exception","_super","_newTarget","_this","proto","what","InvalidArgument_1","InvalidArgument","ErrorGenerator","OutOfRange_1","OutOfRange","get_class_name","__MODULE","negative_index","excessive_index","not_my_iterator","erased_iterator","negative_iterator","iterator_end_value","className","key_nout_found","__spreadArray","pack","UniqueSet_1","UniqueSet","SetContainer_1","SetContainer","factory","items","_i","_Insert_by_range","_Insert_by_key","Function","_Insert_by_hint","erase","_Erase_by_range","_Erase_by_val","_Handle_erase","ErrorGenerator_1","extract","param","_Extract_by_iterator","_Extract_by_val","merge","uid","get_uid","Global_1","Global","_Get_root","node_1","__s_pRoot","__s_iUID","uid_1","__get_m_iUID","hash_1","_Hash_boolean","MULTIPLIER","_Hash_number","_Hash_string","itemList","INIT_VALUE","itemList_1","itemList_1_1","valueOf","hashCode","hashed","comparators","greater_equal","greater","less_equal","less","not_equal_to","equal_to","IHashContainer","IAssociativeContainer_1","IAssociativeContainer","construct","ramda","comparators_1","Source","bucketFactory","post_process","hash_function","key_eq","container_1","tuple","ListIterator_1","ListIterator","prev_","next_","value_","_Set_prev","_Set_next","_Try_value","distance","stepper","_Distance_via_index","ListContainer_1","ListContainer","Repeater_1","Repeater","global_1","end_","_Create_iterator","par1","par2","begin_","size_","resize","expansion","push_front","push_back","pop_front","pop_back","erased_","_Insert_by_repeating_val","ReverseIterator_1","ReverseIterator","base_","_Create_neighbor","HashBuckets_1","HashBuckets","fetcher","hasher","fetcher_","hasher_","max_load_factor_","DEFAULT_MAX_FACTOR","initialize","rehash","e_2","max","MIN_BUCKET_COUNT","_d","row","row_1","row_1_1","e_2_1","reserve","capacity","at","load_factor","max_load_factor","bucket","Pair_1","make_pair","Pair","second","pair","HashSet","IHashContainer_1","SetElementList_1","SetElementList","associative","associative_","Iterator","_Swap_associative","source_","SetHashBuckets_1","SetHashBuckets","key_eq_","_Swap_source","bucket_1","bucket_1_1","thisArg","buckets_","bucket_count","bucket_size","_Handle_insert","hint","UniqueMap_1","UniqueMap","MapContainer_1","MapContainer","emplace","emplace_hint","_Erase_by_key","generator","insert_or_assign","_Insert_or_assign_with_key_value","_Insert_or_assign_with_hint","_Extract_by_key","HashMap","MapElementList_1","MapElementList","list_","MapHashBuckets_1","MapHashBuckets","Entry_1","Entry","Event_1","Event","__assign","websocket_1","EventTarget_1","HashSet_1","HashMap_1","EventTarget","listeners_","created_at_","dispatchEvent","timeStamp","CloseEvent_1","CloseEvent","MessageEvent_1","MessageEvent","ErrorEvent_1","ErrorEvent","on_","state_","CONNECTING","client_","client","_Handle_connect","_Handle_error","code","CLOSING","connection_","sendCloseFrame","sendUTF","Buffer","Blob","sendBytes","extensions","bytesWaitingToFlush","_Set_on","connection","_Handle_message","_Handle_close","EVENT_INIT","CLOSED","binaryData","utf8Data","bubbles","cancelable","DEFAULTNETWORK","scriptHash","validWitnessVersions","TESTNETWORK","REGTESTNETWORK","SIMNETWORK","FEATUREBIT_ORDER","DIVISORS","MAX_MILLISATS","MILLISATS_PER_BTC","TAGCODES","payment_hash","payment_secret","description","payee","description_hash","expiry","min_final_cltv_expiry","fallback_address","route_hint","feature_bits","TAGNAMES","currentName","currentCode","TAGPARSERS","wordsToIntBE","routes","shortChannelId","feeBaseMSats","feeProportionalMillionths","cltvExpiryDelta","routesBuffer","short_channel_id","fee_base_msat","fee_proportional_millionths","cltv_expiry_delta","bools","finalArr","itemArr","featureBits","featureName","extraBits","extra_bits","start_bit","has_required","bit","getUnknownParser","tagCode","MAX_SAFE_INTEGER","hrpToMillisat","hrpString","outputString","divisor","valueBN","millisatoshisBN","paymentRequest","network","sections","letters","sigWords","prefixMatches","bech32Prefix","coinNetwork","millisatoshis","timestamp","tagName","parser","tagLength","tagWords","exp","getValue","route_hints","section","Zap","ndk","zappedEvent","zappedUser","getUser","hexpubkey","zapEndpoint","zapEndpointCallback","zapTag","getMatchingTags","fetchProfile","response","nostrPubKey","extraTags","nip57","tagReference","zapRequestEvent","NDKEvent","zapRequestNostrEvent","toNostrEvent","URLSearchParams","nostr","pr","isReplaceable","isParamReplaceable","follows","contactListEvents","fetchEvents","npubs","npub","nip192","user","NDKUser","relayUrls","nip193","nip05Id","nip05","setMetadataEvents","display_name","displayName","image","picture","banner","bio","about","zapService","mergeEvent","relayListEvents","recipient","signer","assertSigner","pTags","sender","nip194","replaceableDTag","tagId","EventEmitter2","rawEvent","userOrEvent","marker","tagEventAuthor","nostrEvent","generateTags","tagValue","removeTag","_signer","relaySet","entity","generateContentTags","dTag","dTagId","createZapRequest","NDKRelay2","EventEmitter3","scores","_status","connectedAt","_connectionStats","attempts","success","durations","complaining","activeSubscriptions","updateConnectionStats","disconnected","handleReconnection","handleNotice","isFlapping","avg","variance","attempt","subscription","subId","eventReceived","eoseReceived","scoreSlowerEvent","timeDiffInMs","connectionStats","NDKPool","EventEmitter4","relay2","handleRelayConnect","handleFlapping","stats","timeoutMs","promises","timeoutPromise","race","connecting","defaultOpts","closeOnEose","cacheUsage","groupable","groupableDelay","NDKSubscription","EventEmitter5","relaySubscriptions","eventFirstSeen","eosesSeen","eventsPerRelay","groupableId","hasKind","noTimeConstraints","noLimit","shouldQueryCache","shouldQueryRelays","cachePromise","startWithCache","cacheAdapter","locking","startWithRelaySet","promise","pool","NDKRelaySet2","calculateRelaySetFromFilter","fromCache","timeSinceFirstSeen","setEvent","eoseTimeout","NDKSubscriptionGroup","subscriptions","debug3","mergeFilters","mergedFilters","forwardEvent","forwardEventDup","forwardEose","forwardClose","isEventForSubscription","subscribeOnRelay","getId","urlString","subGroupableId","executeSubscription","delayedSubscription","delayedSubscriptions","executeDelayedSubscription","executeSubscriptions","subGroup","connectedListener","NDK5","EventEmitter7","devWriteRelaySet","debug2","explicitRelayUrls","devWriteRelayUrls","fromRelayUrls","calculateRelaySetFromEvent","idOrFilter","nip195","filterFromId","relaySetSubscription","existingEvent","event1","event2","profilesLog","writeLog","NstrAdapter","relayStatus","eventEmitter","referenceTags","websiteOwnerPubkey","chatId","profileRequestQueue","requestedProfiles","profileRequestTimer","delayedSubscriptionTimeouts","clientPubkey","setChatConfiguration","emitMessage","tagPubKeys","sendKind4","sendKind42","sendKind1","signedEvent","_publish","subscribeToEventAndResponses","messageCallback","addProfileRequest","family","groups","_subscribe","uuid.v4","recSubId","onEvent","deletedEvents","decodedInvoice","zapRequestPayload","decodeURIComponent","amountSection","zappedEventId","zapper","zappee","zapped","zapInvoiceFromEvent","eventId","subscribeToResponses","reqProfile","requestProfiles","processReceivedProfile","NstrAdapterNip07","adapterConfig","destPubkey","nip04","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isGeneratorFunction","genFun","ctor","mark","awrap","iter","skipTempReset","charAt","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","_throw","_asyncToGenerator","_extends","NostrRPC","secretKey","secret","_proto","_call","_callee3","_ref","_ref$request","_ref$request$id","_ref$request$params","request","_context3","randomID","connectToRelay","prepareRequest","prepareEvent","_ref2","_callee2","_context2","broadcastToRelay","skipResponse","_ref3","_callee","_context","isValidResponse","_x5","_x3","_x4","_x","_x2","_listen","_callee5","_this2","_context5","_ref4","_callee4","responseEvent","_context4","isValidRequest","handleRequest","_x6","_handleRequest","_callee6","_context6","_x7","_x8","_x9","_x10","_x11","_prepareEvent","_callee7","cipherText","veryOk","_context7","_x12","_connectToRelay","_callee8","realayURL","_context8","_x13","_x14","_x15","_broadcastToRelay","_callee9","skipSeen","_context9","ConnectURI","fromURI","hostname","ignore","encodeURIComponent","approve","_approve","rpc","_reject","Connect","_decrypt","_encrypt","_pubkey","_plaintext","_ciphertext","_proto2","_init","_payload$params","_disconnect","_getPublicKey","_signEvent","getRelays","_getRelays","_callee10","_context10","NstrAdapterNip46","NstrAdapterDiscadableKeys","button","create_if_block_2","button0","button1","create_if_block","create_if_block_1","nip46URI","chatConfiguration","useNip07","useNip46","windowTitle","currentUrl","currentDomain","connectedPubKey","$$invalidate","location","connectURI","chatType","chatTags","chatReferenceTags","clipboard","writeText","fixError","newTarget","errorType","captureStackTrace","functionName","exclusion","lines","line","fixStack","errors","InternalError","InvalidDataError","RoutingError","UnsupportedMethodError","ConnectionError","MissingProviderError","RejectionError","requestProvider","errors_1","webln","__createBinding","__exportStar","t_value","span","icon","amountDisplay","mobilePR","hover","_userPromise","blockUntilReady","recipientHexPubKey","senderHexPubKey","NDK","ndkEvent","alert","sendPayment","$zappingMessage","provider","getOwnPropertyDescriptor","__esModule","t1_value","div6","div0","div1","div2","div3","div4","div5","each_blocks","t4_value","create_if_block_4","if_block3","textContent","toLocaleString","img","img_src_value","button_class_value","div8","div7","current","profilePicture","zappingIt","hovering","responses","zappedAmount","selectMessage","$selectedMessage","$chatAdapter","delayedSubscribe","byWebsiteOwner","$zapsPerMessage","$chatData","$","selector","querySelector","cumulativeOffset","top","offsetTop","offsetLeft","offsetParent","directScroll","scrollTop","inSetter","pageYOffset","scrollLeft","pageXOffset","defaultOptions","container","duration","delay","easing","onStart","onDone","onAborting","scrollX","scrollY","_scrollTo","cumulativeOffsetContainer","cumulativeOffsetTarget","initialX","initialY","targetX","targetY","diffX","diffY","scrolling","started","start_time","end_time","delayStart","progress","scrollToTopLeft","fulfill","loop","scrollContainerHeight","containerElement","scrollHeight","offsetHeight","html","clientHeight","scrollToBottom","proceedOptions","span_class_value","if_block0","create_if_block_8","if_block1","create_if_block_7","src","show_if","nostrnote_changes","if_block","deleted","create_if_block_3","create_if_block_9","each_value_1","create_if_block_6","textarea","prevChatConfiguration","rootNoteId","responseEvents","getEventById","sendMessage","getElementById","extraParams","noteId","messageReceived","isThread","pubkeysTagged","scrollDown","animateScroll.scrollToBottom","zapReceived","reactionReceived","reaction","reactions","channelMetadata","connectivityStatus","deletedEventId","findIndex","connectedChatId","ownName","connectedRelays","totalRelays","pubkeyName","lastETagId","chatStarted","showChat","minimizeChat","script","currentScript"],"mappings":"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,QAGrG,oBAAdN,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU/nB,cAAc+T,MAAM,mBAAqBl4B,SAAS8iC,OAAO0J,GAAI,KAAO,IAE9H,oBAAdP,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU/nB,cAAc+T,MAAM,qBACrG,EA/HD/S,EAAkBwmB,QAyOlB,WACC,IAGC,OAAOc,YACP,CAAC,MAAOz+B,GAGR,CACD,CAlPiB0+B,GAClBvnB,EAAA9hB,QAAkB,MACjB,IAAIspC,GAAS,EAEb,MAAO,KACDA,IACJA,GAAS,EACTrU,QAAQC,KAAK,yIACb,CAEF,EATiB,GAelBpT,EAAiBomB,OAAA,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAsFDpmB,EAAcqX,IAAAlE,QAAQsR,OAAStR,QAAQkE,KAAG,MAAa,GAkEvDiP,EAAAtmB,QAAiBM,GAAoBN,GAErC,MAAMilB,WAACA,GAAcqB,EAAOtmB,QAM5BilB,EAAWxqC,EAAI,SAAUR,GACxB,IACC,OAAOu4B,KAAKC,UAAUx4B,EACtB,CAAC,MAAO4O,GACR,MAAO,+BAAiCA,EAAM7M,OAC9C,sECzQF,IAAIvJ,EAAMpH,OAAOy1B,UAAU4H,eACvB/X,EAAS,IASb,SAAS82B,IAAW,CA4BpB,SAASC,EAAGv8C,EAAIoK,EAASoyC,GACvBt3C,KAAKlF,GAAKA,EACVkF,KAAKkF,QAAUA,EACflF,KAAKs3C,KAAOA,IAAQ,CACrB,CAaD,SAASC,EAAYC,EAASh4C,EAAO1E,EAAIoK,EAASoyC,GA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"}