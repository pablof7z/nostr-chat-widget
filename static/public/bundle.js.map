{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/src/runtime/internal/utils.js","../../node_modules/svelte/src/runtime/internal/environment.js","../../node_modules/svelte/src/runtime/internal/loop.js","../../node_modules/svelte/src/runtime/internal/dom.js","../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../node_modules/svelte/src/runtime/internal/scheduler.js","../../node_modules/svelte/src/runtime/internal/transitions.js","../../node_modules/svelte/src/runtime/internal/each.js","../../node_modules/svelte/src/runtime/internal/Component.js","../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../node_modules/svelte/src/shared/version.js","../../node_modules/svelte/src/runtime/store/index.js","../../src/lib/store.js","../../node_modules/@noble/curves/node_modules/@noble/hashes/esm/_assert.js","../../node_modules/@noble/curves/node_modules/@noble/hashes/esm/crypto.js","../../node_modules/@noble/curves/node_modules/@noble/hashes/esm/utils.js","../../node_modules/@noble/curves/node_modules/@noble/hashes/esm/_sha2.js","../../node_modules/@noble/curves/node_modules/@noble/hashes/esm/sha256.js","../../node_modules/@noble/curves/esm/abstract/utils.js","../../node_modules/@noble/curves/esm/abstract/modular.js","../../node_modules/@noble/curves/esm/abstract/curve.js","../../node_modules/@noble/curves/esm/abstract/weierstrass.js","../../node_modules/@noble/curves/node_modules/@noble/hashes/esm/hmac.js","../../node_modules/@noble/curves/esm/_shortw_utils.js","../../node_modules/@noble/curves/esm/secp256k1.js","../../node_modules/@noble/curves/esm/abstract/hash-to-curve.js","../../node_modules/nostr-tools/node_modules/@noble/hashes/esm/crypto.js","../../node_modules/nostr-tools/node_modules/@noble/hashes/esm/utils.js","../../node_modules/nostr-tools/node_modules/@noble/hashes/esm/_assert.js","../../node_modules/nostr-tools/node_modules/@noble/hashes/esm/_sha2.js","../../node_modules/nostr-tools/node_modules/@noble/hashes/esm/sha256.js","../../node_modules/@scure/base/lib/esm/index.js","../../node_modules/@scure/bip39/wordlists/english.js","../../node_modules/@noble/hashes/_assert.js","../../node_modules/@noble/hashes/crypto.js","../../node_modules/@noble/hashes/utils.js","../../node_modules/@noble/hashes/hmac.js","../../node_modules/@noble/hashes/pbkdf2.js","../../node_modules/@noble/hashes/_sha2.js","../../node_modules/@noble/hashes/sha256.js","../../node_modules/@noble/hashes/_u64.js","../../node_modules/@noble/hashes/sha512.js","../../node_modules/@scure/base/lib/index.js","../../node_modules/@scure/bip39/index.js","../../node_modules/@noble/hashes/esm/_assert.js","../../node_modules/@noble/hashes/esm/utils.js","../../node_modules/@noble/hashes/esm/hmac.js","../../node_modules/@noble/hashes/esm/_sha2.js","../../node_modules/@noble/hashes/esm/ripemd160.js","../../node_modules/@noble/hashes/esm/sha256.js","../../node_modules/@noble/hashes/esm/_u64.js","../../node_modules/@noble/hashes/esm/sha512.js","../../node_modules/@scure/bip32/lib/esm/index.js","../../node_modules/nostr-tools/lib/esm/nostr.mjs","../../node_modules/nostr/lib/relay.js","../../node_modules/ws/browser.js","../../node_modules/nostr/lib/relay-pool.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/eventemitter3/index.js","../../node_modules/tstl/utility/node.js","../../node_modules/websocket/lib/browser.js","../../node_modules/es5-ext/global.js","../../node_modules/websocket/lib/version.js","../../node_modules/tstl/base/container/Container.js","../../node_modules/tstl/internal/iterator/disposable/ForOfAdaptor.js","../../node_modules/tstl/internal/iterator/disposable/NativeArrayIterator.js","../../node_modules/tstl/exception/LogicError.js","../../node_modules/tstl/exception/Exception.js","../../node_modules/tstl/exception/InvalidArgument.js","../../node_modules/tstl/internal/exception/ErrorGenerator.js","../../node_modules/tstl/exception/OutOfRange.js","../../node_modules/tstl/base/container/UniqueSet.js","../../node_modules/tstl/base/container/SetContainer.js","../../node_modules/tstl/functional/uid.js","../../node_modules/tstl/internal/Global.js","../../node_modules/tstl/functional/hash.js","../../node_modules/tstl/functional/comparators.js","../../node_modules/tstl/internal/container/associative/IHashContainer.js","../../node_modules/tstl/internal/container/associative/IAssociativeContainer.js","../../node_modules/tstl/internal/iterator/ListIterator.js","../../node_modules/tstl/iterator/global.js","../../node_modules/tstl/internal/container/linear/ListContainer.js","../../node_modules/tstl/internal/iterator/disposable/Repeater.js","../../node_modules/tstl/internal/iterator/ReverseIterator.js","../../node_modules/tstl/internal/hash/HashBuckets.js","../../node_modules/tstl/utility/Pair.js","../../node_modules/tstl/container/HashSet.js","../../node_modules/tstl/internal/container/associative/SetElementList.js","../../node_modules/tstl/internal/hash/SetHashBuckets.js","../../node_modules/tstl/base/container/UniqueMap.js","../../node_modules/tstl/base/container/MapContainer.js","../../node_modules/tstl/container/HashMap.js","../../node_modules/tstl/internal/container/associative/MapElementList.js","../../node_modules/tstl/internal/hash/MapHashBuckets.js","../../node_modules/tstl/utility/Entry.js","../../node_modules/websocket-polyfill/lib/events/Event.js","../../node_modules/websocket-polyfill/lib/index.js","../../node_modules/websocket-polyfill/lib/WebSocket.js","../../node_modules/websocket-polyfill/lib/events/EventTarget.js","../../node_modules/websocket-polyfill/lib/events/CloseEvent.js","../../node_modules/websocket-polyfill/lib/events/MessageEvent.js","../../node_modules/websocket-polyfill/lib/events/ErrorEvent.js","../../node_modules/light-bolt11-decoder/bolt11.js","../../node_modules/@nostr-dev-kit/ndk/dist/index.mjs","../../src/lib/adapters/index.js","../../src/lib/adapters/nip07.js","../../node_modules/@nostr-connect/connect/dist/connect.esm.js","../../src/lib/adapters/nip46.js","../../src/lib/adapters/discardable-keys.js","../../src/KeyPrompt.svelte","../../node_modules/webln/lib/errors.js","../../node_modules/webln/lib/client.js","../../node_modules/webln/lib/index.js","../../src/ZapAmountButton.svelte","../../node_modules/webln/lib/provider.js","../../src/NostrNote.svelte","../../node_modules/svelte-scrollto/src/helper.js","../../node_modules/svelte-scrollto/src/index.js","../../node_modules/svelte/src/runtime/easing/index.js","../../src/ConnectedWidget.svelte","../../src/Container.svelte","../../src/Widget.svelte","../../src/widget.js"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { noop } from './utils.js';\n\nexport const is_client = typeof window !== 'undefined';\n\n/** @type {() => number} */\nexport let now = is_client ? () => window.performance.now() : () => Date.now();\n\nexport let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop;\n\n// used internally for testing\n/** @returns {void} */\nexport function set_now(fn) {\n\tnow = fn;\n}\n\n/** @returns {void} */\nexport function set_raf(fn) {\n\traf = fn;\n}\n","import { raf } from './environment.js';\n\nconst tasks = new Set();\n\n/**\n * @param {number} now\n * @returns {void}\n */\nfunction run_tasks(now) {\n\ttasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\ttasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\tif (tasks.size !== 0) raf(run_tasks);\n}\n\n/**\n * For testing purposes only!\n * @returns {void}\n */\nexport function clear_loops() {\n\ttasks.clear();\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {import('./private.js').TaskCallback} callback\n * @returns {import('./private.js').Task}\n */\nexport function loop(callback) {\n\t/** @type {import('./private.js').TaskEntry} */\n\tlet task;\n\tif (tasks.size === 0) raf(run_tasks);\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\ttasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\ttasks.delete(task);\n\t\t}\n\t};\n}\n","import { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\nimport { contenteditable_truthy_values, has_prop } from './utils.js';\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst myChildren = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmyChildren.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = myChildren;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seqLen =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seqLen] + 1;\n\t\tconst newLen = seqLen + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[newLen] = i;\n\t\tlongest = Math.max(newLen, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst toMove = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\ttoMove.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\ttoMove.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\ttoMove.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < toMove.length; i++) {\n\t\twhile (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(toMove[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tif (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/**\n * @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} processNode\n * @param {() => R} createNode\n * @param {boolean} dontUpdateLastIndex\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst resultNode = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = processNode(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dontUpdateLastIndex) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = processNode(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dontUpdateLastIndex) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn createNode();\n\t})();\n\tresultNode.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn resultNode;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst dataStr = '' + data;\n\t\t\tif (node.data.startsWith(dataStr)) {\n\t\t\t\tif (node.data.length !== dataStr.length) {\n\t\t\t\t\treturn node.splitText(dataStr.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = dataStr;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro — restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro — we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro — needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n/** @returns {void} */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\tconst nodes = children(options.target);\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom\n) {\n\tconst Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.0.5';\nexport const PUBLIC_VERSION = '4';\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","import { writable } from 'svelte/store';\n\nexport const chatAdapter = writable(null);\nexport const chatData = writable({ events: [], profiles: {}});\nexport const selectedMessage = writable(null);\nexport const zappingMessage = writable(null);\nexport const zapsPerMessage = writable({});","export function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexport function bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexport function hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexport function exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexport function output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexport default assert;\n//# sourceMappingURL=_assert.js.map","export const crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use `globalThis.crypto`, but node.js versions earlier than v19 don't\n// declare it in global scope. For node.js, package.json#exports field mapping\n// rewrites import from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n */\nexport function bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('deadbeef') // Uint8Array.from([0xde, 0xad, 0xbe, 0xef])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `globalThis.crypto` or node.js crypto module.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","import assert from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        assert.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_sha2.js.map","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst u8a = (a) => a instanceof Uint8Array;\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexport function numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nexport function hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // Big Endian\n    return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n// Caching slows it down 2-3x\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    if (hex.length % 2)\n        throw new Error('hex string is invalid: unpadded ' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// Big Endian\nexport function bytesToNumberBE(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nexport function bytesToNumberLE(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\nexport const numberToBytesBE = (n, len) => hexToBytes(n.toString(16).padStart(len * 2, '0'));\nexport const numberToBytesLE = (n, len) => numberToBytesBE(n, len).reverse();\n// Returns variable number bytes (minimal bigint encoding?)\nexport const numberToVarBytesBE = (n) => hexToBytes(numberToHexUnpadded(n));\nexport function ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = hexToBytes(hex);\n        }\n        catch (e) {\n            throw new Error(`${title} must be valid hex string, got \"${hex}\". Cause: ${e}`);\n        }\n    }\n    else if (u8a(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(`${title} must be hex string or Uint8Array`);\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(`${title} expected ${expectedLength} bytes, got ${len}`);\n    return res;\n}\n// Copies several Uint8Arrays into one.\nexport function concatBytes(...arrs) {\n    const r = new Uint8Array(arrs.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrs.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\nexport function equalBytes(b1, b2) {\n    // We don't care about timing attacks here\n    if (b1.length !== b2.length)\n        return false;\n    for (let i = 0; i < b1.length; i++)\n        if (b1[i] !== b2[i])\n            return false;\n    return true;\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\n// Bit operations\n// Amount of bits inside bigint (Same as n.toString(2).length)\nexport function bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n// Gets single bit at position. NOTE: first bit position is 0 (same as arrays)\n// Same as !!+Array.from(n.toString(2)).reverse()[pos]\nexport const bitGet = (n, pos) => (n >> BigInt(pos)) & _1n;\n// Sets single bit at position\nexport const bitSet = (n, pos, value) => n | ((value ? _1n : _0n) << BigInt(pos));\n// Return mask for N bits (Same as BigInt(`0b${Array(i).fill('1').join('')}`))\n// Not using ** operator with bigints for old engines.\nexport const bitMask = (n) => (_2n << BigInt(n - 1)) - _1n;\n// DRBG\nconst u8n = (data) => new Uint8Array(data); // creates Uint8Array\nconst u8fr = (arr) => Uint8Array.from(arr); // another shortcut\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n()) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return concatBytes(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nexport function validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error(`Invalid validator \"${type}\", expected function`);\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error(`Invalid param ${String(fieldName)}=${val} (${typeof val}), expected ${type}`);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n//# sourceMappingURL=utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Utilities for modular arithmetics and finite fields\nimport { bitMask, numberToBytesBE, numberToBytesLE, bytesToNumberBE, bytesToNumberLE, ensureBytes, validateObject, } from './utils.js';\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _4n = BigInt(4), _5n = BigInt(5), _8n = BigInt(8);\n// prettier-ignore\nconst _9n = BigInt(9), _16n = BigInt(16);\n// Calculates a modulo b\nexport function mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently exponentiate num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * powMod(2n, 6n, 11n) // 64n % 11n == 9n\n */\n// TODO: use field version && remove\nexport function pow(num, power, modulo) {\n    if (modulo <= _0n || power < _0n)\n        throw new Error('Expected power/modulo > 0');\n    if (modulo === _1n)\n        return _0n;\n    let res = _1n;\n    while (power > _0n) {\n        if (power & _1n)\n            res = (res * num) % modulo;\n        num = (num * num) % modulo;\n        power >>= _1n;\n    }\n    return res;\n}\n// Does x ^ (2 ^ power) mod p. pow2(30, 4) == 30 ^ (2 ^ 4)\nexport function pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n// Inverses number over modulo\nexport function invert(number, modulo) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    // Eucledian GCD https://brilliant.org/wiki/extended-euclidean-algorithm/\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n// Tonelli-Shanks algorithm\n// Paper 1: https://eprint.iacr.org/2012/685.pdf (page 12)\n// Paper 2: Square Roots from 1; 24, 51, 10 to Dan Shanks\nexport function tonelliShanks(P) {\n    // Legendre constant: used to calculate Legendre symbol (a | p),\n    // which denotes the value of a^((p-1)/2) (mod p).\n    // (a | p) ≡ 1    if a is a square (mod p)\n    // (a | p) ≡ -1   if a is not a square (mod p)\n    // (a | p) ≡ 0    if a ≡ 0 (mod p)\n    const legendreC = (P - _1n) / _2n;\n    let Q, S, Z;\n    // Step 1: By factoring out powers of 2 from p - 1,\n    // find q and s such that p - 1 = q*(2^s) with q odd\n    for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++)\n        ;\n    // Step 2: Select a non-square z such that (z | p) ≡ -1 and set c ≡ zq\n    for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++)\n        ;\n    // Fast-path\n    if (S === 1) {\n        const p1div4 = (P + _1n) / _4n;\n        return function tonelliFast(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Slow-path\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        // Step 0: Check that n is indeed a square: (n | p) should not be ≡ -1\n        if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE))\n            throw new Error('Cannot find square root');\n        let r = S;\n        // TODO: will fail at Fp2/etc\n        let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n        let x = Fp.pow(n, Q1div2); // first guess at the square root\n        let b = Fp.pow(n, Q); // first guess at the fudge factor\n        while (!Fp.eql(b, Fp.ONE)) {\n            if (Fp.eql(b, Fp.ZERO))\n                return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n            // Find m such b^(2^m)==1\n            let m = 1;\n            for (let t2 = Fp.sqr(b); m < r; m++) {\n                if (Fp.eql(t2, Fp.ONE))\n                    break;\n                t2 = Fp.sqr(t2); // t2 *= t2\n            }\n            // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n            const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n            g = Fp.sqr(ge); // g = ge * ge\n            x = Fp.mul(x, ge); // x *= ge\n            b = Fp.mul(b, g); // b *= g\n            r = m;\n        }\n        return x;\n    };\n}\nexport function FpSqrt(P) {\n    // NOTE: different algorithms can give different roots, it is up to user to decide which one they want.\n    // For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n    // P ≡ 3 (mod 4)\n    // √n = n^((P+1)/4)\n    if (P % _4n === _3n) {\n        // Not all roots possible!\n        // const ORDER =\n        //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n        // const NUM = 72057594037927816n;\n        const p1div4 = (P + _1n) / _4n;\n        return function sqrt3mod4(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            // Throw if root**2 != n\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Atkin algorithm for q ≡ 5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n    if (P % _8n === _5n) {\n        const c1 = (P - _5n) / _8n;\n        return function sqrt5mod8(Fp, n) {\n            const n2 = Fp.mul(n, _2n);\n            const v = Fp.pow(n2, c1);\n            const nv = Fp.mul(n, v);\n            const i = Fp.mul(Fp.mul(nv, _2n), v);\n            const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // P ≡ 9 (mod 16)\n    if (P % _16n === _9n) {\n        // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n        // Means we cannot use sqrt for constants at all!\n        //\n        // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n        // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n        // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n        // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n        // sqrt = (x) => {\n        //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n        //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n        //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n        //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n        //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n        //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n        //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n        //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n        //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n        //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n        // }\n    }\n    // Other cases: Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nexport function validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'isSafeInteger',\n        BITS: 'isSafeInteger',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    return validateObject(field, opts);\n}\n// Generic field functions\nexport function FpPow(f, num, power) {\n    // Should have same speed as pow for bigints\n    // TODO: benchmark!\n    if (power < _0n)\n        throw new Error('Expected power > 0');\n    if (power === _0n)\n        return f.ONE;\n    if (power === _1n)\n        return num;\n    let p = f.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = f.mul(p, d);\n        d = f.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n// 0 is non-invertible: non-batched version will throw on 0\nexport function FpInvertBatch(f, nums) {\n    const tmp = new Array(nums.length);\n    // Walk from first to last, multiply them by each other MOD p\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = acc;\n        return f.mul(acc, num);\n    }, f.ONE);\n    // Invert last element\n    const inverted = f.inv(lastMultiplied);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = f.mul(acc, tmp[i]);\n        return f.mul(acc, num);\n    }, inverted);\n    return tmp;\n}\nexport function FpDiv(f, lhs, rhs) {\n    return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare(f) {\n    const legendreConst = (f.ORDER - _1n) / _2n; // Integer arithmetic\n    return (x) => {\n        const p = f.pow(x, legendreConst);\n        return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n    };\n}\n// CURVE.n lengths\nexport function nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Initializes a galois field over prime. Non-primes are not supported for now.\n * Do not init in loop: slow. Very fragile: always run a benchmark on change.\n * Major performance gains:\n * a) non-normalized operations like mulN instead of mul\n * b) `Object.freeze`\n * c) Same object shape: never add or remove keys\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(ORDER, bitLen, isLE = false, redef = {}) {\n    if (ORDER <= _0n)\n        throw new Error(`Expected Fp ORDER > 0, got ${ORDER}`);\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n    if (BYTES > 2048)\n        throw new Error('Field lengths over 2048 bytes are not supported');\n    const sqrtP = FpSqrt(ORDER);\n    const f = Object.freeze({\n        ORDER,\n        BITS,\n        BYTES,\n        MASK: bitMask(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error(`Invalid field element: expected bigint, got ${typeof num}`);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: redef.sqrt || ((n) => sqrtP(f, n)),\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // TODO: do we really need constant cmov?\n        // We don't have const-time bigints anyway, so probably will be not very useful\n        cmov: (a, b, c) => (c ? b : a),\n        toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error(`Fp.fromBytes: expected ${BYTES}, got ${bytes.length}`);\n            return isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n        },\n    });\n    return Object.freeze(f);\n}\nexport function FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nexport function FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * FIPS 186 B.4.1-compliant \"constant-time\" private key generation utility.\n * Can take (n+8) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being neglible.\n * Needs at least 40 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * @param hash hash output from SHA3 or a similar function\n * @returns valid private scalar\n */\nexport function hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = ensureBytes('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error(`hashToPrivateScalar: expected ${minLen}-1024 bytes of input, got ${hashLen}`);\n    const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n//# sourceMappingURL=modular.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Abelian group utilities\nimport { validateField, nLength } from './modular.js';\nimport { validateObject } from './utils.js';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n// Elliptic curve multiplication of Point by scalar. Fragile.\n// Scalars should always be less than curve order: this should be checked inside of a curve itself.\n// Creates precomputation tables for fast multiplication:\n// - private scalar is split by fixed size windows of W bits\n// - every window point is collected from window's table & added to accumulator\n// - since windows are different, same point inside tables won't be accessed more than once per calc\n// - each multiplication is 'Math.ceil(CURVE_ORDER / 𝑊) + 1' point additions (fixed for any scalar)\n// - +1 window is neccessary for wNAF\n// - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n// TODO: Research returning 2d JS array of windows, instead of a single window. This would allow\n// windows to be in different memory locations\nexport function wNAF(c, bits) {\n    const constTimeNegate = (condition, item) => {\n        const neg = item.negate();\n        return condition ? neg : item;\n    };\n    const opts = (W) => {\n        const windows = Math.ceil(bits / W) + 1; // +1, because\n        const windowSize = 2 ** (W - 1); // -1 because we skip zero\n        return { windows, windowSize };\n    };\n    return {\n        constTimeNegate,\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n) {\n            let p = c.ZERO;\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(𝑊−1) * (Math.ceil(𝑛 / 𝑊) + 1), where:\n         * - 𝑊 is the window size\n         * - 𝑛 is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = opts(W);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // =1, because we skip zero\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // TODO: maybe check that scalar is less than group order? wNAF behavious is undefined otherwise\n            // But need to carefully remove other checks before wNAF. ORDER == bits here\n            const { windows, windowSize } = opts(W);\n            let p = c.ZERO;\n            let f = c.BASE;\n            const mask = BigInt(2 ** W - 1); // Create mask with W ones: 0b1111 for W=4 etc.\n            const maxNumber = 2 ** W;\n            const shiftBy = BigInt(W);\n            for (let window = 0; window < windows; window++) {\n                const offset = window * windowSize;\n                // Extract W bits.\n                let wbits = Number(n & mask);\n                // Shift number by W bits.\n                n >>= shiftBy;\n                // If the bits are bigger than max size, we'll split those.\n                // +224 => 256 - 32\n                if (wbits > windowSize) {\n                    wbits -= maxNumber;\n                    n += _1n;\n                }\n                // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n                // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n                // there is negate now: it is possible that negated element from low value\n                // would be the same as high element, which will create carry into next window.\n                // It's not obvious how this can fail, but still worth investigating later.\n                // Check if we're onto Zero point.\n                // Add random point inside current window to f.\n                const offset1 = offset;\n                const offset2 = offset + Math.abs(wbits) - 1; // -1 because we skip zero\n                const cond1 = window % 2 !== 0;\n                const cond2 = wbits < 0;\n                if (wbits === 0) {\n                    // The most important part for const-time getPublicKey\n                    f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n                }\n                else {\n                    p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n                }\n            }\n            // JIT-compiler should not eliminate f here, since it will later be used in normalizeZ()\n            // Even if the variable is still unused, there are some checks which will\n            // throw an exception, so compiler needs to prove they won't happen, which is hard.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        wNAFCached(P, precomputesMap, n, transform) {\n            // @ts-ignore\n            const W = P._WINDOW_SIZE || 1;\n            // Calculate precomputes on a first run, reuse them after\n            let comp = precomputesMap.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1) {\n                    precomputesMap.set(P, transform(comp));\n                }\n            }\n            return this.wNAF(W, comp, n);\n        },\n    };\n}\nexport function validateBasic(curve) {\n    validateField(curve.Fp);\n    validateObject(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...nLength(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\n//# sourceMappingURL=curve.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y² = x³ + ax + b\nimport * as mod from './modular.js';\nimport * as ut from './utils.js';\nimport { ensureBytes } from './utils.js';\nimport { wNAF, validateBasic } from './curve.js';\nfunction validatePointOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        a: 'field',\n        b: 'field',\n    }, {\n        allowedPrivateKeyLengths: 'array',\n        wrapPrivateKey: 'boolean',\n        isTorsionFree: 'function',\n        clearCofactor: 'function',\n        allowInfinityPoint: 'boolean',\n        fromBytes: 'function',\n        toBytes: 'function',\n    });\n    const { endo, Fp, a } = opts;\n    if (endo) {\n        if (!Fp.eql(a, Fp.ZERO)) {\n            throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n        }\n        if (typeof endo !== 'object' ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n        }\n    }\n    return Object.freeze({ ...opts });\n}\n// ASN.1 DER encoding utilities\nconst { bytesToNumberBE: b2n, hexToBytes: h2b } = ut;\nexport const DER = {\n    // asn.1 DER encoding utils\n    Err: class DERErr extends Error {\n        constructor(m = '') {\n            super(m);\n        }\n    },\n    _parseInt(data) {\n        const { Err: E } = DER;\n        if (data.length < 2 || data[0] !== 0x02)\n            throw new E('Invalid signature integer tag');\n        const len = data[1];\n        const res = data.subarray(2, len + 2);\n        if (!len || res.length !== len)\n            throw new E('Invalid signature integer: wrong length');\n        // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n        // since we always use positive integers here. It must always be empty:\n        // - add zero byte if exists\n        // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n        if (res[0] & 0b10000000)\n            throw new E('Invalid signature integer: negative');\n        if (res[0] === 0x00 && !(res[1] & 0b10000000))\n            throw new E('Invalid signature integer: unnecessary leading zero');\n        return { d: b2n(res), l: data.subarray(len + 2) }; // d is data, l is left\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E } = DER;\n        const data = typeof hex === 'string' ? h2b(hex) : hex;\n        if (!(data instanceof Uint8Array))\n            throw new Error('ui8a expected');\n        let l = data.length;\n        if (l < 2 || data[0] != 0x30)\n            throw new E('Invalid signature tag');\n        if (data[1] !== l - 2)\n            throw new E('Invalid signature: incorrect length');\n        const { d: r, l: sBytes } = DER._parseInt(data.subarray(2));\n        const { d: s, l: rBytesLeft } = DER._parseInt(sBytes);\n        if (rBytesLeft.length)\n            throw new E('Invalid signature: left bytes after parsing');\n        return { r, s };\n    },\n    hexFromSig(sig) {\n        // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n        const slice = (s) => (Number.parseInt(s[0], 16) & 0b1000 ? '00' + s : s);\n        const h = (num) => {\n            const hex = num.toString(16);\n            return hex.length & 1 ? `0${hex}` : hex;\n        };\n        const s = slice(h(sig.s));\n        const r = slice(h(sig.r));\n        const shl = s.length / 2;\n        const rhl = r.length / 2;\n        const sl = h(shl);\n        const rl = h(rhl);\n        return `30${h(rhl + shl + 4)}02${rl}${r}02${sl}${s}`;\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\nexport function weierstrassPoints(opts) {\n    const CURVE = validatePointOpts(opts);\n    const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n    const toBytes = CURVE.toBytes ||\n        ((c, point, isCompressed) => {\n            const a = point.toAffine();\n            return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n        });\n    const fromBytes = CURVE.fromBytes ||\n        ((bytes) => {\n            // const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n            const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n            const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n            return { x, y };\n        });\n    /**\n     * y² = x³ + ax + b: Short weierstrass curve formula\n     * @returns y²\n     */\n    function weierstrassEquation(x) {\n        const { a, b } = CURVE;\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x2 * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n    }\n    // Validate whether the passed curve params are valid.\n    // We check if curve equation works for generator point.\n    // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n    // ProjectivePoint class has not been initialized yet.\n    if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n        throw new Error('bad generator point: equation left != right');\n    // Valid group elements reside in range 1..n-1\n    function isWithinCurveOrder(num) {\n        return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n    }\n    function assertGE(num) {\n        if (!isWithinCurveOrder(num))\n            throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n    }\n    // Validates if priv key is valid and converts it to bigint.\n    // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n    function normPrivateKeyToScalar(key) {\n        const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n } = CURVE;\n        if (lengths && typeof key !== 'bigint') {\n            if (key instanceof Uint8Array)\n                key = ut.bytesToHex(key);\n            // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n            if (typeof key !== 'string' || !lengths.includes(key.length))\n                throw new Error('Invalid key');\n            key = key.padStart(nByteLength * 2, '0');\n        }\n        let num;\n        try {\n            num =\n                typeof key === 'bigint'\n                    ? key\n                    : ut.bytesToNumberBE(ensureBytes('private key', key, nByteLength));\n        }\n        catch (error) {\n            throw new Error(`private key must be ${nByteLength} bytes, hex or bigint, not ${typeof key}`);\n        }\n        if (wrapPrivateKey)\n            num = mod.mod(num, n); // disabled by default, enabled for BLS\n        assertGE(num); // num in range [1..N-1]\n        return num;\n    }\n    const pointPrecomputes = new Map();\n    function assertPrjPoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z) ∋ (x=x/z, y=y/z)\n     * Default Point works in 2d / affine coordinates: (x, y)\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        constructor(px, py, pz) {\n            this.px = px;\n            this.py = py;\n            this.pz = pz;\n            if (px == null || !Fp.isValid(px))\n                throw new Error('x required');\n            if (py == null || !Fp.isValid(py))\n                throw new Error('y required');\n            if (pz == null || !Fp.isValid(pz))\n                throw new Error('z required');\n        }\n        // Does not validate if the point is on-curve.\n        // Use fromHex instead, or call assertValidity() later.\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            const is0 = (i) => Fp.eql(i, Fp.ZERO);\n            // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n            if (is0(x) && is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        /**\n         * Takes a bunch of Projective Points but executes only one\n         * inversion on all of them. Inversion is very slow operation,\n         * so this improves performance massively.\n         * Optimization: converts a list of projective points to a list of identical points with Z=1.\n         */\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.pz));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        /**\n         * Converts hash string or Uint8Array to Point.\n         * @param hex short/long ECDSA hex\n         */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        // Multiplies generator point by privateKey.\n        static fromPrivateKey(privateKey) {\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            this._WINDOW_SIZE = windowSize;\n            pointPrecomputes.delete(this);\n        }\n        // A point on curve is valid if it conforms to equation.\n        assertValidity() {\n            // Zero is valid point too!\n            if (this.is0()) {\n                if (CURVE.allowInfinityPoint)\n                    return;\n                throw new Error('bad point: ZERO');\n            }\n            // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n            const { x, y } = this.toAffine();\n            // Check if x, y are valid field elements\n            if (!Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('bad point: x or y not FE');\n            const left = Fp.sqr(y); // y²\n            const right = weierstrassEquation(x); // x³ + ax + b\n            if (!Fp.eql(left, right))\n                throw new Error('bad point: equation left != right');\n            if (!this.isTorsionFree())\n                throw new Error('bad point: not in prime-order subgroup');\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (Fp.isOdd)\n                return !Fp.isOdd(y);\n            throw new Error(\"Field doesn't support isOdd\");\n        }\n        /**\n         * Compare one point to another.\n         */\n        equals(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /**\n         * Flips point to one corresponding to (x, -y) in Affine coordinates.\n         */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, pointPrecomputes, n, (comp) => {\n                const toInv = Fp.invertBatch(comp.map((p) => p.pz));\n                return comp.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n            });\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(n) {\n            const I = Point.ZERO;\n            if (n === _0n)\n                return I;\n            assertGE(n); // Will throw on 0\n            if (n === _1n)\n                return this;\n            const { endo } = CURVE;\n            if (!endo)\n                return wnaf.unsafeLadder(this, n);\n            // Apply endomorphism\n            let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let k1p = I;\n            let k2p = I;\n            let d = this;\n            while (k1 > _0n || k2 > _0n) {\n                if (k1 & _1n)\n                    k1p = k1p.add(d);\n                if (k2 & _1n)\n                    k2p = k2p.add(d);\n                d = d.double();\n                k1 >>= _1n;\n                k2 >>= _1n;\n            }\n            if (k1neg)\n                k1p = k1p.negate();\n            if (k2neg)\n                k2p = k2p.negate();\n            k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n            return k1p.add(k2p);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            assertGE(scalar);\n            let n = scalar;\n            let point, fake; // Fake point is used to const-time mult\n            const { endo } = CURVE;\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n                let { p: k1p, f: f1p } = this.wNAF(k1);\n                let { p: k2p, f: f2p } = this.wNAF(k2);\n                k1p = wnaf.constTimeNegate(k1neg, k1p);\n                k2p = wnaf.constTimeNegate(k2neg, k2p);\n                k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n                point = k1p.add(k2p);\n                fake = f1p.add(f2p);\n            }\n            else {\n                const { p, f } = this.wNAF(n);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n         * Not using Strauss-Shamir trick: precomputation tables are faster.\n         * The trick could be useful if both P and Q are not G (not in our case).\n         * @returns non-zero affine point\n         */\n        multiplyAndAddUnsafe(Q, a, b) {\n            const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n            const mul = (P, a // Select faster multiply() method\n            ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n            const sum = mul(this, a).add(mul(Q, b));\n            return sum.is0() ? undefined : sum;\n        }\n        // Converts Projective point to affine (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        // (x, y, z) ∋ (x=x/z, y=y/z)\n        toAffine(iz) {\n            const { px: x, py: y, pz: z } = this;\n            const is0 = this.is0();\n            // If invZ was 0, we return zero point. However we still want to execute\n            // all operations, so we replace invZ with a random number, 1.\n            if (iz == null)\n                iz = is0 ? Fp.ONE : Fp.inv(z);\n            const ax = Fp.mul(x, iz);\n            const ay = Fp.mul(y, iz);\n            const zz = Fp.mul(z, iz);\n            if (is0)\n                return { x: Fp.ZERO, y: Fp.ZERO };\n            if (!Fp.eql(zz, Fp.ONE))\n                throw new Error('invZ was invalid');\n            return { x: ax, y: ay };\n        }\n        isTorsionFree() {\n            const { h: cofactor, isTorsionFree } = CURVE;\n            if (cofactor === _1n)\n                return true; // No subgroups, always torsion-free\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n        }\n        clearCofactor() {\n            const { h: cofactor, clearCofactor } = CURVE;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(CURVE.h);\n        }\n        toRawBytes(isCompressed = true) {\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        toHex(isCompressed = true) {\n            return ut.bytesToHex(this.toRawBytes(isCompressed));\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n    const _bits = CURVE.nBitLength;\n    const wnaf = wNAF(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n    // Validate if generator point is on curve\n    return {\n        CURVE,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    };\n}\nfunction validateOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        hash: 'hash',\n        hmac: 'function',\n        randomBytes: 'function',\n    }, {\n        bits2int: 'function',\n        bits2int_modN: 'function',\n        lowS: 'boolean',\n    });\n    return Object.freeze({ lowS: true, ...opts });\n}\nexport function weierstrass(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER } = CURVE;\n    const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n    const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n    function isValidFieldElement(num) {\n        return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n    }\n    function modN(a) {\n        return mod.mod(a, CURVE_ORDER);\n    }\n    function invN(a) {\n        return mod.invert(a, CURVE_ORDER);\n    }\n    const { ProjectivePoint: Point, normPrivateKeyToScalar, weierstrassEquation, isWithinCurveOrder, } = weierstrassPoints({\n        ...CURVE,\n        toBytes(c, point, isCompressed) {\n            const a = point.toAffine();\n            const x = Fp.toBytes(a.x);\n            const cat = ut.concatBytes;\n            if (isCompressed) {\n                return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n            }\n            else {\n                return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n            }\n        },\n        fromBytes(bytes) {\n            const len = bytes.length;\n            const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // this.assertValidity() is done inside of fromHex\n            if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n                const x = ut.bytesToNumberBE(tail);\n                if (!isValidFieldElement(x))\n                    throw new Error('Point is not on curve');\n                const y2 = weierstrassEquation(x); // y² = x³ + ax + b\n                let y = Fp.sqrt(y2); // y = y² ^ (p+1)/4\n                const isYOdd = (y & _1n) === _1n;\n                // ECDSA\n                const isHeadOdd = (head & 1) === 1;\n                if (isHeadOdd !== isYOdd)\n                    y = Fp.neg(y);\n                return { x, y };\n            }\n            else if (len === uncompressedLen && head === 0x04) {\n                const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n                const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n                return { x, y };\n            }\n            else {\n                throw new Error(`Point of length ${len} was invalid. Expected ${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes`);\n            }\n        },\n    });\n    const numToNByteStr = (num) => ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n    }\n    // slice bytes num\n    const slcNum = (b, from, to) => ut.bytesToNumberBE(b.slice(from, to));\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            this.r = r;\n            this.s = s;\n            this.recovery = recovery;\n            this.assertValidity();\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const l = CURVE.nByteLength;\n            hex = ensureBytes('compactSignature', hex, l * 2);\n            return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = DER.toSig(ensureBytes('DER', hex));\n            return new Signature(r, s);\n        }\n        assertValidity() {\n            // can use assertGE here\n            if (!isWithinCurveOrder(this.r))\n                throw new Error('r must be 0 < r < CURVE.n');\n            if (!isWithinCurveOrder(this.s))\n                throw new Error('s must be 0 < s < CURVE.n');\n        }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        recoverPublicKey(msgHash) {\n            const { r, s, recovery: rec } = this;\n            const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n            if (radj >= Fp.ORDER)\n                throw new Error('recovery id 2 or 3 invalid');\n            const prefix = (rec & 1) === 0 ? '02' : '03';\n            const R = Point.fromHex(prefix + numToNByteStr(radj));\n            const ir = invN(radj); // r^-1\n            const u1 = modN(-h * ir); // -hr^-1\n            const u2 = modN(s * ir); // sr^-1\n            const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n            if (!Q)\n                throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return ut.hexToBytes(this.toDERHex());\n        }\n        toDERHex() {\n            return DER.hexFromSig({ r: this.r, s: this.s });\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return ut.hexToBytes(this.toCompactHex());\n        }\n        toCompactHex() {\n            return numToNByteStr(this.r) + numToNByteStr(this.s);\n        }\n    }\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size (nBitLength+64)\n         * as per FIPS 186 B.4.1 with modulo bias being neglible.\n         */\n        randomPrivateKey: () => {\n            const rand = CURVE.randomBytes(Fp.BYTES + 8);\n            const num = mod.hashToPrivateScalar(rand, CURVE_ORDER);\n            return ut.numberToBytesBE(num, CURVE.nByteLength);\n        },\n        /**\n         * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n         * Allows to massively speed-up `point.multiply(scalar)`.\n         * @returns cached point\n         * @example\n         * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n         * fast.multiply(privKey); // much faster ECDH now\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n            return point;\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        const arr = item instanceof Uint8Array;\n        const str = typeof item === 'string';\n        const len = (arr || str) && item.length;\n        if (arr)\n            return len === compressedLen || len === uncompressedLen;\n        if (str)\n            return len === 2 * compressedLen || len === 2 * uncompressedLen;\n        if (item instanceof Point)\n            return true;\n        return false;\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA))\n            throw new Error('first arg must be private key');\n        if (!isProbPub(publicB))\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = CURVE.bits2int ||\n        function (bytes) {\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = CURVE.bits2int_modN ||\n        function (bytes) {\n            return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        if (typeof num !== 'bigint')\n            throw new Error('bigint expected');\n        if (!(_0n <= num && num < ORDER_MASK))\n            throw new Error(`bigint expected < 2^${CURVE.nBitLength}`);\n        // works with order, can have different size than numToField!\n        return ut.numberToBytesBE(num, CURVE.nByteLength);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n    // Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash, randomBytes } = CURVE;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = ensureBytes('msgHash', msgHash);\n        if (prehash)\n            msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push(ensureBytes('extraEntropy', e, Fp.BYTES)); // check for being of size BYTES\n        }\n        const seed = ut.concatBytes(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!isWithinCurveOrder(k))\n                return; // Important: all mod() calls here must be done over N\n            const ik = invN(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = modN(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            // Can use scalar blinding b^-1(bm + bdr) where b ∈ [1,q−1] according to\n            // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n            // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n            const s = modN(ik * modN(m + r * d)); // Not using blinding here\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: CURVE.lowS, prehash: false };\n    const defaultVerOpts = { lowS: CURVE.lowS, prehash: false };\n    /**\n     * Signs message hash (not message: you need to hash it by yourself).\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G × k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param opts `lowS, extraEntropy, prehash`\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const drbg = ut.createHmacDrbg(CURVE.hash.outputLen, CURVE.nByteLength, CURVE.hmac);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE._setWindowSize(8);\n    // utils.precompute(8, ProjectivePoint.BASE)\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1⋅G - U2⋅P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = ensureBytes('msgHash', msgHash);\n        publicKey = ensureBytes('publicKey', publicKey);\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        const { lowS, prehash } = opts;\n        let _sig = undefined;\n        let P;\n        try {\n            if (typeof sg === 'string' || sg instanceof Uint8Array) {\n                // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n                // Since DER can also be 2*nByteLength bytes, we check for it first.\n                try {\n                    _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof DER.Err))\n                        throw derError;\n                    _sig = Signature.fromCompact(sg);\n                }\n            }\n            else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n                const { r, s } = sg;\n                _sig = new Signature(r, s);\n            }\n            else {\n                throw new Error('PARSE');\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            if (error.message === 'PARSE')\n                throw new Error(`signature must be Signature instance, Uint8Array or hex string`);\n            return false;\n        }\n        if (lowS && _sig.hasHighS())\n            return false;\n        if (prehash)\n            msgHash = CURVE.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = invN(s); // s^-1\n        const u1 = modN(h * is); // u1 = hs^-1 mod n\n        const u2 = modN(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1⋅G + u2⋅P\n        if (!R)\n            return false;\n        const v = modN(R.x);\n        return v === r;\n    }\n    return {\n        CURVE,\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        ProjectivePoint: Point,\n        Signature,\n        utils,\n    };\n}\n// Implementation of the Shallue and van de Woestijne method for any Weierstrass curve\n// TODO: check if there is a way to merge this with uvRatio in Edwards && move to modular?\n// b = True and y = sqrt(u / v) if (u / v) is square in F, and\n// b = False and y = sqrt(Z * (u / v)) otherwise.\nexport function SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    const c2 = (q - _1n) / _2n ** c1; // 2. c2 = (q - 1) / (2^c1)        # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n ** c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n ** (c1 - _1n); // 5. c5 = 2^(c1 - 1)              # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = _2n ** (i - _2n); // 18.    tv5 = i - 2;    19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n// From draft-irtf-cfrg-hash-to-curve-16\nexport function mapToCurveSimpleSWU(Fp, opts) {\n    mod.validateField(Fp);\n    if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n    if (!Fp.isOdd)\n        throw new Error('Fp.isOdd is not implemented!');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        x = Fp.div(x, tv4); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","import assert from './_assert.js';\nimport { Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assert.hash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        assert.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { concatBytes, randomBytes } from '@noble/hashes/utils';\nimport { weierstrass } from './abstract/weierstrass.js';\n// connects noble-curves to noble-hashes\nexport function getHash(hash) {\n    return {\n        hash,\n        hmac: (key, ...msgs) => hmac(hash, key, concatBytes(...msgs)),\n        randomBytes,\n    };\n}\nexport function createCurve(curveDef, defHash) {\n    const create = (hash) => weierstrass({ ...curveDef, ...getHash(hash) });\n    return Object.freeze({ ...create(defHash), create });\n}\n//# sourceMappingURL=_shortw_utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha256';\nimport { randomBytes } from '@noble/hashes/utils';\nimport { Field, mod, pow2 } from './abstract/modular.js';\nimport { mapToCurveSimpleSWU } from './abstract/weierstrass.js';\nimport { bytesToNumberBE, concatBytes, ensureBytes, numberToBytesBE } from './abstract/utils.js';\nimport * as htf from './abstract/hash-to-curve.js';\nimport { createCurve } from './_shortw_utils.js';\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a, b) => (a + b / _2n) / b;\n/**\n * √n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y) {\n    const P = secp256k1P;\n    // prettier-ignore\n    const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n    // prettier-ignore\n    const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n    const b2 = (y * y * y) % P; // x^3, 11\n    const b3 = (b2 * b2 * y) % P; // x^7\n    const b6 = (pow2(b3, _3n, P) * b3) % P;\n    const b9 = (pow2(b6, _3n, P) * b3) % P;\n    const b11 = (pow2(b9, _2n, P) * b2) % P;\n    const b22 = (pow2(b11, _11n, P) * b11) % P;\n    const b44 = (pow2(b22, _22n, P) * b22) % P;\n    const b88 = (pow2(b44, _44n, P) * b44) % P;\n    const b176 = (pow2(b88, _88n, P) * b88) % P;\n    const b220 = (pow2(b176, _44n, P) * b44) % P;\n    const b223 = (pow2(b220, _3n, P) * b3) % P;\n    const t1 = (pow2(b223, _23n, P) * b22) % P;\n    const t2 = (pow2(t1, _6n, P) * b2) % P;\n    const root = pow2(t2, _2n, P);\n    if (!Fp.eql(Fp.sqr(root), y))\n        throw new Error('Cannot find square root');\n    return root;\n}\nconst Fp = Field(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\nexport const secp256k1 = createCurve({\n    a: BigInt(0),\n    b: BigInt(7),\n    Fp,\n    n: secp256k1N,\n    // Base point (x, y) aka generator point\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1),\n    lowS: true,\n    /**\n     * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n     * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n     * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n     * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n     */\n    endo: {\n        beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n        splitScalar: (k) => {\n            const n = secp256k1N;\n            const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n            const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n            const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n            const b2 = a1;\n            const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n            const c1 = divNearest(b2 * k, n);\n            const c2 = divNearest(-b1 * k, n);\n            let k1 = mod(k - c1 * a1 - c2 * a2, n);\n            let k2 = mod(-c1 * b1 - c2 * b2, n);\n            const k1neg = k1 > POW_2_128;\n            const k2neg = k2 > POW_2_128;\n            if (k1neg)\n                k1 = n - k1;\n            if (k2neg)\n                k2 = n - k2;\n            if (k1 > POW_2_128 || k2 > POW_2_128) {\n                throw new Error('splitScalar: Endomorphism failed, k=' + k);\n            }\n            return { k1neg, k1, k2neg, k2 };\n        },\n    },\n}, sha256);\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\nconst fe = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1P;\nconst ge = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1N;\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES = {};\nfunction taggedHash(tag, ...messages) {\n    let tagP = TAGGED_HASH_PREFIXES[tag];\n    if (tagP === undefined) {\n        const tagH = sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n        tagP = concatBytes(tagH, tagH);\n        TAGGED_HASH_PREFIXES[tag] = tagP;\n    }\n    return sha256(concatBytes(tagP, ...messages));\n}\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n) => numberToBytesBE(n, 32);\nconst modP = (x) => mod(x, secp256k1P);\nconst modN = (x) => mod(x, secp256k1N);\nconst Point = secp256k1.ProjectivePoint;\nconst GmulAdd = (Q, a, b) => Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv) {\n    let d_ = secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n    let p = Point.fromPrivateKey(d_); // P = d'⋅G; 0 < d' < n check is done inside\n    const scalar = p.hasEvenY() ? d_ : modN(-d_);\n    return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x) {\n    if (!fe(x))\n        throw new Error('bad x: need 0 < x < p'); // Fail if x ≥ p.\n    const xx = modP(x * x);\n    const c = modP(xx * x + BigInt(7)); // Let c = x³ + 7 mod p.\n    let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n    if (y % _2n !== _0n)\n        y = modP(-y); // Return the unique point P such that x(P) = x and\n    const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n    p.assertValidity();\n    return p;\n}\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args) {\n    return modN(bytesToNumberBE(taggedHash('BIP0340/challenge', ...args)));\n}\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey) {\n    return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'≥n. Ret bytes(d'⋅G)\n}\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message, privateKey, auxRand = randomBytes(32)) {\n    const m = ensureBytes('message', message);\n    const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n    const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n    const t = numTo32b(d ^ bytesToNumberBE(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n    const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n    const k_ = modN(bytesToNumberBE(rand)); // Let k' = int(rand) mod n\n    if (k_ === _0n)\n        throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n    const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'⋅G.\n    const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n    const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n    sig.set(rx, 0);\n    sig.set(numTo32b(modN(k + e * d)), 32);\n    // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n    if (!schnorrVerify(sig, m, px))\n        throw new Error('sign: Invalid signature produced');\n    return sig;\n}\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature, message, publicKey) {\n    const sig = ensureBytes('signature', signature, 64);\n    const m = ensureBytes('message', message);\n    const pub = ensureBytes('publicKey', publicKey, 32);\n    try {\n        const P = lift_x(bytesToNumberBE(pub)); // P = lift_x(int(pk)); fail if that fails\n        const r = bytesToNumberBE(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r ≥ p.\n        if (!fe(r))\n            return false;\n        const s = bytesToNumberBE(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s ≥ n.\n        if (!ge(s))\n            return false;\n        const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n        const R = GmulAdd(P, s, modN(-e)); // R = s⋅G - e⋅P\n        if (!R || !R.hasEvenY() || R.toAffine().x !== r)\n            return false; // -eP == (n-e)P\n        return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R) ≠ r.\n    }\n    catch (error) {\n        return false;\n    }\n}\nexport const schnorr = {\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    utils: {\n        randomPrivateKey: secp256k1.utils.randomPrivateKey,\n        lift_x,\n        pointToBytes,\n        numberToBytesBE,\n        bytesToNumberBE,\n        taggedHash,\n        mod,\n    },\n};\nconst isoMap = htf.isogenyMap(Fp, [\n    // xNum\n    [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n    ],\n    // xDen\n    [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n    // yNum\n    [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n    ],\n    // yDen\n    [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n].map((i) => i.map((j) => BigInt(j))));\nconst mapSWU = mapToCurveSimpleSWU(Fp, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fp.create(BigInt('-11')),\n});\nexport const { hashToCurve, encodeToCurve } = htf.createHasher(secp256k1.ProjectivePoint, (scalars) => {\n    const { x, y } = mapSWU(Fp.create(scalars[0]));\n    return isoMap(x, y);\n}, {\n    DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n    encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha256,\n});\n//# sourceMappingURL=secp256k1.js.map","import { mod } from './modular.js';\nimport { bytesToNumberBE, concatBytes, utf8ToBytes, validateObject } from './utils.js';\nfunction validateDST(dst) {\n    if (dst instanceof Uint8Array)\n        return dst;\n    if (typeof dst === 'string')\n        return utf8ToBytes(dst);\n    throw new Error('DST must be Uint8Array or string');\n}\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = bytesToNumberBE;\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value, length) {\n    if (value < 0 || value >= 1 << (8 * length)) {\n        throw new Error(`bad I2OSP call: value=${value} length=${length}`);\n    }\n    const res = Array.from({ length }).fill(0);\n    for (let i = length - 1; i >= 0; i--) {\n        res[i] = value & 0xff;\n        value >>>= 8;\n    }\n    return new Uint8Array(res);\n}\nfunction strxor(a, b) {\n    const arr = new Uint8Array(a.length);\n    for (let i = 0; i < a.length; i++) {\n        arr[i] = a[i] ^ b[i];\n    }\n    return arr;\n}\nfunction isBytes(item) {\n    if (!(item instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n}\nfunction isNum(item) {\n    if (!Number.isSafeInteger(item))\n        throw new Error('number expected');\n}\n// Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits\n// https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-11#section-5.4.1\nexport function expand_message_xmd(msg, DST, lenInBytes, H) {\n    isBytes(msg);\n    isBytes(DST);\n    isNum(lenInBytes);\n    // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-5.3.3\n    if (DST.length > 255)\n        DST = H(concatBytes(utf8ToBytes('H2C-OVERSIZE-DST-'), DST));\n    const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n    const ell = Math.ceil(lenInBytes / b_in_bytes);\n    if (ell > 255)\n        throw new Error('Invalid xmd length');\n    const DST_prime = concatBytes(DST, i2osp(DST.length, 1));\n    const Z_pad = i2osp(0, r_in_bytes);\n    const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n    const b = new Array(ell);\n    const b_0 = H(concatBytes(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n    b[0] = H(concatBytes(b_0, i2osp(1, 1), DST_prime));\n    for (let i = 1; i <= ell; i++) {\n        const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n        b[i] = H(concatBytes(...args));\n    }\n    const pseudo_random_bytes = concatBytes(...b);\n    return pseudo_random_bytes.slice(0, lenInBytes);\n}\nexport function expand_message_xof(msg, DST, lenInBytes, k, H) {\n    isBytes(msg);\n    isBytes(DST);\n    isNum(lenInBytes);\n    // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-5.3.3\n    // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n    if (DST.length > 255) {\n        const dkLen = Math.ceil((2 * k) / 8);\n        DST = H.create({ dkLen }).update(utf8ToBytes('H2C-OVERSIZE-DST-')).update(DST).digest();\n    }\n    if (lenInBytes > 65535 || DST.length > 255)\n        throw new Error('expand_message_xof: invalid lenInBytes');\n    return (H.create({ dkLen: lenInBytes })\n        .update(msg)\n        .update(i2osp(lenInBytes, 2))\n        // 2. DST_prime = DST || I2OSP(len(DST), 1)\n        .update(DST)\n        .update(i2osp(DST.length, 1))\n        .digest());\n}\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F\n * https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-11#section-5.3\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nexport function hash_to_field(msg, count, options) {\n    validateObject(options, {\n        DST: 'string',\n        p: 'bigint',\n        m: 'isSafeInteger',\n        k: 'isSafeInteger',\n        hash: 'hash',\n    });\n    const { p, k, m, hash, expand, DST: _DST } = options;\n    isBytes(msg);\n    isNum(count);\n    const DST = validateDST(_DST);\n    const log2p = p.toString(2).length;\n    const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n    const len_in_bytes = count * m * L;\n    let prb; // pseudo_random_bytes\n    if (expand === 'xmd') {\n        prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n    }\n    else if (expand === 'xof') {\n        prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n    }\n    else if (expand === '_internal_pass') {\n        // for internal tests only\n        prb = msg;\n    }\n    else {\n        throw new Error('expand must be \"xmd\" or \"xof\"');\n    }\n    const u = new Array(count);\n    for (let i = 0; i < count; i++) {\n        const e = new Array(m);\n        for (let j = 0; j < m; j++) {\n            const elm_offset = L * (j + i * m);\n            const tv = prb.subarray(elm_offset, elm_offset + L);\n            e[j] = mod(os2ip(tv), p);\n        }\n        u[i] = e;\n    }\n    return u;\n}\nexport function isogenyMap(field, map) {\n    // Make same order as in spec\n    const COEFF = map.map((i) => Array.from(i).reverse());\n    return (x, y) => {\n        const [xNum, xDen, yNum, yDen] = COEFF.map((val) => val.reduce((acc, i) => field.add(field.mul(acc, x), i)));\n        x = field.div(xNum, xDen); // xNum / xDen\n        y = field.mul(y, field.div(yNum, yDen)); // y * (yNum / yDev)\n        return { x, y };\n    };\n}\nexport function createHasher(Point, mapToCurve, def) {\n    if (typeof mapToCurve !== 'function')\n        throw new Error('mapToCurve() must be defined');\n    return {\n        // Encodes byte string to elliptic curve\n        // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-3\n        hashToCurve(msg, options) {\n            const u = hash_to_field(msg, 2, { ...def, DST: def.DST, ...options });\n            const u0 = Point.fromAffine(mapToCurve(u[0]));\n            const u1 = Point.fromAffine(mapToCurve(u[1]));\n            const P = u0.add(u1).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n        // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-3\n        encodeToCurve(msg, options) {\n            const u = hash_to_field(msg, 1, { ...def, DST: def.encodeDST, ...options });\n            const P = Point.fromAffine(mapToCurve(u[0])).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n    };\n}\n//# sourceMappingURL=hash-to-curve.js.map","export const crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use `globalThis.crypto`, but node.js versions earlier than v19 don't\n// declare it in global scope. For node.js, package.json#exports field mapping\n// rewrites import from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n */\nexport function bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('deadbeef') // Uint8Array.from([0xde, 0xad, 0xbe, 0xef])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `globalThis.crypto` or node.js crypto module.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","export function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexport function bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexport function hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexport function exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexport function output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexport default assert;\n//# sourceMappingURL=_assert.js.map","import assert from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        assert.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_sha2.js.map","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nexport function assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexport const utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexport const base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexport const base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexport const base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexport const base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexport const base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexport const base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexport const base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexport const base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexport const base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexport const base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nexport const base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), base58);\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexport const bech32 = genBech32('bech32');\nexport const bech32m = genBech32('bech32m');\nexport const utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexport const hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nexport const bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexport const str = bytesToString;\nexport const stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexport const bytes = stringToBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wordlist = void 0;\nexports.wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexports.bool = bool;\nfunction bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.isLE = exports.rotr = exports.createView = exports.u32 = exports.u8 = void 0;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\nconst u8a = (a) => a instanceof Uint8Array;\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!exports.isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const len = hex.length;\n    if (len % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + len);\n    const array = new Uint8Array(len / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\nexports.utf8ToBytes = utf8ToBytes;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!u8a(data))\n        throw new Error(`expected Uint8Array, got ${typeof data}`);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Copies several Uint8Arrays into one.\n */\nfunction concatBytes(...arrays) {\n    const r = new Uint8Array(arrays.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrays.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\nfunction wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapXOFConstructorWithOpts = wrapXOFConstructorWithOpts;\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hmac = exports.HMAC = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// HMAC (RFC 2104)\nclass HMAC extends utils_js_1.Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        _assert_js_1.default.hash(hash);\n        const key = (0, utils_js_1.toBytes)(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        _assert_js_1.default.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\nexports.HMAC = HMAC;\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nconst hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nexports.hmac = hmac;\nexports.hmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pbkdf2Async = exports.pbkdf2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst hmac_js_1 = require(\"./hmac.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash, _password, _salt, _opts) {\n    _assert_js_1.default.hash(hash);\n    const opts = (0, utils_js_1.checkOpts)({ dkLen: 32, asyncTick: 10 }, _opts);\n    const { c, dkLen, asyncTick } = opts;\n    _assert_js_1.default.number(c);\n    _assert_js_1.default.number(dkLen);\n    _assert_js_1.default.number(asyncTick);\n    if (c < 1)\n        throw new Error('PBKDF2: iterations (c) should be >= 1');\n    const password = (0, utils_js_1.toBytes)(_password);\n    const salt = (0, utils_js_1.toBytes)(_salt);\n    // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n    const DK = new Uint8Array(dkLen);\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    const PRF = hmac_js_1.hmac.create(hash, password);\n    const PRFSalt = PRF._cloneInto().update(salt);\n    return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\nfunction pbkdf2Output(PRF, PRFSalt, DK, prfW, u) {\n    PRF.destroy();\n    PRFSalt.destroy();\n    if (prfW)\n        prfW.destroy();\n    u.fill(0);\n    return DK;\n}\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n */\nfunction pbkdf2(hash, password, salt, opts) {\n    const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 + ⋯ + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^ ⋯ ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        for (let ui = 1; ui < c; ui++) {\n            // Uc = PRF(Password, Uc−1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        }\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2 = pbkdf2;\nasync function pbkdf2Async(hash, password, salt, opts) {\n    const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 + ⋯ + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^ ⋯ ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        await (0, utils_js_1.asyncLoop)(c - 1, asyncTick, (i) => {\n            // Uc = PRF(Password, Uc−1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        });\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2Async = pbkdf2Async;\n//# sourceMappingURL=pbkdf2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SHA2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nclass SHA2 extends utils_js_1.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0, utils_js_1.createView)(this.buffer);\n    }\n    update(data) {\n        _assert_js_1.default.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0, utils_js_1.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0, utils_js_1.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\nexports.SHA2 = SHA2;\n//# sourceMappingURL=_sha2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha224 = exports.sha256 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0, utils_js_1.rotr)(W15, 7) ^ (0, utils_js_1.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0, utils_js_1.rotr)(W2, 17) ^ (0, utils_js_1.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0, utils_js_1.rotr)(E, 6) ^ (0, utils_js_1.rotr)(E, 11) ^ (0, utils_js_1.rotr)(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0, utils_js_1.rotr)(A, 2) ^ (0, utils_js_1.rotr)(A, 13) ^ (0, utils_js_1.rotr)(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexports.sha256 = (0, utils_js_1.wrapConstructor)(() => new SHA256());\nexports.sha224 = (0, utils_js_1.wrapConstructor)(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.add = exports.toBig = exports.split = exports.fromBig = void 0;\nconst U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexports.fromBig = fromBig;\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexports.split = split;\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\nexports.add = add;\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig: exports.toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha384 = exports.sha512_256 = exports.sha512_224 = exports.sha512 = exports.SHA512 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst _u64_js_1 = require(\"./_u64.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = _u64_js_1.default.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nclass SHA512 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = _u64_js_1.default.rotrSH(W15h, W15l, 1) ^ _u64_js_1.default.rotrSH(W15h, W15l, 8) ^ _u64_js_1.default.shrSH(W15h, W15l, 7);\n            const s0l = _u64_js_1.default.rotrSL(W15h, W15l, 1) ^ _u64_js_1.default.rotrSL(W15h, W15l, 8) ^ _u64_js_1.default.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = _u64_js_1.default.rotrSH(W2h, W2l, 19) ^ _u64_js_1.default.rotrBH(W2h, W2l, 61) ^ _u64_js_1.default.shrSH(W2h, W2l, 6);\n            const s1l = _u64_js_1.default.rotrSL(W2h, W2l, 19) ^ _u64_js_1.default.rotrBL(W2h, W2l, 61) ^ _u64_js_1.default.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = _u64_js_1.default.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = _u64_js_1.default.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = _u64_js_1.default.rotrSH(Eh, El, 14) ^ _u64_js_1.default.rotrSH(Eh, El, 18) ^ _u64_js_1.default.rotrBH(Eh, El, 41);\n            const sigma1l = _u64_js_1.default.rotrSL(Eh, El, 14) ^ _u64_js_1.default.rotrSL(Eh, El, 18) ^ _u64_js_1.default.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = _u64_js_1.default.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = _u64_js_1.default.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = _u64_js_1.default.rotrSH(Ah, Al, 28) ^ _u64_js_1.default.rotrBH(Ah, Al, 34) ^ _u64_js_1.default.rotrBH(Ah, Al, 39);\n            const sigma0l = _u64_js_1.default.rotrSL(Ah, Al, 28) ^ _u64_js_1.default.rotrBL(Ah, Al, 34) ^ _u64_js_1.default.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = _u64_js_1.default.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = _u64_js_1.default.add3L(T1l, sigma0l, MAJl);\n            Ah = _u64_js_1.default.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = _u64_js_1.default.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = _u64_js_1.default.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = _u64_js_1.default.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = _u64_js_1.default.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = _u64_js_1.default.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = _u64_js_1.default.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = _u64_js_1.default.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = _u64_js_1.default.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexports.SHA512 = SHA512;\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexports.sha512 = (0, utils_js_1.wrapConstructor)(() => new SHA512());\nexports.sha512_224 = (0, utils_js_1.wrapConstructor)(() => new SHA512_224());\nexports.sha512_256 = (0, utils_js_1.wrapConstructor)(() => new SHA512_256());\nexports.sha384 = (0, utils_js_1.wrapConstructor)(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","\"use strict\";\n/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bytes = exports.stringToBytes = exports.str = exports.bytesToString = exports.hex = exports.utf8 = exports.bech32m = exports.bech32 = exports.base58check = exports.base58xmr = exports.base58xrp = exports.base58flickr = exports.base58 = exports.base64url = exports.base64 = exports.base32crockford = exports.base32hex = exports.base32 = exports.base16 = exports.utils = exports.assertNumber = void 0;\nfunction assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nexports.assertNumber = assertNumber;\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexports.utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexports.base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexports.base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexports.base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexports.base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexports.base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexports.base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexports.base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexports.base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexports.base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexports.base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = exports.base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nconst base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), exports.base58);\nexports.base58check = base58check;\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexports.bech32 = genBech32('bech32');\nexports.bech32m = genBech32('bech32m');\nexports.utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexports.hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8: exports.utf8, hex: exports.hex, base16: exports.base16, base32: exports.base32, base64: exports.base64, base64url: exports.base64url, base58: exports.base58, base58xmr: exports.base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nconst bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexports.bytesToString = bytesToString;\nexports.str = exports.bytesToString;\nconst stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexports.stringToBytes = stringToBytes;\nexports.bytes = exports.stringToBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mnemonicToSeedSync = exports.mnemonicToSeed = exports.validateMnemonic = exports.entropyToMnemonic = exports.mnemonicToEntropy = exports.generateMnemonic = void 0;\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nconst _assert_1 = require(\"@noble/hashes/_assert\");\nconst pbkdf2_1 = require(\"@noble/hashes/pbkdf2\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst sha512_1 = require(\"@noble/hashes/sha512\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst base_1 = require(\"@scure/base\");\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError(`Invalid mnemonic type: ${typeof str}`);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction assertEntropy(entropy) {\n    _assert_1.default.bytes(entropy, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction generateMnemonic(wordlist, strength = 128) {\n    _assert_1.default.number(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic((0, utils_1.randomBytes)(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([((0, sha256_1.sha256)(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\n        throw new Error('Worlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error(`Wordlist: non-string element: ${i}`);\n    });\n    return base_1.utils.chain(base_1.utils.checksum(1, calcChecksum), base_1.utils.radix2(11, true), base_1.utils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    assertEntropy(entropy);\n    return entropy;\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction entropyToMnemonic(entropy, wordlist) {\n    assertEntropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nconst salt = (passphrase) => nfkd(`mnemonic${passphrase}`);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeed(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2Async)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\n","export function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexport function bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexport function hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexport function exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexport function output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexport default assert;\n//# sourceMappingURL=_assert.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\nconst u8a = (a) => a instanceof Uint8Array;\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const len = hex.length;\n    if (len % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + len);\n    const array = new Uint8Array(len / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!u8a(data))\n        throw new Error(`expected Uint8Array, got ${typeof data}`);\n    return data;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays) {\n    const r = new Uint8Array(arrays.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrays.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport function wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","import assert from './_assert.js';\nimport { Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nexport class HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assert.hash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        assert.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","import assert from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        assert.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_sha2.js.map","import { SHA2 } from './_sha2.js';\nimport { wrapConstructor } from './utils.js';\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = Uint8Array.from({ length: 16 }, (_, i) => i);\nconst Pi = Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++)\n    for (let j of [idxL, idxR])\n        j.push(j[i].map((k) => Rho[k]));\nconst shifts = [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\nconst shiftsL = idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst Kl = new Uint32Array([0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]);\nconst Kr = new Uint32Array([0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]);\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | (word >>> (32 - shift));\n// It's called f() in spec.\nfunction f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    else if (group === 1)\n        return (x & y) | (~x & z);\n    else if (group === 2)\n        return (x | ~y) ^ z;\n    else if (group === 3)\n        return (x & z) | (y & ~z);\n    else\n        return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst BUF = new Uint32Array(16);\nexport class RIPEMD160 extends SHA2 {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = (rotl(al + f(group, bl, cl, dl) + BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = (rotl(ar + f(rGroup, br, cr, dr) + BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        BUF.fill(0);\n    }\n    destroy() {\n        this.destroyed = true;\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexport const ripemd160 = wrapConstructor(() => new RIPEMD160());\n//# sourceMappingURL=ripemd160.js.map","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","const U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nexport function fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexport function split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexport const toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nexport function add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nexport class SHA512 extends SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexport const sha512 = wrapConstructor(() => new SHA512());\nexport const sha512_224 = wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = wrapConstructor(() => new SHA512_256());\nexport const sha384 = wrapConstructor(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512 } from '@noble/hashes/sha512';\nimport { bytes as assertBytes } from '@noble/hashes/_assert';\nimport { bytesToHex, concatBytes, createView, hexToBytes, utf8ToBytes } from '@noble/hashes/utils';\nimport { secp256k1 as secp } from '@noble/curves/secp256k1';\nimport { mod } from '@noble/curves/abstract/modular';\nimport { base58check as base58checker } from '@scure/base';\nconst Point = secp.ProjectivePoint;\nconst base58check = base58checker(sha256);\nfunction bytesToNumber(bytes) {\n    return BigInt(`0x${bytesToHex(bytes)}`);\n}\nfunction numberToBytes(num) {\n    return hexToBytes(num.toString(16).padStart(64, '0'));\n}\nconst MASTER_SECRET = utf8ToBytes('Bitcoin seed');\nconst BITCOIN_VERSIONS = { private: 0x0488ade4, public: 0x0488b21e };\nexport const HARDENED_OFFSET = 0x80000000;\nconst hash160 = (data) => ripemd160(sha256(data));\nconst fromU32 = (data) => createView(data).getUint32(0, false);\nconst toU32 = (n) => {\n    if (!Number.isSafeInteger(n) || n < 0 || n > 2 ** 32 - 1) {\n        throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);\n    }\n    const buf = new Uint8Array(4);\n    createView(buf).setUint32(0, n, false);\n    return buf;\n};\nexport class HDKey {\n    get fingerprint() {\n        if (!this.pubHash) {\n            throw new Error('No publicKey set!');\n        }\n        return fromU32(this.pubHash);\n    }\n    get identifier() {\n        return this.pubHash;\n    }\n    get pubKeyHash() {\n        return this.pubHash;\n    }\n    get privateKey() {\n        return this.privKeyBytes || null;\n    }\n    get publicKey() {\n        return this.pubKey || null;\n    }\n    get privateExtendedKey() {\n        const priv = this.privateKey;\n        if (!priv) {\n            throw new Error('No private key');\n        }\n        return base58check.encode(this.serialize(this.versions.private, concatBytes(new Uint8Array([0]), priv)));\n    }\n    get publicExtendedKey() {\n        if (!this.pubKey) {\n            throw new Error('No public key');\n        }\n        return base58check.encode(this.serialize(this.versions.public, this.pubKey));\n    }\n    static fromMasterSeed(seed, versions = BITCOIN_VERSIONS) {\n        assertBytes(seed);\n        if (8 * seed.length < 128 || 8 * seed.length > 512) {\n            throw new Error(`HDKey: wrong seed length=${seed.length}. Should be between 128 and 512 bits; 256 bits is advised)`);\n        }\n        const I = hmac(sha512, MASTER_SECRET, seed);\n        return new HDKey({\n            versions,\n            chainCode: I.slice(32),\n            privateKey: I.slice(0, 32),\n        });\n    }\n    static fromExtendedKey(base58key, versions = BITCOIN_VERSIONS) {\n        const keyBuffer = base58check.decode(base58key);\n        const keyView = createView(keyBuffer);\n        const version = keyView.getUint32(0, false);\n        const opt = {\n            versions,\n            depth: keyBuffer[4],\n            parentFingerprint: keyView.getUint32(5, false),\n            index: keyView.getUint32(9, false),\n            chainCode: keyBuffer.slice(13, 45),\n        };\n        const key = keyBuffer.slice(45);\n        const isPriv = key[0] === 0;\n        if (version !== versions[isPriv ? 'private' : 'public']) {\n            throw new Error('Version mismatch');\n        }\n        if (isPriv) {\n            return new HDKey({ ...opt, privateKey: key.slice(1) });\n        }\n        else {\n            return new HDKey({ ...opt, publicKey: key });\n        }\n    }\n    static fromJSON(json) {\n        return HDKey.fromExtendedKey(json.xpriv);\n    }\n    constructor(opt) {\n        this.depth = 0;\n        this.index = 0;\n        this.chainCode = null;\n        this.parentFingerprint = 0;\n        if (!opt || typeof opt !== 'object') {\n            throw new Error('HDKey.constructor must not be called directly');\n        }\n        this.versions = opt.versions || BITCOIN_VERSIONS;\n        this.depth = opt.depth || 0;\n        this.chainCode = opt.chainCode;\n        this.index = opt.index || 0;\n        this.parentFingerprint = opt.parentFingerprint || 0;\n        if (!this.depth) {\n            if (this.parentFingerprint || this.index) {\n                throw new Error('HDKey: zero depth with non-zero index/parent fingerprint');\n            }\n        }\n        if (opt.publicKey && opt.privateKey) {\n            throw new Error('HDKey: publicKey and privateKey at same time.');\n        }\n        if (opt.privateKey) {\n            if (!secp.utils.isValidPrivateKey(opt.privateKey)) {\n                throw new Error('Invalid private key');\n            }\n            this.privKey =\n                typeof opt.privateKey === 'bigint' ? opt.privateKey : bytesToNumber(opt.privateKey);\n            this.privKeyBytes = numberToBytes(this.privKey);\n            this.pubKey = secp.getPublicKey(opt.privateKey, true);\n        }\n        else if (opt.publicKey) {\n            this.pubKey = Point.fromHex(opt.publicKey).toRawBytes(true);\n        }\n        else {\n            throw new Error('HDKey: no public or private key provided');\n        }\n        this.pubHash = hash160(this.pubKey);\n    }\n    derive(path) {\n        if (!/^[mM]'?/.test(path)) {\n            throw new Error('Path must start with \"m\" or \"M\"');\n        }\n        if (/^[mM]'?$/.test(path)) {\n            return this;\n        }\n        const parts = path.replace(/^[mM]'?\\//, '').split('/');\n        let child = this;\n        for (const c of parts) {\n            const m = /^(\\d+)('?)$/.exec(c);\n            if (!m || m.length !== 3) {\n                throw new Error(`Invalid child index: ${c}`);\n            }\n            let idx = +m[1];\n            if (!Number.isSafeInteger(idx) || idx >= HARDENED_OFFSET) {\n                throw new Error('Invalid index');\n            }\n            if (m[2] === \"'\") {\n                idx += HARDENED_OFFSET;\n            }\n            child = child.deriveChild(idx);\n        }\n        return child;\n    }\n    deriveChild(index) {\n        if (!this.pubKey || !this.chainCode) {\n            throw new Error('No publicKey or chainCode set');\n        }\n        let data = toU32(index);\n        if (index >= HARDENED_OFFSET) {\n            const priv = this.privateKey;\n            if (!priv) {\n                throw new Error('Could not derive hardened child key');\n            }\n            data = concatBytes(new Uint8Array([0]), priv, data);\n        }\n        else {\n            data = concatBytes(this.pubKey, data);\n        }\n        const I = hmac(sha512, this.chainCode, data);\n        const childTweak = bytesToNumber(I.slice(0, 32));\n        const chainCode = I.slice(32);\n        if (!secp.utils.isValidPrivateKey(childTweak)) {\n            throw new Error('Tweak bigger than curve order');\n        }\n        const opt = {\n            versions: this.versions,\n            chainCode,\n            depth: this.depth + 1,\n            parentFingerprint: this.fingerprint,\n            index,\n        };\n        try {\n            if (this.privateKey) {\n                const added = mod(this.privKey + childTweak, secp.CURVE.n);\n                if (!secp.utils.isValidPrivateKey(added)) {\n                    throw new Error('The tweak was out of range or the resulted private key is invalid');\n                }\n                opt.privateKey = added;\n            }\n            else {\n                const added = Point.fromHex(this.pubKey).add(Point.fromPrivateKey(childTweak));\n                if (added.equals(Point.ZERO)) {\n                    throw new Error('The tweak was equal to negative P, which made the result key invalid');\n                }\n                opt.publicKey = added.toRawBytes(true);\n            }\n            return new HDKey(opt);\n        }\n        catch (err) {\n            return this.deriveChild(index + 1);\n        }\n    }\n    sign(hash) {\n        if (!this.privateKey) {\n            throw new Error('No privateKey set!');\n        }\n        assertBytes(hash, 32);\n        return secp.sign(hash, this.privKey).toCompactRawBytes();\n    }\n    verify(hash, signature) {\n        assertBytes(hash, 32);\n        assertBytes(signature, 64);\n        if (!this.publicKey) {\n            throw new Error('No publicKey set!');\n        }\n        let sig;\n        try {\n            sig = secp.Signature.fromCompact(signature);\n        }\n        catch (error) {\n            return false;\n        }\n        return secp.verify(sig, hash, this.publicKey);\n    }\n    wipePrivateData() {\n        this.privKey = undefined;\n        if (this.privKeyBytes) {\n            this.privKeyBytes.fill(0);\n            this.privKeyBytes = undefined;\n        }\n        return this;\n    }\n    toJSON() {\n        return {\n            xpriv: this.privateExtendedKey,\n            xpub: this.publicExtendedKey,\n        };\n    }\n    serialize(version, key) {\n        if (!this.chainCode) {\n            throw new Error('No chainCode set');\n        }\n        assertBytes(key, 33);\n        return concatBytes(toU32(version), new Uint8Array([this.depth]), toU32(this.parentFingerprint), toU32(this.index), this.chainCode, key);\n    }\n}\n//# sourceMappingURL=index.js.map","var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// keys.ts\nimport { schnorr } from \"@noble/curves/secp256k1\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\nfunction generatePrivateKey() {\n  return bytesToHex(schnorr.utils.randomPrivateKey());\n}\nfunction getPublicKey(privateKey) {\n  return bytesToHex(schnorr.getPublicKey(privateKey));\n}\n\n// event.ts\nimport { schnorr as schnorr2 } from \"@noble/curves/secp256k1\";\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { bytesToHex as bytesToHex2 } from \"@noble/hashes/utils\";\n\n// utils.ts\nvar utils_exports = {};\n__export(utils_exports, {\n  MessageNode: () => MessageNode,\n  MessageQueue: () => MessageQueue,\n  insertEventIntoAscendingList: () => insertEventIntoAscendingList,\n  insertEventIntoDescendingList: () => insertEventIntoDescendingList,\n  normalizeURL: () => normalizeURL,\n  utf8Decoder: () => utf8Decoder,\n  utf8Encoder: () => utf8Encoder\n});\nvar utf8Decoder = new TextDecoder(\"utf-8\");\nvar utf8Encoder = new TextEncoder();\nfunction normalizeURL(url) {\n  let p = new URL(url);\n  p.pathname = p.pathname.replace(/\\/+/g, \"/\");\n  if (p.pathname.endsWith(\"/\"))\n    p.pathname = p.pathname.slice(0, -1);\n  if (p.port === \"80\" && p.protocol === \"ws:\" || p.port === \"443\" && p.protocol === \"wss:\")\n    p.port = \"\";\n  p.searchParams.sort();\n  p.hash = \"\";\n  return p.toString();\n}\nfunction insertEventIntoDescendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at < sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at >= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at > event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at < event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\nfunction insertEventIntoAscendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at > sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at <= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at < event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at > event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\nvar MessageNode = class {\n  _value;\n  _next;\n  get value() {\n    return this._value;\n  }\n  set value(message) {\n    this._value = message;\n  }\n  get next() {\n    return this._next;\n  }\n  set next(node) {\n    this._next = node;\n  }\n  constructor(message) {\n    this._value = message;\n    this._next = null;\n  }\n};\nvar MessageQueue = class {\n  _first;\n  _last;\n  get first() {\n    return this._first;\n  }\n  set first(messageNode) {\n    this._first = messageNode;\n  }\n  get last() {\n    return this._last;\n  }\n  set last(messageNode) {\n    this._last = messageNode;\n  }\n  _size;\n  get size() {\n    return this._size;\n  }\n  set size(v) {\n    this._size = v;\n  }\n  constructor() {\n    this._first = null;\n    this._last = null;\n    this._size = 0;\n  }\n  enqueue(message) {\n    const newNode = new MessageNode(message);\n    if (this._size === 0 || !this._last) {\n      this._first = newNode;\n      this._last = newNode;\n    } else {\n      this._last.next = newNode;\n      this._last = newNode;\n    }\n    this._size++;\n    return true;\n  }\n  dequeue() {\n    if (this._size === 0 || !this._first)\n      return null;\n    let prev = this._first;\n    this._first = prev.next;\n    prev.next = null;\n    this._size--;\n    return prev.value;\n  }\n};\n\n// event.ts\nvar Kind = /* @__PURE__ */ ((Kind3) => {\n  Kind3[Kind3[\"Metadata\"] = 0] = \"Metadata\";\n  Kind3[Kind3[\"Text\"] = 1] = \"Text\";\n  Kind3[Kind3[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  Kind3[Kind3[\"Contacts\"] = 3] = \"Contacts\";\n  Kind3[Kind3[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  Kind3[Kind3[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  Kind3[Kind3[\"Repost\"] = 6] = \"Repost\";\n  Kind3[Kind3[\"Reaction\"] = 7] = \"Reaction\";\n  Kind3[Kind3[\"BadgeAward\"] = 8] = \"BadgeAward\";\n  Kind3[Kind3[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  Kind3[Kind3[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  Kind3[Kind3[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  Kind3[Kind3[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  Kind3[Kind3[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  Kind3[Kind3[\"Blank\"] = 255] = \"Blank\";\n  Kind3[Kind3[\"Report\"] = 1984] = \"Report\";\n  Kind3[Kind3[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  Kind3[Kind3[\"Zap\"] = 9735] = \"Zap\";\n  Kind3[Kind3[\"RelayList\"] = 10002] = \"RelayList\";\n  Kind3[Kind3[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  Kind3[Kind3[\"ProfileBadge\"] = 30008] = \"ProfileBadge\";\n  Kind3[Kind3[\"BadgeDefinition\"] = 30009] = \"BadgeDefinition\";\n  Kind3[Kind3[\"Article\"] = 30023] = \"Article\";\n  return Kind3;\n})(Kind || {});\nfunction getBlankEvent(kind = 255 /* Blank */) {\n  return {\n    kind,\n    content: \"\",\n    tags: [],\n    created_at: 0\n  };\n}\nfunction finishEvent(t, privateKey) {\n  let event = t;\n  event.pubkey = getPublicKey(privateKey);\n  event.id = getEventHash(event);\n  event.sig = getSignature(event, privateKey);\n  return event;\n}\nfunction serializeEvent(evt) {\n  if (!validateEvent(evt))\n    throw new Error(\"can't serialize event with wrong or missing properties\");\n  return JSON.stringify([\n    0,\n    evt.pubkey,\n    evt.created_at,\n    evt.kind,\n    evt.tags,\n    evt.content\n  ]);\n}\nfunction getEventHash(event) {\n  let eventHash = sha256(utf8Encoder.encode(serializeEvent(event)));\n  return bytesToHex2(eventHash);\n}\nvar isRecord = (obj) => obj instanceof Object;\nfunction validateEvent(event) {\n  if (!isRecord(event))\n    return false;\n  if (typeof event.kind !== \"number\")\n    return false;\n  if (typeof event.content !== \"string\")\n    return false;\n  if (typeof event.created_at !== \"number\")\n    return false;\n  if (typeof event.pubkey !== \"string\")\n    return false;\n  if (!event.pubkey.match(/^[a-f0-9]{64}$/))\n    return false;\n  if (!Array.isArray(event.tags))\n    return false;\n  for (let i = 0; i < event.tags.length; i++) {\n    let tag = event.tags[i];\n    if (!Array.isArray(tag))\n      return false;\n    for (let j = 0; j < tag.length; j++) {\n      if (typeof tag[j] === \"object\")\n        return false;\n    }\n  }\n  return true;\n}\nfunction verifySignature(event) {\n  try {\n    return schnorr2.verify(event.sig, getEventHash(event), event.pubkey);\n  } catch (err) {\n    return false;\n  }\n}\nfunction signEvent(event, key) {\n  console.warn(\n    \"nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead.\"\n  );\n  return getSignature(event, key);\n}\nfunction getSignature(event, key) {\n  return bytesToHex2(schnorr2.sign(getEventHash(event), key));\n}\n\n// filter.ts\nfunction matchFilter(filter, event) {\n  if (filter.ids && filter.ids.indexOf(event.id) === -1) {\n    if (!filter.ids.some((prefix) => event.id.startsWith(prefix))) {\n      return false;\n    }\n  }\n  if (filter.kinds && filter.kinds.indexOf(event.kind) === -1)\n    return false;\n  if (filter.authors && filter.authors.indexOf(event.pubkey) === -1) {\n    if (!filter.authors.some((prefix) => event.pubkey.startsWith(prefix))) {\n      return false;\n    }\n  }\n  for (let f in filter) {\n    if (f[0] === \"#\") {\n      let tagName = f.slice(1);\n      let values = filter[`#${tagName}`];\n      if (values && !event.tags.find(\n        ([t, v]) => t === f.slice(1) && values.indexOf(v) !== -1\n      ))\n        return false;\n    }\n  }\n  if (filter.since && event.created_at < filter.since)\n    return false;\n  if (filter.until && event.created_at >= filter.until)\n    return false;\n  return true;\n}\nfunction matchFilters(filters, event) {\n  for (let i = 0; i < filters.length; i++) {\n    if (matchFilter(filters[i], event))\n      return true;\n  }\n  return false;\n}\nfunction mergeFilters(...filters) {\n  let result = {};\n  for (let i = 0; i < filters.length; i++) {\n    let filter = filters[i];\n    Object.entries(filter).forEach(([property, values]) => {\n      if (property === \"kinds\" || property === \"ids\" || property === \"authors\" || property[0] === \"#\") {\n        result[property] = result[property] || [];\n        for (let v = 0; v < values.length; v++) {\n          let value = values[v];\n          if (!result[property].includes(value))\n            result[property].push(value);\n        }\n      }\n    });\n    if (filter.limit && (!result.limit || filter.limit > result.limit))\n      result.limit = filter.limit;\n    if (filter.until && (!result.until || filter.until > result.until))\n      result.until = filter.until;\n    if (filter.since && (!result.since || filter.since < result.since))\n      result.since = filter.since;\n  }\n  return result;\n}\n\n// fakejson.ts\nvar fakejson_exports = {};\n__export(fakejson_exports, {\n  getHex64: () => getHex64,\n  getInt: () => getInt,\n  getSubscriptionId: () => getSubscriptionId,\n  matchEventId: () => matchEventId,\n  matchEventKind: () => matchEventKind,\n  matchEventPubkey: () => matchEventPubkey\n});\nfunction getHex64(json, field) {\n  let len = field.length + 3;\n  let idx = json.indexOf(`\"${field}\":`) + len;\n  let s = json.slice(idx).indexOf(`\"`) + idx + 1;\n  return json.slice(s, s + 64);\n}\nfunction getInt(json, field) {\n  let len = field.length;\n  let idx = json.indexOf(`\"${field}\":`) + len + 3;\n  let sliced = json.slice(idx);\n  let end = Math.min(sliced.indexOf(\",\"), sliced.indexOf(\"}\"));\n  return parseInt(sliced.slice(0, end), 10);\n}\nfunction getSubscriptionId(json) {\n  let idx = json.slice(0, 22).indexOf(`\"EVENT\"`);\n  if (idx === -1)\n    return null;\n  let pstart = json.slice(idx + 7 + 1).indexOf(`\"`);\n  if (pstart === -1)\n    return null;\n  let start = idx + 7 + 1 + pstart;\n  let pend = json.slice(start + 1, 80).indexOf(`\"`);\n  if (pend === -1)\n    return null;\n  let end = start + 1 + pend;\n  return json.slice(start + 1, end);\n}\nfunction matchEventId(json, id) {\n  return id === getHex64(json, \"id\");\n}\nfunction matchEventPubkey(json, pubkey) {\n  return pubkey === getHex64(json, \"pubkey\");\n}\nfunction matchEventKind(json, kind) {\n  return kind === getInt(json, \"kind\");\n}\n\n// relay.ts\nvar newListeners = () => ({\n  connect: [],\n  disconnect: [],\n  error: [],\n  notice: [],\n  auth: []\n});\nfunction relayInit(url, options = {}) {\n  let { listTimeout = 3e3, getTimeout = 3e3, countTimeout = 3e3 } = options;\n  var ws;\n  var openSubs = {};\n  var listeners = newListeners();\n  var subListeners = {};\n  var pubListeners = {};\n  var connectionPromise;\n  async function connectRelay() {\n    if (connectionPromise)\n      return connectionPromise;\n    connectionPromise = new Promise((resolve, reject) => {\n      try {\n        ws = new WebSocket(url);\n      } catch (err) {\n        reject(err);\n      }\n      ws.onopen = () => {\n        listeners.connect.forEach((cb) => cb());\n        resolve();\n      };\n      ws.onerror = () => {\n        connectionPromise = void 0;\n        listeners.error.forEach((cb) => cb());\n        reject();\n      };\n      ws.onclose = async () => {\n        connectionPromise = void 0;\n        listeners.disconnect.forEach((cb) => cb());\n      };\n      let incomingMessageQueue = new MessageQueue();\n      let handleNextInterval;\n      ws.onmessage = (e) => {\n        incomingMessageQueue.enqueue(e.data);\n        if (!handleNextInterval) {\n          handleNextInterval = setInterval(handleNext, 0);\n        }\n      };\n      function handleNext() {\n        if (incomingMessageQueue.size === 0) {\n          clearInterval(handleNextInterval);\n          handleNextInterval = null;\n          return;\n        }\n        var json = incomingMessageQueue.dequeue();\n        if (!json)\n          return;\n        let subid = getSubscriptionId(json);\n        if (subid) {\n          let so = openSubs[subid];\n          if (so && so.alreadyHaveEvent && so.alreadyHaveEvent(getHex64(json, \"id\"), url)) {\n            return;\n          }\n        }\n        try {\n          let data = JSON.parse(json);\n          switch (data[0]) {\n            case \"EVENT\": {\n              let id2 = data[1];\n              let event = data[2];\n              if (validateEvent(event) && openSubs[id2] && (openSubs[id2].skipVerification || verifySignature(event)) && matchFilters(openSubs[id2].filters, event)) {\n                openSubs[id2];\n                (subListeners[id2]?.event || []).forEach((cb) => cb(event));\n              }\n              return;\n            }\n            case \"COUNT\":\n              let id = data[1];\n              let payload = data[2];\n              if (openSubs[id]) {\n                ;\n                (subListeners[id]?.count || []).forEach((cb) => cb(payload));\n              }\n              return;\n            case \"EOSE\": {\n              let id2 = data[1];\n              if (id2 in subListeners) {\n                subListeners[id2].eose.forEach((cb) => cb());\n                subListeners[id2].eose = [];\n              }\n              return;\n            }\n            case \"OK\": {\n              let id2 = data[1];\n              let ok = data[2];\n              let reason = data[3] || \"\";\n              if (id2 in pubListeners) {\n                if (ok)\n                  pubListeners[id2].ok.forEach((cb) => cb());\n                else\n                  pubListeners[id2].failed.forEach((cb) => cb(reason));\n                pubListeners[id2].ok = [];\n                pubListeners[id2].failed = [];\n              }\n              return;\n            }\n            case \"NOTICE\":\n              let notice = data[1];\n              listeners.notice.forEach((cb) => cb(notice));\n              return;\n            case \"AUTH\": {\n              let challenge = data[1];\n              listeners.auth?.forEach((cb) => cb(challenge));\n              return;\n            }\n          }\n        } catch (err) {\n          return;\n        }\n      }\n    });\n    return connectionPromise;\n  }\n  function connected() {\n    return ws?.readyState === 1;\n  }\n  async function connect() {\n    if (connected())\n      return;\n    await connectRelay();\n  }\n  async function trySend(params) {\n    let msg = JSON.stringify(params);\n    if (!connected()) {\n      await new Promise((resolve) => setTimeout(resolve, 1e3));\n      if (!connected()) {\n        return;\n      }\n    }\n    try {\n      ws.send(msg);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  const sub = (filters, {\n    verb = \"REQ\",\n    skipVerification = false,\n    alreadyHaveEvent = null,\n    id = Math.random().toString().slice(2)\n  } = {}) => {\n    let subid = id;\n    openSubs[subid] = {\n      id: subid,\n      filters,\n      skipVerification,\n      alreadyHaveEvent\n    };\n    trySend([verb, subid, ...filters]);\n    return {\n      sub: (newFilters, newOpts = {}) => sub(newFilters || filters, {\n        skipVerification: newOpts.skipVerification || skipVerification,\n        alreadyHaveEvent: newOpts.alreadyHaveEvent || alreadyHaveEvent,\n        id: subid\n      }),\n      unsub: () => {\n        delete openSubs[subid];\n        delete subListeners[subid];\n        trySend([\"CLOSE\", subid]);\n      },\n      on: (type, cb) => {\n        subListeners[subid] = subListeners[subid] || {\n          event: [],\n          count: [],\n          eose: []\n        };\n        subListeners[subid][type].push(cb);\n      },\n      off: (type, cb) => {\n        let listeners2 = subListeners[subid];\n        let idx = listeners2[type].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type].splice(idx, 1);\n      }\n    };\n  };\n  function _publishEvent(event, type) {\n    if (!event.id)\n      throw new Error(`event ${event} has no id`);\n    let id = event.id;\n    trySend([type, event]);\n    return {\n      on: (type2, cb) => {\n        pubListeners[id] = pubListeners[id] || {\n          ok: [],\n          failed: []\n        };\n        pubListeners[id][type2].push(cb);\n      },\n      off: (type2, cb) => {\n        let listeners2 = pubListeners[id];\n        if (!listeners2)\n          return;\n        let idx = listeners2[type2].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type2].splice(idx, 1);\n      }\n    };\n  }\n  return {\n    url,\n    sub,\n    on: (type, cb) => {\n      listeners[type].push(cb);\n      if (type === \"connect\" && ws?.readyState === 1) {\n        ;\n        cb();\n      }\n    },\n    off: (type, cb) => {\n      let index = listeners[type].indexOf(cb);\n      if (index !== -1)\n        listeners[type].splice(index, 1);\n    },\n    list: (filters, opts) => new Promise((resolve) => {\n      let s = sub(filters, opts);\n      let events = [];\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(events);\n      }, listTimeout);\n      s.on(\"eose\", () => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(events);\n      });\n      s.on(\"event\", (event) => {\n        events.push(event);\n      });\n    }),\n    get: (filter, opts) => new Promise((resolve) => {\n      let s = sub([filter], opts);\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, getTimeout);\n      s.on(\"event\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    count: (filters) => new Promise((resolve) => {\n      let s = sub(filters, { ...sub, verb: \"COUNT\" });\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, countTimeout);\n      s.on(\"count\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    publish(event) {\n      return _publishEvent(event, \"EVENT\");\n    },\n    auth(event) {\n      return _publishEvent(event, \"AUTH\");\n    },\n    connect,\n    close() {\n      listeners = newListeners();\n      subListeners = {};\n      pubListeners = {};\n      if (ws.readyState === WebSocket.OPEN) {\n        ws?.close();\n      }\n    },\n    get status() {\n      return ws?.readyState ?? 3;\n    }\n  };\n}\n\n// pool.ts\nvar SimplePool = class {\n  _conn;\n  _seenOn = {};\n  eoseSubTimeout;\n  getTimeout;\n  constructor(options = {}) {\n    this._conn = {};\n    this.eoseSubTimeout = options.eoseSubTimeout || 3400;\n    this.getTimeout = options.getTimeout || 3400;\n  }\n  close(relays) {\n    relays.forEach((url) => {\n      let relay = this._conn[normalizeURL(url)];\n      if (relay)\n        relay.close();\n    });\n  }\n  async ensureRelay(url) {\n    const nm = normalizeURL(url);\n    if (!this._conn[nm]) {\n      this._conn[nm] = relayInit(nm, {\n        getTimeout: this.getTimeout * 0.9,\n        listTimeout: this.getTimeout * 0.9\n      });\n    }\n    const relay = this._conn[nm];\n    await relay.connect();\n    return relay;\n  }\n  sub(relays, filters, opts) {\n    let _knownIds = /* @__PURE__ */ new Set();\n    let modifiedOpts = { ...opts || {} };\n    modifiedOpts.alreadyHaveEvent = (id, url) => {\n      if (opts?.alreadyHaveEvent?.(id, url)) {\n        return true;\n      }\n      let set = this._seenOn[id] || /* @__PURE__ */ new Set();\n      set.add(url);\n      this._seenOn[id] = set;\n      return _knownIds.has(id);\n    };\n    let subs = [];\n    let eventListeners = /* @__PURE__ */ new Set();\n    let eoseListeners = /* @__PURE__ */ new Set();\n    let eosesMissing = relays.length;\n    let eoseSent = false;\n    let eoseTimeout = setTimeout(() => {\n      eoseSent = true;\n      for (let cb of eoseListeners.values())\n        cb();\n    }, this.eoseSubTimeout);\n    relays.forEach(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n      } catch (err) {\n        handleEose();\n        return;\n      }\n      if (!r)\n        return;\n      let s = r.sub(filters, modifiedOpts);\n      s.on(\"event\", (event) => {\n        _knownIds.add(event.id);\n        for (let cb of eventListeners.values())\n          cb(event);\n      });\n      s.on(\"eose\", () => {\n        if (eoseSent)\n          return;\n        handleEose();\n      });\n      subs.push(s);\n      function handleEose() {\n        eosesMissing--;\n        if (eosesMissing === 0) {\n          clearTimeout(eoseTimeout);\n          for (let cb of eoseListeners.values())\n            cb();\n        }\n      }\n    });\n    let greaterSub = {\n      sub(filters2, opts2) {\n        subs.forEach((sub) => sub.sub(filters2, opts2));\n        return greaterSub;\n      },\n      unsub() {\n        subs.forEach((sub) => sub.unsub());\n      },\n      on(type, cb) {\n        if (type === \"event\") {\n          eventListeners.add(cb);\n        } else if (type === \"eose\") {\n          eoseListeners.add(cb);\n        }\n      },\n      off(type, cb) {\n        if (type === \"event\") {\n          eventListeners.delete(cb);\n        } else if (type === \"eose\")\n          eoseListeners.delete(cb);\n      }\n    };\n    return greaterSub;\n  }\n  get(relays, filter, opts) {\n    return new Promise((resolve) => {\n      let sub = this.sub(relays, [filter], opts);\n      let timeout = setTimeout(() => {\n        sub.unsub();\n        resolve(null);\n      }, this.getTimeout);\n      sub.on(\"event\", (event) => {\n        resolve(event);\n        clearTimeout(timeout);\n        sub.unsub();\n      });\n    });\n  }\n  list(relays, filters, opts) {\n    return new Promise((resolve) => {\n      let events = [];\n      let sub = this.sub(relays, filters, opts);\n      sub.on(\"event\", (event) => {\n        events.push(event);\n      });\n      sub.on(\"eose\", () => {\n        sub.unsub();\n        resolve(events);\n      });\n    });\n  }\n  publish(relays, event) {\n    const pubPromises = relays.map(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n        return r.publish(event);\n      } catch (_) {\n        return { on() {\n        }, off() {\n        } };\n      }\n    });\n    const callbackMap = /* @__PURE__ */ new Map();\n    return {\n      on(type, cb) {\n        relays.forEach(async (relay, i) => {\n          let pub = await pubPromises[i];\n          let callback = () => cb(relay);\n          callbackMap.set(cb, callback);\n          pub.on(type, callback);\n        });\n      },\n      off(type, cb) {\n        relays.forEach(async (_, i) => {\n          let callback = callbackMap.get(cb);\n          if (callback) {\n            let pub = await pubPromises[i];\n            pub.off(type, callback);\n          }\n        });\n      }\n    };\n  }\n  seenOn(id) {\n    return Array.from(this._seenOn[id]?.values?.() || []);\n  }\n};\n\n// nip19.ts\nvar nip19_exports = {};\n__export(nip19_exports, {\n  BECH32_REGEX: () => BECH32_REGEX,\n  decode: () => decode,\n  naddrEncode: () => naddrEncode,\n  neventEncode: () => neventEncode,\n  noteEncode: () => noteEncode,\n  nprofileEncode: () => nprofileEncode,\n  npubEncode: () => npubEncode,\n  nrelayEncode: () => nrelayEncode,\n  nsecEncode: () => nsecEncode\n});\nimport { bytesToHex as bytesToHex3, concatBytes, hexToBytes } from \"@noble/hashes/utils\";\nimport { bech32 } from \"@scure/base\";\nvar Bech32MaxSize = 5e3;\nvar BECH32_REGEX = /[\\x21-\\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;\nfunction decode(nip19) {\n  let { prefix, words } = bech32.decode(nip19, Bech32MaxSize);\n  let data = new Uint8Array(bech32.fromWords(words));\n  switch (prefix) {\n    case \"nprofile\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nprofile\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      return {\n        type: \"nprofile\",\n        data: {\n          pubkey: bytesToHex3(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nevent\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nevent\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      if (tlv[2] && tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      return {\n        type: \"nevent\",\n        data: {\n          id: bytesToHex3(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : [],\n          author: tlv[2]?.[0] ? bytesToHex3(tlv[2][0]) : void 0\n        }\n      };\n    }\n    case \"naddr\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for naddr\");\n      if (!tlv[2]?.[0])\n        throw new Error(\"missing TLV 2 for naddr\");\n      if (tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      if (!tlv[3]?.[0])\n        throw new Error(\"missing TLV 3 for naddr\");\n      if (tlv[3][0].length !== 4)\n        throw new Error(\"TLV 3 should be 4 bytes\");\n      return {\n        type: \"naddr\",\n        data: {\n          identifier: utf8Decoder.decode(tlv[0][0]),\n          pubkey: bytesToHex3(tlv[2][0]),\n          kind: parseInt(bytesToHex3(tlv[3][0]), 16),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nrelay\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nrelay\");\n      return {\n        type: \"nrelay\",\n        data: utf8Decoder.decode(tlv[0][0])\n      };\n    }\n    case \"nsec\":\n    case \"npub\":\n    case \"note\":\n      return { type: prefix, data: bytesToHex3(data) };\n    default:\n      throw new Error(`unknown prefix ${prefix}`);\n  }\n}\nfunction parseTLV(data) {\n  let result = {};\n  let rest = data;\n  while (rest.length > 0) {\n    let t = rest[0];\n    let l = rest[1];\n    if (!l)\n      throw new Error(`malformed TLV ${t}`);\n    let v = rest.slice(2, 2 + l);\n    rest = rest.slice(2 + l);\n    if (v.length < l)\n      throw new Error(`not enough data to read on TLV ${t}`);\n    result[t] = result[t] || [];\n    result[t].push(v);\n  }\n  return result;\n}\nfunction nsecEncode(hex) {\n  return encodeBytes(\"nsec\", hex);\n}\nfunction npubEncode(hex) {\n  return encodeBytes(\"npub\", hex);\n}\nfunction noteEncode(hex) {\n  return encodeBytes(\"note\", hex);\n}\nfunction encodeBytes(prefix, hex) {\n  let data = hexToBytes(hex);\n  let words = bech32.toWords(data);\n  return bech32.encode(prefix, words, Bech32MaxSize);\n}\nfunction nprofileEncode(profile) {\n  let data = encodeTLV({\n    0: [hexToBytes(profile.pubkey)],\n    1: (profile.relays || []).map((url) => utf8Encoder.encode(url))\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nprofile\", words, Bech32MaxSize);\n}\nfunction neventEncode(event) {\n  let data = encodeTLV({\n    0: [hexToBytes(event.id)],\n    1: (event.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: event.author ? [hexToBytes(event.author)] : []\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nevent\", words, Bech32MaxSize);\n}\nfunction naddrEncode(addr) {\n  let kind = new ArrayBuffer(4);\n  new DataView(kind).setUint32(0, addr.kind, false);\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(addr.identifier)],\n    1: (addr.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: [hexToBytes(addr.pubkey)],\n    3: [new Uint8Array(kind)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"naddr\", words, Bech32MaxSize);\n}\nfunction nrelayEncode(url) {\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(url)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nrelay\", words, Bech32MaxSize);\n}\nfunction encodeTLV(tlv) {\n  let entries = [];\n  Object.entries(tlv).forEach(([t, vs]) => {\n    vs.forEach((v) => {\n      let entry = new Uint8Array(v.length + 2);\n      entry.set([parseInt(t)], 0);\n      entry.set([v.length], 1);\n      entry.set(v, 2);\n      entries.push(entry);\n    });\n  });\n  return concatBytes(...entries);\n}\n\n// references.ts\nvar mentionRegex = /\\bnostr:((note|npub|naddr|nevent|nprofile)1\\w+)\\b|#\\[(\\d+)\\]/g;\nfunction parseReferences(evt) {\n  let references = [];\n  for (let ref of evt.content.matchAll(mentionRegex)) {\n    if (ref[2]) {\n      try {\n        let { type, data } = decode(ref[1]);\n        switch (type) {\n          case \"npub\": {\n            references.push({\n              text: ref[0],\n              profile: { pubkey: data, relays: [] }\n            });\n            break;\n          }\n          case \"nprofile\": {\n            references.push({\n              text: ref[0],\n              profile: data\n            });\n            break;\n          }\n          case \"note\": {\n            references.push({\n              text: ref[0],\n              event: { id: data, relays: [] }\n            });\n            break;\n          }\n          case \"nevent\": {\n            references.push({\n              text: ref[0],\n              event: data\n            });\n            break;\n          }\n          case \"naddr\": {\n            references.push({\n              text: ref[0],\n              address: data\n            });\n            break;\n          }\n        }\n      } catch (err) {\n      }\n    } else if (ref[3]) {\n      let idx = parseInt(ref[3], 10);\n      let tag = evt.tags[idx];\n      if (!tag)\n        continue;\n      switch (tag[0]) {\n        case \"p\": {\n          references.push({\n            text: ref[0],\n            profile: { pubkey: tag[1], relays: tag[2] ? [tag[2]] : [] }\n          });\n          break;\n        }\n        case \"e\": {\n          references.push({\n            text: ref[0],\n            event: { id: tag[1], relays: tag[2] ? [tag[2]] : [] }\n          });\n          break;\n        }\n        case \"a\": {\n          try {\n            let [kind, pubkey, identifier] = tag[1].split(\":\");\n            references.push({\n              text: ref[0],\n              address: {\n                identifier,\n                pubkey,\n                kind: parseInt(kind, 10),\n                relays: tag[2] ? [tag[2]] : []\n              }\n            });\n          } catch (err) {\n          }\n          break;\n        }\n      }\n    }\n  }\n  return references;\n}\n\n// nip04.ts\nvar nip04_exports = {};\n__export(nip04_exports, {\n  decrypt: () => decrypt,\n  encrypt: () => encrypt\n});\nimport { randomBytes } from \"@noble/hashes/utils\";\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\nimport { base64 } from \"@scure/base\";\nif (typeof crypto !== \"undefined\" && !crypto.subtle && crypto.webcrypto) {\n  crypto.subtle = crypto.webcrypto.subtle;\n}\nasync function encrypt(privkey, pubkey, text) {\n  const key = secp256k1.getSharedSecret(privkey, \"02\" + pubkey);\n  const normalizedKey = getNormalizedX(key);\n  let iv = Uint8Array.from(randomBytes(16));\n  let plaintext = utf8Encoder.encode(text);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"encrypt\"]\n  );\n  let ciphertext = await crypto.subtle.encrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    plaintext\n  );\n  let ctb64 = base64.encode(new Uint8Array(ciphertext));\n  let ivb64 = base64.encode(new Uint8Array(iv.buffer));\n  return `${ctb64}?iv=${ivb64}`;\n}\nasync function decrypt(privkey, pubkey, data) {\n  let [ctb64, ivb64] = data.split(\"?iv=\");\n  let key = secp256k1.getSharedSecret(privkey, \"02\" + pubkey);\n  let normalizedKey = getNormalizedX(key);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"decrypt\"]\n  );\n  let ciphertext = base64.decode(ctb64);\n  let iv = base64.decode(ivb64);\n  let plaintext = await crypto.subtle.decrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    ciphertext\n  );\n  let text = utf8Decoder.decode(plaintext);\n  return text;\n}\nfunction getNormalizedX(key) {\n  return key.slice(1, 33);\n}\n\n// nip05.ts\nvar nip05_exports = {};\n__export(nip05_exports, {\n  NIP05_REGEX: () => NIP05_REGEX,\n  queryProfile: () => queryProfile,\n  searchDomain: () => searchDomain,\n  useFetchImplementation: () => useFetchImplementation\n});\nvar NIP05_REGEX = /^(?:([\\w.+-]+)@)?([\\w.-]+)$/;\nvar _fetch;\ntry {\n  _fetch = fetch;\n} catch {\n}\nfunction useFetchImplementation(fetchImplementation) {\n  _fetch = fetchImplementation;\n}\nasync function searchDomain(domain, query = \"\") {\n  try {\n    let res = await (await _fetch(`https://${domain}/.well-known/nostr.json?name=${query}`)).json();\n    return res.names;\n  } catch (_) {\n    return {};\n  }\n}\nasync function queryProfile(fullname) {\n  const match = fullname.match(NIP05_REGEX);\n  if (!match)\n    return null;\n  const [_, name = \"_\", domain] = match;\n  try {\n    const res = await _fetch(`https://${domain}/.well-known/nostr.json?name=${name}`);\n    const { names, relays } = parseNIP05Result(await res.json());\n    const pubkey = names[name];\n    return pubkey ? { pubkey, relays: relays?.[pubkey] } : null;\n  } catch (_e) {\n    return null;\n  }\n}\nfunction parseNIP05Result(json) {\n  const result = {\n    names: {}\n  };\n  for (const [name, pubkey] of Object.entries(json.names)) {\n    if (typeof name === \"string\" && typeof pubkey === \"string\") {\n      result.names[name] = pubkey;\n    }\n  }\n  if (json.relays) {\n    result.relays = {};\n    for (const [pubkey, relays] of Object.entries(json.relays)) {\n      if (typeof pubkey === \"string\" && Array.isArray(relays)) {\n        result.relays[pubkey] = relays.filter((relay) => typeof relay === \"string\");\n      }\n    }\n  }\n  return result;\n}\n\n// nip06.ts\nvar nip06_exports = {};\n__export(nip06_exports, {\n  generateSeedWords: () => generateSeedWords,\n  privateKeyFromSeedWords: () => privateKeyFromSeedWords,\n  validateWords: () => validateWords\n});\nimport { bytesToHex as bytesToHex4 } from \"@noble/hashes/utils\";\nimport { wordlist } from \"@scure/bip39/wordlists/english.js\";\nimport {\n  generateMnemonic,\n  mnemonicToSeedSync,\n  validateMnemonic\n} from \"@scure/bip39\";\nimport { HDKey } from \"@scure/bip32\";\nfunction privateKeyFromSeedWords(mnemonic, passphrase) {\n  let root = HDKey.fromMasterSeed(mnemonicToSeedSync(mnemonic, passphrase));\n  let privateKey = root.derive(`m/44'/1237'/0'/0/0`).privateKey;\n  if (!privateKey)\n    throw new Error(\"could not derive private key\");\n  return bytesToHex4(privateKey);\n}\nfunction generateSeedWords() {\n  return generateMnemonic(wordlist);\n}\nfunction validateWords(words) {\n  return validateMnemonic(words, wordlist);\n}\n\n// nip10.ts\nvar nip10_exports = {};\n__export(nip10_exports, {\n  parse: () => parse\n});\nfunction parse(event) {\n  const result = {\n    reply: void 0,\n    root: void 0,\n    mentions: [],\n    profiles: []\n  };\n  const eTags = [];\n  for (const tag of event.tags) {\n    if (tag[0] === \"e\" && tag[1]) {\n      eTags.push(tag);\n    }\n    if (tag[0] === \"p\" && tag[1]) {\n      result.profiles.push({\n        pubkey: tag[1],\n        relays: tag[2] ? [tag[2]] : []\n      });\n    }\n  }\n  for (let eTagIndex = 0; eTagIndex < eTags.length; eTagIndex++) {\n    const eTag = eTags[eTagIndex];\n    const [_, eTagEventId, eTagRelayUrl, eTagMarker] = eTag;\n    const eventPointer = {\n      id: eTagEventId,\n      relays: eTagRelayUrl ? [eTagRelayUrl] : []\n    };\n    const isFirstETag = eTagIndex === 0;\n    const isLastETag = eTagIndex === eTags.length - 1;\n    if (eTagMarker === \"root\") {\n      result.root = eventPointer;\n      continue;\n    }\n    if (eTagMarker === \"reply\") {\n      result.reply = eventPointer;\n      continue;\n    }\n    if (eTagMarker === \"mention\") {\n      result.mentions.push(eventPointer);\n      continue;\n    }\n    if (isFirstETag) {\n      result.root = eventPointer;\n      continue;\n    }\n    if (isLastETag) {\n      result.reply = eventPointer;\n      continue;\n    }\n    result.mentions.push(eventPointer);\n  }\n  return result;\n}\n\n// nip13.ts\nvar nip13_exports = {};\n__export(nip13_exports, {\n  getPow: () => getPow\n});\nimport { hexToBytes as hexToBytes2 } from \"@noble/hashes/utils\";\nfunction getPow(id) {\n  return getLeadingZeroBits(hexToBytes2(id));\n}\nfunction getLeadingZeroBits(hash) {\n  let total, i, bits;\n  for (i = 0, total = 0; i < hash.length; i++) {\n    bits = msb(hash[i]);\n    total += bits;\n    if (bits !== 8) {\n      break;\n    }\n  }\n  return total;\n}\nfunction msb(b) {\n  let n = 0;\n  if (b === 0) {\n    return 8;\n  }\n  while (b >>= 1) {\n    n++;\n  }\n  return 7 - n;\n}\n\n// nip18.ts\nvar nip18_exports = {};\n__export(nip18_exports, {\n  finishRepostEvent: () => finishRepostEvent,\n  getRepostedEvent: () => getRepostedEvent,\n  getRepostedEventPointer: () => getRepostedEventPointer\n});\nfunction finishRepostEvent(t, reposted, relayUrl, privateKey) {\n  return finishEvent({\n    kind: 6 /* Repost */,\n    tags: [\n      ...t.tags ?? [],\n      [\"e\", reposted.id, relayUrl],\n      [\"p\", reposted.pubkey]\n    ],\n    content: t.content === \"\" ? \"\" : JSON.stringify(reposted),\n    created_at: t.created_at\n  }, privateKey);\n}\nfunction getRepostedEventPointer(event) {\n  if (event.kind !== 6 /* Repost */) {\n    return void 0;\n  }\n  let lastETag;\n  let lastPTag;\n  for (let i = event.tags.length - 1; i >= 0 && (lastETag === void 0 || lastPTag === void 0); i--) {\n    const tag = event.tags[i];\n    if (tag.length >= 2) {\n      if (tag[0] === \"e\" && lastETag === void 0) {\n        lastETag = tag;\n      } else if (tag[0] === \"p\" && lastPTag === void 0) {\n        lastPTag = tag;\n      }\n    }\n  }\n  if (lastETag === void 0) {\n    return void 0;\n  }\n  return {\n    id: lastETag[1],\n    relays: [lastETag[2], lastPTag?.[2]].filter((x) => typeof x === \"string\"),\n    author: lastPTag?.[1]\n  };\n}\nfunction getRepostedEvent(event, { skipVerification } = {}) {\n  const pointer = getRepostedEventPointer(event);\n  if (pointer === void 0 || event.content === \"\") {\n    return void 0;\n  }\n  let repostedEvent;\n  try {\n    repostedEvent = JSON.parse(event.content);\n  } catch (error) {\n    return void 0;\n  }\n  if (repostedEvent.id !== pointer.id) {\n    return void 0;\n  }\n  if (!skipVerification && !verifySignature(repostedEvent)) {\n    return void 0;\n  }\n  return repostedEvent;\n}\n\n// nip21.ts\nvar nip21_exports = {};\n__export(nip21_exports, {\n  NOSTR_URI_REGEX: () => NOSTR_URI_REGEX,\n  parse: () => parse2,\n  test: () => test\n});\nvar NOSTR_URI_REGEX = new RegExp(`nostr:(${BECH32_REGEX.source})`);\nfunction test(value) {\n  return typeof value === \"string\" && new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(value);\n}\nfunction parse2(uri) {\n  const match = uri.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));\n  if (!match)\n    throw new Error(`Invalid Nostr URI: ${uri}`);\n  return {\n    uri: match[0],\n    value: match[1],\n    decoded: decode(match[1])\n  };\n}\n\n// nip25.ts\nvar nip25_exports = {};\n__export(nip25_exports, {\n  finishReactionEvent: () => finishReactionEvent,\n  getReactedEventPointer: () => getReactedEventPointer\n});\nfunction finishReactionEvent(t, reacted, privateKey) {\n  const inheritedTags = reacted.tags.filter(\n    (tag) => tag.length >= 2 && (tag[0] === \"e\" || tag[0] === \"p\")\n  );\n  return finishEvent({\n    ...t,\n    kind: 7 /* Reaction */,\n    tags: [\n      ...t.tags ?? [],\n      ...inheritedTags,\n      [\"e\", reacted.id],\n      [\"p\", reacted.pubkey]\n    ],\n    content: t.content ?? \"+\"\n  }, privateKey);\n}\nfunction getReactedEventPointer(event) {\n  if (event.kind !== 7 /* Reaction */) {\n    return void 0;\n  }\n  let lastETag;\n  let lastPTag;\n  for (let i = event.tags.length - 1; i >= 0 && (lastETag === void 0 || lastPTag === void 0); i--) {\n    const tag = event.tags[i];\n    if (tag.length >= 2) {\n      if (tag[0] === \"e\" && lastETag === void 0) {\n        lastETag = tag;\n      } else if (tag[0] === \"p\" && lastPTag === void 0) {\n        lastPTag = tag;\n      }\n    }\n  }\n  if (lastETag === void 0 || lastPTag === void 0) {\n    return void 0;\n  }\n  return {\n    id: lastETag[1],\n    relays: [lastETag[2], lastPTag[2]].filter((x) => x !== void 0),\n    author: lastPTag[1]\n  };\n}\n\n// nip26.ts\nvar nip26_exports = {};\n__export(nip26_exports, {\n  createDelegation: () => createDelegation,\n  getDelegator: () => getDelegator\n});\nimport { schnorr as schnorr3 } from \"@noble/curves/secp256k1\";\nimport { bytesToHex as bytesToHex5 } from \"@noble/hashes/utils\";\nimport { sha256 as sha2562 } from \"@noble/hashes/sha256\";\nfunction createDelegation(privateKey, parameters) {\n  let conditions = [];\n  if ((parameters.kind || -1) >= 0)\n    conditions.push(`kind=${parameters.kind}`);\n  if (parameters.until)\n    conditions.push(`created_at<${parameters.until}`);\n  if (parameters.since)\n    conditions.push(`created_at>${parameters.since}`);\n  let cond = conditions.join(\"&\");\n  if (cond === \"\")\n    throw new Error(\"refusing to create a delegation without any conditions\");\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${parameters.pubkey}:${cond}`)\n  );\n  let sig = bytesToHex5(\n    schnorr3.sign(sighash, privateKey)\n  );\n  return {\n    from: getPublicKey(privateKey),\n    to: parameters.pubkey,\n    cond,\n    sig\n  };\n}\nfunction getDelegator(event) {\n  let tag = event.tags.find((tag2) => tag2[0] === \"delegation\" && tag2.length >= 4);\n  if (!tag)\n    return null;\n  let pubkey = tag[1];\n  let cond = tag[2];\n  let sig = tag[3];\n  let conditions = cond.split(\"&\");\n  for (let i = 0; i < conditions.length; i++) {\n    let [key, operator, value] = conditions[i].split(/\\b/);\n    if (key === \"kind\" && operator === \"=\" && event.kind === parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \"<\" && event.created_at < parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \">\" && event.created_at > parseInt(value))\n      continue;\n    else\n      return null;\n  }\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${event.pubkey}:${cond}`)\n  );\n  if (!schnorr3.verify(sig, sighash, pubkey))\n    return null;\n  return pubkey;\n}\n\n// nip27.ts\nvar nip27_exports = {};\n__export(nip27_exports, {\n  matchAll: () => matchAll,\n  regex: () => regex,\n  replaceAll: () => replaceAll\n});\nvar regex = () => new RegExp(`\\\\b${NOSTR_URI_REGEX.source}\\\\b`, \"g\");\nfunction* matchAll(content) {\n  const matches = content.matchAll(regex());\n  for (const match of matches) {\n    try {\n      const [uri, value] = match;\n      yield {\n        uri,\n        value,\n        decoded: decode(value),\n        start: match.index,\n        end: match.index + uri.length\n      };\n    } catch (_e) {\n    }\n  }\n}\nfunction replaceAll(content, replacer) {\n  return content.replaceAll(regex(), (uri, value) => {\n    return replacer({\n      uri,\n      value,\n      decoded: decode(value)\n    });\n  });\n}\n\n// nip39.ts\nvar nip39_exports = {};\n__export(nip39_exports, {\n  useFetchImplementation: () => useFetchImplementation2,\n  validateGithub: () => validateGithub\n});\nvar _fetch2;\ntry {\n  _fetch2 = fetch;\n} catch {\n}\nfunction useFetchImplementation2(fetchImplementation) {\n  _fetch2 = fetchImplementation;\n}\nasync function validateGithub(pubkey, username, proof) {\n  try {\n    let res = await (await _fetch2(`https://gist.github.com/${username}/${proof}/raw`)).text();\n    return res === `Verifying that I control the following Nostr public key: ${pubkey}`;\n  } catch (_) {\n    return false;\n  }\n}\n\n// nip42.ts\nvar nip42_exports = {};\n__export(nip42_exports, {\n  authenticate: () => authenticate\n});\nvar authenticate = async ({\n  challenge,\n  relay,\n  sign\n}) => {\n  const e = {\n    kind: 22242 /* ClientAuth */,\n    created_at: Math.floor(Date.now() / 1e3),\n    tags: [\n      [\"relay\", relay.url],\n      [\"challenge\", challenge]\n    ],\n    content: \"\"\n  };\n  const pub = relay.auth(await sign(e));\n  return new Promise((resolve, reject) => {\n    pub.on(\"ok\", function ok() {\n      pub.off(\"ok\", ok);\n      resolve();\n    });\n    pub.on(\"failed\", function fail(reason) {\n      pub.off(\"failed\", fail);\n      reject(reason);\n    });\n  });\n};\n\n// nip57.ts\nvar nip57_exports = {};\n__export(nip57_exports, {\n  getZapEndpoint: () => getZapEndpoint,\n  makeZapReceipt: () => makeZapReceipt,\n  makeZapRequest: () => makeZapRequest,\n  useFetchImplementation: () => useFetchImplementation3,\n  validateZapRequest: () => validateZapRequest\n});\nimport { bech32 as bech322 } from \"@scure/base\";\nvar _fetch3;\ntry {\n  _fetch3 = fetch;\n} catch {\n}\nfunction useFetchImplementation3(fetchImplementation) {\n  _fetch3 = fetchImplementation;\n}\nasync function getZapEndpoint(metadata) {\n  try {\n    let lnurl = \"\";\n    let { lud06, lud16 } = JSON.parse(metadata.content);\n    if (lud06) {\n      let { words } = bech322.decode(lud06, 1e3);\n      let data = bech322.fromWords(words);\n      lnurl = utf8Decoder.decode(data);\n    } else if (lud16) {\n      let [name, domain] = lud16.split(\"@\");\n      lnurl = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else {\n      return null;\n    }\n    let res = await _fetch3(lnurl);\n    let body = await res.json();\n    if (body.allowsNostr && body.nostrPubkey) {\n      return body.callback;\n    }\n  } catch (err) {\n  }\n  return null;\n}\nfunction makeZapRequest({\n  profile,\n  event,\n  amount,\n  relays,\n  comment = \"\"\n}) {\n  if (!amount)\n    throw new Error(\"amount not given\");\n  if (!profile)\n    throw new Error(\"profile not given\");\n  let zr = {\n    kind: 9734,\n    created_at: Math.round(Date.now() / 1e3),\n    content: comment,\n    tags: [\n      [\"p\", profile],\n      [\"amount\", amount.toString()],\n      [\"relays\", ...relays]\n    ]\n  };\n  if (event) {\n    zr.tags.push([\"e\", event]);\n  }\n  return zr;\n}\nfunction validateZapRequest(zapRequestString) {\n  let zapRequest;\n  try {\n    zapRequest = JSON.parse(zapRequestString);\n  } catch (err) {\n    return \"Invalid zap request JSON.\";\n  }\n  if (!validateEvent(zapRequest))\n    return \"Zap request is not a valid Nostr event.\";\n  if (!verifySignature(zapRequest))\n    return \"Invalid signature on zap request.\";\n  let p = zapRequest.tags.find(([t, v]) => t === \"p\" && v);\n  if (!p)\n    return \"Zap request doesn't have a 'p' tag.\";\n  if (!p[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'p' tag is not valid hex.\";\n  let e = zapRequest.tags.find(([t, v]) => t === \"e\" && v);\n  if (e && !e[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'e' tag is not valid hex.\";\n  let relays = zapRequest.tags.find(([t, v]) => t === \"relays\" && v);\n  if (!relays)\n    return \"Zap request doesn't have a 'relays' tag.\";\n  return null;\n}\nfunction makeZapReceipt({\n  zapRequest,\n  preimage,\n  bolt11,\n  paidAt\n}) {\n  let zr = JSON.parse(zapRequest);\n  let tagsFromZapRequest = zr.tags.filter(\n    ([t]) => t === \"e\" || t === \"p\" || t === \"a\"\n  );\n  let zap = {\n    kind: 9735,\n    created_at: Math.round(paidAt.getTime() / 1e3),\n    content: \"\",\n    tags: [\n      ...tagsFromZapRequest,\n      [\"bolt11\", bolt11],\n      [\"description\", zapRequest]\n    ]\n  };\n  if (preimage) {\n    zap.tags.push([\"preimage\", preimage]);\n  }\n  return zap;\n}\nexport {\n  Kind,\n  SimplePool,\n  finishEvent,\n  fakejson_exports as fj,\n  generatePrivateKey,\n  getBlankEvent,\n  getEventHash,\n  getPublicKey,\n  getSignature,\n  matchFilter,\n  matchFilters,\n  mergeFilters,\n  nip04_exports as nip04,\n  nip05_exports as nip05,\n  nip06_exports as nip06,\n  nip10_exports as nip10,\n  nip13_exports as nip13,\n  nip18_exports as nip18,\n  nip19_exports as nip19,\n  nip21_exports as nip21,\n  nip25_exports as nip25,\n  nip26_exports as nip26,\n  nip27_exports as nip27,\n  nip39_exports as nip39,\n  nip42_exports as nip42,\n  nip57_exports as nip57,\n  parseReferences,\n  relayInit,\n  serializeEvent,\n  signEvent,\n  utils_exports as utils,\n  validateEvent,\n  verifySignature\n};\n","const WS = typeof WebSocket !== 'undefined' ? WebSocket : require('ws')\n\nRelay.prototype.wait_connected = async function relay_wait_connected(data) {\n\tlet retry = 1000\n\twhile (true) {\n\t\tif (this.ws.readyState !== 1) {\n\t\t\tawait sleep(retry)\n\t\t\tretry *= 1.5\n\t\t}\n\t\telse {\n\t\t\treturn\n\t\t}\n\t}\n}\n\n\nfunction Relay(relay, opts={})\n{\n\tif (!(this instanceof Relay))\n\t\treturn new Relay(relay, opts)\n\n\tthis.url = relay\n\tthis.opts = opts\n\n\tif (opts.reconnect == null)\n\t\topts.reconnect = true\n\n\tconst me = this\n\tme.onfn = {}\n\n\tinit_websocket(me)\n\t\t.catch(e => {\n\t\t\tif (me.onfn.error)\n\t\t\t\tme.onfn.error(e)\n\t\t})\n\n\treturn this\n}\n\nfunction init_websocket(me) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst ws = me.ws = new WS(me.url);\n\n\t\tlet resolved = false\n\t\tws.onmessage = (m) => {\n\t\t\thandle_nostr_message(me, m)\n\t\t\tif (me.onfn.message)\n\t\t\t\tme.onfn.message(m)\n\t\t}\n\t\tws.onclose = (e) => {\n\t\t\tif (me.onfn.close)\n\t\t\t\tme.onfn.close(e)\n\t\t\tif (me.reconnecting)\n\t\t\t\treturn reject(new Error(\"close during reconnect\"))\n\t\t\tif (!me.manualClose && me.opts.reconnect)\n\t\t\t\treconnect(me)\n\t\t}\n\t\tws.onerror = (e) => {\n\t\t\tif (me.onfn.error)\n\t\t\t\tme.onfn.error(e)\n\t\t\tif (me.reconnecting)\n\t\t\t\treturn reject(new Error(\"error during reconnect\"))\n\t\t\tif (me.opts.reconnect)\n\t\t\t\treconnect(me)\n\t\t}\n\t\tws.onopen = (e) => {\n\t\t\tif (me.onfn.open)\n\t\t\t\tme.onfn.open(e)\n\n\t\t\tif (resolved) return\n\n\t\t\tresolved = true\n\t\t\tresolve(me)\n\t\t}\n\t});\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function reconnect(me)\n{\n\tconst reconnecting = true\n\tlet n = 100\n\ttry {\n\t\tme.reconnecting = true\n\t\tawait init_websocket(me)\n\t\tme.reconnecting = false\n\t} catch {\n\t\t//console.error(`error thrown during reconnect... trying again in ${n} ms`)\n\t\tawait sleep(n)\n\t\tn *= 1.5\n\t}\n}\n\nRelay.prototype.on = function relayOn(method, fn) {\n\tthis.onfn[method] = fn\n\treturn this\n}\n\nRelay.prototype.close = function relayClose() {\n\tif (this.ws) {\n\t\tthis.manualClose = true\n\t\tthis.ws.close()\n\t}\n}\n\nRelay.prototype.subscribe = function relay_subscribe(sub_id, filters) {\n\tif (Array.isArray(filters))\n\t\tthis.send([\"REQ\", sub_id, ...filters])\n\telse\n\t\tthis.send([\"REQ\", sub_id, filters])\n}\n\nRelay.prototype.unsubscribe = function relay_unsubscribe(sub_id) {\n\tthis.send([\"CLOSE\", sub_id])\n}\n\nRelay.prototype.send = async function relay_send(data) {\n\tawait this.wait_connected()\n\tthis.ws.send(JSON.stringify(data))\n}\n\nfunction handle_nostr_message(relay, msg)\n{\n\tlet data\n\ttry {\n\t\tdata = JSON.parse(msg.data)\n\t} catch (e) {\n\t\tconsole.error(\"handle_nostr_message\", e)\n\t\treturn\n\t}\n\tif (data.length >= 2) {\n\t\tswitch (data[0]) {\n\t\tcase \"EVENT\":\n\t\t\tif (data.length < 3)\n\t\t\t\treturn\n\t\t\treturn relay.onfn.event && relay.onfn.event(data[1], data[2])\n\t\tcase \"EOSE\":\n\t\t\treturn relay.onfn.eose && relay.onfn.eose(data[1])\n\t\tcase \"NOTICE\":\n\t\t\treturn relay.onfn.notice && relay.onfn.notice(...data.slice(1))\n\t\tcase \"OK\":\n\t\t\treturn relay.onfn.ok && relay.onfn.ok(...data.slice(1))\n\t\t}\n\t}\n}\n\nmodule.exports = Relay\n","'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n","\nconst Relay = require('./relay')\n\nfunction RelayPool(relays, opts)\n{\n\tif (!(this instanceof RelayPool))\n\t\treturn new RelayPool(relays, opts)\n\n\tthis.onfn = {}\n\tthis.relays = []\n\tthis.opts = opts\n\n\tfor (const relay of relays) {\n\t\tthis.add(relay)\n\t}\n\n\treturn this\n}\n\nRelayPool.prototype.close = function relayPoolClose() {\n\tfor (const relay of this.relays) {\n\t\trelay.close()\n\t}\n}\n\nRelayPool.prototype.on = function relayPoolOn(method, fn) {\n\tfor (const relay of this.relays) {\n\t\tthis.onfn[method] = fn\n\t\trelay.onfn[method] = fn.bind(null, relay)\n\t}\n\treturn this\n}\n\nRelayPool.prototype.has = function relayPoolHas(relayUrl) {\n\tfor (const relay of this.relays) {\n\t\tif (relay.url === relayUrl)\n\t\t\treturn true\n\t}\n\n\treturn false\n}\n\nRelayPool.prototype.send = function relayPoolSend(payload, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.send(payload)\n\t}\n}\n\nRelayPool.prototype.setupHandlers = function relayPoolSetupHandlers()\n{\n\t// setup its message handlers with the ones we have already\n\tconst keys = Object.keys(this.onfn)\n\tfor (const handler of keys) {\n\t\tfor (const relay of this.relays) {\n\t\t\trelay.onfn[handler] = this.onfn[handler].bind(null, relay)\n\t\t}\n\t}\n}\n\nRelayPool.prototype.remove = function relayPoolRemove(url) {\n\tlet i = 0\n\n\tfor (const relay of this.relays) {\n\t\tif (relay.url === url) {\n\t\t\trelay.ws && relay.ws.close()\n\t\t\tthis.relays = this.replays.splice(i, 1)\n\t\t\treturn true\n\t\t}\n\n\t\ti += 1\n\t}\n\n\treturn false\n}\n\nRelayPool.prototype.subscribe = function relayPoolSubscribe(sub_id, filters, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.subscribe(sub_id, filters)\n\t}\n}\n\nRelayPool.prototype.unsubscribe = function relayPoolUnsubscibe(sub_id, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.unsubscribe(sub_id)\n\t}\n}\n\n\nRelayPool.prototype.add = function relayPoolAdd(relay) {\n\tif (relay instanceof Relay) {\n\t\tif (this.has(relay.url))\n\t\t\treturn false\n\n\t\tthis.relays.push(relay)\n\t\tthis.setupHandlers()\n\t\treturn true\n\t}\n\n\tif (this.has(relay))\n\t\treturn false\n\n\tconst r = Relay(relay, this.opts)\n\tthis.relays.push(r)\n\tthis.setupHandlers()\n\treturn true\n}\n\nRelayPool.prototype.find_relays = function relayPoolFindRelays(relay_ids) {\n\tif (relay_ids instanceof Relay)\n\t\treturn [relay_ids]\n\n\tif (relay_ids.length === 0)\n\t\treturn []\n\n\tif (!relay_ids[0])\n\t\tthrow new Error(\"what!?\")\n\n\tif (relay_ids[0] instanceof Relay)\n\t\treturn relay_ids\n\n\treturn this.relays.reduce((acc, relay) => {\n\t\tif (relay_ids.some((rid) => relay.url === rid))\n\t\t\tacc.push(relay)\n\t\treturn acc\n\t}, [])\n}\n\nmodule.exports = RelayPool\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.is_node = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar is_node_ = null;\r\n/**\r\n * Test whether the code is running on NodeJS.\r\n *\r\n * @return Whether NodeJS or not.\r\n */\r\nfunction is_node() {\r\n    if (is_node_ === null)\r\n        is_node_ =\r\n            typeof global === \"object\" &&\r\n                typeof global.process === \"object\" &&\r\n                typeof global.process.versions === \"object\" &&\r\n                typeof global.process.versions.node !== \"undefined\";\r\n    return is_node_;\r\n}\r\nexports.is_node = is_node;\r\n//# sourceMappingURL=node.js.map","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Container = void 0;\r\nvar ForOfAdaptor_1 = require(\"../../internal/iterator/disposable/ForOfAdaptor\");\r\n/**\r\n * Basic container.\r\n *\r\n * @template T Stored elements' type\r\n * @template SourceT Derived type extending this {@link Container}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n * @template PElem Parent type of *T*, used for inserting elements through {@link assign} and {@link insert}.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Container = /** @class */ (function () {\r\n    function Container() {\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.empty = function () {\r\n        return this.size() === 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rbegin = function () {\r\n        return this.end().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rend = function () {\r\n        return this.begin().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype[Symbol.iterator] = function () {\r\n        return new ForOfAdaptor_1.ForOfAdaptor(this.begin(), this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.toJSON = function () {\r\n        var e_1, _a;\r\n        var ret = [];\r\n        try {\r\n            for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var elem = _c.value;\r\n                ret.push(elem);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return ret;\r\n    };\r\n    return Container;\r\n}());\r\nexports.Container = Container;\r\n//# sourceMappingURL=Container.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ForOfAdaptor = void 0;\r\n/**\r\n * Adaptor for `for ... of` iteration.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ForOfAdaptor = /** @class */ (function () {\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first Input iteartor of the first position.\r\n     * @param last Input iterator of the last position.\r\n     */\r\n    function ForOfAdaptor(first, last) {\r\n        this.it_ = first;\r\n        this.last_ = last;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype.next = function () {\r\n        if (this.it_.equals(this.last_))\r\n            return {\r\n                done: true,\r\n                value: undefined,\r\n            };\r\n        else {\r\n            var it = this.it_;\r\n            this.it_ = this.it_.next();\r\n            return {\r\n                done: false,\r\n                value: it.value,\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype[Symbol.iterator] = function () {\r\n        return this;\r\n    };\r\n    return ForOfAdaptor;\r\n}());\r\nexports.ForOfAdaptor = ForOfAdaptor;\r\n//# sourceMappingURL=ForOfAdaptor.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NativeArrayIterator = void 0;\r\nvar NativeArrayIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function NativeArrayIterator(data, index) {\r\n        this.data_ = data;\r\n        this.index_ = index;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(NativeArrayIterator.prototype, \"value\", {\r\n        get: function () {\r\n            return this.data_[this.index_];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.prev = function () {\r\n        --this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.advance = function (n) {\r\n        this.index_ += n;\r\n        return this;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.equals = function (obj) {\r\n        return this.data_ === obj.data_ && this.index_ === obj.index_;\r\n    };\r\n    NativeArrayIterator.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        _b = __read([obj.index_, this.index_], 2), this.index_ = _b[0], obj.index_ = _b[1];\r\n    };\r\n    return NativeArrayIterator;\r\n}());\r\nexports.NativeArrayIterator = NativeArrayIterator;\r\n//# sourceMappingURL=NativeArrayIterator.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LogicError = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Exception_1 = require(\"./Exception\");\r\n/**\r\n * Logic Error.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar LogicError = /** @class */ (function (_super) {\r\n    __extends(LogicError, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function LogicError(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return LogicError;\r\n}(Exception_1.Exception));\r\nexports.LogicError = LogicError;\r\n//# sourceMappingURL=LogicError.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Exception = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\n/**\r\n * Base Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Exception = /** @class */ (function (_super) {\r\n    __extends(Exception, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function Exception(message) {\r\n        var _newTarget = this.constructor;\r\n        var _this = _super.call(this, message) || this;\r\n        // INHERITANCE POLYFILL\r\n        var proto = _newTarget.prototype;\r\n        if (Object.setPrototypeOf)\r\n            Object.setPrototypeOf(_this, proto);\r\n        else\r\n            _this.__proto__ = proto;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Exception.prototype, \"name\", {\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * The error name.\r\n         */\r\n        get: function () {\r\n            return this.constructor.name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Get error message.\r\n     *\r\n     * @return The error message.\r\n     */\r\n    Exception.prototype.what = function () {\r\n        return this.message;\r\n    };\r\n    /**\r\n     * Native function for `JSON.stringify()`.\r\n     *\r\n     * The {@link Exception.toJSON} function returns only three properties; ({@link name}, {@link message} and {@link stack}). If you want to define a new sub-class extending the {@link Exception} and const the class to export additional props (or remove some props), override this {@link Exception.toJSON} method.\r\n     *\r\n     * @return An object for `JSON.stringify()`.\r\n     */\r\n    Exception.prototype.toJSON = function () {\r\n        return {\r\n            name: this.name,\r\n            message: this.message,\r\n            stack: this.stack,\r\n        };\r\n    };\r\n    return Exception;\r\n}(Error));\r\nexports.Exception = Exception;\r\n//# sourceMappingURL=Exception.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InvalidArgument = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Invalid Argument Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar InvalidArgument = /** @class */ (function (_super) {\r\n    __extends(InvalidArgument, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function InvalidArgument(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return InvalidArgument;\r\n}(LogicError_1.LogicError));\r\nexports.InvalidArgument = InvalidArgument;\r\n//# sourceMappingURL=InvalidArgument.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorGenerator = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar InvalidArgument_1 = require(\"../../exception/InvalidArgument\");\r\nvar OutOfRange_1 = require(\"../../exception/OutOfRange\");\r\nvar ErrorGenerator;\r\n(function (ErrorGenerator) {\r\n    /* ---------------------------------------------------------\r\n        COMMON\r\n    --------------------------------------------------------- */\r\n    function get_class_name(instance) {\r\n        if (typeof instance === \"string\")\r\n            return instance;\r\n        var ret = instance.constructor.name;\r\n        if (instance.constructor.__MODULE)\r\n            ret = \"\".concat(instance.constructor.__MODULE, \".\").concat(ret);\r\n        return \"std.\".concat(ret);\r\n    }\r\n    ErrorGenerator.get_class_name = get_class_name;\r\n    /* ---------------------------------------------------------\r\n        CONTAINERS\r\n    --------------------------------------------------------- */\r\n    function empty(instance, method) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): it's empty container.\"));\r\n    }\r\n    ErrorGenerator.empty = empty;\r\n    function negative_index(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is negative -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_index = negative_index;\r\n    function excessive_index(instance, method, index, size) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is equal or greater than size -> (index = \").concat(index, \", size: \").concat(size, \").\"));\r\n    }\r\n    ErrorGenerator.excessive_index = excessive_index;\r\n    function not_my_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is not this container's own.\"));\r\n    }\r\n    ErrorGenerator.not_my_iterator = not_my_iterator;\r\n    function erased_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator, it already has been erased.\"));\r\n    }\r\n    ErrorGenerator.erased_iterator = erased_iterator;\r\n    function negative_iterator(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is directing negative position -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_iterator = negative_iterator;\r\n    function iterator_end_value(instance, method) {\r\n        if (method === void 0) { method = \"end\"; }\r\n        var className = get_class_name(instance);\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(className, \".Iterator.value: cannot access to the \").concat(className, \".\").concat(method, \"().value.\"));\r\n    }\r\n    ErrorGenerator.iterator_end_value = iterator_end_value;\r\n    function key_nout_found(instance, method, key) {\r\n        throw new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): unable to find the matched key -> \").concat(key));\r\n    }\r\n    ErrorGenerator.key_nout_found = key_nout_found;\r\n})(ErrorGenerator = exports.ErrorGenerator || (exports.ErrorGenerator = {}));\r\n//# sourceMappingURL=ErrorGenerator.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutOfRange = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Out-of-range Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar OutOfRange = /** @class */ (function (_super) {\r\n    __extends(OutOfRange, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function OutOfRange(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return OutOfRange;\r\n}(LogicError_1.LogicError));\r\nexports.OutOfRange = OutOfRange;\r\n//# sourceMappingURL=OutOfRange.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar SetContainer_1 = require(\"./SetContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic set container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template Source Derived type extending this {@link UniqueSet}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueSet = /** @class */ (function (_super) {\r\n    __extends(UniqueSet, _super);\r\n    function UniqueSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    UniqueSet.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueSet.prototype._Insert_by_range = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this._Insert_by_key(first.value);\r\n    };\r\n    UniqueSet.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_val(param);\r\n    };\r\n    UniqueSet.prototype._Extract_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        this._Erase_by_range(it);\r\n        return key;\r\n    };\r\n    UniqueSet.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true || this.has(it.value) === false)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueSet.prototype._Erase_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());) {\r\n            if (this.has(it.value) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n        }\r\n    };\r\n    return UniqueSet;\r\n}(SetContainer_1.SetContainer));\r\nexports.UniqueSet = UniqueSet;\r\n//# sourceMappingURL=UniqueSet.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic set container.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link SetContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetContainer = /** @class */ (function (_super) {\r\n    __extends(SetContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function SetContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    SetContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this._Insert_by_key(args[0]);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this._Insert_by_hint(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            !(args[0] instanceof this.end().constructor &&\r\n                args[0].source() === this))\r\n            return this._Erase_by_val(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return SetContainer;\r\n}(Container_1.Container));\r\nexports.SetContainer = SetContainer;\r\n//# sourceMappingURL=SetContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get_uid = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Global_1 = require(\"../internal/Global\");\r\n/**\r\n * Get unique identifier.\r\n *\r\n * @param obj Target object.\r\n * @return The identifier number.\r\n */\r\nfunction get_uid(obj) {\r\n    // NO UID EXISTS, THEN ISSUE ONE.\r\n    if (obj instanceof Object) {\r\n        if (obj.hasOwnProperty(\"__get_m_iUID\") === false) {\r\n            var uid_1 = ++(0, Global_1._Get_root)().__s_iUID;\r\n            Object.defineProperty(obj, \"__get_m_iUID\", {\r\n                value: function () {\r\n                    return uid_1;\r\n                },\r\n            });\r\n        }\r\n        // RETURNS\r\n        return obj.__get_m_iUID();\r\n    }\r\n    else if (obj === undefined)\r\n        return -1;\r\n    // is null\r\n    else\r\n        return 0;\r\n}\r\nexports.get_uid = get_uid;\r\n//# sourceMappingURL=uid.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._Get_root = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar node_1 = require(\"../utility/node\");\r\n/**\r\n * @internal\r\n */\r\nfunction _Get_root() {\r\n    if (__s_pRoot === null) {\r\n        __s_pRoot = ((0, node_1.is_node)() ? global : self);\r\n        if (__s_pRoot.__s_iUID === undefined)\r\n            __s_pRoot.__s_iUID = 0;\r\n    }\r\n    return __s_pRoot;\r\n}\r\nexports._Get_root = _Get_root;\r\n/**\r\n * @internal\r\n */\r\nvar __s_pRoot = null;\r\n//# sourceMappingURL=Global.js.map","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.hash = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Hash function.\r\n *\r\n * @param itemList The items to be hashed.\r\n * @return The hash code.\r\n */\r\nfunction hash() {\r\n    var e_1, _a;\r\n    var itemList = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        itemList[_i] = arguments[_i];\r\n    }\r\n    var ret = INIT_VALUE;\r\n    try {\r\n        for (var itemList_1 = __values(itemList), itemList_1_1 = itemList_1.next(); !itemList_1_1.done; itemList_1_1 = itemList_1.next()) {\r\n            var item = itemList_1_1.value;\r\n            item = item ? item.valueOf() : item;\r\n            var type = typeof item;\r\n            if (type === \"boolean\")\r\n                // BOOLEAN -> 1 BYTE\r\n                ret = _Hash_boolean(item, ret);\r\n            else if (type === \"number\" || type === \"bigint\")\r\n                // NUMBER -> 8 BYTES\r\n                ret = _Hash_number(item, ret);\r\n            else if (type === \"string\")\r\n                // STRING -> {LENGTH} BYTES\r\n                ret = _Hash_string(item, ret);\r\n            else if (item instanceof Object &&\r\n                item.hashCode instanceof Function) {\r\n                var hashed = item.hashCode();\r\n                if (itemList.length === 1)\r\n                    return hashed;\r\n                else {\r\n                    ret = ret ^ hashed;\r\n                    ret *= MULTIPLIER;\r\n                }\r\n            } // object | null | undefined\r\n            else\r\n                ret = _Hash_number((0, uid_1.get_uid)(item), ret);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (itemList_1_1 && !itemList_1_1.done && (_a = itemList_1.return)) _a.call(itemList_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return Math.abs(ret);\r\n}\r\nexports.hash = hash;\r\nfunction _Hash_boolean(val, ret) {\r\n    ret ^= val ? 1 : 0;\r\n    ret *= MULTIPLIER;\r\n    return ret;\r\n}\r\nfunction _Hash_number(val, ret) {\r\n    return _Hash_string(val.toString(), ret);\r\n    // // ------------------------------------------\r\n    // //    IN C++\r\n    // //        CONSIDER A NUMBER AS A STRING\r\n    // //        HASH<STRING>((CHAR*)&VAL, 8)\r\n    // // ------------------------------------------\r\n    // // CONSTRUCT BUFFER AND BYTE_ARRAY\r\n    // const buffer: ArrayBuffer = new ArrayBuffer(8);\r\n    // const byteArray: Int8Array = new Int8Array(buffer);\r\n    // const valueArray: Float64Array = new Float64Array(buffer);\r\n    // valueArray[0] = val;\r\n    // for (let i: number = 0; i < byteArray.length; ++i)\r\n    // {\r\n    //     const byte = (byteArray[i] < 0) ? byteArray[i] + 256 : byteArray[i];\r\n    //     ret ^= byte;\r\n    //     ret *= _HASH_MULTIPLIER;\r\n    // }\r\n    // return Math.abs(ret);\r\n}\r\nfunction _Hash_string(str, ret) {\r\n    for (var i = 0; i < str.length; ++i) {\r\n        ret ^= str.charCodeAt(i);\r\n        ret *= MULTIPLIER;\r\n    }\r\n    return Math.abs(ret);\r\n}\r\n/* ---------------------------------------------------------\r\n    RESERVED ITEMS\r\n--------------------------------------------------------- */\r\nvar INIT_VALUE = 2166136261;\r\nvar MULTIPLIER = 16777619;\r\n//# sourceMappingURL=hash.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.greater_equal = exports.greater = exports.less_equal = exports.less = exports.not_equal_to = exports.equal_to = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Test whether two arguments are equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether two arguments are equal or not.\r\n */\r\nfunction equal_to(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x ? x.valueOf() : x;\r\n    y = y ? y.valueOf() : y;\r\n    // DO COMPARE\r\n    if (x instanceof Object &&\r\n        x.equals instanceof Function)\r\n        return x.equals(y);\r\n    else\r\n        return x === y;\r\n}\r\nexports.equal_to = equal_to;\r\n/**\r\n * Test whether two arguments are not equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Returns `true`, if two arguments are not equal, otherwise `false`.\r\n */\r\nfunction not_equal_to(x, y) {\r\n    return !equal_to(x, y);\r\n}\r\nexports.not_equal_to = not_equal_to;\r\n/**\r\n * Test whether *x* is less than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than *y*.\r\n */\r\nfunction less(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x.valueOf();\r\n    y = y.valueOf();\r\n    // DO COMPARE\r\n    if (x instanceof Object)\r\n        if (x.less instanceof Function)\r\n            // has less()\r\n            return x.less(y);\r\n        else\r\n            return (0, uid_1.get_uid)(x) < (0, uid_1.get_uid)(y);\r\n    else\r\n        return x < y;\r\n}\r\nexports.less = less;\r\n/**\r\n * Test whether *x* is less than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than or equal to *y*.\r\n */\r\nfunction less_equal(x, y) {\r\n    return less(x, y) || equal_to(x, y);\r\n}\r\nexports.less_equal = less_equal;\r\n/**\r\n * Test whether *x* is greater than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than *y*.\r\n */\r\nfunction greater(x, y) {\r\n    return !less_equal(x, y);\r\n}\r\nexports.greater = greater;\r\n/**\r\n * Test whether *x* is greater than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than or equal to *y*.\r\n */\r\nfunction greater_equal(x, y) {\r\n    return !less(x, y);\r\n}\r\nexports.greater_equal = greater_equal;\r\n//# sourceMappingURL=comparators.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IHashContainer = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar IAssociativeContainer_1 = require(\"./IAssociativeContainer\");\r\nvar hash_1 = require(\"../../../functional/hash\");\r\nvar comparators_1 = require(\"../../../functional/comparators\");\r\nvar IHashContainer;\r\n(function (IHashContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source, Source, bucketFactory) {\r\n        var args = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            args[_i - 3] = arguments[_i];\r\n        }\r\n        // DECLARE MEMBERS\r\n        var post_process = null;\r\n        var hash_function = hash_1.hash;\r\n        var key_eq = comparators_1.equal_to;\r\n        //----\r\n        // INITIALIZE MEMBERS AND POST-PROCESS\r\n        //----\r\n        // BRANCH - METHOD OVERLOADINGS\r\n        if (args.length === 1 && args[0] instanceof Source) {\r\n            // PARAMETERS\r\n            var container_1 = args[0];\r\n            hash_function = container_1.hash_function();\r\n            key_eq = container_1.key_eq();\r\n            // COPY CONSTRUCTOR\r\n            post_process = function () {\r\n                var first = container_1.begin();\r\n                var last = container_1.end();\r\n                source.assign(first, last);\r\n            };\r\n        }\r\n        else {\r\n            var tuple = IAssociativeContainer_1.IAssociativeContainer.construct.apply(IAssociativeContainer_1.IAssociativeContainer, __spreadArray([source], __read(args), false));\r\n            post_process = tuple.ramda;\r\n            if (tuple.tail.length >= 1)\r\n                hash_function = tuple.tail[0];\r\n            if (tuple.tail.length >= 2)\r\n                key_eq = tuple.tail[1];\r\n        }\r\n        //----\r\n        // DO PROCESS\r\n        //----\r\n        // CONSTRUCT BUCKET\r\n        bucketFactory(hash_function, key_eq);\r\n        // ACT POST-PROCESS\r\n        if (post_process !== null)\r\n            post_process();\r\n    }\r\n    IHashContainer.construct = construct;\r\n})(IHashContainer = exports.IHashContainer || (exports.IHashContainer = {}));\r\n//# sourceMappingURL=IHashContainer.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IAssociativeContainer = void 0;\r\nvar IAssociativeContainer;\r\n(function (IAssociativeContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var ramda;\r\n        var tail;\r\n        if (args.length >= 1 && args[0] instanceof Array) {\r\n            // INITIALIZER LIST CONSTRUCTOR\r\n            ramda = function () {\r\n                var items = args[0];\r\n                source.push.apply(source, __spreadArray([], __read(items), false));\r\n            };\r\n            tail = args.slice(1);\r\n        }\r\n        else if (args.length >= 2 &&\r\n            args[0].next instanceof Function &&\r\n            args[1].next instanceof Function) {\r\n            // RANGE CONSTRUCTOR\r\n            ramda = function () {\r\n                var first = args[0];\r\n                var last = args[1];\r\n                source.assign(first, last);\r\n            };\r\n            tail = args.slice(2);\r\n        }\r\n        else {\r\n            // DEFAULT CONSTRUCTOR\r\n            ramda = null;\r\n            tail = args;\r\n        }\r\n        return { ramda: ramda, tail: tail };\r\n    }\r\n    IAssociativeContainer.construct = construct;\r\n})(IAssociativeContainer = exports.IAssociativeContainer || (exports.IAssociativeContainer = {}));\r\n//# sourceMappingURL=IAssociativeContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListIterator = void 0;\r\nvar ErrorGenerator_1 = require(\"../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------------- */\r\n    function ListIterator(prev, next, value) {\r\n        this.prev_ = prev;\r\n        this.next_ = next;\r\n        this.value_ = value;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_prev = function (it, prev) {\r\n        it.prev_ = prev;\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_next = function (it, next) {\r\n        it.next_ = next;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.prev = function () {\r\n        return this.prev_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.next = function () {\r\n        return this.next_;\r\n    };\r\n    Object.defineProperty(ListIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            this._Try_value();\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ListIterator.prototype._Try_value = function () {\r\n        if (this.value_ === undefined &&\r\n            this.equals(this.source().end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.iterator_end_value(this.source());\r\n    };\r\n    /* ---------------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.equals = function (obj) {\r\n        return this === obj;\r\n    };\r\n    return ListIterator;\r\n}());\r\nexports.ListIterator = ListIterator;\r\n//# sourceMappingURL=ListIterator.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.next = exports.prev = exports.advance = exports.distance = exports.size = exports.empty = void 0;\r\nvar InvalidArgument_1 = require(\"../exception/InvalidArgument\");\r\n/* =========================================================\r\n    GLOBAL FUNCTIONS\r\n        - ACCESSORS\r\n        - MOVERS\r\n        - FACTORIES\r\n============================================================\r\n    ACCESSORS\r\n--------------------------------------------------------- */\r\n/**\r\n * Test whether a container is empty.\r\n *\r\n * @param source Target container.\r\n * @return Whether empty or not.\r\n */\r\nfunction empty(source) {\r\n    if (source instanceof Array)\r\n        return source.length !== 0;\r\n    else\r\n        return source.empty();\r\n}\r\nexports.empty = empty;\r\n/**\r\n * Get number of elements of a container.\r\n *\r\n * @param source Target container.\r\n * @return The number of elements in the container.\r\n */\r\nfunction size(source) {\r\n    if (source instanceof Array)\r\n        return source.length;\r\n    else\r\n        return source.size();\r\n}\r\nexports.size = size;\r\nfunction distance(first, last) {\r\n    if (first.index instanceof Function)\r\n        return _Distance_via_index(first, last);\r\n    var ret = 0;\r\n    for (; !first.equals(last); first = first.next())\r\n        ++ret;\r\n    return ret;\r\n}\r\nexports.distance = distance;\r\nfunction _Distance_via_index(first, last) {\r\n    var x = first.index();\r\n    var y = last.index();\r\n    if (first.base instanceof Function)\r\n        return x - y;\r\n    else\r\n        return y - x;\r\n}\r\nfunction advance(it, n) {\r\n    if (n === 0)\r\n        return it;\r\n    else if (it.advance instanceof Function)\r\n        return it.advance(n);\r\n    var stepper;\r\n    if (n < 0) {\r\n        if (!(it.prev instanceof Function))\r\n            throw new InvalidArgument_1.InvalidArgument(\"Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.\");\r\n        stepper = function (it) { return it.prev(); };\r\n        n = -n;\r\n    }\r\n    else\r\n        stepper = function (it) { return it.next(); };\r\n    while (n-- > 0)\r\n        it = stepper(it);\r\n    return it;\r\n}\r\nexports.advance = advance;\r\n/**\r\n * Get previous iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move prev.\r\n * @return An iterator moved to prev *n* steps.\r\n */\r\nfunction prev(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.prev();\r\n    else\r\n        return advance(it, -n);\r\n}\r\nexports.prev = prev;\r\n/**\r\n * Get next iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move next.\r\n * @return Iterator moved to next *n* steps.\r\n */\r\nfunction next(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.next();\r\n    else\r\n        return advance(it, n);\r\n}\r\nexports.next = next;\r\n//# sourceMappingURL=global.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListContainer = void 0;\r\nvar Container_1 = require(\"../../../base/container/Container\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar Repeater_1 = require(\"../../iterator/disposable/Repeater\");\r\nvar NativeArrayIterator_1 = require(\"../../iterator/disposable/NativeArrayIterator\");\r\nvar global_1 = require(\"../../../iterator/global\");\r\nvar ErrorGenerator_1 = require(\"../../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Container.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListContainer = /** @class */ (function (_super) {\r\n    __extends(ListContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function ListContainer() {\r\n        var _this = _super.call(this) || this;\r\n        // INIT MEMBERS\r\n        _this.end_ = _this._Create_iterator(null, null);\r\n        _this.clear();\r\n        return _this;\r\n    }\r\n    ListContainer.prototype.assign = function (par1, par2) {\r\n        this.clear();\r\n        this.insert(this.end(), par1, par2);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.clear = function () {\r\n        // DISCONNECT NODES\r\n        ListIterator_1.ListIterator._Set_prev(this.end_, this.end_);\r\n        ListIterator_1.ListIterator._Set_next(this.end_, this.end_);\r\n        // RE-SIZE -> 0\r\n        this.begin_ = this.end_;\r\n        this.size_ = 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.resize = function (n) {\r\n        var expansion = n - this.size();\r\n        if (expansion > 0)\r\n            this.insert(this.end(), expansion, undefined);\r\n        else if (expansion < 0)\r\n            this.erase((0, global_1.advance)(this.end(), -expansion), this.end());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.begin = function () {\r\n        return this.begin_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.end = function () {\r\n        return this.end_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - PUSH & POP\r\n            - INSERT\r\n            - ERASE\r\n            - POST-PROCESS\r\n    ============================================================\r\n        PUSH & POP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_front = function (val) {\r\n        this.insert(this.begin_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_back = function (val) {\r\n        this.insert(this.end_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_front = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_front\");\r\n        this.erase(this.begin_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_back = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_back\");\r\n        this.erase(this.end_.prev());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(this.end(), first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    ListContainer.prototype.insert = function (pos) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        // VALIDATION\r\n        if (pos.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (pos.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        // BRANCHES\r\n        if (args.length === 1)\r\n            return this._Insert_by_repeating_val(pos, 1, args[0]);\r\n        else if (args.length === 2 && typeof args[0] === \"number\")\r\n            return this._Insert_by_repeating_val(pos, args[0], args[1]);\r\n        else\r\n            return this._Insert_by_range(pos, args[0], args[1]);\r\n    };\r\n    ListContainer.prototype._Insert_by_repeating_val = function (position, n, val) {\r\n        var first = new Repeater_1.Repeater(0, val);\r\n        var last = new Repeater_1.Repeater(n);\r\n        return this._Insert_by_range(position, first, last);\r\n    };\r\n    ListContainer.prototype._Insert_by_range = function (position, begin, end) {\r\n        var prev = position.prev();\r\n        var first = null;\r\n        var size = 0;\r\n        for (var it = begin; it.equals(end) === false; it = it.next()) {\r\n            // CONSTRUCT ITEM, THE NEW ELEMENT\r\n            var item = this._Create_iterator(prev, null, it.value);\r\n            if (size === 0)\r\n                first = item;\r\n            // PLACE ITEM ON THE NEXT OF \"PREV\"\r\n            ListIterator_1.ListIterator._Set_next(prev, item);\r\n            // SHIFT CURRENT ITEM TO PREVIOUS\r\n            prev = item;\r\n            ++size;\r\n        }\r\n        // WILL FIRST BE THE BEGIN?\r\n        if (position.equals(this.begin()) === true)\r\n            this.begin_ = first;\r\n        // CONNECT BETWEEN LAST AND POSITION\r\n        ListIterator_1.ListIterator._Set_next(prev, position);\r\n        ListIterator_1.ListIterator._Set_prev(position, prev);\r\n        this.size_ += size;\r\n        return first;\r\n    };\r\n    ListContainer.prototype.erase = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        return this._Erase_by_range(first, last);\r\n    };\r\n    ListContainer.prototype._Erase_by_range = function (first, last) {\r\n        // VALIDATION\r\n        if (first.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (first.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        else if (first.equals(this.end_))\r\n            return this.end_;\r\n        // FIND PREV AND NEXT\r\n        var prev = first.prev();\r\n        // SHRINK\r\n        ListIterator_1.ListIterator._Set_next(prev, last);\r\n        ListIterator_1.ListIterator._Set_prev(last, prev);\r\n        for (var it = first; !it.equals(last); it = it.next()) {\r\n            it.erased_ = true;\r\n            --this.size_;\r\n        }\r\n        if (first.equals(this.begin_))\r\n            this.begin_ = last;\r\n        return last;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        SWAP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.swap = function (obj) {\r\n        var _a, _b, _c;\r\n        _a = __read([obj.begin_, this.begin_], 2), this.begin_ = _a[0], obj.begin_ = _a[1];\r\n        _b = __read([obj.end_, this.end_], 2), this.end_ = _b[0], obj.end_ = _b[1];\r\n        _c = __read([obj.size_, this.size_], 2), this.size_ = _c[0], obj.size_ = _c[1];\r\n    };\r\n    return ListContainer;\r\n}(Container_1.Container));\r\nexports.ListContainer = ListContainer;\r\n//# sourceMappingURL=ListContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Repeater = void 0;\r\nvar Repeater = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function Repeater(index, value) {\r\n        this.index_ = index;\r\n        this.value_ = value;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(Repeater.prototype, \"value\", {\r\n        get: function () {\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS & COMPARE\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    Repeater.prototype.equals = function (obj) {\r\n        return this.index_ === obj.index_;\r\n    };\r\n    return Repeater;\r\n}());\r\nexports.Repeater = Repeater;\r\n//# sourceMappingURL=Repeater.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ReverseIterator = void 0;\r\n/**\r\n * Basic reverse iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ReverseIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param base The base iterator.\r\n     */\r\n    function ReverseIterator(base) {\r\n        this.base_ = base.prev();\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Get source container.\r\n     *\r\n     * @return The source container.\r\n     */\r\n    ReverseIterator.prototype.source = function () {\r\n        return this.base_.source();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.base = function () {\r\n        return this.base_.next();\r\n    };\r\n    Object.defineProperty(ReverseIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            return this.base_.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.prev = function () {\r\n        // this.base().next()\r\n        return this._Create_neighbor(this.base().next());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.next = function () {\r\n        // this.base().prev()\r\n        return this._Create_neighbor(this.base_);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.equals = function (obj) {\r\n        return this.base_.equals(obj.base_);\r\n    };\r\n    return ReverseIterator;\r\n}());\r\nexports.ReverseIterator = ReverseIterator;\r\n//# sourceMappingURL=ReverseIterator.js.map","\"use strict\";\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashBuckets = void 0;\r\n/**\r\n * Hash buckets\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashBuckets = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function HashBuckets(fetcher, hasher) {\r\n        this.fetcher_ = fetcher;\r\n        this.hasher_ = hasher;\r\n        this.max_load_factor_ = DEFAULT_MAX_FACTOR;\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    }\r\n    HashBuckets.prototype.clear = function () {\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    };\r\n    HashBuckets.prototype.rehash = function (length) {\r\n        var e_1, _a, e_2, _b;\r\n        length = Math.max(length, MIN_BUCKET_COUNT);\r\n        var data = [];\r\n        for (var i = 0; i < length; ++i)\r\n            data.push([]);\r\n        try {\r\n            for (var _c = __values(this.data_), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var row = _d.value;\r\n                try {\r\n                    for (var row_1 = (e_2 = void 0, __values(row)), row_1_1 = row_1.next(); !row_1_1.done; row_1_1 = row_1.next()) {\r\n                        var elem = row_1_1.value;\r\n                        var index = this.hasher_(this.fetcher_(elem)) % data.length;\r\n                        data[index].push(elem);\r\n                    }\r\n                }\r\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (row_1_1 && !row_1_1.done && (_b = row_1.return)) _b.call(row_1);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        this.data_ = data;\r\n    };\r\n    HashBuckets.prototype.reserve = function (length) {\r\n        if (length > this.capacity()) {\r\n            length = Math.floor(length / this.max_load_factor_);\r\n            this.rehash(length);\r\n        }\r\n    };\r\n    HashBuckets.prototype.initialize = function () {\r\n        for (var i = 0; i < MIN_BUCKET_COUNT; ++i)\r\n            this.data_.push([]);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.length = function () {\r\n        return this.data_.length;\r\n    };\r\n    HashBuckets.prototype.capacity = function () {\r\n        return this.data_.length * this.max_load_factor_;\r\n    };\r\n    HashBuckets.prototype.at = function (index) {\r\n        return this.data_[index];\r\n    };\r\n    HashBuckets.prototype.load_factor = function () {\r\n        return this.size_ / this.length();\r\n    };\r\n    HashBuckets.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        if (z === null)\r\n            return this.max_load_factor_;\r\n        else\r\n            this.max_load_factor_ = z;\r\n    };\r\n    HashBuckets.prototype.hash_function = function () {\r\n        return this.hasher_;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS I/O\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.index = function (elem) {\r\n        return this.hasher_(this.fetcher_(elem)) % this.length();\r\n    };\r\n    HashBuckets.prototype.insert = function (val) {\r\n        var capacity = this.capacity();\r\n        if (++this.size_ > capacity)\r\n            this.reserve(capacity * 2);\r\n        var index = this.index(val);\r\n        this.data_[index].push(val);\r\n    };\r\n    HashBuckets.prototype.erase = function (val) {\r\n        var index = this.index(val);\r\n        var bucket = this.data_[index];\r\n        for (var i = 0; i < bucket.length; ++i)\r\n            if (bucket[i] === val) {\r\n                bucket.splice(i, 1);\r\n                --this.size_;\r\n                break;\r\n            }\r\n    };\r\n    return HashBuckets;\r\n}());\r\nexports.HashBuckets = HashBuckets;\r\nvar MIN_BUCKET_COUNT = 10;\r\nvar DEFAULT_MAX_FACTOR = 1.0;\r\n//# sourceMappingURL=HashBuckets.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.make_pair = exports.Pair = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Pair of two elements.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Pair = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first The first element.\r\n     * @param second The second element.\r\n     */\r\n    function Pair(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.equals = function (pair) {\r\n        return ((0, comparators_1.equal_to)(this.first, pair.first) &&\r\n            (0, comparators_1.equal_to)(this.second, pair.second));\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.less = function (pair) {\r\n        if ((0, comparators_1.equal_to)(this.first, pair.first) === false)\r\n            return (0, comparators_1.less)(this.first, pair.first);\r\n        else\r\n            return (0, comparators_1.less)(this.second, pair.second);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first, this.second);\r\n    };\r\n    return Pair;\r\n}());\r\nexports.Pair = Pair;\r\n/**\r\n * Create a {@link Pair}.\r\n *\r\n * @param first The 1st element.\r\n * @param second The 2nd element.\r\n *\r\n * @return A {@link Pair} object.\r\n */\r\nfunction make_pair(first, second) {\r\n    return new Pair(first, second);\r\n}\r\nexports.make_pair = make_pair;\r\n//# sourceMappingURL=Pair.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueSet_1 = require(\"../base/container/UniqueSet\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar SetElementList_1 = require(\"../internal/container/associative/SetElementList\");\r\nvar SetHashBuckets_1 = require(\"../internal/hash/SetHashBuckets\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Set based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashSet = /** @class */ (function (_super) {\r\n    __extends(HashSet, _super);\r\n    function HashSet() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new SetElementList_1.SetElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashSet,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new SetHashBuckets_1.SetHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        SetElementList_1.SetElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        SetHashBuckets_1.SetHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashSet.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashSet.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashSet.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashSet.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_size = function (n) {\r\n        return this.buckets_.at(n).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashSet.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n            - SWAP\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Insert_by_key = function (key) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(key);\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    HashSet.prototype._Insert_by_hint = function (hint, key) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, key);\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashSet.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashSet;\r\n}(UniqueSet_1.UniqueSet));\r\nexports.HashSet = HashSet;\r\n/**\r\n *\r\n */\r\n(function (HashSet) {\r\n    // BODY\r\n    HashSet.Iterator = SetElementList_1.SetElementList.Iterator;\r\n    HashSet.ReverseIterator = SetElementList_1.SetElementList.ReverseIterator;\r\n})(HashSet = exports.HashSet || (exports.HashSet = {}));\r\nexports.HashSet = HashSet;\r\n//# sourceMappingURL=HashSet.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing set elements.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source container type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetElementList = /** @class */ (function (_super) {\r\n    __extends(SetElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function SetElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    SetElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return SetElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    SetElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    SetElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return SetElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.SetElementList = SetElementList;\r\n/**\r\n *\r\n */\r\n(function (SetElementList) {\r\n    /**\r\n     * Iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.source_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.source_.associative();\r\n        };\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    SetElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverser iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    SetElementList.ReverseIterator = ReverseIterator;\r\n})(SetElementList = exports.SetElementList || (exports.SetElementList = {}));\r\nexports.SetElementList = SetElementList;\r\n//# sourceMappingURL=SetElementList.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for set containers\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetHashBuckets = /** @class */ (function (_super) {\r\n    __extends(SetHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source set container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function SetHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    SetHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    SetHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    SetHashBuckets.prototype.find = function (val) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(val) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.value, val))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return SetHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.SetHashBuckets = SetHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.value;\r\n}\r\n//# sourceMappingURL=SetHashBuckets.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar MapContainer_1 = require(\"./MapContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic map container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Source Derived type extending this {@link UniqueMap}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueMap = /** @class */ (function (_super) {\r\n    __extends(UniqueMap, _super);\r\n    function UniqueMap() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    /**\r\n     * Get a value.\r\n     *\r\n     * @param key Key to search for.\r\n     * @return The value mapped by the key.\r\n     */\r\n    UniqueMap.prototype.get = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"get\", key);\r\n        return it.second;\r\n    };\r\n    /**\r\n     * Take a value.\r\n     *\r\n     * Get a value, or set the value and returns it.\r\n     *\r\n     * @param key Key to search for.\r\n     * @param generator Value generator when the matched key not found\r\n     * @returns Value, anyway\r\n     */\r\n    UniqueMap.prototype.take = function (key, generator) {\r\n        var it = this.find(key);\r\n        return it.equals(this.end())\r\n            ? this.emplace(key, generator()).first.second\r\n            : it.second;\r\n    };\r\n    /**\r\n     * Set a value with key.\r\n     *\r\n     * @param key Key to be mapped or search for.\r\n     * @param val Value to insert or assign.\r\n     */\r\n    UniqueMap.prototype.set = function (key, val) {\r\n        this.insert_or_assign(key, val);\r\n    };\r\n    UniqueMap.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueMap.prototype._Insert_by_range = function (first, last) {\r\n        for (var it = first; !it.equals(last); it = it.next())\r\n            this.emplace(it.value.first, it.value.second);\r\n    };\r\n    UniqueMap.prototype.insert_or_assign = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 2) {\r\n            return this._Insert_or_assign_with_key_value(args[0], args[1]);\r\n        }\r\n        else if (args.length === 3) {\r\n            // INSERT OR ASSIGN AN ELEMENT\r\n            return this._Insert_or_assign_with_hint(args[0], args[1], args[2]);\r\n        }\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_key_value = function (key, value) {\r\n        var ret = this.emplace(key, value);\r\n        if (ret.second === false)\r\n            ret.first.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_hint = function (hint, key, value) {\r\n        var ret = this.emplace_hint(hint, key, value);\r\n        if (ret.second !== value)\r\n            ret.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_key(param);\r\n    };\r\n    UniqueMap.prototype._Extract_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        var ret = it.value;\r\n        this._Erase_by_range(it);\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueMap.prototype._Erase_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());)\r\n            if (this.has(it.first) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n    };\r\n    return UniqueMap;\r\n}(MapContainer_1.MapContainer));\r\nexports.UniqueMap = UniqueMap;\r\n//# sourceMappingURL=UniqueMap.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic map container.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link MapContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapContainer = /** @class */ (function (_super) {\r\n    __extends(MapContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function MapContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this.insert(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    MapContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this.emplace(args[0].first, args[0].second);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this.emplace_hint(args[0], args[1].first, args[1].second);\r\n    };\r\n    MapContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            (args[0] instanceof this.end().constructor === false ||\r\n                args[0].source() !== this))\r\n            return this._Erase_by_key(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    MapContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return MapContainer;\r\n}(Container_1.Container));\r\nexports.MapContainer = MapContainer;\r\n//# sourceMappingURL=MapContainer.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueMap_1 = require(\"../base/container/UniqueMap\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar MapElementList_1 = require(\"../internal/container/associative/MapElementList\");\r\nvar MapHashBuckets_1 = require(\"../internal/hash/MapHashBuckets\");\r\nvar Entry_1 = require(\"../utility/Entry\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Map based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashMap = /** @class */ (function (_super) {\r\n    __extends(HashMap, _super);\r\n    function HashMap() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new MapElementList_1.MapElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashMap,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new MapHashBuckets_1.MapHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        MapElementList_1.MapElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        MapHashBuckets_1.MapHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashMap.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashMap.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashMap.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashMap.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_size = function (index) {\r\n        return this.buckets_.at(index).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashMap.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace = function (key, val) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(new Entry_1.Entry(key, val));\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace_hint = function (hint, key, val) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, new Entry_1.Entry(key, val));\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashMap.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashMap.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashMap;\r\n}(UniqueMap_1.UniqueMap));\r\nexports.HashMap = HashMap;\r\n/**\r\n *\r\n */\r\n(function (HashMap) {\r\n    // BODY\r\n    HashMap.Iterator = MapElementList_1.MapElementList.Iterator;\r\n    HashMap.ReverseIterator = MapElementList_1.MapElementList.ReverseIterator;\r\n})(HashMap = exports.HashMap || (exports.HashMap = {}));\r\nexports.HashMap = HashMap;\r\n//# sourceMappingURL=HashMap.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing map elements.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapElementList = /** @class */ (function (_super) {\r\n    __extends(MapElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function MapElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    MapElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return MapElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    MapElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    MapElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return MapElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.MapElementList = MapElementList;\r\n/**\r\n *\r\n */\r\n(function (MapElementList) {\r\n    /**\r\n     * Iterator of map container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.list_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.list_.associative();\r\n        };\r\n        Object.defineProperty(Iterator.prototype, \"first\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Iterator.prototype, \"second\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.second;\r\n            },\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            set: function (val) {\r\n                this.value.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    MapElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverse iterator of map container storing elements a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        Object.defineProperty(ReverseIterator.prototype, \"first\", {\r\n            /* ---------------------------------------------------------\r\n                ACCESSORS\r\n            --------------------------------------------------------- */\r\n            /**\r\n             * Get the first, key element.\r\n             *\r\n             * @return The first element.\r\n             */\r\n            get: function () {\r\n                return this.base_.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ReverseIterator.prototype, \"second\", {\r\n            /**\r\n             * Get the second, stored element.\r\n             *\r\n             * @return The second element.\r\n             */\r\n            get: function () {\r\n                return this.base_.second;\r\n            },\r\n            /**\r\n             * Set the second, stored element.\r\n             *\r\n             * @param val The value to set.\r\n             */\r\n            set: function (val) {\r\n                this.base_.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    MapElementList.ReverseIterator = ReverseIterator;\r\n})(MapElementList = exports.MapElementList || (exports.MapElementList = {}));\r\nexports.MapElementList = MapElementList;\r\n//# sourceMappingURL=MapElementList.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for map containers.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapHashBuckets = /** @class */ (function (_super) {\r\n    __extends(MapHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source map container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function MapHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    MapHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    MapHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    MapHashBuckets.prototype.find = function (key) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(key) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.first, key))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return MapHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.MapHashBuckets = MapHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.first;\r\n}\r\n//# sourceMappingURL=MapHashBuckets.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Entry = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Entry for mapping.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Entry = /** @class */ (function () {\r\n    /**\r\n     * Intializer Constructor.\r\n     *\r\n     * @param first The first, key element.\r\n     * @param second The second, mapped element.\r\n     */\r\n    function Entry(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.equals = function (obj) {\r\n        return (0, comparators_1.equal_to)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.less = function (obj) {\r\n        return (0, comparators_1.less)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first);\r\n    };\r\n    return Entry;\r\n}());\r\nexports.Entry = Entry;\r\n//# sourceMappingURL=Entry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event = /** @class */ (function () {\r\n    function Event(type, init) {\r\n        this.type = type;\r\n        if (init)\r\n            Object.assign(this, init);\r\n    }\r\n    return Event;\r\n}());\r\nexports.Event = Event;\r\n//# sourceMappingURL=Event.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar node_1 = require(\"tstl/utility/node\");\r\nif (node_1.is_node())\r\n    global.WebSocket = require(\"./WebSocket\").WebSocket;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar websocket_1 = require(\"websocket\");\r\nvar EventTarget_1 = require(\"./events/EventTarget\");\r\nvar Event_1 = require(\"./events/Event\");\r\nvar CloseEvent_1 = require(\"./events/CloseEvent\");\r\nvar MessageEvent_1 = require(\"./events/MessageEvent\");\r\nvar ErrorEvent_1 = require(\"./events/ErrorEvent\");\r\nvar WebSocket = /** @class */ (function (_super) {\r\n    __extends(WebSocket, _super);\r\n    /* ----------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    ---------------------------------------------------------------- */\r\n    function WebSocket(url, protocols) {\r\n        var _this = _super.call(this) || this;\r\n        _this.on_ = {};\r\n        _this.state_ = WebSocket.CONNECTING;\r\n        //----\r\n        // CLIENT\r\n        //----\r\n        // PREPARE SOCKET\r\n        _this.client_ = new websocket_1.client();\r\n        _this.client_.on(\"connect\", _this._Handle_connect.bind(_this));\r\n        _this.client_.on(\"connectFailed\", _this._Handle_error.bind(_this));\r\n        if (typeof protocols === \"string\")\r\n            protocols = [protocols];\r\n        // DO CONNECT\r\n        _this.client_.connect(url, protocols);\r\n        return _this;\r\n    }\r\n    WebSocket.prototype.close = function (code, reason) {\r\n        this.state_ = WebSocket.CLOSING;\r\n        if (code === undefined)\r\n            this.connection_.sendCloseFrame();\r\n        else\r\n            this.connection_.sendCloseFrame(code, reason, true);\r\n    };\r\n    /* ================================================================\r\n        ACCESSORS\r\n            - SENDER\r\n            - PROPERTIES\r\n            - LISTENERS\r\n    ===================================================================\r\n        SENDER\r\n    ---------------------------------------------------------------- */\r\n    WebSocket.prototype.send = function (data) {\r\n        if (typeof data.valueOf() === \"string\")\r\n            this.connection_.sendUTF(data);\r\n        else {\r\n            var buffer = void 0;\r\n            if (data instanceof Buffer)\r\n                buffer = data;\r\n            else if (data instanceof Blob)\r\n                buffer = new Buffer(data, \"blob\");\r\n            else if (data.buffer)\r\n                buffer = new Buffer(data.buffer);\r\n            else\r\n                buffer = new Buffer(data);\r\n            this.connection_.sendBytes(buffer);\r\n        }\r\n    };\r\n    Object.defineProperty(WebSocket.prototype, \"url\", {\r\n        /* ----------------------------------------------------------------\r\n            PROPERTIES\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.client_.url.href;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"protocol\", {\r\n        get: function () {\r\n            return this.client_.protocols\r\n                ? this.client_.protocols[0]\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"extensions\", {\r\n        get: function () {\r\n            return this.connection_ && this.connection_.extensions\r\n                ? this.connection_.extensions[0].name\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"readyState\", {\r\n        get: function () {\r\n            return this.state_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"bufferedAmount\", {\r\n        get: function () {\r\n            return this.connection_.bytesWaitingToFlush;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return \"arraybuffer\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onopen\", {\r\n        /* ----------------------------------------------------------------\r\n            LISTENERS\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.on_.open;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"open\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onclose\", {\r\n        get: function () {\r\n            return this.on_.close;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"close\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onmessage\", {\r\n        get: function () {\r\n            return this.on_.message;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"message\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onerror\", {\r\n        get: function () {\r\n            return this.on_.error;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"error\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Set_on = function (type, listener) {\r\n        if (this.on_[type])\r\n            this.removeEventListener(type, this.on_[type]);\r\n        this.addEventListener(type, listener);\r\n        this.on_[type] = listener;\r\n    };\r\n    /* ----------------------------------------------------------------\r\n        SOCKET HANDLERS\r\n    ---------------------------------------------------------------- */\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_connect = function (connection) {\r\n        this.connection_ = connection;\r\n        this.state_ = WebSocket.OPEN;\r\n        this.connection_.on(\"message\", this._Handle_message.bind(this));\r\n        this.connection_.on(\"error\", this._Handle_error.bind(this));\r\n        this.connection_.on(\"close\", this._Handle_close.bind(this));\r\n        var event = new Event_1.Event(\"open\", EVENT_INIT);\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_close = function (code, reason) {\r\n        var event = new CloseEvent_1.CloseEvent(\"close\", __assign({}, EVENT_INIT, { code: code, reason: reason }));\r\n        this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_message = function (message) {\r\n        var event = new MessageEvent_1.MessageEvent(\"message\", __assign({}, EVENT_INIT, { data: message.binaryData\r\n                ? message.binaryData\r\n                : message.utf8Data }));\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_error = function (error) {\r\n        var event = new ErrorEvent_1.ErrorEvent(\"error\", __assign({}, EVENT_INIT, { error: error, message: error.message }));\r\n        if (this.state_ === WebSocket.CONNECTING)\r\n            this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    return WebSocket;\r\n}(EventTarget_1.EventTarget));\r\nexports.WebSocket = WebSocket;\r\n(function (WebSocket) {\r\n    WebSocket.CONNECTING = 0;\r\n    WebSocket.OPEN = 1;\r\n    WebSocket.CLOSING = 2;\r\n    WebSocket.CLOSED = 3;\r\n})(WebSocket = exports.WebSocket || (exports.WebSocket = {}));\r\nexports.WebSocket = WebSocket;\r\nvar EVENT_INIT = {\r\n    bubbles: false,\r\n    cancelable: false\r\n};\r\n//# sourceMappingURL=WebSocket.js.map","\"use strict\";\r\nvar __values = (this && this.__values) || function (o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar HashSet_1 = require(\"tstl/container/HashSet\");\r\nvar HashMap_1 = require(\"tstl/container/HashMap\");\r\nvar EventTarget = /** @class */ (function () {\r\n    function EventTarget() {\r\n        this.listeners_ = new HashMap_1.HashMap();\r\n        this.created_at_ = new Date();\r\n    }\r\n    EventTarget.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        // FIND LISTENERS\r\n        var it = this.listeners_.find(event.type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        // SET DEFAULT ARGUMENTS\r\n        event.target = this;\r\n        event.timeStamp = new Date().getTime() - this.created_at_.getTime();\r\n        try {\r\n            // CALL THE LISTENERS\r\n            for (var _b = __values(it.second), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var listener = _c.value;\r\n                listener(event);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    EventTarget.prototype.addEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            it = this.listeners_.emplace(type, new HashSet_1.HashSet()).first;\r\n        it.second.insert(listener);\r\n    };\r\n    EventTarget.prototype.removeEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        it.second.erase(listener);\r\n        if (it.second.empty())\r\n            this.listeners_.erase(it);\r\n    };\r\n    return EventTarget;\r\n}());\r\nexports.EventTarget = EventTarget;\r\n//# sourceMappingURL=EventTarget.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return CloseEvent;\r\n}(Event_1.Event));\r\nexports.CloseEvent = CloseEvent;\r\n//# sourceMappingURL=CloseEvent.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar MessageEvent = /** @class */ (function (_super) {\r\n    __extends(MessageEvent, _super);\r\n    function MessageEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return MessageEvent;\r\n}(Event_1.Event));\r\nexports.MessageEvent = MessageEvent;\r\n//# sourceMappingURL=MessageEvent.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event_1.Event));\r\nexports.ErrorEvent = ErrorEvent;\r\n//# sourceMappingURL=ErrorEvent.js.map","const {bech32, hex, utf8} = require('@scure/base')\n\n// defaults for encode; default timestamp is current time at call\nconst DEFAULTNETWORK = {\n  // default network is bitcoin\n  bech32: 'bc',\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  validWitnessVersions: [0]\n}\nconst TESTNETWORK = {\n  bech32: 'tb',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst REGTESTNETWORK = {\n  bech32: 'bcrt',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst SIMNETWORK = {\n  bech32: 'sb',\n  pubKeyHash: 0x3f,\n  scriptHash: 0x7b,\n  validWitnessVersions: [0]\n}\n\nconst FEATUREBIT_ORDER = [\n  'option_data_loss_protect',\n  'initial_routing_sync',\n  'option_upfront_shutdown_script',\n  'gossip_queries',\n  'var_onion_optin',\n  'gossip_queries_ex',\n  'option_static_remotekey',\n  'payment_secret',\n  'basic_mpp',\n  'option_support_large_channel'\n]\n\nconst DIVISORS = {\n  m: BigInt(1e3),\n  u: BigInt(1e6),\n  n: BigInt(1e9),\n  p: BigInt(1e12)\n}\n\nconst MAX_MILLISATS = BigInt('2100000000000000000')\n\nconst MILLISATS_PER_BTC = BigInt(1e11)\n\nconst TAGCODES = {\n  payment_hash: 1,\n  payment_secret: 16,\n  description: 13,\n  payee: 19,\n  description_hash: 23, // commit to longer descriptions (used by lnurl-pay)\n  expiry: 6, // default: 3600 (1 hour)\n  min_final_cltv_expiry: 24, // default: 9\n  fallback_address: 9,\n  route_hint: 3, // for extra routing info (private etc.)\n  feature_bits: 5,\n  metadata: 27\n}\n\n// reverse the keys and values of TAGCODES and insert into TAGNAMES\nconst TAGNAMES = {}\nfor (let i = 0, keys = Object.keys(TAGCODES); i < keys.length; i++) {\n  const currentName = keys[i]\n  const currentCode = TAGCODES[keys[i]].toString()\n  TAGNAMES[currentCode] = currentName\n}\n\nconst TAGPARSERS = {\n  1: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  16: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  13: words => utf8.encode(bech32.fromWordsUnsafe(words)), // string variable length\n  19: words => hex.encode(bech32.fromWordsUnsafe(words)), // 264 bits\n  23: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  27: words => hex.encode(bech32.fromWordsUnsafe(words)), // variable\n  6: wordsToIntBE, // default: 3600 (1 hour)\n  24: wordsToIntBE, // default: 9\n  3: routingInfoParser, // for extra routing info (private etc.)\n  5: featureBitsParser // keep feature bits as array of 5 bit words\n}\n\nfunction getUnknownParser(tagCode) {\n  return words => ({\n    tagCode: parseInt(tagCode),\n    words: bech32.encode('unknown', words, Number.MAX_SAFE_INTEGER)\n  })\n}\n\nfunction wordsToIntBE(words) {\n  return words.reverse().reduce((total, item, index) => {\n    return total + item * Math.pow(32, index)\n  }, 0)\n}\n\n// first convert from words to buffer, trimming padding where necessary\n// parse in 51 byte chunks. See encoder for details.\nfunction routingInfoParser(words) {\n  const routes = []\n  let pubkey,\n    shortChannelId,\n    feeBaseMSats,\n    feeProportionalMillionths,\n    cltvExpiryDelta\n  let routesBuffer = bech32.fromWordsUnsafe(words)\n  while (routesBuffer.length > 0) {\n    pubkey = hex.encode(routesBuffer.slice(0, 33)) // 33 bytes\n    shortChannelId = hex.encode(routesBuffer.slice(33, 41)) // 8 bytes\n    feeBaseMSats = parseInt(hex.encode(routesBuffer.slice(41, 45)), 16) // 4 bytes\n    feeProportionalMillionths = parseInt(\n      hex.encode(routesBuffer.slice(45, 49)),\n      16\n    ) // 4 bytes\n    cltvExpiryDelta = parseInt(hex.encode(routesBuffer.slice(49, 51)), 16) // 2 bytes\n\n    routesBuffer = routesBuffer.slice(51)\n\n    routes.push({\n      pubkey,\n      short_channel_id: shortChannelId,\n      fee_base_msat: feeBaseMSats,\n      fee_proportional_millionths: feeProportionalMillionths,\n      cltv_expiry_delta: cltvExpiryDelta\n    })\n  }\n  return routes\n}\n\nfunction featureBitsParser(words) {\n  const bools = words\n    .slice()\n    .reverse()\n    .map(word => [\n      !!(word & 0b1),\n      !!(word & 0b10),\n      !!(word & 0b100),\n      !!(word & 0b1000),\n      !!(word & 0b10000)\n    ])\n    .reduce((finalArr, itemArr) => finalArr.concat(itemArr), [])\n  while (bools.length < FEATUREBIT_ORDER.length * 2) {\n    bools.push(false)\n  }\n\n  const featureBits = {}\n\n  FEATUREBIT_ORDER.forEach((featureName, index) => {\n    let status\n    if (bools[index * 2]) {\n      status = 'required'\n    } else if (bools[index * 2 + 1]) {\n      status = 'supported'\n    } else {\n      status = 'unsupported'\n    }\n    featureBits[featureName] = status\n  })\n\n  const extraBits = bools.slice(FEATUREBIT_ORDER.length * 2)\n  featureBits.extra_bits = {\n    start_bit: FEATUREBIT_ORDER.length * 2,\n    bits: extraBits,\n    has_required: extraBits.reduce(\n      (result, bit, index) =>\n        index % 2 !== 0 ? result || false : result || bit,\n      false\n    )\n  }\n\n  return featureBits\n}\n\nfunction hrpToMillisat(hrpString, outputString) {\n  let divisor, value\n  if (hrpString.slice(-1).match(/^[munp]$/)) {\n    divisor = hrpString.slice(-1)\n    value = hrpString.slice(0, -1)\n  } else if (hrpString.slice(-1).match(/^[^munp0-9]$/)) {\n    throw new Error('Not a valid multiplier for the amount')\n  } else {\n    value = hrpString\n  }\n\n  if (!value.match(/^\\d+$/))\n    throw new Error('Not a valid human readable amount')\n\n  const valueBN = BigInt(value)\n\n  const millisatoshisBN = divisor\n    ? (valueBN * MILLISATS_PER_BTC) / DIVISORS[divisor]\n    : valueBN * MILLISATS_PER_BTC\n\n  if (\n    (divisor === 'p' && !(valueBN % BigInt(10) === BigInt(0))) ||\n    millisatoshisBN > MAX_MILLISATS\n  ) {\n    throw new Error('Amount is outside of valid range')\n  }\n\n  return outputString ? millisatoshisBN.toString() : millisatoshisBN\n}\n\n// decode will only have extra comments that aren't covered in encode comments.\n// also if anything is hard to read I'll comment.\nfunction decode(paymentRequest, network) {\n  if (typeof paymentRequest !== 'string')\n    throw new Error('Lightning Payment Request must be string')\n  if (paymentRequest.slice(0, 2).toLowerCase() !== 'ln')\n    throw new Error('Not a proper lightning payment request')\n\n  const sections = []\n  const decoded = bech32.decode(paymentRequest, Number.MAX_SAFE_INTEGER)\n  paymentRequest = paymentRequest.toLowerCase()\n  const prefix = decoded.prefix\n  let words = decoded.words\n  let letters = paymentRequest.slice(prefix.length + 1)\n  let sigWords = words.slice(-104)\n  words = words.slice(0, -104)\n\n  // Without reverse lookups, can't say that the multipier at the end must\n  // have a number before it, so instead we parse, and if the second group\n  // doesn't have anything, there's a good chance the last letter of the\n  // coin type got captured by the third group, so just re-regex without\n  // the number.\n  let prefixMatches = prefix.match(/^ln(\\S+?)(\\d*)([a-zA-Z]?)$/)\n  if (prefixMatches && !prefixMatches[2])\n    prefixMatches = prefix.match(/^ln(\\S+)$/)\n  if (!prefixMatches) {\n    throw new Error('Not a proper lightning payment request')\n  }\n\n  // \"ln\" section\n  sections.push({\n    name: 'lightning_network',\n    letters: 'ln'\n  })\n\n  // \"bc\" section\n  const bech32Prefix = prefixMatches[1]\n  let coinNetwork\n  if (!network) {\n    switch (bech32Prefix) {\n      case DEFAULTNETWORK.bech32:\n        coinNetwork = DEFAULTNETWORK\n        break\n      case TESTNETWORK.bech32:\n        coinNetwork = TESTNETWORK\n        break\n      case REGTESTNETWORK.bech32:\n        coinNetwork = REGTESTNETWORK\n        break\n      case SIMNETWORK.bech32:\n        coinNetwork = SIMNETWORK\n        break\n    }\n  } else {\n    if (\n      network.bech32 === undefined ||\n      network.pubKeyHash === undefined ||\n      network.scriptHash === undefined ||\n      !Array.isArray(network.validWitnessVersions)\n    )\n      throw new Error('Invalid network')\n    coinNetwork = network\n  }\n  if (!coinNetwork || coinNetwork.bech32 !== bech32Prefix) {\n    throw new Error('Unknown coin bech32 prefix')\n  }\n  sections.push({\n    name: 'coin_network',\n    letters: bech32Prefix,\n    value: coinNetwork\n  })\n\n  // amount section\n  const value = prefixMatches[2]\n  let millisatoshis\n  if (value) {\n    const divisor = prefixMatches[3]\n    millisatoshis = hrpToMillisat(value + divisor, true)\n    sections.push({\n      name: 'amount',\n      letters: prefixMatches[2] + prefixMatches[3],\n      value: millisatoshis\n    })\n  } else {\n    millisatoshis = null\n  }\n\n  // \"1\" separator\n  sections.push({\n    name: 'separator',\n    letters: '1'\n  })\n\n  // timestamp\n  const timestamp = wordsToIntBE(words.slice(0, 7))\n  words = words.slice(7) // trim off the left 7 words\n  sections.push({\n    name: 'timestamp',\n    letters: letters.slice(0, 7),\n    value: timestamp\n  })\n  letters = letters.slice(7)\n\n  let tagName, parser, tagLength, tagWords\n  // we have no tag count to go on, so just keep hacking off words\n  // until we have none.\n  while (words.length > 0) {\n    const tagCode = words[0].toString()\n    tagName = TAGNAMES[tagCode] || 'unknown_tag'\n    parser = TAGPARSERS[tagCode] || getUnknownParser(tagCode)\n    words = words.slice(1)\n\n    tagLength = wordsToIntBE(words.slice(0, 2))\n    words = words.slice(2)\n\n    tagWords = words.slice(0, tagLength)\n    words = words.slice(tagLength)\n\n    sections.push({\n      name: tagName,\n      tag: letters[0],\n      letters: letters.slice(0, 1 + 2 + tagLength),\n      value: parser(tagWords) // see: parsers for more comments\n    })\n    letters = letters.slice(1 + 2 + tagLength)\n  }\n\n  // signature\n  sections.push({\n    name: 'signature',\n    letters: letters.slice(0, 104),\n    value: hex.encode(bech32.fromWordsUnsafe(sigWords))\n  })\n  letters = letters.slice(104)\n\n  // checksum\n  sections.push({\n    name: 'checksum',\n    letters: letters\n  })\n\n  let result = {\n    paymentRequest,\n    sections,\n\n    get expiry() {\n      let exp = sections.find(s => s.name === 'expiry')\n      if (exp) return getValue('timestamp') + exp.value\n    },\n\n    get route_hints() {\n      return sections.filter(s => s.name === 'route_hint').map(s => s.value)\n    }\n  }\n\n  for (let name in TAGCODES) {\n    if (name === 'route_hint') {\n      // route hints can be multiple, so this won't work for them\n      continue\n    }\n\n    Object.defineProperty(result, name, {\n      get() {\n        return getValue(name)\n      }\n    })\n  }\n\n  return result\n\n  function getValue(name) {\n    let section = sections.find(s => s.name === name)\n    return section ? section.value : undefined\n  }\n}\n\nmodule.exports = {\n  decode,\n  hrpToMillisat\n}\n","// src/index.ts\nimport debug3 from \"debug\";\nimport EventEmitter7 from \"eventemitter3\";\n\n// src/events/dedup.ts\nfunction dedup(event1, event2) {\n  if (event1.created_at > event2.created_at) {\n    return event1;\n  }\n  return event2;\n}\n\n// src/events/index.ts\nimport EventEmitter2 from \"eventemitter3\";\nimport { getEventHash } from \"nostr-tools\";\n\n// src/zap/index.ts\nimport { bech32 } from \"@scure/base\";\nimport EventEmitter from \"eventemitter3\";\nimport { nip57 } from \"nostr-tools\";\nvar DEFAULT_RELAYS = [\n  \"wss://nos.lol\",\n  \"wss://relay.nostr.band\",\n  \"wss://relay.f7z.io\",\n  \"wss://relay.damus.io\",\n  \"wss://nostr.mom\",\n  \"wss://no.str.cr\"\n];\nvar Zap = class extends EventEmitter {\n  ndk;\n  zappedEvent;\n  zappedUser;\n  constructor(args) {\n    super();\n    this.ndk = args.ndk;\n    this.zappedEvent = args.zappedEvent;\n    this.zappedUser = args.zappedUser || this.ndk.getUser({ hexpubkey: this.zappedEvent.pubkey });\n  }\n  async getZapEndpoint() {\n    let lud06;\n    let lud16;\n    let zapEndpoint;\n    let zapEndpointCallback;\n    if (this.zappedEvent) {\n      const zapTag = (await this.zappedEvent.getMatchingTags(\"zap\"))[0];\n      if (zapTag) {\n        switch (zapTag[2]) {\n          case \"lud06\":\n            lud06 = zapTag[1];\n            break;\n          case \"lud16\":\n            lud16 = zapTag[1];\n            break;\n          default:\n            throw new Error(`Unknown zap tag ${zapTag}`);\n        }\n      }\n    }\n    if (this.zappedUser && !lud06 && !lud16) {\n      if (!this.zappedUser.profile) {\n        await this.zappedUser.fetchProfile();\n      }\n      lud06 = (this.zappedUser.profile || {}).lud06;\n      lud16 = (this.zappedUser.profile || {}).lud16;\n    }\n    if (lud16) {\n      const [name, domain] = lud16.split(\"@\");\n      zapEndpoint = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else if (lud06) {\n      const { words } = bech32.decode(lud06, 1e3);\n      const data = bech32.fromWords(words);\n      const utf8Decoder = new TextDecoder(\"utf-8\");\n      zapEndpoint = utf8Decoder.decode(data);\n    }\n    if (!zapEndpoint) {\n      throw new Error(\"No zap endpoint found\");\n    }\n    const response = await fetch(zapEndpoint);\n    const body = await response.json();\n    if (body?.allowsNostr && (body?.nostrPubkey || body?.nostrPubKey)) {\n      zapEndpointCallback = body.callback;\n    }\n    return zapEndpointCallback;\n  }\n  /**\n   * Generates a kind:9734 zap request and returns the payment request\n   * @param amount amount to zap in millisatoshis\n   * @param comment optional comment to include in the zap request\n   * @param extraTags optional extra tags to include in the zap request\n   * @param relays optional relays to ask zapper to publish the zap to\n   * @returns the payment request\n   */\n  async createZapRequest(amount, comment, extraTags, relays) {\n    const zapEndpoint = await this.getZapEndpoint();\n    if (!zapEndpoint) {\n      throw new Error(\"No zap endpoint found\");\n    }\n    if (!this.zappedEvent)\n      throw new Error(\"No zapped event found\");\n    const zapRequest = nip57.makeZapRequest({\n      profile: this.zappedUser.hexpubkey(),\n      // set the event to null since nostr-tools doesn't support nip-33 zaps\n      event: null,\n      amount,\n      comment: comment || \"\",\n      relays: relays ?? this.relays()\n    });\n    if (this.zappedEvent) {\n      const tag = this.zappedEvent.tagReference();\n      if (tag) {\n        zapRequest.tags.push(tag);\n      }\n    }\n    zapRequest.tags.push([\"lnurl\", zapEndpoint]);\n    const zapRequestEvent = new NDKEvent(this.ndk, zapRequest);\n    if (extraTags) {\n      zapRequestEvent.tags = zapRequestEvent.tags.concat(extraTags);\n    }\n    await zapRequestEvent.sign();\n    const zapRequestNostrEvent = await zapRequestEvent.toNostrEvent();\n    const response = await fetch(\n      `${zapEndpoint}?` + new URLSearchParams({\n        amount: amount.toString(),\n        nostr: JSON.stringify(zapRequestNostrEvent)\n      })\n    );\n    const body = await response.json();\n    return body.pr;\n  }\n  /**\n   * @returns the relays to use for the zap request\n   */\n  relays() {\n    let r = [];\n    if (this.ndk?.pool?.relays) {\n      r = this.ndk.pool.urls();\n    }\n    if (!r.length) {\n      r = DEFAULT_RELAYS;\n    }\n    return r;\n  }\n};\n\n// src/events/content-tagger.ts\nimport { nip19 } from \"nostr-tools\";\nfunction generateContentTags(content, tags = []) {\n  const tagRegex = /(@|nostr:)(npub|nprofile|note|nevent)[a-zA-Z0-9]+/g;\n  content = content.replace(tagRegex, (tag) => {\n    try {\n      const entity = tag.split(/(@|nostr:)/)[2];\n      const { type, data } = nip19.decode(entity);\n      let t;\n      switch (type) {\n        case \"npub\":\n          t = [\"p\", data];\n          break;\n        case \"nprofile\":\n          t = [\"p\", data.pubkey];\n          break;\n        case \"nevent\":\n          t = [\"e\", data.id];\n          break;\n        case \"note\":\n          t = [\"e\", data];\n          break;\n        default:\n          return tag;\n      }\n      if (!tags.find((t2) => t2[0] === t[0] && t2[1] === t[1])) {\n        tags.push(t);\n      }\n      return `nostr:${entity}`;\n    } catch (error) {\n      return tag;\n    }\n  });\n  return { content, tags };\n}\n\n// src/events/kind.ts\nfunction isReplaceable() {\n  if (this.kind === void 0)\n    throw new Error(\"Kind not set\");\n  return this.kind >= 1e4 && this.kind < 2e4;\n}\nfunction isParamReplaceable() {\n  if (this.kind === void 0)\n    throw new Error(\"Kind not set\");\n  return this.kind >= 3e4 && this.kind < 4e4;\n}\n\n// src/events/kinds/index.ts\nvar NDKKind = /* @__PURE__ */ ((NDKKind2) => {\n  NDKKind2[NDKKind2[\"Metadata\"] = 0] = \"Metadata\";\n  NDKKind2[NDKKind2[\"Text\"] = 1] = \"Text\";\n  NDKKind2[NDKKind2[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  NDKKind2[NDKKind2[\"Contacts\"] = 3] = \"Contacts\";\n  NDKKind2[NDKKind2[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  NDKKind2[NDKKind2[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  NDKKind2[NDKKind2[\"Repost\"] = 6] = \"Repost\";\n  NDKKind2[NDKKind2[\"Reaction\"] = 7] = \"Reaction\";\n  NDKKind2[NDKKind2[\"BadgeAward\"] = 8] = \"BadgeAward\";\n  NDKKind2[NDKKind2[\"GenericRepost\"] = 16] = \"GenericRepost\";\n  NDKKind2[NDKKind2[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  NDKKind2[NDKKind2[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  NDKKind2[NDKKind2[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  NDKKind2[NDKKind2[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  NDKKind2[NDKKind2[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  NDKKind2[NDKKind2[\"Report\"] = 1984] = \"Report\";\n  NDKKind2[NDKKind2[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  NDKKind2[NDKKind2[\"Zap\"] = 9735] = \"Zap\";\n  NDKKind2[NDKKind2[\"MuteList\"] = 1e4] = \"MuteList\";\n  NDKKind2[NDKKind2[\"PinList\"] = 10001] = \"PinList\";\n  NDKKind2[NDKKind2[\"RelayList\"] = 10002] = \"RelayList\";\n  NDKKind2[NDKKind2[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  NDKKind2[NDKKind2[\"NostrConnect\"] = 24133] = \"NostrConnect\";\n  NDKKind2[NDKKind2[\"CategorizedPeopleList\"] = 3e4] = \"CategorizedPeopleList\";\n  NDKKind2[NDKKind2[\"CategorizedBookmarkList\"] = 30001] = \"CategorizedBookmarkList\";\n  NDKKind2[NDKKind2[\"ProfileBadge\"] = 30008] = \"ProfileBadge\";\n  NDKKind2[NDKKind2[\"BadgeDefinition\"] = 30009] = \"BadgeDefinition\";\n  NDKKind2[NDKKind2[\"Article\"] = 30023] = \"Article\";\n  NDKKind2[NDKKind2[\"AppSpecificData\"] = 30078] = \"AppSpecificData\";\n  return NDKKind2;\n})(NDKKind || {});\n\n// src/user/index.ts\nimport { nip05, nip19 as nip193 } from \"nostr-tools\";\n\n// src/user/follows.ts\nimport { nip19 as nip192 } from \"nostr-tools\";\nasync function follows() {\n  if (!this.ndk)\n    throw new Error(\"NDK not set\");\n  const contactListEvents = await this.ndk.fetchEvents({\n    kinds: [3],\n    authors: [this.hexpubkey()]\n  });\n  if (contactListEvents) {\n    const npubs = /* @__PURE__ */ new Set();\n    contactListEvents.forEach((event) => {\n      event.tags.forEach((tag) => {\n        if (tag[0] === \"p\") {\n          try {\n            const npub = nip192.npubEncode(tag[1]);\n            npubs.add(npub);\n          } catch (e) {\n          }\n        }\n      });\n    });\n    return [...npubs].reduce((acc, npub) => {\n      const user = new NDKUser({ npub });\n      user.ndk = this.ndk;\n      acc.add(user);\n      return acc;\n    }, /* @__PURE__ */ new Set());\n  }\n  return /* @__PURE__ */ new Set();\n}\n\n// src/user/profile.ts\nfunction mergeEvent(event, profile) {\n  const payload = JSON.parse(event.content);\n  Object.keys(payload).forEach((key) => {\n    switch (key) {\n      case \"name\":\n        profile.name = payload.name;\n        break;\n      case \"display_name\":\n      case \"displayName\":\n        profile.displayName = payload.displayName || payload.display_name;\n        break;\n      case \"image\":\n      case \"picture\":\n        profile.image = payload.image || payload.picture;\n        break;\n      case \"banner\":\n        profile.banner = payload.banner;\n        break;\n      case \"bio\":\n        profile.bio = payload.bio;\n        break;\n      case \"nip05\":\n        profile.nip05 = payload.nip05;\n        break;\n      case \"lud06\":\n        profile.lud06 = payload.lud06;\n        break;\n      case \"lud16\":\n        profile.lud16 = payload.lud16;\n        break;\n      case \"about\":\n        profile.about = payload.about;\n        break;\n      case \"zapService\":\n        profile.zapService = payload.zapService;\n        break;\n      case \"website\":\n        profile.website = payload.website;\n        break;\n      default:\n        profile[key] = payload[key];\n        break;\n    }\n  });\n  return profile;\n}\n\n// src/user/index.ts\nvar NDKUser = class {\n  ndk;\n  profile;\n  npub = \"\";\n  relayUrls = [];\n  constructor(opts) {\n    if (opts.npub)\n      this.npub = opts.npub;\n    if (opts.hexpubkey) {\n      this.npub = nip193.npubEncode(opts.hexpubkey);\n    }\n    if (opts.relayUrls) {\n      this.relayUrls = opts.relayUrls;\n    }\n  }\n  /**\n   * Instantiate an NDKUser from a NIP-05 string\n   * @param nip05Id {string} The user's NIP-05\n   * @returns {NDKUser | undefined} An NDKUser if one is found for the given NIP-05, undefined otherwise.\n   */\n  static async fromNip05(nip05Id) {\n    const profile = await nip05.queryProfile(nip05Id);\n    if (profile) {\n      return new NDKUser({\n        hexpubkey: profile.pubkey,\n        relayUrls: profile.relays\n      });\n    }\n  }\n  /**\n   * Get the hexpubkey for a user\n   * @returns {string} The user's hexpubkey\n   */\n  hexpubkey() {\n    return nip193.decode(this.npub).data;\n  }\n  /**\n   * Fetch a user's kind 0 metadata events and merge the events in a single up-to-date profile\n   * @param opts {NDKFilterOptions} A set of NDKFilterOptions\n   * @returns {Promise<Set<Event>>} A set of all NDKEvents events returned for the given user\n   */\n  async fetchProfile(opts) {\n    if (!this.ndk)\n      throw new Error(\"NDK not set\");\n    if (!this.profile)\n      this.profile = {};\n    const setMetadataEvents = await this.ndk.fetchEvents(\n      {\n        kinds: [0],\n        authors: [this.hexpubkey()]\n      },\n      opts\n    );\n    if (setMetadataEvents) {\n      const sortedSetMetadataEvents = Array.from(setMetadataEvents).sort(\n        (a, b) => a.created_at - b.created_at\n      );\n      sortedSetMetadataEvents.forEach((event) => {\n        try {\n          this.profile = mergeEvent(event, this.profile);\n        } catch (e) {\n        }\n      });\n    }\n    return setMetadataEvents;\n  }\n  /**\n   * Returns a set of users that this user follows.\n   */\n  follows = follows.bind(this);\n  /**\n   * Returns a set of relay list events for a user.\n   * @returns {Promise<Set<Event>>} A set of NDKEvents returned for the given user.\n   */\n  async relayList() {\n    if (!this.ndk)\n      throw new Error(\"NDK not set\");\n    const relayListEvents = await this.ndk.fetchEvents({\n      kinds: [10002],\n      authors: [this.hexpubkey()]\n    });\n    if (relayListEvents) {\n      return relayListEvents;\n    }\n    return /* @__PURE__ */ new Set();\n  }\n  /**\n   * Get the tag that can be used to reference this user in an event\n   * @returns {NDKTag} an NDKTag\n   */\n  tagReference() {\n    return [\"p\", this.hexpubkey()];\n  }\n  /**\n   * Publishes the current profile.\n   */\n  async publish() {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    const event = new NDKEvent(this.ndk, {\n      kind: 0,\n      content: JSON.stringify(this.profile)\n    });\n    await event.publish();\n  }\n  /**\n   * Add a follow to this user's contact list\n   *\n   * @param newFollow {NDKUser} The user to follow\n   * @param currentFollowList {Set<NDKUser>} The current follow list\n   * @returns {Promise<boolean>} True if the follow was added, false if the follow already exists\n   */\n  async follow(newFollow, currentFollowList) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    if (!currentFollowList) {\n      currentFollowList = await this.follows();\n    }\n    if (currentFollowList.has(newFollow)) {\n      return false;\n    }\n    currentFollowList.add(newFollow);\n    const event = new NDKEvent(this.ndk, { kind: 3 /* Contacts */ });\n    for (const follow of currentFollowList) {\n      event.tag(follow);\n    }\n    await event.publish();\n    return true;\n  }\n};\n\n// src/events/nip04.ts\nasync function encrypt(recipient, signer) {\n  if (!signer) {\n    if (!this.ndk) {\n      throw new Error(\"No signer available\");\n    }\n    await this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!recipient) {\n    const pTags = this.getMatchingTags(\"p\");\n    if (pTags.length !== 1) {\n      throw new Error(\"No recipient could be determined and no explicit recipient was provided\");\n    }\n    recipient = new NDKUser({ hexpubkey: pTags[0][1] });\n    recipient.ndk = this.ndk;\n  }\n  this.content = await signer.encrypt(recipient, this.content);\n}\nasync function decrypt(sender, signer) {\n  if (!signer) {\n    if (!this.ndk) {\n      throw new Error(\"No signer available\");\n    }\n    await this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!sender) {\n    sender = this.author;\n  }\n  this.content = await signer.decrypt(sender, this.content);\n}\n\n// src/events/nip19.ts\nimport { nip19 as nip194 } from \"nostr-tools\";\nfunction encode() {\n  if (this.isParamReplaceable()) {\n    return nip194.naddrEncode({\n      kind: this.kind,\n      pubkey: this.pubkey,\n      identifier: this.replaceableDTag()\n    });\n  } else {\n    return nip194.noteEncode(this.tagId());\n  }\n}\n\n// src/events/repost.ts\nasync function repost(publish = true, signer) {\n  if (!signer) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!signer) {\n    throw new Error(\"No signer available\");\n  }\n  const user = await signer.user();\n  const e = new NDKEvent(this.ndk, {\n    kind: getKind(this),\n    content: \"\",\n    pubkey: user.hexpubkey()\n  });\n  e.tag(this);\n  if (e.kind === 16 /* GenericRepost */) {\n    e.tags.push([\"k\", `${this.kind}`]);\n  }\n  await e.sign(signer);\n  if (publish)\n    await e.publish();\n  return e;\n}\nfunction getKind(event) {\n  if (event.kind === 1) {\n    return 6 /* Repost */;\n  }\n  return 16 /* GenericRepost */;\n}\n\n// src/events/index.ts\nvar NDKEvent = class extends EventEmitter2 {\n  ndk;\n  created_at;\n  content = \"\";\n  tags = [];\n  kind;\n  id = \"\";\n  sig;\n  pubkey = \"\";\n  /**\n   * The relay that this event was first received from.\n   */\n  relay;\n  constructor(ndk, event) {\n    super();\n    this.created_at = event?.created_at;\n    this.content = event?.content || \"\";\n    this.tags = event?.tags || [];\n    this.id = event?.id || \"\";\n    this.sig = event?.sig;\n    this.pubkey = event?.pubkey || \"\";\n    this.kind = event?.kind;\n  }\n  // public toJSON(): NostrEvent {\n  //     return this.rawEvent();\n  // }\n  /**\n   * Returns the event as is.\n   */\n  rawEvent() {\n    return {\n      created_at: this.created_at,\n      content: this.content,\n      tags: this.tags,\n      kind: this.kind,\n      pubkey: this.pubkey,\n      id: this.id,\n      sig: this.sig\n    };\n  }\n  set author(user) {\n    this.pubkey = user.hexpubkey();\n  }\n  /**\n   * Returns an NDKUser for the author of the event.\n   */\n  get author() {\n    const user = new NDKUser({ hexpubkey: this.pubkey });\n    user.ndk = this.ndk;\n    return user;\n  }\n  tag(userOrEvent, marker) {\n    const tag = userOrEvent.tagReference();\n    if (marker)\n      tag.push(marker);\n    this.tags.push(tag);\n    if (userOrEvent instanceof NDKEvent) {\n      const tagEventAuthor = userOrEvent.author;\n      if (tagEventAuthor && this.pubkey !== tagEventAuthor.hexpubkey()) {\n        this.tag(tagEventAuthor);\n      }\n      for (const pTag of userOrEvent.getMatchingTags(\"p\")) {\n        if (pTag[1] === this.pubkey)\n          continue;\n        if (this.tags.find((t) => t[0] === \"p\" && t[1] === pTag[1]))\n          continue;\n        this.tags.push([\"p\", pTag[1]]);\n      }\n    }\n  }\n  /**\n   * Return a NostrEvent object, trying to fill in missing fields\n   * when possible, adding tags when necessary.\n   * @param pubkey {string} The pubkey of the user who the event belongs to.\n   * @returns {Promise<NostrEvent>} A promise that resolves to a NostrEvent.\n   */\n  async toNostrEvent(pubkey) {\n    if (!pubkey && this.pubkey === \"\") {\n      const user = await this.ndk?.signer?.user();\n      this.pubkey = user?.hexpubkey() || \"\";\n    }\n    if (!this.created_at)\n      this.created_at = Math.floor(Date.now() / 1e3);\n    const nostrEvent = this.rawEvent();\n    const { content, tags } = this.generateTags();\n    nostrEvent.content = content || \"\";\n    nostrEvent.tags = tags;\n    try {\n      this.id = getEventHash(nostrEvent);\n    } catch (e) {\n    }\n    if (this.id)\n      nostrEvent.id = this.id;\n    if (this.sig)\n      nostrEvent.sig = this.sig;\n    return nostrEvent;\n  }\n  isReplaceable = isReplaceable.bind(this);\n  isParamReplaceable = isParamReplaceable.bind(this);\n  encode = encode.bind(this);\n  encrypt = encrypt.bind(this);\n  decrypt = decrypt.bind(this);\n  /**\n   * Get all tags with the given name\n   * @param tagName {string} The name of the tag to search for\n   * @returns {NDKTag[]} An array of the matching tags\n   */\n  getMatchingTags(tagName) {\n    return this.tags.filter((tag) => tag[0] === tagName);\n  }\n  /**\n   * Get the first tag with the given name\n   * @param tagName Tag name to search for\n   * @returns The value of the first tag with the given name, or undefined if no such tag exists\n   */\n  tagValue(tagName) {\n    const tags = this.getMatchingTags(tagName);\n    if (tags.length === 0)\n      return void 0;\n    return tags[0][1];\n  }\n  /**\n   * Remove all tags with the given name (e.g. \"d\", \"a\", \"p\")\n   * @param tagName Tag name to search for and remove\n   * @returns {void}\n   */\n  removeTag(tagName) {\n    this.tags = this.tags.filter((tag) => tag[0] !== tagName);\n  }\n  /**\n   * Sign the event if a signer is present.\n   *\n   * It will generate tags.\n   * Repleacable events will have their created_at field set to the current time.\n   * @param signer {NDKSigner} The NDKSigner to use to sign the event\n   * @returns {Promise<string>} A Promise that resolves to the signature of the signed event.\n   */\n  async sign(signer) {\n    signer || this.ndk?.assertSigner();\n    await this.generateTags();\n    if (this.isReplaceable()) {\n      this.created_at = Math.floor(Date.now() / 1e3);\n    }\n    const nostrEvent = await this.toNostrEvent();\n    const _signer = signer || this.ndk?.signer;\n    this.sig = await _signer.sign(nostrEvent);\n  }\n  /**\n   * Attempt to sign and then publish an NDKEvent to a given relaySet\n   * @param relaySet {NDKRelaySet} The relaySet to publish the even to.\n   * @returns {Promise<void>}\n   */\n  async publish(relaySet) {\n    if (!this.sig)\n      await this.sign();\n    return this.ndk?.publish(this, relaySet);\n  }\n  /**\n   * Generates tags for users, notes, and other events tagged in content.\n   * Will also generate random \"d\" tag for parameterized replaceable events where needed.\n   * @returns {ContentTag} The tags and content of the event.\n   */\n  generateTags() {\n    let tags = [];\n    const g = generateContentTags(this.content, this.tags);\n    const content = g.content;\n    tags = g.tags;\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTag = this.getMatchingTags(\"d\")[0];\n      if (!dTag) {\n        const str = [...Array(16)].map(() => Math.random().toString(36)[2]).join(\"\");\n        tags.push([\"d\", str]);\n      }\n    }\n    return { content: content || \"\", tags };\n  }\n  /**\n   * Returns the \"d\" tag of a parameterized replaceable event or throws an error if the event isn't\n   * a parameterized replaceable event.\n   * @returns {string} the \"d\" tag of the event.\n   */\n  replaceableDTag() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTag = this.getMatchingTags(\"d\")[0];\n      const dTagId = dTag ? dTag[1] : \"\";\n      return dTagId;\n    }\n    throw new Error(\"Event is not a parameterized replaceable event\");\n  }\n  /**\n   * Returns the id of the event or, if it's a parameterized event, the generated id of the event using \"d\" tag, pubkey, and kind.\n   * @returns {string} The id\n   */\n  tagId() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTagId = this.replaceableDTag();\n      return `${this.kind}:${this.pubkey}:${dTagId}`;\n    }\n    return this.id;\n  }\n  /**\n   * Get the tag that can be used to reference this event from another event\n   * @example\n   *     event = new NDKEvent(ndk, { kind: 30000, pubkey: 'pubkey', tags: [ [\"d\", \"d-code\"] ] });\n   *     event.tagReference(); // [\"a\", \"30000:pubkey:d-code\"]\n   *\n   *     event = new NDKEvent(ndk, { kind: 1, pubkey: 'pubkey', id: \"eventid\" });\n   *     event.tagReference(); // [\"e\", \"eventid\"]\n   * @returns {NDKTag} The NDKTag object referencing this event\n   */\n  tagReference() {\n    if (this.isParamReplaceable()) {\n      return [\"a\", this.tagId()];\n    }\n    return [\"e\", this.tagId()];\n  }\n  /**\n   * Provides the filter that will return matching events for this event.\n   *\n   * @example\n   *    event = new NDKEvent(ndk, { kind: 30000, pubkey: 'pubkey', tags: [ [\"d\", \"d-code\"] ] });\n   *    event.filter(); // { \"#a\": [\"30000:pubkey:d-code\"] }\n   * @example\n   *    event = new NDKEvent(ndk, { kind: 1, pubkey: 'pubkey', id: \"eventid\" });\n   *    event.filter(); // { \"#e\": [\"eventid\"] }\n   *\n   * @returns The filter that will return matching events for this event\n   */\n  filter() {\n    if (this.isParamReplaceable()) {\n      return { \"#a\": [this.tagId()] };\n    } else {\n      return { \"#e\": [this.tagId()] };\n    }\n  }\n  /**\n   * Create a zap request for an existing event\n   *\n   * @param amount The amount to zap in millisatoshis\n   * @param comment A comment to add to the zap request\n   * @param extraTags Extra tags to add to the zap request\n   */\n  async zap(amount, comment, extraTags) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    const zap = new Zap({\n      ndk: this.ndk,\n      zappedEvent: this\n    });\n    const paymentRequest = await zap.createZapRequest(amount, comment, extraTags);\n    return paymentRequest;\n  }\n  /**\n   * Generates a deletion event of the current event\n   *\n   * @param reason The reason for the deletion\n   * @returns The deletion event\n   */\n  async delete(reason) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    const e = new NDKEvent(this.ndk, {\n      kind: 5 /* EventDeletion */,\n      content: reason || \"\"\n    });\n    e.tag(this);\n    await e.publish();\n    return e;\n  }\n  /**\n   * NIP-18 reposting event.\n   *\n   * @param publish Whether to publish the reposted event automatically\n   * @param signer The signer to use for signing the reposted event\n   * @returns The reposted event\n   *\n   * @function\n   */\n  repost = repost.bind(this);\n};\n\n// src/relay/pool/index.ts\nimport EventEmitter4 from \"eventemitter3\";\n\n// src/relay/index.ts\nimport EventEmitter3 from \"eventemitter3\";\nimport { relayInit } from \"nostr-tools\";\nimport \"websocket-polyfill\";\nimport debug from \"debug\";\nvar NDKRelayStatus = /* @__PURE__ */ ((NDKRelayStatus2) => {\n  NDKRelayStatus2[NDKRelayStatus2[\"CONNECTING\"] = 0] = \"CONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"CONNECTED\"] = 1] = \"CONNECTED\";\n  NDKRelayStatus2[NDKRelayStatus2[\"DISCONNECTING\"] = 2] = \"DISCONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"DISCONNECTED\"] = 3] = \"DISCONNECTED\";\n  NDKRelayStatus2[NDKRelayStatus2[\"RECONNECTING\"] = 4] = \"RECONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"FLAPPING\"] = 5] = \"FLAPPING\";\n  return NDKRelayStatus2;\n})(NDKRelayStatus || {});\nvar NDKRelay2 = class extends EventEmitter3 {\n  url;\n  scores;\n  relay;\n  _status;\n  connectedAt;\n  _connectionStats = { attempts: 0, success: 0, durations: [] };\n  complaining = false;\n  debug;\n  /**\n   * Active subscriptions this relay is connected to\n   */\n  activeSubscriptions = /* @__PURE__ */ new Set();\n  constructor(url) {\n    super();\n    this.url = url;\n    this.relay = relayInit(url);\n    this.scores = /* @__PURE__ */ new Map();\n    this._status = 3 /* DISCONNECTED */;\n    this.debug = debug(`ndk:relay:${url}`);\n    this.relay.on(\"connect\", () => {\n      this.updateConnectionStats.connected();\n      this.emit(\"connect\");\n      this._status = 1 /* CONNECTED */;\n    });\n    this.relay.on(\"disconnect\", () => {\n      this.updateConnectionStats.disconnected();\n      this.emit(\"disconnect\");\n      if (this._status === 1 /* CONNECTED */) {\n        this._status = 3 /* DISCONNECTED */;\n        this.handleReconnection();\n      }\n    });\n    this.relay.on(\"notice\", (notice) => this.handleNotice(notice));\n  }\n  /**\n   * Evaluates the connection stats to determine if the relay is flapping.\n   */\n  isFlapping() {\n    const durations = this._connectionStats.durations;\n    if (durations.length < 10)\n      return false;\n    const sum = durations.reduce((a, b) => a + b, 0);\n    const avg = sum / durations.length;\n    const variance = durations.map((x) => Math.pow(x - avg, 2)).reduce((a, b) => a + b, 0) / durations.length;\n    const stdDev = Math.sqrt(variance);\n    const isFlapping = stdDev < 1e3;\n    return isFlapping;\n  }\n  /**\n   * Called when the relay is unexpectedly disconnected.\n   */\n  handleReconnection() {\n    if (this.isFlapping()) {\n      this.emit(\"flapping\", this, this._connectionStats);\n      this._status = 5 /* FLAPPING */;\n    }\n    if (this.connectedAt && Date.now() - this.connectedAt < 5e3) {\n      setTimeout(() => this.connect(), 6e4);\n    } else {\n      this.connect();\n    }\n  }\n  get status() {\n    return this._status;\n  }\n  /**\n   * Connects to the relay.\n   */\n  async connect() {\n    try {\n      this.updateConnectionStats.attempt();\n      this._status = 0 /* CONNECTING */;\n      await this.relay.connect();\n    } catch (e) {\n      this.debug(\"Failed to connect\", e);\n      this._status = 3 /* DISCONNECTED */;\n      throw e;\n    }\n  }\n  /**\n   * Disconnects from the relay.\n   */\n  disconnect() {\n    this._status = 2 /* DISCONNECTING */;\n    this.relay.close();\n  }\n  async handleNotice(notice) {\n    if (notice.includes(\"oo many\") || notice.includes(\"aximum\")) {\n      this.disconnect();\n      setTimeout(() => this.connect(), 2e3);\n      console.log(this.relay.url, \"Relay complaining?\", notice);\n    }\n    this.emit(\"notice\", this, notice);\n  }\n  /**\n   * Subscribes to a subscription.\n   */\n  subscribe(subscription) {\n    const { filter } = subscription;\n    const sub = this.relay.sub([filter], {\n      id: subscription.subId\n    });\n    this.debug(`Subscribed to ${JSON.stringify(filter)}`);\n    sub.on(\"event\", (event) => {\n      const e = new NDKEvent(void 0, event);\n      e.relay = this;\n      subscription.eventReceived(e, this);\n    });\n    sub.on(\"eose\", () => {\n      subscription.eoseReceived(this);\n    });\n    const unsub = sub.unsub;\n    sub.unsub = () => {\n      this.debug(`Unsubscribing from ${JSON.stringify(filter)}`);\n      this.activeSubscriptions.delete(subscription);\n      unsub();\n    };\n    this.activeSubscriptions.add(subscription);\n    subscription.on(\"close\", () => {\n      this.activeSubscriptions.delete(subscription);\n    });\n    return sub;\n  }\n  /**\n   * Publishes an event to the relay.\n   */\n  async publish(event) {\n    const nostrEvent = await event.toNostrEvent();\n    const a = this.relay.publish(nostrEvent);\n    a.on(\"failed\", (err) => {\n      this.debug(\"Publish failed\", err, event.rawEvent());\n    });\n    a.on(\"ok\", () => {\n      this.debug(\"Publish ok\", event.rawEvent());\n    });\n    this.debug(`Published event ${event.id}`, event.rawEvent());\n  }\n  /**\n   * Called when this relay has responded with an event but\n   * wasn't the fastest one.\n   * @param timeDiffInMs The time difference in ms between the fastest and this relay in milliseconds\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  scoreSlowerEvent(timeDiffInMs) {\n  }\n  /**\n   * Utility functions to update the connection stats.\n   */\n  updateConnectionStats = {\n    connected: () => {\n      this._connectionStats.success++;\n      this._connectionStats.connectedAt = Date.now();\n    },\n    disconnected: () => {\n      if (this._connectionStats.connectedAt) {\n        this._connectionStats.durations.push(\n          Date.now() - this._connectionStats.connectedAt\n        );\n        if (this._connectionStats.durations.length > 100) {\n          this._connectionStats.durations.shift();\n        }\n      }\n      this._connectionStats.connectedAt = void 0;\n    },\n    attempt: () => {\n      this._connectionStats.attempts++;\n    }\n  };\n  /**\n   * Returns the connection stats.\n   */\n  get connectionStats() {\n    return this._connectionStats;\n  }\n};\n\n// src/relay/pool/index.ts\nvar NDKPool = class extends EventEmitter4 {\n  relays = /* @__PURE__ */ new Map();\n  debug;\n  constructor(relayUrls = [], ndk) {\n    super();\n    this.debug = ndk.debug.extend(\"pool\");\n    for (const relayUrl of relayUrls) {\n      const relay = new NDKRelay2(relayUrl);\n      relay.on(\"notice\", (relay2, notice) => this.emit(\"notice\", relay2, notice));\n      relay.on(\"connect\", () => this.handleRelayConnect(relayUrl));\n      relay.on(\"disconnect\", () => this.emit(\"relay:disconnect\", relay));\n      relay.on(\"flapping\", () => this.handleFlapping(relay));\n      this.relays.set(relayUrl, relay);\n    }\n  }\n  handleRelayConnect(relayUrl) {\n    this.debug(`Relay ${relayUrl} connected`);\n    this.emit(\"relay:connect\", this.relays.get(relayUrl));\n    if (this.stats().connected === this.relays.size) {\n      this.emit(\"connect\");\n    }\n  }\n  /**\n   * Attempts to establish a connection to each relay in the pool.\n   *\n   * @async\n   * @param {number} [timeoutMs] - Optional timeout in milliseconds for each connection attempt.\n   * @returns {Promise<void>} A promise that resolves when all connection attempts have completed.\n   * @throws {Error} If any of the connection attempts result in an error or timeout.\n   */\n  async connect(timeoutMs) {\n    const promises = [];\n    this.debug(\n      `Connecting to ${this.relays.size} relays${timeoutMs ? `, timeout ${timeoutMs}...` : \"\"}`\n    );\n    for (const relay of this.relays.values()) {\n      if (timeoutMs) {\n        const timeoutPromise = new Promise((_, reject) => {\n          setTimeout(() => reject(`Timed out after ${timeoutMs}ms`), timeoutMs);\n        });\n        promises.push(\n          Promise.race([relay.connect(), timeoutPromise]).catch((e) => {\n            this.debug(`Failed to connect to relay ${relay.url}: ${e}`);\n          })\n        );\n      } else {\n        promises.push(relay.connect());\n      }\n    }\n    await Promise.all(promises);\n  }\n  handleFlapping(relay) {\n    this.debug(`Relay ${relay.url} is flapping`);\n    this.relays.delete(relay.url);\n    this.emit(\"flapping\", relay);\n  }\n  size() {\n    return this.relays.size;\n  }\n  /**\n   * Returns the status of each relay in the pool.\n   * @returns {NDKPoolStats} An object containing the number of relays in each status.\n   */\n  stats() {\n    const stats = {\n      total: 0,\n      connected: 0,\n      disconnected: 0,\n      connecting: 0\n    };\n    for (const relay of this.relays.values()) {\n      stats.total++;\n      if (relay.status === 1 /* CONNECTED */) {\n        stats.connected++;\n      } else if (relay.status === 3 /* DISCONNECTED */) {\n        stats.disconnected++;\n      } else if (relay.status === 0 /* CONNECTING */) {\n        stats.connecting++;\n      }\n    }\n    return stats;\n  }\n  /**\n   * Get a list of all relay urls in the pool.\n   */\n  urls() {\n    return Array.from(this.relays.keys());\n  }\n};\n\n// src/relay/sets/index.ts\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\n\n// src/subscription/index.ts\nimport EventEmitter5 from \"eventemitter3\";\nimport { matchFilter, nip19 as nip195 } from \"nostr-tools\";\n\n// src/subscription/utils.ts\nfunction queryFullyFilled(subscription) {\n  if (filterIncludesIds(subscription.filter)) {\n    if (resultHasAllRequestedIds(subscription)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction filterIncludesIds(filter) {\n  return !!filter[\"ids\"];\n}\nfunction resultHasAllRequestedIds(subscription) {\n  const ids = subscription.filter[\"ids\"];\n  return !!ids && ids.length === subscription.eventFirstSeen.size;\n}\n\n// src/subscription/index.ts\nvar NDKSubscriptionCacheUsage = /* @__PURE__ */ ((NDKSubscriptionCacheUsage2) => {\n  NDKSubscriptionCacheUsage2[\"ONLY_CACHE\"] = \"ONLY_CACHE\";\n  NDKSubscriptionCacheUsage2[\"CACHE_FIRST\"] = \"CACHE_FIRST\";\n  NDKSubscriptionCacheUsage2[\"PARALLEL\"] = \"PARALLEL\";\n  NDKSubscriptionCacheUsage2[\"ONLY_RELAY\"] = \"ONLY_RELAY\";\n  return NDKSubscriptionCacheUsage2;\n})(NDKSubscriptionCacheUsage || {});\nvar defaultOpts = {\n  closeOnEose: true,\n  cacheUsage: \"CACHE_FIRST\" /* CACHE_FIRST */,\n  groupable: true,\n  groupableDelay: 100\n};\nvar NDKSubscription = class extends EventEmitter5 {\n  subId;\n  filter;\n  opts;\n  relaySet;\n  ndk;\n  relaySubscriptions;\n  debug;\n  /**\n   * Events that have been seen by the subscription, with the time they were first seen.\n   */\n  eventFirstSeen = /* @__PURE__ */ new Map();\n  /**\n   * Relays that have sent an EOSE.\n   */\n  eosesSeen = /* @__PURE__ */ new Set();\n  /**\n   * Events that have been seen by the subscription per relay.\n   */\n  eventsPerRelay = /* @__PURE__ */ new Map();\n  constructor(ndk, filter, opts, relaySet, subId) {\n    super();\n    this.ndk = ndk;\n    this.opts = { ...defaultOpts, ...opts || {} };\n    this.subId = subId || opts?.subId || generateFilterId(filter);\n    this.filter = filter;\n    this.relaySet = relaySet;\n    this.relaySubscriptions = /* @__PURE__ */ new Map();\n    this.debug = ndk.debug.extend(`subscription:${this.subId}`);\n    if (this.opts.cacheUsage === \"ONLY_CACHE\" /* ONLY_CACHE */ && !this.opts.closeOnEose) {\n      throw new Error(\"Cannot use cache-only options with a persistent subscription\");\n    }\n  }\n  /**\n   * Calculates the groupable ID for this subscription.\n   *\n   * @returns The groupable ID, or null if the subscription is not groupable.\n   */\n  groupableId() {\n    if (!this.opts?.groupable) {\n      return null;\n    }\n    const hasKind = (this.filter.kinds?.length || 0) > 0;\n    const noTimeConstraints = !this.filter.since && !this.filter.until;\n    const noLimit = !this.filter.limit;\n    if (hasKind && noTimeConstraints && noLimit) {\n      let id = this.filter.kinds.join(\",\");\n      const keys = Object.keys(this.filter || {}).sort().join(\"-\");\n      id += `-${keys}`;\n      return id;\n    }\n    return null;\n  }\n  shouldQueryCache() {\n    return this.opts?.cacheUsage !== \"ONLY_RELAY\" /* ONLY_RELAY */;\n  }\n  shouldQueryRelays() {\n    return this.opts?.cacheUsage !== \"ONLY_CACHE\" /* ONLY_CACHE */;\n  }\n  shouldWaitForCache() {\n    return (\n      // Must want to close on EOSE; subscriptions\n      // that want to receive further updates must\n      // always hit the relay\n      this.opts.closeOnEose && // Cache adapter must claim to be fast\n      !!this.ndk.cacheAdapter?.locking && // If we don't have to query relays there's no need\n      // to wait for the cache\n      this.shouldQueryRelays() && // If explicitly told to run in parallel, then\n      // we should not wait for the cache\n      this.opts.cacheUsage !== \"PARALLEL\" /* PARALLEL */\n    );\n  }\n  /**\n   * Start the subscription. This is the main method that should be called\n   * after creating a subscription.\n   */\n  async start() {\n    let cachePromise;\n    if (this.shouldQueryCache()) {\n      cachePromise = this.startWithCache();\n      if (this.shouldWaitForCache()) {\n        await cachePromise;\n        if (queryFullyFilled(this)) {\n          this.debug(\"cache hit, fully filled: skipping relay query\");\n          this.emit(\"eose\", this);\n          return;\n        }\n      }\n    }\n    if (this.shouldQueryRelays()) {\n      this.startWithRelaySet();\n    }\n    return;\n  }\n  stop() {\n    this.relaySubscriptions.forEach((sub) => sub.unsub());\n    this.relaySubscriptions.clear();\n    this.emit(\"close\", this);\n  }\n  async startWithCache() {\n    if (this.ndk.cacheAdapter?.query) {\n      const promise = this.ndk.cacheAdapter.query(this);\n      if (this.ndk.cacheAdapter.locking) {\n        await promise;\n      }\n    }\n  }\n  startWithRelaySet() {\n    if (!this.relaySet) {\n      this.relaySet = calculateRelaySetFromFilter(this.ndk, this.filter);\n    }\n    if (this.relaySet) {\n      this.relaySet.subscribe(this);\n    }\n  }\n  // EVENT handling\n  /**\n   * Called when an event is received from a relay or the cache\n   * @param event\n   * @param relay\n   * @param fromCache Whether the event was received from the cache\n   */\n  eventReceived(event, relay, fromCache = false) {\n    if (!fromCache && relay) {\n      let events = this.eventsPerRelay.get(relay);\n      if (!events) {\n        events = /* @__PURE__ */ new Set();\n        this.eventsPerRelay.set(relay, events);\n      }\n      events.add(event.id);\n      const eventAlreadySeen = this.eventFirstSeen.has(event.id);\n      if (eventAlreadySeen) {\n        const timeSinceFirstSeen = Date.now() - (this.eventFirstSeen.get(event.id) || 0);\n        relay.scoreSlowerEvent(timeSinceFirstSeen);\n        this.emit(\"event:dup\", event, relay, timeSinceFirstSeen, this);\n        return;\n      }\n      if (this.ndk.cacheAdapter) {\n        this.ndk.cacheAdapter.setEvent(event, this.filter);\n      }\n      this.eventFirstSeen.set(`${event.id}`, Date.now());\n    } else {\n      this.eventFirstSeen.set(`${event.id}`, 0);\n    }\n    this.emit(\"event\", event, relay, this);\n  }\n  // EOSE handling\n  eoseTimeout;\n  eoseReceived(relay) {\n    if (this.opts?.closeOnEose) {\n      this.relaySubscriptions.get(relay)?.unsub();\n      this.relaySubscriptions.delete(relay);\n      if (this.relaySubscriptions.size === 0) {\n        this.emit(\"close\", this);\n      }\n    }\n    this.eosesSeen.add(relay);\n    const hasSeenAllEoses = this.eosesSeen.size === this.relaySet?.size();\n    if (hasSeenAllEoses) {\n      this.emit(\"eose\");\n    } else {\n      if (this.eoseTimeout) {\n        clearTimeout(this.eoseTimeout);\n      }\n      this.eoseTimeout = setTimeout(() => {\n        this.emit(\"eose\");\n      }, 500);\n    }\n  }\n};\nvar NDKSubscriptionGroup = class extends NDKSubscription {\n  subscriptions;\n  constructor(ndk, subscriptions) {\n    const debug4 = ndk.debug.extend(\"subscription-group\");\n    const filters = mergeFilters(subscriptions.map((s) => s.filter));\n    super(\n      ndk,\n      filters,\n      subscriptions[0].opts,\n      // TODO: This should be merged\n      subscriptions[0].relaySet\n      // TODO: This should be merged\n    );\n    this.subscriptions = subscriptions;\n    debug4(\"merged filters\", {\n      count: subscriptions.length,\n      mergedFilters: this.filter\n    });\n    this.on(\"event\", this.forwardEvent);\n    this.on(\"event:dup\", this.forwardEventDup);\n    this.on(\"eose\", this.forwardEose);\n    this.on(\"close\", this.forwardClose);\n  }\n  isEventForSubscription(event, subscription) {\n    const { filter } = subscription;\n    if (!filter)\n      return false;\n    return matchFilter(filter, event.rawEvent());\n  }\n  forwardEvent(event, relay) {\n    for (const subscription of this.subscriptions) {\n      if (!this.isEventForSubscription(event, subscription)) {\n        continue;\n      }\n      subscription.emit(\"event\", event, relay, subscription);\n    }\n  }\n  forwardEventDup(event, relay, timeSinceFirstSeen) {\n    for (const subscription of this.subscriptions) {\n      if (!this.isEventForSubscription(event, subscription)) {\n        continue;\n      }\n      subscription.emit(\"event:dup\", event, relay, timeSinceFirstSeen, subscription);\n    }\n  }\n  forwardEose() {\n    for (const subscription of this.subscriptions) {\n      subscription.emit(\"eose\", subscription);\n    }\n  }\n  forwardClose() {\n    for (const subscription of this.subscriptions) {\n      subscription.emit(\"close\", subscription);\n    }\n  }\n};\nfunction mergeFilters(filters) {\n  const result = {};\n  filters.forEach((filter) => {\n    Object.entries(filter).forEach(([key, value]) => {\n      if (Array.isArray(value)) {\n        if (result[key] === void 0) {\n          result[key] = [...value];\n        } else {\n          result[key] = Array.from(/* @__PURE__ */ new Set([...result[key], ...value]));\n        }\n      } else {\n        result[key] = value;\n      }\n    });\n  });\n  return result;\n}\nfunction filterFromId(id) {\n  let decoded;\n  try {\n    decoded = nip195.decode(id);\n    switch (decoded.type) {\n      case \"nevent\":\n        return { ids: [decoded.data.id] };\n      case \"note\":\n        return { ids: [decoded.data] };\n      case \"naddr\":\n        return {\n          authors: [decoded.data.pubkey],\n          \"#d\": [decoded.data.identifier],\n          kinds: [decoded.data.kind]\n        };\n    }\n  } catch (e) {\n  }\n  return { ids: [id] };\n}\nfunction generateFilterId(filter) {\n  const keys = Object.keys(filter) || [];\n  const subId = [];\n  for (const key of keys) {\n    if (key === \"kinds\") {\n      const v = [key, filter.kinds.join(\",\")];\n      subId.push(v.join(\":\"));\n    } else {\n      subId.push(key);\n    }\n  }\n  subId.push(Math.floor(Math.random() * 999999999).toString());\n  return subId.join(\"-\");\n}\n\n// src/relay/sets/index.ts\nvar NDKRelaySet2 = class {\n  relays;\n  debug;\n  ndk;\n  constructor(relays, ndk) {\n    this.relays = relays;\n    this.ndk = ndk;\n    this.debug = ndk.debug.extend(\"relayset\");\n  }\n  /**\n   * Creates a relay set from a list of relay URLs.\n   *\n   * This is useful for testing in development to pass a local relay\n   * to publish methods.\n   *\n   * @param relayUrls - list of relay URLs to include in this set\n   * @param ndk\n   * @returns NDKRelaySet\n   */\n  static fromRelayUrls(relayUrls, ndk) {\n    const relays = /* @__PURE__ */ new Set();\n    for (const url of relayUrls) {\n      const relay = ndk.pool.relays.get(url);\n      if (relay) {\n        relays.add(relay);\n      }\n    }\n    return new NDKRelaySet2(new Set(relays), ndk);\n  }\n  subscribeOnRelay(relay, subscription) {\n    const sub = relay.subscribe(subscription);\n    subscription.relaySubscriptions.set(relay, sub);\n  }\n  /**\n   * Calculates an ID of this specific combination of relays.\n   */\n  getId() {\n    const urls = Array.from(this.relays).map((r) => r.url);\n    const urlString = urls.sort().join(\",\");\n    return bytesToHex(sha256(urlString));\n  }\n  /**\n   * Add a subscription to this relay set\n   */\n  subscribe(subscription) {\n    const subGroupableId = subscription.groupableId();\n    const groupableId = `${this.getId()}:${subGroupableId}`;\n    if (!subGroupableId) {\n      this.executeSubscription(subscription);\n      return subscription;\n    }\n    const delayedSubscription = this.ndk.delayedSubscriptions.get(groupableId);\n    if (delayedSubscription) {\n      delayedSubscription.push(subscription);\n    } else {\n      setTimeout(() => {\n        this.executeDelayedSubscription(groupableId);\n      }, subscription.opts.groupableDelay);\n      this.ndk.delayedSubscriptions.set(groupableId, [subscription]);\n    }\n    return subscription;\n  }\n  executeDelayedSubscription(groupableId) {\n    const subscriptions = this.ndk.delayedSubscriptions.get(groupableId);\n    this.ndk.delayedSubscriptions.delete(groupableId);\n    if (subscriptions) {\n      if (subscriptions.length > 1) {\n        this.executeSubscriptions(subscriptions);\n      } else {\n        this.executeSubscription(subscriptions[0]);\n      }\n    }\n  }\n  /**\n   * This function takes a similar group of subscriptions, merges the filters\n   * and sends a single subscription to the relay.\n   */\n  executeSubscriptions(subscriptions) {\n    const ndk = subscriptions[0].ndk;\n    const subGroup = new NDKSubscriptionGroup(ndk, subscriptions);\n    this.executeSubscription(subGroup);\n  }\n  executeSubscription(subscription) {\n    this.debug(\"subscribing\", { filter: subscription.filter });\n    for (const relay of this.relays) {\n      if (relay.status === 1 /* CONNECTED */) {\n        this.subscribeOnRelay(relay, subscription);\n      } else {\n        const connectedListener = () => {\n          this.debug(\"new relay coming online for active subscription\", {\n            relay: relay.url,\n            filter: subscription.filter\n          });\n          this.subscribeOnRelay(relay, subscription);\n        };\n        relay.once(\"connect\", connectedListener);\n        subscription.once(\"close\", () => {\n          relay.removeListener(\"connect\", connectedListener);\n        });\n      }\n    }\n    return subscription;\n  }\n  async publish(event) {\n    this.relays.forEach(async (relay) => {\n      try {\n        await relay.publish(event);\n      } catch (e) {\n      }\n    });\n  }\n  size() {\n    return this.relays.size;\n  }\n};\n\n// src/relay/sets/calculate.ts\nfunction calculateRelaySetFromEvent(ndk, event) {\n  const relays = /* @__PURE__ */ new Set();\n  ndk.pool?.relays.forEach((relay) => relays.add(relay));\n  return new NDKRelaySet2(relays, ndk);\n}\nfunction calculateRelaySetFromFilter(ndk, filter) {\n  const relays = /* @__PURE__ */ new Set();\n  ndk.pool?.relays.forEach((relay) => {\n    if (!relay.complaining) {\n      relays.add(relay);\n    } else {\n      ndk.debug(`Relay ${relay.url} is complaining, not adding to set`);\n    }\n  });\n  return new NDKRelaySet2(relays, ndk);\n}\n\n// src/signers/nip07/index.ts\nimport debug2 from \"debug\";\nvar NDKNip07Signer = class {\n  _userPromise;\n  nip04Queue = [];\n  nip04Processing = false;\n  debug;\n  constructor() {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    this.debug = debug2(\"ndk:nip07\");\n  }\n  async blockUntilReady() {\n    const pubkey = await window.nostr?.getPublicKey();\n    if (!pubkey) {\n      throw new Error(\"User rejected access\");\n    }\n    return new NDKUser({ hexpubkey: pubkey });\n  }\n  /**\n   * Getter for the user property.\n   * @returns The NDKUser instance.\n   */\n  async user() {\n    if (!this._userPromise) {\n      this._userPromise = this.blockUntilReady();\n    }\n    return this._userPromise;\n  }\n  /**\n   * Signs the given Nostr event.\n   * @param event - The Nostr event to be signed.\n   * @returns The signature of the signed event.\n   * @throws Error if the NIP-07 is not available on the window object.\n   */\n  async sign(event) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const signedEvent = await window.nostr.signEvent(event);\n    return signedEvent.sig;\n  }\n  async encrypt(recipient, value) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const recipientHexPubKey = recipient.hexpubkey();\n    return this.queueNip04(\"encrypt\", recipientHexPubKey, value);\n  }\n  async decrypt(sender, value) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const senderHexPubKey = sender.hexpubkey();\n    return this.queueNip04(\"decrypt\", senderHexPubKey, value);\n  }\n  async queueNip04(type, counterpartyHexpubkey, value) {\n    return new Promise((resolve, reject) => {\n      this.nip04Queue.push({ type, counterpartyHexpubkey, value, resolve, reject });\n      if (!this.nip04Processing) {\n        this.processNip04Queue();\n      }\n    });\n  }\n  async processNip04Queue(item, retries = 0) {\n    if (!item && this.nip04Queue.length === 0) {\n      this.nip04Processing = false;\n      return;\n    }\n    this.nip04Processing = true;\n    const { type, counterpartyHexpubkey, value, resolve, reject } = item || this.nip04Queue.shift();\n    this.debug(\"Processing encryption queue item\", { type, counterpartyHexpubkey, value });\n    try {\n      let result;\n      if (type === \"encrypt\") {\n        result = await window.nostr.nip04.encrypt(counterpartyHexpubkey, value);\n      } else {\n        result = await window.nostr.nip04.decrypt(counterpartyHexpubkey, value);\n      }\n      resolve(result);\n    } catch (error) {\n      if (error.message && error.message.includes(\"call already executing\")) {\n        if (retries < 5) {\n          this.debug(\"Retrying encryption queue item\", { type, counterpartyHexpubkey, value, retries });\n          setTimeout(() => {\n            this.processNip04Queue(item, retries + 1);\n          }, 50 * retries);\n          return;\n        }\n      }\n      reject(error);\n    }\n    this.processNip04Queue();\n  }\n};\n\n// src/signers/nip46/rpc.ts\nimport EventEmitter6 from \"eventemitter3\";\nvar NDKNostrRpc = class extends EventEmitter6 {\n  ndk;\n  signer;\n  debug;\n  constructor(ndk, signer, debug4) {\n    super();\n    this.ndk = ndk;\n    this.signer = signer;\n    this.debug = debug4.extend(\"rpc\");\n  }\n  /**\n   * Subscribe to a filter. This function will resolve once the subscription is ready.\n   */\n  async subscribe(filter) {\n    const sub = this.ndk.subscribe(filter, { closeOnEose: false });\n    sub.on(\"event\", async (event) => {\n      try {\n        const parsedEvent = await this.parseEvent(event);\n        if (parsedEvent.method) {\n          this.emit(\"request\", parsedEvent);\n        } else {\n          this.emit(`response-${parsedEvent.id}`, parsedEvent);\n        }\n      } catch (e) {\n        this.debug(\"error parsing event\", e, event);\n      }\n    });\n    return new Promise((resolve, reject) => {\n      sub.on(\"eose\", () => resolve(sub));\n    });\n  }\n  async parseEvent(event) {\n    const remoteUser = this.ndk.getUser({ hexpubkey: event.pubkey });\n    remoteUser.ndk = this.ndk;\n    const decryptedContent = await this.signer.decrypt(remoteUser, event.content);\n    const parsedContent = JSON.parse(decryptedContent);\n    const { id, method, params, result, error } = parsedContent;\n    if (method) {\n      return { id, pubkey: event.pubkey, method, params, event };\n    } else {\n      return { id, result, error, event };\n    }\n  }\n  async sendResponse(id, remotePubkey, result, kind = 24133, error) {\n    const res = { id, result };\n    if (error) {\n      res.error = error;\n    }\n    const localUser = await this.signer.user();\n    const remoteUser = this.ndk.getUser({ hexpubkey: remotePubkey });\n    const event = new NDKEvent(this.ndk, {\n      kind,\n      content: JSON.stringify(res),\n      tags: [[\"p\", remotePubkey]],\n      pubkey: localUser.hexpubkey()\n    });\n    event.content = await this.signer.encrypt(remoteUser, event.content);\n    await event.sign(this.signer);\n    await this.ndk.publish(event);\n  }\n  /**\n   * Sends a request.\n   * @param remotePubkey\n   * @param method\n   * @param params\n   * @param kind\n   * @param id\n   */\n  async sendRequest(remotePubkey, method, params = [], kind = 24133, cb) {\n    const id = Math.random().toString(36).substring(7);\n    const localUser = await this.signer.user();\n    const remoteUser = this.ndk.getUser({ hexpubkey: remotePubkey });\n    const request = { id, method, params };\n    const promise = new Promise((resolve) => {\n      if (cb)\n        this.once(`response-${id}`, cb);\n    });\n    const event = new NDKEvent(this.ndk, {\n      kind,\n      content: JSON.stringify(request),\n      tags: [[\"p\", remotePubkey]],\n      pubkey: localUser.hexpubkey()\n    });\n    event.content = await this.signer.encrypt(remoteUser, event.content);\n    await event.sign(this.signer);\n    this.debug(\"sending request to\", remotePubkey);\n    await this.ndk.publish(event);\n    return promise;\n  }\n};\n\n// src/signers/nip46/backend/connect.ts\nvar ConnectEventHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [pubkey, token] = params;\n    const debug4 = backend.debug.extend(\"connect\");\n    debug4(`connection request from ${pubkey}`);\n    if (token && backend.applyToken) {\n      debug4(`applying token`);\n      await backend.applyToken(pubkey, token);\n    }\n    if (await backend.pubkeyAllowed(pubkey, \"connect\", token)) {\n      debug4(`connection request from ${pubkey} allowed`);\n      return \"ack\";\n    } else {\n      debug4(`connection request from ${pubkey} rejected`);\n    }\n    return void 0;\n  }\n};\n\n// src/signers/nip46/backend/describe.ts\nvar DescribeHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const keys = Object.keys(backend.handlers);\n    return JSON.stringify(keys);\n  }\n};\n\n// src/signers/nip46/backend/get-public-key.ts\nvar GetPublicKeyHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    return backend.localUser?.hexpubkey();\n  }\n};\n\n// src/signers/nip46/backend/sign-event.ts\nvar SignEventHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const event = await backend.signEvent(remotePubkey, params);\n    if (!event)\n      return void 0;\n    return JSON.stringify(await event.toNostrEvent());\n  }\n};\n\n// src/signers/nip46/backend/nip04-decrypt.ts\nvar Nip04DecryptHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [senderPubkey, payload] = params;\n    const senderUser = new NDKUser({ hexpubkey: senderPubkey });\n    const decryptedPayload = await backend.decrypt(remotePubkey, senderUser, payload);\n    return JSON.stringify([decryptedPayload]);\n  }\n};\n\n// src/signers/nip46/backend/nip04-encrypt.ts\nvar Nip04EncryptHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [recipientPubkey, payload] = params;\n    const recipientUser = new NDKUser({ hexpubkey: recipientPubkey });\n    const decryptedPayload = await backend.encrypt(remotePubkey, recipientUser, payload);\n    return decryptedPayload;\n  }\n};\n\n// src/signers/nip46/backend/index.ts\nvar NDKNip46Backend = class {\n  ndk;\n  signer;\n  localUser;\n  debug;\n  rpc;\n  permitCallback;\n  /**\n   * @param ndk The NDK instance to use\n   * @param privateKey The private key of the npub that wants to be published as\n   */\n  constructor(ndk, privateKey, permitCallback) {\n    this.ndk = ndk;\n    this.signer = new NDKPrivateKeySigner(privateKey);\n    this.debug = ndk.debug.extend(\"nip46:backend\");\n    this.rpc = new NDKNostrRpc(ndk, this.signer, this.debug);\n    this.permitCallback = permitCallback;\n  }\n  /**\n   * This method starts the backend, which will start listening for incoming\n   * requests.\n   */\n  async start() {\n    this.localUser = await this.signer.user();\n    const sub = this.ndk.subscribe(\n      {\n        kinds: [24133],\n        \"#p\": [this.localUser.hexpubkey()]\n      },\n      { closeOnEose: false }\n    );\n    sub.on(\"event\", (e) => this.handleIncomingEvent(e));\n  }\n  handlers = {\n    connect: new ConnectEventHandlingStrategy(),\n    sign_event: new SignEventHandlingStrategy(),\n    nip04_encrypt: new Nip04EncryptHandlingStrategy(),\n    nip04_decrypt: new Nip04DecryptHandlingStrategy(),\n    get_public_key: new GetPublicKeyHandlingStrategy(),\n    describe: new DescribeHandlingStrategy()\n  };\n  /**\n   * Enables the user to set a custom strategy for handling incoming events.\n   * @param method - The method to set the strategy for\n   * @param strategy - The strategy to set\n   */\n  setStrategy(method, strategy) {\n    this.handlers[method] = strategy;\n  }\n  /**\n   * Overload this method to apply tokens, which can\n   * wrap permission sets to be applied to a pubkey.\n   * @param pubkey public key to apply token to\n   * @param token token to apply\n   */\n  async applyToken(pubkey, token) {\n    throw new Error(\"connection token not supported\");\n  }\n  async handleIncomingEvent(event) {\n    const { id, method, params } = await this.rpc.parseEvent(event);\n    const remotePubkey = event.pubkey;\n    let response;\n    this.debug(\"incoming event\", { id, method, params });\n    const strategy = this.handlers[method];\n    if (strategy) {\n      try {\n        response = await strategy.handle(this, remotePubkey, params);\n      } catch (e) {\n        this.debug(\"error handling event\", e, { id, method, params });\n        this.rpc.sendResponse(id, remotePubkey, \"error\", void 0, e.message);\n      }\n    } else {\n      this.debug(\"unsupported method\", { method, params });\n    }\n    if (response) {\n      this.debug(`sending response to ${remotePubkey}`, response);\n      this.rpc.sendResponse(id, remotePubkey, response);\n    }\n  }\n  async decrypt(remotePubkey, senderUser, payload) {\n    if (!await this.pubkeyAllowed(remotePubkey, \"decrypt\", payload)) {\n      this.debug(`decrypt request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    return await this.signer.decrypt(senderUser, payload);\n  }\n  async encrypt(remotePubkey, recipientUser, payload) {\n    if (!await this.pubkeyAllowed(remotePubkey, \"encrypt\", payload)) {\n      this.debug(`encrypt request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    return await this.signer.encrypt(recipientUser, payload);\n  }\n  async signEvent(remotePubkey, params) {\n    const [eventString] = params;\n    this.debug(`sign event request from ${remotePubkey}`);\n    const event = new NDKEvent(this.ndk, JSON.parse(eventString));\n    this.debug(\"event to sign\", event.rawEvent());\n    if (!await this.pubkeyAllowed(remotePubkey, \"sign_event\", event)) {\n      this.debug(`sign event request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    this.debug(`sign event request from ${remotePubkey} allowed`);\n    await event.sign(this.signer);\n    return event;\n  }\n  /**\n   * This method should be overriden by the user to allow or reject incoming\n   * connections.\n   */\n  async pubkeyAllowed(pubkey, method, params) {\n    return this.permitCallback(pubkey, method, params);\n  }\n};\n\n// src/signers/nip46/index.ts\nvar NDKNip46Signer = class {\n  ndk;\n  remoteUser;\n  remotePubkey;\n  token;\n  localSigner;\n  rpc;\n  debug;\n  /**\n   * @param ndk - The NDK instance to use\n   * @param tokenOrRemotePubkey - The public key, or a connection token, of the npub that wants to be published as\n   * @param localSigner - The signer that will be used to request events to be signed\n   */\n  constructor(ndk, tokenOrRemotePubkey, localSigner) {\n    let remotePubkey;\n    let token;\n    if (tokenOrRemotePubkey.includes(\"#\")) {\n      const parts = tokenOrRemotePubkey.split(\"#\");\n      remotePubkey = new NDKUser({ npub: parts[0] }).hexpubkey();\n      token = parts[1];\n    } else if (tokenOrRemotePubkey.startsWith(\"npub\")) {\n      remotePubkey = new NDKUser({ npub: tokenOrRemotePubkey }).hexpubkey();\n    } else {\n      remotePubkey = tokenOrRemotePubkey;\n    }\n    this.ndk = ndk;\n    this.remotePubkey = remotePubkey;\n    this.token = token;\n    this.debug = ndk.debug.extend(\"nip46:signer\");\n    this.remoteUser = new NDKUser({ hexpubkey: remotePubkey });\n    if (!localSigner) {\n      this.localSigner = NDKPrivateKeySigner.generate();\n    } else {\n      this.localSigner = localSigner;\n    }\n    this.rpc = new NDKNostrRpc(ndk, this.localSigner, this.debug);\n  }\n  /**\n   * Get the user that is being published as\n   */\n  async user() {\n    return this.remoteUser;\n  }\n  async blockUntilReady() {\n    const localUser = await this.localSigner.user();\n    const user = this.ndk.getUser({ npub: localUser.npub });\n    await this.rpc.subscribe({\n      kinds: [24133],\n      \"#p\": [localUser.hexpubkey()]\n    });\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const connectParams = [localUser.hexpubkey()];\n        if (this.token) {\n          connectParams.push(this.token);\n        }\n        this.rpc.sendRequest(\n          this.remotePubkey,\n          \"connect\",\n          connectParams,\n          24133,\n          (response) => {\n            if (response.result === \"ack\") {\n              resolve(user);\n            } else {\n              reject(response.error);\n            }\n          }\n        );\n      }, 100);\n    });\n  }\n  async encrypt(recipient, value) {\n    this.debug(\"asking for encryption\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"nip04_encrypt\",\n        [recipient.hexpubkey(), value],\n        24133,\n        (response) => {\n          if (!response.error) {\n            resolve(response.result);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n  async decrypt(sender, value) {\n    this.debug(\"asking for decryption\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"nip04_decrypt\",\n        [sender.hexpubkey(), value],\n        24133,\n        (response) => {\n          if (!response.error) {\n            const value2 = JSON.parse(response.result);\n            resolve(value2[0]);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n  async sign(event) {\n    this.debug(\"asking for a signature\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"sign_event\",\n        [JSON.stringify(event)],\n        24133,\n        (response) => {\n          this.debug(\"got a response\", response);\n          if (!response.error) {\n            const json = JSON.parse(response.result);\n            resolve(json.sig);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n};\n\n// src/signers/private-key/index.ts\nimport { generatePrivateKey, getPublicKey, nip04, getSignature } from \"nostr-tools\";\nvar NDKPrivateKeySigner = class {\n  _user;\n  privateKey;\n  constructor(privateKey) {\n    if (privateKey) {\n      this.privateKey = privateKey;\n      this._user = new NDKUser({ hexpubkey: getPublicKey(this.privateKey) });\n    }\n  }\n  static generate() {\n    const privateKey = generatePrivateKey();\n    return new NDKPrivateKeySigner(privateKey);\n  }\n  async blockUntilReady() {\n    if (!this._user) {\n      throw new Error(\"NDKUser not initialized\");\n    }\n    return this._user;\n  }\n  async user() {\n    await this.blockUntilReady();\n    return this._user;\n  }\n  async sign(event) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to sign without a private key\");\n    }\n    return getSignature(event, this.privateKey);\n  }\n  async encrypt(recipient, value) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to encrypt without a private key\");\n    }\n    const recipientHexPubKey = recipient.hexpubkey();\n    return await nip04.encrypt(this.privateKey, recipientHexPubKey, value);\n  }\n  async decrypt(sender, value) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to decrypt without a private key\");\n    }\n    const senderHexPubKey = sender.hexpubkey();\n    return await nip04.decrypt(this.privateKey, senderHexPubKey, value);\n  }\n};\n\n// src/zap/invoice.ts\nimport { decode } from \"light-bolt11-decoder\";\nfunction zapInvoiceFromEvent(event) {\n  const description = event.getMatchingTags(\"description\")[0];\n  const bolt11 = event.getMatchingTags(\"bolt11\")[0];\n  let decodedInvoice;\n  let zapRequest;\n  if (!description || !bolt11 || !bolt11[1]) {\n    return null;\n  }\n  try {\n    let zapRequestPayload = description[1];\n    if (zapRequestPayload.startsWith(\"%\")) {\n      zapRequestPayload = decodeURIComponent(zapRequestPayload);\n    }\n    if (zapRequestPayload === \"\") {\n      return null;\n    }\n    zapRequest = JSON.parse(zapRequestPayload);\n    decodedInvoice = decode(bolt11[1]);\n  } catch (e) {\n    return null;\n  }\n  const amountSection = decodedInvoice.sections.find((s) => s.name === \"amount\");\n  if (!amountSection) {\n    return null;\n  }\n  const amount = parseInt(amountSection.value);\n  if (!amount) {\n    return null;\n  }\n  const content = zapRequest.content;\n  const sender = zapRequest.pubkey;\n  const recipientTag = event.getMatchingTags(\"p\")[0];\n  const recipient = recipientTag[1];\n  let zappedEvent = event.getMatchingTags(\"e\")[0];\n  if (!zappedEvent) {\n    zappedEvent = event.getMatchingTags(\"a\")[0];\n  }\n  const zappedEventId = zappedEvent ? zappedEvent[1] : void 0;\n  const zapInvoice = {\n    id: event.id,\n    zapper: event.pubkey,\n    zappee: sender,\n    zapped: recipient,\n    zappedEvent: zappedEventId,\n    amount,\n    comment: content\n  };\n  return zapInvoice;\n}\n\n// src/index.ts\nvar NDK6 = class extends EventEmitter7 {\n  pool;\n  signer;\n  cacheAdapter;\n  debug;\n  devWriteRelaySet;\n  delayedSubscriptions;\n  constructor(opts = {}) {\n    super();\n    this.debug = opts.debug || debug3(\"ndk\");\n    this.pool = new NDKPool(opts.explicitRelayUrls || [], this);\n    this.signer = opts.signer;\n    this.cacheAdapter = opts.cacheAdapter;\n    this.delayedSubscriptions = /* @__PURE__ */ new Map();\n    if (opts.devWriteRelayUrls) {\n      this.devWriteRelaySet = NDKRelaySet2.fromRelayUrls(opts.devWriteRelayUrls, this);\n    }\n  }\n  toJSON() {\n    return { relayCount: this.pool.relays.size }.toString();\n  }\n  /**\n   * Connect to relays with optional timeout.\n   * If the timeout is reached, the connection will be continued to be established in the background.\n   */\n  async connect(timeoutMs) {\n    this.debug(\"Connecting to relays\", { timeoutMs });\n    return this.pool.connect(timeoutMs);\n  }\n  /**\n   * Get a NDKUser object\n   *\n   * @param opts\n   * @returns\n   */\n  getUser(opts) {\n    const user = new NDKUser(opts);\n    user.ndk = this;\n    return user;\n  }\n  /**\n   * Create a new subscription. Subscriptions automatically start and finish when all relays\n   * on the set send back an EOSE. (set `opts.closeOnEose` to `false` in order avoid this)\n   *\n   * @param filter\n   * @param opts\n   * @param relaySet explicit relay set to use\n   * @param autoStart automatically start the subscription\n   * @returns NDKSubscription\n   */\n  subscribe(filter, opts, relaySet, autoStart = true) {\n    const subscription = new NDKSubscription(this, filter, opts, relaySet);\n    if (autoStart)\n      subscription.start();\n    return subscription;\n  }\n  /**\n   * Publish an event\n   * @param event event to publish\n   * @returns\n   */\n  async publish(event, relaySet) {\n    if (!relaySet) {\n      relaySet = this.devWriteRelaySet || calculateRelaySetFromEvent(this, event);\n    }\n    return relaySet.publish(event);\n  }\n  async fetchEvent(idOrFilter, opts = {}, relaySet) {\n    let filter;\n    if (typeof idOrFilter === \"string\") {\n      filter = filterFromId(idOrFilter);\n    } else {\n      filter = idOrFilter;\n    }\n    if (!filter) {\n      throw new Error(`Invalid filter: ${JSON.stringify(idOrFilter)}`);\n    }\n    return new Promise((resolve) => {\n      const s = this.subscribe(filter, { ...opts, closeOnEose: true }, relaySet, false);\n      s.on(\"event\", (event) => {\n        event.ndk = this;\n        resolve(event);\n      });\n      s.on(\"eose\", () => {\n        resolve(null);\n      });\n      s.start();\n    });\n  }\n  /**\n   * Fetch events\n   */\n  async fetchEvents(filter, opts = {}, relaySet) {\n    return new Promise((resolve) => {\n      const events = /* @__PURE__ */ new Map();\n      const relaySetSubscription = this.subscribe(filter, { ...opts, closeOnEose: true }, relaySet, false);\n      relaySetSubscription.on(\"event\", (event) => {\n        const existingEvent = events.get(event.tagId());\n        if (existingEvent) {\n          event = dedup(existingEvent, event);\n        }\n        event.ndk = this;\n        events.set(event.tagId(), event);\n      });\n      relaySetSubscription.on(\"eose\", () => {\n        resolve(new Set(events.values()));\n      });\n      relaySetSubscription.start();\n    });\n  }\n  /**\n   * Ensures that a signer is available to sign an event.\n   */\n  async assertSigner() {\n    if (!this.signer) {\n      this.emit(\"signerRequired\");\n      throw new Error(\"Signer required\");\n    }\n  }\n};\nexport {\n  NDKEvent,\n  NDKKind,\n  NDKNip07Signer,\n  NDKNip46Backend,\n  NDKNip46Signer,\n  NDKNostrRpc,\n  NDKPrivateKeySigner,\n  NDKRelay2 as NDKRelay,\n  NDKRelaySet2 as NDKRelaySet,\n  NDKRelayStatus,\n  NDKSubscription,\n  NDKSubscriptionCacheUsage,\n  NDKSubscriptionGroup,\n  NDKUser,\n  NDK6 as default,\n  defaultOpts,\n  filterFromId,\n  mergeEvent,\n  mergeFilters,\n  zapInvoiceFromEvent\n};\n","import { chatData } from '../store';\nimport { getEventHash, relayInit } from 'nostr-tools';\nimport RelayPool from 'nostr/lib/relay-pool';\nimport { createEventDispatcher } from 'svelte';\nimport EventEmitter from 'events';\nimport * as uuid from 'uuid';\nimport debug from 'debug';\nimport { NDKEvent, zapInvoiceFromEvent } from '@nostr-dev-kit/ndk';\n\nconst log = new debug('nostr:adapter');\nconst profilesLog = new debug('nostr:adapter:profiles');\nconst writeLog = new debug('nostr:adapter:write');\n\nclass NstrAdapter {\n    relayStatus = {};\n    #pool = null;\n    #messages = {};\n    #eventEmitter = new EventEmitter();\n    #handlers = {}\n    tags;\n    referenceTags;\n    type;\n    #websiteOwnerPubkey;\n    chatId;\n    relayUrls = [];\n\n    #profileRequestQueue = [];\n    #requestedProfiles = [];\n    #profileRequestTimer;\n    #delayedSubscriptions = {};\n    #delayedSubscriptionTimeouts = {};\n\n    constructor(clientPubkey, {tags, referenceTags, type='DM', chatId, websiteOwnerPubkey, relays} = {}) {\n        this.pubkey = clientPubkey;\n        this.#websiteOwnerPubkey = websiteOwnerPubkey;\n        this.relayUrls = relays\n\n        if (type) {\n            this.setChatConfiguration(type, tags, referenceTags, chatId);\n        }\n    }\n\n    setChatConfiguration(type, tags, referenceTags, chatId) {\n        this.type = type;\n        this.tags = tags;\n        this.chatId = chatId;\n        this.referenceTags = referenceTags;\n\n        // handle connection\n        if (this.#pool) { this.#disconnect() }\n\n        let filters = [];\n\n        // handle subscriptions\n        // if this is DM type then subscribe to chats with this website owner\n        switch (this.type) {\n            case 'DM':\n                filters.push({\n                    kinds: [4],\n                    '#p': [this.pubkey, this.#websiteOwnerPubkey],\n                    'authors': [this.pubkey, this.#websiteOwnerPubkey]\n                });\n                break;\n            case 'GROUP':\n                if (this.chatId) {\n                    filters.push({\n                        kinds: [41, 42],\n                        \"#e\": [this.chatId],\n                        limit: 200,\n                    })\n                }\n            case 'GLOBAL':\n                if (this.tags && this.tags.length > 0) {\n                    filters.push({kinds: [1], '#t': this.tags, limit: 20});\n                }\n                if (this.referenceTags && this.referenceTags.length > 0) {\n                    filters.push({kinds: [1], '#r': this.referenceTags, limit: 20});\n                }\n\n                break;\n        }\n\n        if (filters && filters.length > 0) {\n            this.#connect()\n            this.subscribe(filters, (e) => { this.#emitMessage(e) })\n        }\n    }\n\n    async getPubKey() {\n        return this.pubkey;\n    }\n\n    on(event, callback) {\n        this.#eventEmitter.on(event, callback);\n    }\n\n    /**\n     * Send a message to the relay\n     * @param {String} message - The message to send\n     */\n    async send(message, {tagPubKeys, tags} = {}) {\n        let event;\n\n        if (!tags) { tags = []}\n\n        if (this.type === 'DM') {\n            event = await this.sendKind4(message, {tagPubKeys, tags});\n        } else if (this.type === 'GROUP') {\n            event = await this.sendKind42(message, {tagPubKeys, tags, chatId: this.chatId});\n        } else {\n            event = await this.sendKind1(message, {tagPubKeys, tags});\n        }\n\n        event.id = getEventHash(event)\n        const signedEvent = await this.signEvent(event)\n\n        this.#_publish(signedEvent);\n\n        return event.id;\n    }\n\n    async sendKind4(message, {tagPubKeys, tags} = {}) {\n        let ciphertext = await this.encrypt(this.#websiteOwnerPubkey, message);\n        let event = {\n            kind: 4,\n            pubkey: this.pubkey,\n            created_at: Math.floor(Date.now() / 1000),\n            content: ciphertext,\n            tags: [\n                ['p', this.#websiteOwnerPubkey],\n                ...tags\n            ],\n        }\n\n        return event;\n    }\n\n    async sendKind42(message, {tagPubKeys, tags, chatId} = {}) {\n        if (!tags) { tags = []; }\n\n        if (this.tags) {\n            this.tags.forEach((t) => tags.push(['t', t]));\n        }\n\n        // check if there is an e tag\n        const reply = !!tags.find((t) => t[0] === 'e');\n\n        if (!reply) {\n            tags.push(['e', chatId, \"wss://nos.lol\", reply ? \"reply\" : \"root\"]);\n        }\n\n        if (this.referenceTags) {\n            this.referenceTags.forEach((t) => tags.push(['r', t]));\n        }\n\n        let event = {\n            kind: 42,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: message,\n            pubkey: this.pubkey,\n        }\n\n        if (tagPubKeys) {\n            for (let pubkey of tagPubKeys) {\n                if (pubkey) {\n                    event.tags.push(['p', pubkey]);\n                }\n            }\n        }\n\n        event.id = getEventHash(event)\n        this.subscribeToEventAndResponses(event.id);\n\n        return event;\n    }\n\n    async sendKind1(message, {tagPubKeys, tags} = {}) {\n        if (!tags) { tags = []; }\n\n        if (this.tags) {\n            this.tags.forEach((t) => tags.push(['t', t]));\n        }\n\n        if (this.referenceTags) {\n            this.referenceTags.forEach((t) => tags.push(['r', t]));\n        }\n\n        let event = {\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: message,\n            pubkey: this.pubkey,\n        }\n\n        if (tagPubKeys) {\n            for (let pubkey of tagPubKeys) {\n                if (pubkey) {\n                    event.tags.push(['p', pubkey]);\n                }\n            }\n        }\n\n        event.id = getEventHash(event)\n        this.subscribeToEventAndResponses(event.id);\n\n        return event;\n    }\n\n    async #_publish(event) {\n        writeLog('publish', event);\n        this.#pool.send([ 'EVENT', event ]);\n    }\n\n    async onEvent(event, messageCallback) {\n        this.#addProfileRequest(event.pubkey);\n\n        messageCallback(event)\n    }\n\n    async delayedSubscribe(filters, family, timeout) {\n        this.#delayedSubscriptions[family] = this.#delayedSubscriptions[family] || []\n        this.#delayedSubscriptions[family].push(filters);\n\n        if (!this.#delayedSubscriptionTimeouts[family]) {\n            this.#delayedSubscriptionTimeouts[family] = setTimeout(() => {\n                delete this.#delayedSubscriptionTimeouts[family];\n\n                // if there are more than 10 filters then we need to split them up\n                // into multiple subscriptions\n                let filters = this.#delayedSubscriptions[family];\n                delete this.#delayedSubscriptions[family];\n\n                // split filters into groups of 10\n                let groups = [];\n                groups = filters.reduce((groups, filter, index) => {\n                    if (index % 10 === 0) {\n                        groups.push([]);\n                    }\n                    groups[groups.length - 1].push(filter);\n                    return groups;\n                }, groups);\n\n                groups.forEach((filters) => {\n                    this.subscribe(filters, (e) => { this.#emitMessage(e)});\n                });\n            }, timeout)\n        }\n    }\n\n    async subscribe(filters, messageCallback=null) {\n        if (!messageCallback) { messageCallback = (e) => { this.#emitMessage(e) } }\n        return this.#_subscribe(filters, messageCallback)\n    }\n\n    async #_subscribe(filters, messageCallback) {\n        const subId = uuid.v4();\n        this.#handlers[subId] = messageCallback;\n        if (!Array.isArray(filters)) { filters = [filters] }\n\n\n\n        this.#pool.subscribe(subId, filters);\n        this.#pool.on('event', (relay, recSubId, e) => {\n            this.onEvent(e, this.#handlers[recSubId])\n        });\n\n        return subId;\n    }\n\n    async #emitMessage(event) {\n        // has already been emitted\n        if (this.#messages[event.id]) {\n            return;\n        }\n\n        this.#messages[event.id] = true;\n\n        // decrypt\n        if (event.kind === 4) {\n            event.content = await this.decrypt(this.#websiteOwnerPubkey, event.content);\n        }\n\n        let deletedEvents = []\n        if (event.kind === 5) {\n            deletedEvents = event.tags.filter(tag => tag[0] === 'e').map(tag => tag[1]);\n        }\n\n        let zap;\n        if (event.kind === 9735) {\n            const ndkEvent = new NDKEvent(null, event);\n            zap = zapInvoiceFromEvent(ndkEvent);\n            console.log(`received a zap invoice: ${zap}`, event);\n        }\n\n        switch (event.kind) {\n            case 1:\n            case 42:\n                this.#eventEmitter.emit('message', event); break;\n            case 41:\n                this.#eventEmitter.emit('channelMetadata', event); break;\n            case 4: this.#eventEmitter.emit('message', event); break;\n            case 5: this.#eventEmitter.emit('deleted', deletedEvents); break;\n            case 7: this.#eventEmitter.emit('reaction', event); break;\n            case 9735: this.#eventEmitter.emit('zap', zap); break;\n            default:\n                // alert('unknown event kind ' + event.kind)\n                console.log('unknown event kind', event.kind, event);\n        }\n\n    }\n\n    subscribeToEventAndResponses(eventId) {\n        this.subscribe([\n            {ids: [eventId]},\n            {'#e': [eventId]},\n        ], (e) => {\n            this.#emitMessage(e);\n            // this.subscribeToResponses(e)\n        })\n    }\n\n    subscribeToResponses(event) {\n        this.subscribe([\n            {'#e': [event.id]},\n        ], (e) => {\n            this.#emitMessage(e);\n            this.subscribeToResponses(e)\n        })\n    }\n\n    /**\n     * Connect to the relay\n     */\n    #connect() {\n        this.relayUrls.forEach((url) => {\n            this.relayStatus[url] = 'disconnected';\n        });\n        this.#eventEmitter.emit('connectivity', this.relayStatus);\n\n        // console.log('connecting to relay', this.relayUrls);\n        this.#pool = new RelayPool(this.relayUrls)\n        this.#pool.on('open', (relay) => {\n            // console.log(`connected to ${relay.url}`, new Date())\n            this.relayStatus[relay.url] = 'connected';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n        })\n\n        this.#pool.on('error', (relay, r, e) => {\n            this.relayStatus[relay.url] = 'error';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n            console.log('error from relay', relay.url, r, e)\n        })\n\n        this.#pool.on('close', (relay, r) => {\n            this.relayStatus[relay.url] = 'closed';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n            console.log('error from relay', relay.url, r)\n        })\n\n        this.#pool.on('notice', (relay, r) => {\n            console.log('notice', relay.url, r)\n        })\n    }\n\n    #disconnect() {\n        this.relayUrls.forEach((url) => {\n            this.relayStatus[url] = 'disconnected';\n        });\n        this.#eventEmitter.emit('connectivity', this.relayStatus);\n        this.#pool.close();\n        this.#pool = null;\n    }\n\n    //\n    //\n    // Profiles\n    //\n    //\n    reqProfile(pubkey) {\n        this.#addProfileRequest(pubkey);\n    }\n\n    #addProfileRequest(pubkey, event=null) {\n        if (this.#profileRequestQueue.includes(pubkey)) { return; }\n        if (this.#requestedProfiles.includes(pubkey)) { return; }\n        this.#profileRequestQueue.push(pubkey);\n        this.#requestedProfiles.push(pubkey);\n\n        if (!this.#profileRequestTimer) {\n            this.#profileRequestTimer = setTimeout(() => {\n                this.#profileRequestTimer = null;\n                this.#requestProfiles();\n            }, 500);\n        }\n    }\n\n    /**\n     * Send request for all queued profiles\n     */\n    async #requestProfiles() {\n        if (this.#profileRequestQueue.length > 0) {\n            profilesLog('requesting profiles', this.#profileRequestQueue);\n\n            // send request\n            const subId = await this.subscribe({ kinds: [0], authors: this.#profileRequestQueue }, (e) => {\n                this.#processReceivedProfile(e);\n            });\n            profilesLog('subscribed to request', {subId})\n            this.#profileRequestQueue = [];\n\n            setTimeout(() => {\n                profilesLog('unsubscribing from request', {subId})\n                this.#pool.unsubscribe(subId);\n            }, 5000);\n        }\n    }\n\n    #processReceivedProfile(event) {\n        profilesLog('received profile', event)\n        let profile;\n        try {\n            profile = JSON.parse(event.content);\n        } catch (e) {\n            profilesLog('failed to parse profile', event);\n            return;\n        }\n        this.#eventEmitter.emit('profile', {pubkey: event.pubkey, profile});\n    }\n}\n\nexport default NstrAdapter;","import NstrAdapter from './index.js';\n\nclass NstrAdapterNip07 extends NstrAdapter {\n    constructor(pubkey, adapterConfig={}) {\n        super(pubkey, adapterConfig);\n    }\n\n    async signEvent(event) {\n        return await window.nostr.signEvent(event);\n    }\n\n    async encrypt(destPubkey, message) {\n        return await window.nostr.nip04.encrypt(destPubkey, message);\n    }\n\n    async decrypt(destPubkey, message) {\n        return await window.nostr.nip04.decrypt(destPubkey, message);\n    }\n}\n\nexport default NstrAdapterNip07;\n","import EventEmitter from 'events';\nimport { relayInit, getPublicKey, getEventHash, signEvent, validateEvent, verifySignature, nip04 } from 'nostr-tools';\n\nfunction _regeneratorRuntime() {\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function (method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nvar NostrRPC = /*#__PURE__*/function () {\n  function NostrRPC(opts) {\n    // events\n    this.events = new EventEmitter();\n    this.relay = opts.relay || 'wss://nostr.vulpem.com';\n    this.self = {\n      pubkey: getPublicKey(opts.secretKey),\n      secret: opts.secretKey\n    };\n  }\n  var _proto = NostrRPC.prototype;\n  _proto.call = /*#__PURE__*/function () {\n    var _call = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref, opts) {\n      var _this = this;\n      var target, _ref$request, _ref$request$id, id, method, _ref$request$params, params, relay, request, event;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            target = _ref.target, _ref$request = _ref.request, _ref$request$id = _ref$request.id, id = _ref$request$id === void 0 ? /*#__PURE__*/randomID() : _ref$request$id, method = _ref$request.method, _ref$request$params = _ref$request.params, params = _ref$request$params === void 0 ? [] : _ref$request$params;\n            _context3.next = 3;\n            return connectToRelay(this.relay);\n          case 3:\n            relay = _context3.sent;\n            // prepare request to be sent\n            request = prepareRequest(id, method, params);\n            _context3.next = 7;\n            return prepareEvent(this.self.secret, target, request);\n          case 7:\n            event = _context3.sent;\n            return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                var sub;\n                return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                  while (1) switch (_context2.prev = _context2.next) {\n                    case 0:\n                      sub = relay.sub([{\n                        kinds: [24133],\n                        authors: [target],\n                        '#p': [_this.self.pubkey],\n                        limit: 1\n                      }]);\n                      _context2.next = 3;\n                      return broadcastToRelay(relay, event, true);\n                    case 3:\n                      // skip waiting for response from remote\n                      if (opts && opts.skipResponse === true) resolve();\n                      sub.on('event', /*#__PURE__*/function () {\n                        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n                          var payload, plaintext;\n                          return _regeneratorRuntime().wrap(function _callee$(_context) {\n                            while (1) switch (_context.prev = _context.next) {\n                              case 0:\n                                _context.prev = 0;\n                                _context.next = 3;\n                                return nip04.decrypt(_this.self.secret, event.pubkey, event.content);\n                              case 3:\n                                plaintext = _context.sent;\n                                if (plaintext) {\n                                  _context.next = 6;\n                                  break;\n                                }\n                                throw new Error('failed to decrypt event');\n                              case 6:\n                                payload = JSON.parse(plaintext);\n                                _context.next = 12;\n                                break;\n                              case 9:\n                                _context.prev = 9;\n                                _context.t0 = _context[\"catch\"](0);\n                                return _context.abrupt(\"return\");\n                              case 12:\n                                if (isValidResponse(payload)) {\n                                  _context.next = 14;\n                                  break;\n                                }\n                                return _context.abrupt(\"return\");\n                              case 14:\n                                if (!(payload.id !== id)) {\n                                  _context.next = 16;\n                                  break;\n                                }\n                                return _context.abrupt(\"return\");\n                              case 16:\n                                // if the response is an error, reject the promise\n                                if (payload.error) {\n                                  reject(payload.error);\n                                }\n                                // if the response is a result, resolve the promise\n                                if (payload.result) {\n                                  resolve(payload.result);\n                                }\n                              case 18:\n                              case \"end\":\n                                return _context.stop();\n                            }\n                          }, _callee, null, [[0, 9]]);\n                        }));\n                        return function (_x5) {\n                          return _ref3.apply(this, arguments);\n                        };\n                      }());\n                    case 5:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }, _callee2);\n              }));\n              return function (_x3, _x4) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, this);\n    }));\n    function call(_x, _x2) {\n      return _call.apply(this, arguments);\n    }\n    return call;\n  }();\n  _proto.listen = /*#__PURE__*/function () {\n    var _listen = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      var _this2 = this;\n      var relay, sub;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return connectToRelay(this.relay);\n          case 2:\n            relay = _context5.sent;\n            sub = relay.sub([{\n              kinds: [24133],\n              '#p': [this.self.pubkey],\n              since: now()\n            }]);\n            sub.on('event', /*#__PURE__*/function () {\n              var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event) {\n                var payload, plaintext, response, body, responseEvent;\n                return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                  while (1) switch (_context4.prev = _context4.next) {\n                    case 0:\n                      _context4.prev = 0;\n                      _context4.next = 3;\n                      return nip04.decrypt(_this2.self.secret, event.pubkey, event.content);\n                    case 3:\n                      plaintext = _context4.sent;\n                      if (plaintext) {\n                        _context4.next = 6;\n                        break;\n                      }\n                      throw new Error('failed to decrypt event');\n                    case 6:\n                      payload = JSON.parse(plaintext);\n                      _context4.next = 12;\n                      break;\n                    case 9:\n                      _context4.prev = 9;\n                      _context4.t0 = _context4[\"catch\"](0);\n                      return _context4.abrupt(\"return\");\n                    case 12:\n                      if (isValidRequest(payload)) {\n                        _context4.next = 14;\n                        break;\n                      }\n                      return _context4.abrupt(\"return\");\n                    case 14:\n                      _context4.next = 17;\n                      return _this2.handleRequest(payload, event);\n                    case 17:\n                      response = _context4.sent;\n                      body = prepareResponse(response.id, response.result, response.error);\n                      _context4.next = 21;\n                      return prepareEvent(_this2.self.secret, event.pubkey, body);\n                    case 21:\n                      responseEvent = _context4.sent;\n                      // send response via relay\n                      relay.publish(responseEvent);\n                    case 23:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }, _callee4, null, [[0, 9]]);\n              }));\n              return function (_x6) {\n                return _ref4.apply(this, arguments);\n              };\n            }());\n            return _context5.abrupt(\"return\", sub);\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, this);\n    }));\n    function listen() {\n      return _listen.apply(this, arguments);\n    }\n    return listen;\n  }();\n  _proto.handleRequest = /*#__PURE__*/function () {\n    var _handleRequest = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(request, event) {\n      var id, method, params, result, error;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            id = request.id, method = request.method, params = request.params;\n            result = null;\n            error = null;\n            _context6.prev = 3;\n            this.event = event;\n            _context6.next = 7;\n            return this[method].apply(this, params);\n          case 7:\n            result = _context6.sent;\n            this.event = undefined;\n            _context6.next = 14;\n            break;\n          case 11:\n            _context6.prev = 11;\n            _context6.t0 = _context6[\"catch\"](3);\n            if (_context6.t0 instanceof Error) {\n              error = _context6.t0.message;\n            } else {\n              error = 'unknown error';\n            }\n          case 14:\n            return _context6.abrupt(\"return\", {\n              id: id,\n              result: result,\n              error: error\n            });\n          case 15:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this, [[3, 11]]);\n    }));\n    function handleRequest(_x7, _x8) {\n      return _handleRequest.apply(this, arguments);\n    }\n    return handleRequest;\n  }();\n  return NostrRPC;\n}();\nfunction now() {\n  return Math.floor(Date.now() / 1000);\n}\nfunction randomID() {\n  return Math.random().toString().slice(2);\n}\nfunction prepareRequest(id, method, params) {\n  return JSON.stringify({\n    id: id,\n    method: method,\n    params: params\n  });\n}\nfunction prepareResponse(id, result, error) {\n  return JSON.stringify({\n    id: id,\n    result: result,\n    error: error\n  });\n}\nfunction prepareEvent(_x9, _x10, _x11) {\n  return _prepareEvent.apply(this, arguments);\n}\nfunction _prepareEvent() {\n  _prepareEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(secretKey, pubkey, content) {\n    var cipherText, event, id, sig, signedEvent, ok, veryOk;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return nip04.encrypt(secretKey, pubkey, content);\n        case 2:\n          cipherText = _context7.sent;\n          event = {\n            kind: 24133,\n            created_at: now(),\n            pubkey: getPublicKey(secretKey),\n            tags: [['p', pubkey]],\n            content: cipherText,\n            id: '',\n            sig: ''\n          };\n          id = getEventHash(event);\n          sig = signEvent(event, secretKey);\n          signedEvent = _extends({}, event, {\n            id: id,\n            sig: sig\n          });\n          ok = validateEvent(signedEvent);\n          veryOk = verifySignature(signedEvent);\n          if (!(!ok || !veryOk)) {\n            _context7.next = 11;\n            break;\n          }\n          throw new Error('Event is not valid');\n        case 11:\n          return _context7.abrupt(\"return\", signedEvent);\n        case 12:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return _prepareEvent.apply(this, arguments);\n}\nfunction isValidRequest(payload) {\n  if (!payload) return false;\n  var keys = Object.keys(payload);\n  if (!keys.includes('id') || !keys.includes('method') || !keys.includes('params')) return false;\n  return true;\n}\nfunction isValidResponse(payload) {\n  if (!payload) return false;\n  var keys = Object.keys(payload);\n  if (!keys.includes('id') || !keys.includes('result') || !keys.includes('error')) return false;\n  return true;\n}\nfunction connectToRelay(_x12) {\n  return _connectToRelay.apply(this, arguments);\n}\nfunction _connectToRelay() {\n  _connectToRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(realayURL) {\n    var relay;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          relay = relayInit(realayURL);\n          _context8.next = 3;\n          return relay.connect();\n        case 3:\n          _context8.next = 5;\n          return new Promise(function (resolve, reject) {\n            relay.on('connect', function () {\n              resolve();\n            });\n            relay.on('error', function () {\n              reject(new Error(\"not possible to connect to \" + relay.url));\n            });\n          });\n        case 5:\n          return _context8.abrupt(\"return\", relay);\n        case 6:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return _connectToRelay.apply(this, arguments);\n}\nfunction broadcastToRelay(_x13, _x14, _x15) {\n  return _broadcastToRelay.apply(this, arguments);\n}\nfunction _broadcastToRelay() {\n  _broadcastToRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(relay, event, skipSeen) {\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          if (skipSeen === void 0) {\n            skipSeen = false;\n          }\n          _context9.next = 3;\n          return new Promise(function (resolve, reject) {\n            relay.on('error', function () {\n              reject(new Error(\"failed to connect to \" + relay.url));\n            });\n            var pub = relay.publish(event);\n            if (skipSeen) resolve();\n            pub.on('failed', function (reason) {\n              reject(reason);\n            });\n            pub.on('ok', function () {\n              resolve();\n            });\n          });\n        case 3:\n          return _context9.abrupt(\"return\", _context9.sent);\n        case 4:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return _broadcastToRelay.apply(this, arguments);\n}\n\nvar _TimeRangeToUnix;\nvar TimeRanges;\n(function (TimeRanges) {\n  TimeRanges[\"FIVE_MINS\"] = \"5mins\";\n  TimeRanges[\"ONE_HR\"] = \"1hour\";\n  TimeRanges[\"ONE_DAY\"] = \"1day\";\n  TimeRanges[\"ONE_WEEK\"] = \"1week\";\n  TimeRanges[\"ONE_MONTH\"] = \"1month\";\n  TimeRanges[\"ONE_YEAR\"] = \"1year\";\n})(TimeRanges || (TimeRanges = {}));\nvar TimeRangeToUnix = (_TimeRangeToUnix = {}, _TimeRangeToUnix[TimeRanges.FIVE_MINS] = /*#__PURE__*/Math.round( /*#__PURE__*/Date.now() / 1000) + 60 * 5, _TimeRangeToUnix[TimeRanges.ONE_HR] = /*#__PURE__*/Math.round( /*#__PURE__*/Date.now() / 1000) + 60 * 60, _TimeRangeToUnix[TimeRanges.ONE_DAY] = /*#__PURE__*/Math.round( /*#__PURE__*/Date.now() / 1000) + 60 * 60 * 24, _TimeRangeToUnix[TimeRanges.ONE_WEEK] = /*#__PURE__*/Math.round( /*#__PURE__*/Date.now() / 1000) + 60 * 60 * 24 * 7, _TimeRangeToUnix[TimeRanges.ONE_MONTH] = /*#__PURE__*/Math.round( /*#__PURE__*/Date.now() / 1000) + 60 * 60 * 24 * 30, _TimeRangeToUnix[TimeRanges.ONE_YEAR] = /*#__PURE__*/Math.round( /*#__PURE__*/Date.now() / 1000) + 60 * 60 * 24 * 365, _TimeRangeToUnix);\nvar ConnectURI = /*#__PURE__*/function () {\n  function ConnectURI(_ref) {\n    var target = _ref.target,\n      metadata = _ref.metadata,\n      relay = _ref.relay;\n    this.target = target;\n    this.metadata = metadata;\n    this.relay = relay;\n  }\n  ConnectURI.fromURI = function fromURI(uri) {\n    var url = new URL(uri);\n    var target = url.hostname || url.pathname.substring(2);\n    if (!target) throw new Error('Invalid connect URI: missing target');\n    var relay = url.searchParams.get('relay');\n    if (!relay) {\n      throw new Error('Invalid connect URI: missing relay');\n    }\n    var metadata = url.searchParams.get('metadata');\n    if (!metadata) {\n      throw new Error('Invalid connect URI: missing metadata');\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    try {\n      var md = JSON.parse(metadata);\n      return new ConnectURI({\n        target: target,\n        metadata: md,\n        relay: relay\n      });\n    } catch (ignore) {\n      throw new Error('Invalid connect URI: metadata is not valid JSON');\n    }\n  };\n  var _proto = ConnectURI.prototype;\n  _proto.toString = function toString() {\n    return \"nostrconnect://\" + this.target + \"?metadata=\" + encodeURIComponent(JSON.stringify(this.metadata)) + \"&relay=\" + encodeURIComponent(this.relay);\n  };\n  _proto.approve = /*#__PURE__*/function () {\n    var _approve = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(secretKey) {\n      var rpc;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            rpc = new NostrRPC({\n              relay: this.relay,\n              secretKey: secretKey\n            });\n            _context.next = 3;\n            return rpc.call({\n              target: this.target,\n              request: {\n                method: 'connect',\n                params: [getPublicKey(secretKey)]\n              }\n            }, {\n              skipResponse: true\n            });\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function approve(_x) {\n      return _approve.apply(this, arguments);\n    }\n    return approve;\n  }();\n  _proto.reject = /*#__PURE__*/function () {\n    var _reject = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(secretKey) {\n      var rpc;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            rpc = new NostrRPC({\n              relay: this.relay,\n              secretKey: secretKey\n            });\n            _context2.next = 3;\n            return rpc.call({\n              target: this.target,\n              request: {\n                method: 'disconnect',\n                params: []\n              }\n            }, {\n              skipResponse: true\n            });\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, this);\n    }));\n    function reject(_x2) {\n      return _reject.apply(this, arguments);\n    }\n    return reject;\n  }();\n  return ConnectURI;\n}();\nvar Connect = /*#__PURE__*/function () {\n  function Connect(_ref2) {\n    var target = _ref2.target,\n      relay = _ref2.relay,\n      secretKey = _ref2.secretKey;\n    this.events = new EventEmitter();\n    this.nip04 = {\n      encrypt: function () {\n        var _encrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_pubkey, _plaintext) {\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                throw new Error('Not implemented');\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        function encrypt(_x3, _x4) {\n          return _encrypt.apply(this, arguments);\n        }\n        return encrypt;\n      }(),\n      decrypt: function () {\n        var _decrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_pubkey, _ciphertext) {\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                throw new Error('Not implemented');\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4);\n        }));\n        function decrypt(_x5, _x6) {\n          return _decrypt.apply(this, arguments);\n        }\n        return decrypt;\n      }()\n    };\n    this.rpc = new NostrRPC({\n      relay: relay,\n      secretKey: secretKey\n    });\n    if (target) {\n      this.target = target;\n    }\n  }\n  var _proto2 = Connect.prototype;\n  _proto2.init = /*#__PURE__*/function () {\n    var _init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      var _this = this;\n      var sub;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return this.rpc.listen();\n          case 2:\n            sub = _context6.sent;\n            sub.on('event', /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event) {\n                var payload, plaintext, _payload$params, pubkey;\n                return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                  while (1) switch (_context5.prev = _context5.next) {\n                    case 0:\n                      _context5.prev = 0;\n                      _context5.next = 3;\n                      return nip04.decrypt(_this.rpc.self.secret, event.pubkey, event.content);\n                    case 3:\n                      plaintext = _context5.sent;\n                      if (plaintext) {\n                        _context5.next = 6;\n                        break;\n                      }\n                      throw new Error('failed to decrypt event');\n                    case 6:\n                      payload = JSON.parse(plaintext);\n                      _context5.next = 12;\n                      break;\n                    case 9:\n                      _context5.prev = 9;\n                      _context5.t0 = _context5[\"catch\"](0);\n                      return _context5.abrupt(\"return\");\n                    case 12:\n                      if (isValidRequest(payload)) {\n                        _context5.next = 14;\n                        break;\n                      }\n                      return _context5.abrupt(\"return\");\n                    case 14:\n                      _context5.t1 = payload.method;\n                      _context5.next = _context5.t1 === 'connect' ? 17 : _context5.t1 === 'disconnect' ? 23 : 26;\n                      break;\n                    case 17:\n                      if (!(!payload.params || payload.params.length !== 1)) {\n                        _context5.next = 19;\n                        break;\n                      }\n                      throw new Error('connect: missing pubkey');\n                    case 19:\n                      _payload$params = payload.params, pubkey = _payload$params[0];\n                      _this.target = pubkey;\n                      _this.events.emit('connect', pubkey);\n                      return _context5.abrupt(\"break\", 26);\n                    case 23:\n                      _this.target = undefined;\n                      _this.events.emit('disconnect');\n                      return _context5.abrupt(\"break\", 26);\n                    case 26:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }, _callee5, null, [[0, 9]]);\n              }));\n              return function (_x7) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this);\n    }));\n    function init() {\n      return _init.apply(this, arguments);\n    }\n    return init;\n  }();\n  _proto2.on = function on(evt, cb) {\n    this.events.on(evt, cb);\n  };\n  _proto2.off = function off(evt, cb) {\n    this.events.off(evt, cb);\n  };\n  _proto2.disconnect = /*#__PURE__*/function () {\n    var _disconnect = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            if (this.target) {\n              _context7.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            // notify the UI that we are disconnecting\n            this.events.emit('disconnect');\n            _context7.prev = 3;\n            _context7.next = 6;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'disconnect',\n                params: []\n              }\n            }, {\n              skipResponse: true\n            });\n          case 6:\n            _context7.next = 11;\n            break;\n          case 8:\n            _context7.prev = 8;\n            _context7.t0 = _context7[\"catch\"](3);\n            throw new Error('Failed to disconnect');\n          case 11:\n            this.target = undefined;\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7, this, [[3, 8]]);\n    }));\n    function disconnect() {\n      return _disconnect.apply(this, arguments);\n    }\n    return disconnect;\n  }();\n  _proto2.getPublicKey = /*#__PURE__*/function () {\n    var _getPublicKey = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n      var response;\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) switch (_context8.prev = _context8.next) {\n          case 0:\n            if (this.target) {\n              _context8.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context8.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'get_public_key',\n                params: []\n              }\n            });\n          case 4:\n            response = _context8.sent;\n            return _context8.abrupt(\"return\", response);\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }, _callee8, this);\n    }));\n    function getPublicKey() {\n      return _getPublicKey.apply(this, arguments);\n    }\n    return getPublicKey;\n  }();\n  _proto2.signEvent = /*#__PURE__*/function () {\n    var _signEvent = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(event) {\n      var eventWithSig;\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) switch (_context9.prev = _context9.next) {\n          case 0:\n            if (this.target) {\n              _context9.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context9.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'sign_event',\n                params: [event]\n              }\n            });\n          case 4:\n            eventWithSig = _context9.sent;\n            return _context9.abrupt(\"return\", eventWithSig);\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }, _callee9, this);\n    }));\n    function signEvent(_x8) {\n      return _signEvent.apply(this, arguments);\n    }\n    return signEvent;\n  }();\n  _proto2.describe = /*#__PURE__*/function () {\n    var _describe = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n      var response;\n      return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n        while (1) switch (_context10.prev = _context10.next) {\n          case 0:\n            if (this.target) {\n              _context10.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context10.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'describe',\n                params: []\n              }\n            });\n          case 4:\n            response = _context10.sent;\n            return _context10.abrupt(\"return\", response);\n          case 6:\n          case \"end\":\n            return _context10.stop();\n        }\n      }, _callee10, this);\n    }));\n    function describe() {\n      return _describe.apply(this, arguments);\n    }\n    return describe;\n  }();\n  _proto2.delegate = /*#__PURE__*/function () {\n    var _delegate = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(delegatee, conditions) {\n      var delegation;\n      return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n        while (1) switch (_context11.prev = _context11.next) {\n          case 0:\n            if (delegatee === void 0) {\n              delegatee = this.rpc.self.pubkey;\n            }\n            if (this.target) {\n              _context11.next = 3;\n              break;\n            }\n            throw new Error('Not connected');\n          case 3:\n            if (!(conditions.until && typeof conditions.until !== 'number')) {\n              _context11.next = 7;\n              break;\n            }\n            if (Object.keys(TimeRangeToUnix).includes(conditions.until)) {\n              _context11.next = 6;\n              break;\n            }\n            throw new Error('conditions.until must be either a number or a valid TimeRange');\n          case 6:\n            conditions.until = TimeRangeToUnix[conditions.until];\n          case 7:\n            if (!(conditions.since && typeof conditions.since !== 'number')) {\n              _context11.next = 11;\n              break;\n            }\n            if (Object.keys(TimeRangeToUnix).includes(conditions.since)) {\n              _context11.next = 10;\n              break;\n            }\n            throw new Error('conditions.since must be either a number or a valid TimeRange');\n          case 10:\n            conditions.since = TimeRangeToUnix[conditions.since];\n          case 11:\n            _context11.next = 13;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'delegate',\n                params: [delegatee, conditions]\n              }\n            });\n          case 13:\n            delegation = _context11.sent;\n            return _context11.abrupt(\"return\", delegation);\n          case 15:\n          case \"end\":\n            return _context11.stop();\n        }\n      }, _callee11, this);\n    }));\n    function delegate(_x9, _x10) {\n      return _delegate.apply(this, arguments);\n    }\n    return delegate;\n  }();\n  _proto2.getRelays = /*#__PURE__*/function () {\n    var _getRelays = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n      return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n        while (1) switch (_context12.prev = _context12.next) {\n          case 0:\n            throw new Error('Not implemented');\n          case 1:\n          case \"end\":\n            return _context12.stop();\n        }\n      }, _callee12);\n    }));\n    function getRelays() {\n      return _getRelays.apply(this, arguments);\n    }\n    return getRelays;\n  }();\n  return Connect;\n}();\n\nvar NostrSigner = /*#__PURE__*/function (_NostrRPC) {\n  _inheritsLoose(NostrSigner, _NostrRPC);\n  function NostrSigner() {\n    return _NostrRPC.apply(this, arguments) || this;\n  }\n  var _proto = NostrSigner.prototype;\n  _proto.disconnect = /*#__PURE__*/function () {\n    var _disconnect = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            this.events.emit('disconnect');\n            return _context.abrupt(\"return\", null);\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function disconnect() {\n      return _disconnect.apply(this, arguments);\n    }\n    return disconnect;\n  }();\n  _proto.isConnected = function isConnected() {\n    throw new Error('Method not implemented yet.');\n  };\n  return NostrSigner;\n}(NostrRPC);\n\nexport { Connect, ConnectURI, NostrRPC, NostrSigner, TimeRangeToUnix, TimeRanges, broadcastToRelay, connectToRelay, isValidRequest, isValidResponse, now, prepareEvent, prepareRequest, prepareResponse, randomID };\n//# sourceMappingURL=connect.esm.js.map\n","import NstrAdapter from './index.js';\nimport { Connect } from '@nostr-connect/connect';\n\nclass NstrAdapterNip46 extends NstrAdapter {\n    #secretKey = null;\n    \n    constructor(pubkey, secretKey, adapterConfig = {}) {\n        super(pubkey, adapterConfig);\n        this.#secretKey = secretKey;\n    }\n\n    async signEvent(event) {\n        const connect = new Connect({\n            secretKey: this.#secretKey,\n            target: this.pubkey,\n        });\n        await connect.init();\n        \n        event.sig = await connect.signEvent('12323423434');\n        return event;\n    }\n}\n\nexport default NstrAdapterNip46;\n","import { generatePrivateKey, signEvent, getPublicKey, nip04 } from 'nostr-tools';\nimport NstrAdapter from './index.js';\n\nclass NstrAdapterDiscadableKeys extends NstrAdapter {\n    #privateKey;\n\n    constructor(adapterConfig={}) {\n        let key = localStorage.getItem('nostrichat-discardable-key');\n        let publicKey = localStorage.getItem('nostrichat-discardable-public-key');\n\n        if (!key) {\n            key = generatePrivateKey();\n            console.log('generated key', key);\n            publicKey = getPublicKey(key);\n        }\n\n        localStorage.setItem('nostrichat-discardable-key', key);\n        localStorage.setItem('nostrichat-discardable-public-key', publicKey);\n\n        super(publicKey, adapterConfig);\n        \n        this.#privateKey = key;\n        console.log(key);\n    }\n\n    async signEvent(event) {\n        event.sig = await signEvent(event, this.#privateKey);\n        return event;\n    }\n\n    async encrypt(destPubkey, message) {\n        console.log(this.#privateKey);\n        return await nip04.encrypt(this.#privateKey, destPubkey, message);\n    }\n\n    async decrypt(destPubkey, message) {\n        return await nip04.decrypt(this.#privateKey, destPubkey, message);\n    }\n}\n\nexport default NstrAdapterDiscadableKeys;\n","<script>\n  import { onMount } from \"svelte\";\n  // import QR from 'svelte-qr';\n  import { chatAdapter } from \"./lib/store\";\n  import NstrAdapterNip07 from \"./lib/adapters/nip07.js\";\n  import NstrAdapterNip46 from \"./lib/adapters/nip46.js\";\n  import NstrAdapterDiscadableKeys from \"./lib/adapters/discardable-keys.js\";\n\n  export let firstStartupDone;\n  export let managedLogin;\n  export let startPage;\n  export let websiteOwnerPubkey;\n  export let chatConfiguration;\n  export let relays;\n  export let toggleChat;\n\n  let hasNostrNip07 = true;\n  let publicKey = null;\n  let nip46URI;\n  let adapterConfig;\n\n  onMount(() => {\n    // hasNostrNip07 = !!window.nostr;\n\n    const type = localStorage.getItem(\"nostrichat-type\");\n\n    if (type === \"nip07\") {\n      useNip07();\n    } else if (type === \"nip-46\") {\n      useNip46();\n    }\n\n    adapterConfig = {\n      type: chatConfiguration.chatType,\n      tags: chatConfiguration.chatTags,\n      referenceTags: chatConfiguration.chatReferenceTags,\n      websiteOwnerPubkey,\n      relays,\n    };\n\n    if (startPage === \"chat\") {\n      firstStartupDone();\n      chatAdapter.set(new NstrAdapterDiscadableKeys(adapterConfig));\n    } else {\n      managedLogin();\n    }\n  });\n\n  function useNip07() {\n    window.nostr.getPublicKey().then((pubkey) => {\n      localStorage.setItem(\"nostrichat-type\", \"nip07\");\n      chatAdapter.set(new NstrAdapterNip07(pubkey, adapterConfig));\n    });\n  }\n  \n  let showAdvanced = false;\n  let foundKeys = false;\n\n  if (localStorage.getItem(\"nostrichat-discardable-key\") || localStorage.getItem(\"nostrichat-discardable-public-key\")) {\n    foundKeys = true;\n  }\n\n  function resetKeys() {\n    localStorage.removeItem(\"nostrichat-discardable-key\");\n    localStorage.removeItem(\"nostrichat-discardable-public-key\");\n    foundKeys = false;\n  }\n\n  import { generatePrivateKey, getPublicKey } from \"nostr-tools\";\n  import { Connect, ConnectURI } from \"@nostr-connect/connect\";\n\n  async function useDiscardableKeys() {\n    chatAdapter.set(new NstrAdapterDiscadableKeys(adapterConfig));\n  }\n\n  async function useNip46() {\n    let key = localStorage.getItem(\"nostrichat-nostr-connect-key\");\n    let publicKey = localStorage.getItem(\"nostrichat-nostr-connect-public-key\");\n\n    if (key) {\n      chatAdapter.set(new NstrAdapterNip46(publicKey, key, adapterConfig));\n      return;\n    }\n\n    key = generatePrivateKey();\n\n    const connect = new Connect({\n      secretKey: key,\n      relay: \"wss://nostr.vulpem.com\",\n    });\n    connect.events.on(\"connect\", (connectedPubKey) => {\n      localStorage.setItem(\"nostrichat-nostr-connect-key\", key);\n      localStorage.setItem(\n        \"nostrichat-nostr-connect-public-key\",\n        connectedPubKey\n      );\n      localStorage.setItem(\"nostrichat-type\", \"nip-46\");\n\n      console.log(\"connected to nostr connect relay\");\n      publicKey = connectedPubKey;\n      chatAdapter.set(new NstrAdapterNip46(publicKey, key));\n      nip46URI = null;\n    });\n    connect.events.on(\"disconnect\", () => {\n      console.log(\"disconnected from nostr connect relay\");\n    });\n    await connect.init();\n\n    let windowTitle, currentUrl, currentDomain;\n\n    try {\n      windowTitle = window.document.title || \"Nostrichat\";\n      currentUrl = new URL(window.location.href);\n      currentDomain = currentUrl.hostname;\n    } catch (e) {\n      currentUrl = window.location.href;\n      currentDomain = currentUrl;\n    }\n\n    const connectURI = new ConnectURI({\n      target: getPublicKey(key),\n      relay: \"wss://nostr.vulpem.com\",\n      metadata: {\n        name: windowTitle,\n        description: \"🔉🔉🔉\",\n        url: currentUrl,\n      },\n    });\n\n    nip46URI = connectURI.toString();\n  }\n\n  function Nip46Copy() {\n    navigator.clipboard.writeText(nip46URI);\n  }\n</script>\n\n<div\n  class=\"flex justify-between items-center p-4 bg-purple-700 text-white md:rounded-t-md\"\n>\n  <h3 class=\"m-0 text-lg\">How whould you like to connect?</h3>\n  <button\n    id=\"close-popup\"\n    on:click={toggleChat}\n    class=\"bg-transparent border-none text-white cursor-pointer\"\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      class=\"h-6 w-6\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      stroke-width=\"2\"\n      style=\"--darkreader-inline-stroke: currentColor;\"\n      data-darkreader-inline-stroke=\"\"\n      ><path\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n        d=\"M6 18L18 6M6 6l12 12\"\n      /></svg\n    >\n  </button>\n</div>\n\n<div class=\"flex-1 p-4 overflow-y-auto\">\n  {#if publicKey}\n    <p class=\"text-gray-400 mb-3 font-bold\">\n      Nostr Connect is a WIP, not fully implemented yet!\n    </p>\n\n    <p class=\"text-gray-400 mb-3\">\n      You are currently connected with the following public key:\n      <span>{publicKey}</span>\n    </p>\n  {/if}\n\n  {#if nip46URI}\n    <p class=\"text-gray-600 mb-3\">\n      Scan this with your Nostr Connect (click to copy to clipboard)\n    </p>\n\n    <div class=\"bg-white w-full p-3\" on:click|preventDefault={Nip46Copy}>\n      <!--<QR text={nip46URI} />-->\n    </div>\n\n    <button class=\"bg-purple-800 hover:bg-purple-700 w-full p-2 rounded-xl text-center font-regular text-white\"\n      on:click|preventDefault={() => {\n        nip46URI = null;\n      }}\n    >\n      Cancel\n    </button>\n  {:else if !publicKey}\n    <div class=\"flex flex-col gap-1\">\n      {#if hasNostrNip07}\n        <button class=\"bg-purple-800 hover:bg-purple-700 w-full p-4 rounded-xl text-center font-regular text-gray-200\"\n          on:click|preventDefault={useNip07}\n        >\n          Browser Extension (NIP-07)\n        </button>\n      {/if}\n\n      <button class=\"bg-purple-800 hover:bg-purple-700 w-full p-4 rounded-xl text-center font-regular text-gray-200\"\n        on:click|preventDefault={useNip46}\n      >\n        Nostr Connect (NIP-46)\n      </button>\n\n      <button class=\"bg-purple-800 hover:bg-purple-700 w-full p-4 rounded-xl text-center font-regular text-gray-200\"\n        on:click|preventDefault={useDiscardableKeys}\n      >\n        Anonymous\n        <span class=\"text-xs text-gray-300\"> (Ephemeral Keys) </span>\n      </button>\n\n      {#if foundKeys}\n      <button on:click={() => showAdvanced = !showAdvanced} class=\"text-purple-700 my-4 hover:underline text-xs\">View Advanced</button>\n      {#if showAdvanced == true}\n      <button class=\"bg-red-700 hover:bg-red-600 w-full p-4 rounded-xl text-center font-regular text-gray-200\"\n      on:click|preventDefault={resetKeys}\n      >Reset Anonymous Keys</button>\n      {/if}\n      {/if}\n    </div>\n  {/if}\n</div>\n\n<style>\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n</style>\n","\"use strict\";\n/* tslint:disable:max-classes-per-file */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InternalError = exports.InvalidDataError = exports.RoutingError = exports.UnsupportedMethodError = exports.ConnectionError = exports.RejectionError = exports.MissingProviderError = void 0;\n/**\n * Workaround for custom errors when compiling typescript targeting 'ES5'.\n * see: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n * @param {CustomError} error\n * @param newTarget the value of `new.target`\n * @param {Function} errorType\n */\nfunction fixError(error, newTarget, errorType) {\n    Object.setPrototypeOf(error, errorType.prototype);\n    // when an error constructor is invoked with the `new` operator\n    if (newTarget === errorType) {\n        error.name = newTarget.name;\n        // exclude the constructor call of the error type from the stack trace.\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(error, errorType);\n        }\n        else {\n            var stack = new Error(error.message).stack;\n            if (stack) {\n                error.stack = fixStack(stack, \"new \".concat(newTarget.name));\n            }\n        }\n    }\n}\nfunction fixStack(stack, functionName) {\n    if (!stack)\n        return stack;\n    if (!functionName)\n        return stack;\n    // exclude lines starts with:  \"  at functionName \"\n    var exclusion = new RegExp(\"\\\\s+at\\\\s\".concat(functionName, \"\\\\s\"));\n    var lines = stack.split(\"\\n\");\n    var resultLines = lines.filter(function (line) { return !line.match(exclusion); });\n    return resultLines.join(\"\\n\");\n}\n/// CUSTOM ERRORS ///\n// When no WebLN provider is available\nvar MissingProviderError = /** @class */ (function (_super) {\n    __extends(MissingProviderError, _super);\n    function MissingProviderError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, MissingProviderError);\n        return _this;\n    }\n    return MissingProviderError;\n}(Error));\nexports.MissingProviderError = MissingProviderError;\n// When the user rejects a request\nvar RejectionError = /** @class */ (function (_super) {\n    __extends(RejectionError, _super);\n    function RejectionError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, RejectionError);\n        return _this;\n    }\n    return RejectionError;\n}(Error));\nexports.RejectionError = RejectionError;\n// When the node can't be connected to (i.e. the app did nothing wrong)\nvar ConnectionError = /** @class */ (function (_super) {\n    __extends(ConnectionError, _super);\n    function ConnectionError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, ConnectionError);\n        return _this;\n    }\n    return ConnectionError;\n}(Error));\nexports.ConnectionError = ConnectionError;\n// The WebLN provider doesn't support this method\nvar UnsupportedMethodError = /** @class */ (function (_super) {\n    __extends(UnsupportedMethodError, _super);\n    function UnsupportedMethodError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, UnsupportedMethodError);\n        return _this;\n    }\n    return UnsupportedMethodError;\n}(Error));\nexports.UnsupportedMethodError = UnsupportedMethodError;\n// The desired node couldn't be routed to\nvar RoutingError = /** @class */ (function (_super) {\n    __extends(RoutingError, _super);\n    function RoutingError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, RoutingError);\n        return _this;\n    }\n    return RoutingError;\n}(Error));\nexports.RoutingError = RoutingError;\n// An argument passed was somehow invalid (e.g. malformed invoice)\nvar InvalidDataError = /** @class */ (function (_super) {\n    __extends(InvalidDataError, _super);\n    function InvalidDataError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, InvalidDataError);\n        return _this;\n    }\n    return InvalidDataError;\n}(Error));\nexports.InvalidDataError = InvalidDataError;\n// Something broke in the WebLN provider internally, nothing to do with the app\nvar InternalError = /** @class */ (function (_super) {\n    __extends(InternalError, _super);\n    function InternalError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, InternalError);\n        return _this;\n    }\n    return InternalError;\n}(Error));\nexports.InternalError = InternalError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.requestProvider = void 0;\nvar errors_1 = require(\"./errors\");\nfunction requestProvider(_) {\n    if (_ === void 0) { _ = {}; }\n    return new Promise(function (resolve, reject) {\n        if (typeof window === 'undefined') {\n            return reject(new Error('Must be called in a browser context'));\n        }\n        var webln = window.webln;\n        if (!webln) {\n            return reject(new errors_1.MissingProviderError('Your browser has no WebLN provider'));\n        }\n        webln.enable()\n            .then(function () { return resolve(webln); })\n            .catch(function (err) { return reject(err); });\n    });\n}\nexports.requestProvider = requestProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./client\"), exports);\n__exportStar(require(\"./provider\"), exports);\n__exportStar(require(\"./errors\"), exports);\n","<script>\n  export let icon, amount, amountDisplay, event, mobilePR;\n  import { zappingMessage } from \"./lib/store\";\n  import NDK, { NDKEvent, NDKNip07Signer } from \"@nostr-dev-kit/ndk\";\n  import { requestProvider } from \"webln\";\n\n  let hover = false;\n\n  async function zap() {\n    const signer = new NDKNip07Signer();\n    const ndk = new NDK({\n      explicitRelayUrls: [\n        \"wss://nos.lol\",\n        \"wss://relay.nostr.band\",\n        \"wss://relay.damus.io\",\n        \"wss://nostr.mom\",\n        \"wss://no.str.cr\",\n      ],\n    });\n    ndk.signer = signer;\n    await ndk.connect();\n    let pr;\n    try {\n      const ndkEvent = new NDKEvent(ndk, event);\n      pr = await ndkEvent.zap(amount * 1000);\n    } catch (e) {\n      alert(e);\n      return;\n    }\n\n    let webln;\n\n    try {\n      webln = await requestProvider();\n    } catch (err) {\n      mobilePR = pr;\n      return;\n    }\n\n    try {\n      await webln.sendPayment(pr);\n      $zappingMessage = null;\n    } catch (err) {\n      mobilePR = pr;\n    }\n  }\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n  on:mouseenter={() => (hover = true)}\n  on:mouseleave={() => (hover = false)}\n  on:click|preventDefault={zap}\n>\n  {#if !hover}\n    <span class=\"text-xl\">{icon}</span>\n  {:else}\n    <span class=\"text-base text-white flex flex-col items-center\">\n      {amountDisplay || amount}\n    </span>\n  {/if}\n</div>\n","\"use strict\";\n/**\n * Everything needed to implement your own provider.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","<script>\n  import { afterUpdate, onMount } from \"svelte\";\n  import { selectedMessage, zappingMessage, zapsPerMessage } from \"./lib/store\";\n  import { chatData, chatAdapter } from \"./lib/store\";\n  import { nip19 } from \"nostr-tools\";\n  import ZapAmountButton from \"./ZapAmountButton.svelte\";\n  // import { prettifyContent } from '$lib/utils';\n  export let event;\n  export let responses;\n  export let websiteOwnerPubkey;\n\n  let profiles = {};\n  let profilePicture;\n  let npub;\n  let zappingIt;\n  let hovering;\n  let mobilePR;\n\n  let zappedAmount = 0;\n\n  function selectMessage() {\n    if ($selectedMessage === event.id) {\n      $selectedMessage = null;\n    } else {\n      $selectedMessage = event.id;\n    }\n  }\n\n  // delay-fetch responses\n  onMount(() => {\n    $chatAdapter.delayedSubscribe(\n      { kinds: [1, 42, 9735], \"#e\": [event.id] },\n      \"responses\",\n      500\n    );\n  });\n\n  const byWebsiteOwner = !!websiteOwnerPubkey === event.pubkey;\n\n  $: profiles = $chatData.profiles;\n  $: displayName =\n    (profiles[event.pubkey] && profiles[event.pubkey].display_name) ||\n    `[${event.pubkey.slice(0, 6)}]`;\n  // $: nip05 = profiles[event.pubkey] && profiles[event.pubkey].nip05;\n  $: zappingIt = $zappingMessage === event.id;\n  $: {\n    try {\n      npub = nip19.npubEncode(event.pubkey);\n    } catch (e) {\n      npub = event.pubkey;\n    }\n  }\n\n  $chatAdapter.on(\"zap\", () => {\n    zappedAmount =\n      $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n  });\n\n  $: {\n    zappedAmount =\n      $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n  }\n\n  afterUpdate(() => {\n    zappedAmount =\n      $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n  });\n\n  $: profilePicture =\n    (profiles[event.pubkey] && profiles[event.pubkey].picture) ||\n    `https://robohash.org/${event.pubkey.slice(0, 1)}.png?set=set1`;\n\n  // const repliedIds = event.tags.filter(e => e[0] === 'e').map(e => e[1]);\n\n  let timestamp = new Date(event.created_at * 1000);\n</script>\n\n<div\n  class=\"\n        flex flex-col gap-4\n        p-2-lg mb-3\n        text-wrap\n        relative\n    \"\n  on:mouseenter={() => (hovering = true)}\n  on:mouseleave={() => (hovering = false)}\n>\n  <div class=\"flex flex-row gap-3\">\n    <div class=\"min-w-fit flex flex-col gap-2\">\n      <a href={`nostr:${npub}`}>\n        <img\n          src={profilePicture}\n          class=\"\n                    block w-8 h-8 rounded-full\n                    {byWebsiteOwner ? 'ring-purple-700 ring-4' : ''}\n                \"\n          alt=\"\"\n        />\n      </a>\n\n      <button\n        class=\"\n                        rounded-full\n                        {zappedAmount > 0\n          ? 'opacity-100 text-base'\n          : 'bg-orange-500 opacity-10 text-xl'}\n                        w-8 h-8\n                        flex items-center\n                        justify-center\n                        hover:opacity-100\n                    \"\n        on:click|preventDefault={() =>\n          ($zappingMessage = $zappingMessage === event.id ? null : event.id)}\n      >\n        {#if zappedAmount > 0}\n          <p class=\"flex flex-col items-center my-4\">\n            ⚡️\n            <span class=\"text-orange-500 font-semibold\">\n              {zappedAmount / 1000}\n            </span>\n          </p>\n        {:else}\n          ⚡️\n        {/if}\n      </button>\n\n      <div\n        class=\"\n                {zappingIt\n          ? 'w-full rounded-full bg-white  drop-shadow-xl justify-between border-2 border-gray-200'\n          : ' rounded-full w-8 h-8 justify-center'}\n                flex items-center absolute ml-5 mt-10 z-10\"\n      >\n        {#if zappingIt}\n          {#if mobilePR}\n            <div class=\"flex flex-col gap-3 w-full\">\n              <a\n                href={`lightning:${mobilePR}`}\n                class=\"text-center w-full p-3 bg-black text-white rounded-t-xl\"\n                >Open in wallet</a\n              >\n              <button\n                class=\"bg-white rounder-b-xl p-3\"\n                on:click={() => {\n                  $zappingMessage = null;\n                }}\n              >\n                Cancel\n              </button>\n            </div>\n          {:else}\n            <div class=\"flex flex-row items-stretch justify-between w-full\">\n              <div\n                class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\"\n              >\n                <ZapAmountButton icon=\"👍\" amount={500} {event} bind:mobilePR />\n              </div>\n              <div\n                class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\"\n              >\n                <ZapAmountButton\n                  icon=\"🤙\"\n                  amount={2500}\n                  amountDisplay={\"2.5k\"}\n                  {event}\n                  bind:mobilePR\n                />\n              </div>\n              <div\n                class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\"\n              >\n                <ZapAmountButton\n                  icon=\"🙌\"\n                  amount={5000}\n                  amountDisplay={\"5k\"}\n                  {event}\n                  bind:mobilePR\n                />\n              </div>\n              <div\n                class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\"\n              >\n                <ZapAmountButton\n                  icon=\"🧡\"\n                  amount={10000}\n                  amountDisplay={\"10k\"}\n                  {event}\n                  bind:mobilePR\n                />\n              </div>\n              <div\n                class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\"\n              >\n                <ZapAmountButton\n                  icon=\"🤯\"\n                  amount={100000}\n                  amountDisplay={\"100k\"}\n                  {event}\n                  bind:mobilePR\n                />\n              </div>\n              <div\n                class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\"\n              >\n                <ZapAmountButton\n                  icon=\"😎\"\n                  amount={1000000}\n                  amountDisplay={\"1M\"}\n                  {event}\n                  bind:mobilePR\n                />\n              </div>\n            </div>\n          {/if}\n        {/if}\n      </div>\n\n      <!-- <span class=\"text-base font-semibold text-clip\">{displayName}</span>\n                {#if nip05}\n                    <span class=\"text-sm text-gray-400\">{nip05}</span>\n                {/if} -->\n    </div>\n\n    <div class=\"w-full overflow-hidden\">\n      <div\n        class=\"flex flex-row justify-between text-center overflow-clip text-clip w-full\"\n      />\n\n      <div\n        class=\"\n                max-h-64 text-base\n                cursor-pointer\n                border border-slate-200\n                {$selectedMessage === event.id\n          ? 'bg-purple-700 text-white'\n          : 'bg-white text-gray-900 hover:bg-slate-100'}\n                p-4 py-2 overflow-auto rounded-2xl\n                shadow-sm\n            \"\n        on:click|preventDefault={() => {\n          selectMessage(event.id);\n        }}\n        on:keydown|preventDefault={() => {\n          selectMessage(event.id);\n        }}\n        on:keyup|preventDefault={() => {\n          selectMessage(event.id);\n        }}\n      >\n        {event.content}\n      </div>\n\n      <div\n        class=\"flex flex-row-reverse justify-between mt-1 overflow-clip items-center relative\"\n      >\n        <div\n          class=\"text-xs text-gray-400 text-ellipsis overflow-clip whitespace-nowrap\"\n        >\n          <span class=\"py-2\">\n            {timestamp.toLocaleString()}\n          </span>\n        </div>\n\n        {#if byWebsiteOwner}\n          <div class=\"text-purple-500 text-xs\">Website owner</div>\n        {:else}\n          <div class=\"text-xs text-gray-400\">\n            {displayName}\n          </div>\n        {/if}\n      </div>\n    </div>\n  </div>\n</div>\n\n{#if responses[event.id].length > 0}\n  <div class=\"pl-5 border-l border-l-gray-400 flex flex-col gap-4\">\n    {#each responses[event.id] as response}\n      <svelte:self {websiteOwnerPubkey} event={response} {responses} />\n    {/each}\n  </div>\n{/if}\n\n<style>\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n</style>\n","export default {\n  $(selector) {\n    if (typeof selector === \"string\") {\n      return document.querySelector(selector);\n    }\n    return selector;\n  },\n  extend(...args) {\n    return Object.assign(...args);\n  },\n  cumulativeOffset(element) {\n    let top = 0;\n    let left = 0;\n\n    do {\n      top += element.offsetTop || 0;\n      left += element.offsetLeft || 0;\n      element = element.offsetParent;\n    } while (element);\n\n    return {\n      top: top,\n      left: left\n    };\n  },\n  directScroll(element) {\n    return element && element !== document && element !== document.body;\n  },\n  scrollTop(element, value) {\n    let inSetter = value !== undefined;\n    if (this.directScroll(element)) {\n      return inSetter ? (element.scrollTop = value) : element.scrollTop;\n    } else {\n      return inSetter\n        ? (document.documentElement.scrollTop = document.body.scrollTop = value)\n        : window.pageYOffset ||\n            document.documentElement.scrollTop ||\n            document.body.scrollTop ||\n            0;\n    }\n  },\n  scrollLeft(element, value) {\n    let inSetter = value !== undefined;\n    if (this.directScroll(element)) {\n      return inSetter ? (element.scrollLeft = value) : element.scrollLeft;\n    } else {\n      return inSetter\n        ? (document.documentElement.scrollLeft = document.body.scrollLeft = value)\n        : window.pageXOffset ||\n            document.documentElement.scrollLeft ||\n            document.body.scrollLeft ||\n            0;\n    }\n  }\n};\n","import { cubicInOut } from \"svelte/easing\";\nimport { noop, loop, now } from \"svelte/internal\";\nimport _ from \"./helper\";\n\nconst defaultOptions = {\n  container: \"body\",\n  duration: 500,\n  delay: 0,\n  offset: 0,\n  easing: cubicInOut,\n  onStart: noop,\n  onDone: noop,\n  onAborting: noop,\n  scrollX: false,\n  scrollY: true\n};\n\nconst _scrollTo = options => {\n  let {\n    offset,\n    duration,\n    delay,\n    easing,\n    x=0,\n    y=0,\n    scrollX,\n    scrollY,\n    onStart,\n    onDone,\n    container,\n    onAborting,\n    element\n  } = options;\n\n  if (typeof offset === \"function\") {\n    offset = offset();\n  }\n\n  var cumulativeOffsetContainer = _.cumulativeOffset(container);\n  var cumulativeOffsetTarget = element\n    ? _.cumulativeOffset(element)\n    : { top: y, left: x };\n\n  var initialX = _.scrollLeft(container);\n  var initialY = _.scrollTop(container);\n\n  var targetX =\n    cumulativeOffsetTarget.left - cumulativeOffsetContainer.left + offset;\n  var targetY =\n    cumulativeOffsetTarget.top - cumulativeOffsetContainer.top + offset;\n\n  var diffX = targetX - initialX;\n\tvar diffY = targetY - initialY;\n\n  let scrolling = true;\n  let started = false;\n  let start_time = now() + delay;\n  let end_time = start_time + duration;\n\n  function scrollToTopLeft(element, top, left) {\n    if (scrollX) _.scrollLeft(element, left);\n    if (scrollY) _.scrollTop(element, top);\n  }\n\n  function start(delayStart) {\n    if (!delayStart) {\n      started = true;\n      onStart(element, {x, y});\n    }\n  }\n\n  function tick(progress) {\n    scrollToTopLeft(\n      container,\n      initialY + diffY * progress,\n      initialX + diffX * progress\n    );\n  }\n\n  function stop() {\n    scrolling = false;\n  }\n\n  loop(now => {\n    if (!started && now >= start_time) {\n      start(false)\n    }\n\n    if (started && now >= end_time) {\n      tick(1);\n      stop();\n      onDone(element, {x, y});\n    }\n\n    if (!scrolling) {\n      onAborting(element, {x, y});\n      return false;\n    }\n    if (started) {\n      const p = now - start_time;\n      const t = 0 + 1 * easing(p / duration);\n      tick(t);\n    }\n\n    return true;\n  });\n\n  start(delay);\n\n  tick(0);\n\n  return stop;\n};\n\nconst proceedOptions = options => {\n\tlet opts = _.extend({}, defaultOptions, options);\n  opts.container = _.$(opts.container);\n  opts.element = _.$(opts.element);\n  return opts;\n};\n\nconst scrollContainerHeight = containerElement => {\n  if (\n    containerElement &&\n    containerElement !== document &&\n    containerElement !== document.body\n  ) {\n    return containerElement.scrollHeight - containerElement.offsetHeight;\n  } else {\n    let body = document.body;\n    let html = document.documentElement;\n\n    return Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n  }\n};\n\nexport const setGlobalOptions = options => {\n\t_.extend(defaultOptions, options || {});\n};\n\nexport const scrollTo = options => {\n  return _scrollTo(proceedOptions(options));\n};\n\nexport const scrollToBottom = options => {\n  options = proceedOptions(options);\n\n  return _scrollTo(\n    _.extend(options, {\n      element: null,\n      y: scrollContainerHeight(options.container)\n    })\n  );\n};\n\nexport const scrollToTop = options => {\n  options = proceedOptions(options);\n\n  return _scrollTo(\n    _.extend(options, {\n      element: null,\n      y: 0\n    })\n  );\n};\n\nexport const makeScrollToAction = scrollToFunc => {\n  return (node, options) => {\n    let current = options;\n    const handle = e => {\n      e.preventDefault();\n      scrollToFunc(\n        typeof current === \"string\" ? { element: current } : current\n      );\n    };\n    node.addEventListener(\"click\", handle);\n    node.addEventListener(\"touchstart\", handle);\n    return {\n      update(options) {\n        current = options;\n      },\n      destroy() {\n        node.removeEventListener(\"click\", handle);\n        node.removeEventListener(\"touchstart\", handle);\n      }\n    };\n  };\n};\n\nexport const scrollto = makeScrollToAction(scrollTo);\nexport const scrolltotop = makeScrollToAction(scrollToTop);\nexport const scrolltobottom = makeScrollToAction(scrollToBottom);\n","/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nexport { identity as linear } from '../internal/index.js';\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backInOut(t) {\n\tconst s = 1.70158 * 1.525;\n\tif ((t *= 2) < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\treturn 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backIn(t) {\n\tconst s = 1.70158;\n\treturn t * t * ((s + 1) * t - s);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backOut(t) {\n\tconst s = 1.70158;\n\treturn --t * t * ((s + 1) * t + s) + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceOut(t) {\n\tconst a = 4.0 / 11.0;\n\tconst b = 8.0 / 11.0;\n\tconst c = 9.0 / 10.0;\n\tconst ca = 4356.0 / 361.0;\n\tconst cb = 35442.0 / 1805.0;\n\tconst cc = 16061.0 / 1805.0;\n\tconst t2 = t * t;\n\treturn t < a\n\t\t? 7.5625 * t2\n\t\t: t < b\n\t\t? 9.075 * t2 - 9.9 * t + 3.4\n\t\t: t < c\n\t\t? ca * t2 - cb * t + cc\n\t\t: 10.8 * t * t - 20.52 * t + 10.72;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceInOut(t) {\n\treturn t < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0)) : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceIn(t) {\n\treturn 1.0 - bounceOut(1.0 - t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circInOut(t) {\n\tif ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circIn(t) {\n\treturn 1.0 - Math.sqrt(1.0 - t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circOut(t) {\n\treturn Math.sqrt(1 - --t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicInOut(t) {\n\treturn t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicIn(t) {\n\treturn t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicOut(t) {\n\tconst f = t - 1.0;\n\treturn f * f * f + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticInOut(t) {\n\treturn t < 0.5\n\t\t? 0.5 * Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) * Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n\t\t: 0.5 *\n\t\t\t\tMath.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n\t\t\t\tMath.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n\t\t\t\t1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticIn(t) {\n\treturn Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticOut(t) {\n\treturn Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoInOut(t) {\n\treturn t === 0.0 || t === 1.0\n\t\t? t\n\t\t: t < 0.5\n\t\t? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n\t\t: -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoIn(t) {\n\treturn t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoOut(t) {\n\treturn t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadInOut(t) {\n\tt /= 0.5;\n\tif (t < 1) return 0.5 * t * t;\n\tt--;\n\treturn -0.5 * (t * (t - 2) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadIn(t) {\n\treturn t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadOut(t) {\n\treturn -t * (t - 2.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartInOut(t) {\n\treturn t < 0.5 ? +8.0 * Math.pow(t, 4.0) : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartIn(t) {\n\treturn Math.pow(t, 4.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartOut(t) {\n\treturn Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintInOut(t) {\n\tif ((t *= 2) < 1) return 0.5 * t * t * t * t * t;\n\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintIn(t) {\n\treturn t * t * t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintOut(t) {\n\treturn --t * t * t * t * t + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineInOut(t) {\n\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineIn(t) {\n\tconst v = Math.cos(t * Math.PI * 0.5);\n\tif (Math.abs(v) < 1e-14) return 1;\n\telse return 1 - v;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineOut(t) {\n\treturn Math.sin((t * Math.PI) / 2);\n}\n","<script>\n  import {\n    chatAdapter,\n    chatData,\n    selectedMessage,\n    zapsPerMessage,\n  } from \"./lib/store\";\n  import { onMount } from \"svelte\";\n  import NostrNote from \"./NostrNote.svelte\";\n  import * as animateScroll from \"svelte-scrollto\";\n\n  let events = [];\n  let responseEvents = [];\n  let responses = {};\n  let profiles = {};\n\n  export let startPage;\n  export let websiteOwnerPubkey;\n  export let chatConfiguration;\n  let prevChatConfiguration;\n  export let toggleChat;\n\n  $: {\n    if (chatConfiguration !== prevChatConfiguration && $chatAdapter) {\n      $chatAdapter.setChatConfiguration(\n        chatConfiguration.chatType,\n        chatConfiguration.chatTags,\n        chatConfiguration.chatReferenceTags,\n        chatConfiguration.chatId\n      );\n      events = [];\n      responses = {};\n      rootNoteId = null;\n      localStorage.removeItem(\"rootNoteId\");\n\n      // rootNoteId = localStorage.getItem('rootNoteId');\n      // if (rootNoteId) {\n      //     $chatAdapter.subscribeToEventAndResponses(rootNoteId);\n      // }\n    }\n    prevChatConfiguration = chatConfiguration;\n  }\n\n  function getEventById(eventId) {\n    let event = events.find((e) => e.id === eventId);\n    event = event || responseEvents.find((e) => e.id === eventId);\n    return event;\n  }\n\n  async function sendMessage() {\n    const input = document.getElementById(\"message-input\");\n    if (input.value === \"\" || input.value === \" \") {\n    } else {\n      const message = input.value;\n      input.value = \"\";\n      let extraParams = { tags: [], tagPubKeys: [] };\n\n      // if this is the rootLevel we want to tag the owner of the site's pubkey\n      if (!rootNoteId && websiteOwnerPubkey) {\n        extraParams.tagPubKeys = [websiteOwnerPubkey];\n      }\n\n      // if we are responding to an event, we want to tag the event and the pubkey\n      if ($selectedMessage) {\n        extraParams.tags.push([\"e\", $selectedMessage, \"wss://nos.lol\", \"root\"]);\n        extraParams.tagPubKeys.push(getEventById($selectedMessage).pubkey);\n      }\n\n      // if (rootNoteId) {\n      //     // mark it as a response to the most recent event\n      //     const mostRecentEvent = events[events.length - 1];\n      //     // go through all the tags and add them to the new message\n      //     if (mostRecentEvent) {\n      //         mostRecentEvent.tags.forEach(tag => {\n      //             if (tag[0] === 'e') {\n      //                 extraParams.tags.push(tag);\n      //             }\n      //         })\n      //         extraParams.tags.push(['e', mostRecentEvent.id]);\n      //         extraParams.tags.push(['p', mostRecentEvent.pubkey]);\n      //     }\n      // }\n\n      const noteId = await $chatAdapter.send(message, extraParams);\n\n      if (!rootNoteId) {\n        rootNoteId = noteId;\n        localStorage.setItem(\"rootNoteId\", rootNoteId);\n      }\n    }\n  }\n\n  async function inputKeyDown(event) {\n    if (event.key === \"Enter\") {\n      sendMessage();\n      event.preventDefault();\n    }\n  }\n\n  function messageReceived(message) {\n    const messageLastEventTag = message.tags\n      .filter((tag) => tag[0] === \"e\")\n      .pop();\n    let isThread;\n\n    if (chatConfiguration.chatType === \"GLOBAL\") {\n      isThread = message.tags.filter((tag) => tag[0] === \"e\").length >= 1;\n    } else if (chatConfiguration.chatType === \"GROUP\") {\n      isThread =\n        message.tags.filter(\n          (tag) => tag[0] === \"e\" && tag[1] !== chatConfiguration.chatId\n        ).length >= 1;\n    } else {\n      const pubkeysTagged = message.tags\n        .filter((tag) => tag[0] === \"p\")\n        .map((tag) => tag[1]);\n      isThread = new Set(pubkeysTagged).size >= 2;\n    }\n\n    if (!responses[message.id]) {\n      responses[message.id] = [];\n    }\n\n    if (isThread) {\n      // get the last \"e\" tag, which is tagging the immediate parent\n      const lastETag = message.tags.filter((tag) => tag[0] === \"e\").pop();\n      if (lastETag && lastETag[1]) {\n        // if there is one, add it to the response\n        if (!responses[lastETag[1]]) {\n          responses[lastETag[1]] = [];\n        }\n        responses[lastETag[1]].push(message);\n      }\n\n      responseEvents.push(message);\n      responseEvents = responseEvents;\n    } else {\n      // insert message so that it's chronologically ordered by created_at\n      let index = 0;\n      while (\n        index < events.length &&\n        events[index].created_at < message.created_at\n      ) {\n        index++;\n      }\n      events.splice(index, 0, message);\n      events = events;\n    }\n\n    responses = responses;\n\n    scrollDown();\n  }\n\n  function scrollDown() {\n    animateScroll.scrollToBottom({\n      container: document.getElementById(\"chat-messages\"),\n      offset: 999999, // hack, oh well, browsers suck\n      duration: 50,\n    });\n    animateScroll.scrollToBottom({\n      container: document.getElementById(\"messages-container\"),\n      offset: 999999, // hack, oh well, browsers suck\n      duration: 50,\n    });\n  }\n\n  function zapReceived(zap) {\n    const event = events.find((event) => event.id === zap.zappedEvent);\n    if (!event) {\n      return;\n    }\n\n    if (!$zapsPerMessage[event.id]) $zapsPerMessage[event.id] = [];\n    $zapsPerMessage[event.id].push(zap);\n  }\n\n  function reactionReceived(reaction) {\n    const event = events.find((event) => event.id === reaction.id);\n    if (!event) {\n      return;\n    }\n\n    event.reactions = event.reactions || [];\n    event.reactions.push(reaction);\n    events = events;\n  }\n\n  let rootNoteId;\n  let channelMetadata = {};\n\n  onMount(() => {\n    $chatAdapter.on(\"message\", messageReceived);\n\n    $chatAdapter.on(\"connectivity\", (e) => {\n      connectivityStatus = e;\n    });\n\n    $chatAdapter.on(\"reaction\", reactionReceived);\n    $chatAdapter.on(\"zap\", zapReceived);\n    $chatAdapter.on(\"deleted\", (deletedEvents) => {\n      deletedEvents.forEach((deletedEventId) => {\n        const index = events.findIndex((event) => event.id === deletedEventId);\n        if (index !== -1) {\n          events[index].deleted = true;\n          events = events;\n        }\n      });\n    });\n\n    $chatAdapter.on(\"profile\", ({ pubkey, profile }) => {\n      let profiles = $chatData.profiles;\n      profiles[pubkey] = profile;\n\n      chatData.set({ profiles, ...$chatData });\n    });\n\n    $chatAdapter.on(\"channelMetadata\", (event) => {\n      channelMetadata = JSON.parse(event.content);\n    });\n  });\n\n  let connectivityStatus = {};\n  let connectedRelays = 0;\n  let totalRelays = 0;\n\n  $: {\n    connectedRelays = Object.values(connectivityStatus).filter(\n      (status) => status === \"connected\"\n    ).length;\n    totalRelays = Object.values(connectivityStatus).length;\n\n    if ($chatAdapter?.pubkey && !profiles[$chatAdapter.pubkey]) {\n      $chatAdapter.reqProfile($chatAdapter.pubkey);\n    }\n  }\n\n  let connectedChatId;\n\n  $: if (connectedChatId !== $chatAdapter?.chatId) {\n    connectedChatId = $chatAdapter?.chatId;\n    channelMetadata = {};\n  }\n\n  $: profiles = $chatData.profiles;\n\n  function selectParent() {\n    if (chatConfiguration.chatType === \"GROUP\") {\n      $selectedMessage = null;\n    } else {\n      // get the last tagged event in the tags array of the current $selectedMessage\n      const lastETag = getEventById($selectedMessage)\n        .tags.filter((tag) => tag[0] === \"e\")\n        .pop();\n      const lastETagId = lastETag && lastETag[1];\n\n      $selectedMessage = lastETagId;\n    }\n\n    scrollDown();\n  }\n\n  let ownName;\n  $: ownName = $chatAdapter?.pubkey ? pubkeyName($chatAdapter.pubkey) : \"\";\n\n  function pubkeyName(pubkey) {\n    let name;\n\n    if (profiles[$chatAdapter.pubkey]) {\n      let self = profiles[$chatAdapter.pubkey];\n\n      // https://xkcd.com/927/\n      name = self.display_name || self.displayName || self.name || self.nip05;\n    }\n\n    if (!name) {\n      name = `[${pubkey.slice(0, 6)}]`;\n    }\n\n    return name;\n  }\n</script>\n\n<div\n  class=\"flex justify-between items-center p-4 bg-purple-700 text-white md:rounded-t-md\"\n>\n  <h3 class=\"m-0 text-lg\">\n    {#if $chatAdapter?.pubkey}\n      {ownName}\n    {/if}\n  </h3>\n    <span class=\"text-xs flex mr-0 ml-auto flex-col items-end mt-2 text-gray-200 gap-1\">\n        <div class=\"flex flex-row gap-1 overflow-clip\">\n            {#each Array(totalRelays) as _, i}\n                <span class=\"\n                    inline-block\n                    rounded-full\n                    {connectedRelays > i ? 'bg-green-500' : 'bg-gray-300'}\n                    w-2 h-2\n                \"></span>\n            {/each}\n        </div>\n    \n        {connectedRelays}/{totalRelays} relays\n    </span>\n    <button\n    id=\"close-popup\"\n    on:click={toggleChat}\n    class=\"bg-transparent ml-4 border-none text-white cursor-pointer\"\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      class=\"h-6 w-6\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      stroke-width=\"2\"\n      style=\"--darkreader-inline-stroke: currentColor;\"\n      data-darkreader-inline-stroke=\"\"\n      ><path\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n        d=\"M6 18L18 6M6 6l12 12\"\n      /></svg\n    >\n  </button>    \n</div>\n\n{#if channelMetadata.name}\n  <div class=\"flex items-center p-4 bg-zinc-300\">\n      <!--<div class=\"flex flex-row gap-2 mb-3 bg-zinc-300 text-zinc-800 px-4 py-2 -mx-4 -mt-3\">-->\n          {#if channelMetadata.picture}\n              <img src={channelMetadata.picture} class=\"w-12 h-12 rounded-full mr-2\" />\n          {/if}\n  \n          <div class=\"flex flex-col\">\n              <div class=\"font-extrabold text-xl\">{channelMetadata.name}</div>\n              {#if channelMetadata.about}\n                  <div class=\"text-sm truncate font-regular\">{channelMetadata.about}</div>\n              {/if}\n          </div>\n      <!--</div>-->\n  </div>\n{/if}\n\n<div\n  id=\"chat-messages\"\n  class=\"flex-1 px-4 min-h-[192px] block overflow-y-hidden md:overflow-y-auto overflow-x-hidden\"\n>\n  {#if $selectedMessage}\n    {#if !getEventById($selectedMessage)}\n      <h1>Couldn't find event with ID {$selectedMessage}</h1>\n    {:else}\n      <div class=\"hidden md:flex flex-row px-2 py-4 mb-3 overflow-x-hidden\">\n        <div class=\"flex flex-col ml-2\">\n          <button on:click|preventDefault={selectParent}>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"w-6 h-6\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                d=\"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75\"\n              />\n            </svg>\n          </button>\n          <!--<span\n            class=\"text-lg text-black overflow-hidden whitespace-nowrap text-ellipsis\"\n          >\n            {getEventById($selectedMessage).content}\n          </span>-->\n        </div>\n      </div>\n    {/if}\n  {/if}\n\n  <div\n    id=\"messages-container\"\n    class=\"overflow-auto overflow-x-hidden -mx-4 px-4 min-h-full h-full\"\n  >\n  \n    <div id=\"messages-container-inner\" class=\"flex flex-col {!$selectedMessage && \"mt-96\"} gap-4\">\n      {#if $selectedMessage}\n      <div class=\"md:hidden px-2 py-4 mb-3\">\n        <button class=\"\" on:click|preventDefault={selectParent}>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"w-6 h-6\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                d=\"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75\"\n              />\n            </svg>\n          </button>\n      </div>\n        <NostrNote\n          event={getEventById($selectedMessage)}\n          {responses}\n          {websiteOwnerPubkey}\n        />\n      {:else}\n        {#each events as event}\n          <NostrNote {event} {responses} {websiteOwnerPubkey} />\n          {#if event.deleted}\n            👆 deleted\n          {/if}\n        {/each}\n      {/if}\n    </div>\n  </div>\n\n  <div\n    id=\"chat-input-warn\"\n    class=\"border-y {$selectedMessage && \"hidden\"} border-y-slate-200 -mx-4 bg-slate-100 text-black text-sm px-4 py-2 sticky bottom-0\"\n  >\n    <div class=\"px-2\">\n      {#if chatConfiguration.chatType === \"DM\"}\n        <b class=\"font-bold\">Encrypted chat:</b>\n        only your chat partner can see these messages.\n      {:else if chatConfiguration.chatType === \"GROUP\"}\n        <b class=\"font-bold\">Public chat:</b>\n        anyone can see these messages.\n      {:else}\n        <b class=\"font-bold\">Public notes:</b>\n        your followers see your messages on their timeline\n      {/if}\n    </div>\n  </div>\n</div>\n\n<div id=\"chat-input-container\" class=\"p-4\">\n  <div class=\"flex space-x-4 items-center\">\n    {#if startPage == \"chat\"}\n    <button\n    title=\"Login\"\n    class=\"bg-green-700 min-h-[40px] max-h-[40px] hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 text-white rounded-md px-4 py-2 cursor-pointer\"\n    on:click|preventDefault={() => chatAdapter.set('')}\n  >\n  <svg transform=\"scale(-1,1)\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\">\n    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9\" />\n  </svg>\n    >\n  </button>\n    {/if}\n    <input\n      type=\"text\"\n      id=\"message-input\"\n      on:keydown={inputKeyDown}\n      class=\"flex-1 border border-gray-300 min-h-[40px] max-h-[40px] rounded-md px-4 py-2 outline-none w-3/4\"\n      placeholder=\"Say hello\"\n    />\n    <button\n      class=\"bg-purple-700 min-h-[40px] max-h-[40px] hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 text-white rounded-md px-4 py-2 cursor-pointer\"\n      on:click|preventDefault={sendMessage}\n    >\n      <svg\n        aria-hidden=\"true\"\n        class=\"w-6 h-6 rotate-90\"\n        fill=\"currentColor\"\n        viewBox=\"0 0 20 20\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        ><path\n          d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"\n        /></svg\n      >\n    </button>\n  </div>\n\n  <!-- <div class=\"flex flex-row gap-2 -mx-1\">\n            <textarea\n                type=\"text\"\n                id=\"message-input\"\n                class=\"-mb-2 p-2 w-full resize-none rounded-xl text-gray-600 border\" placeholder=\"Say hello!\"\n                rows=1\n                on:keydown={inputKeyDown}\n            ></textarea>\n            <button type=\"button\" class=\"inline-flex items-center rounded-full border border-transparent bg-purple-700 p-3 text-white shadow-sm hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2\" on:click|preventDefault={sendMessage}>\n                <svg aria-hidden=\"true\" class=\"w-6 h-6 rotate-90\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"></path></svg>\n            </button>\n        </div> -->\n</div>\n\n<style>\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n</style>\n","<script>\n  import { chatAdapter } from \"./lib/store\";\n  import KeyPrompt from \"./KeyPrompt.svelte\";\n  import ConnectedWidget from \"./ConnectedWidget.svelte\";\n\n  export let startPage;\n  export let websiteOwnerPubkey;\n  export let chatStarted;\n  export let chatConfiguration;\n  export let relays;\n  export let toggleChat;\n\n  let editedStartPage = startPage;\n  let editedStartPage2 = startPage;\n\n  function firstStartupDone () {\n    editedStartPage = \"login\";\n  }\n\n  function managedLogin () {\n    editedStartPage2 = \"login\";\n  }\n\n  $: chatStarted = !!$chatAdapter;\n</script>\n\n{#if !chatStarted}\n  <KeyPrompt {firstStartupDone} {managedLogin} startPage={editedStartPage} {toggleChat} {websiteOwnerPubkey} {chatConfiguration} {relays} />\n{:else}\n  <ConnectedWidget\n    startPage={editedStartPage2}\n    {toggleChat}\n    {websiteOwnerPubkey}\n    {chatConfiguration}\n    {relays}\n  />\n{/if}\n\n<style>\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n</style>\n","<script>\n  import Container from \"./Container.svelte\";\n\n  export let accentColor;\n  export let hideNostrIcon;\n  export let simplifyNostrText;\n  export let startPage;\n  export let websiteOwnerPubkey;\n  export let chatType;\n  export let chatTags;\n  export let chatReferenceTags;\n  export let relays;\n  export let chatId;\n\n  console.log('accentColor', accentColor);\n\n  if (accentColor.length !== 0) {\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-50\",accentColor[0]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-100\",accentColor[1]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-200\",accentColor[2]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-300\",accentColor[3]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-400\",accentColor[4]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-500\",accentColor[5]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-600\",accentColor[6]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-700\",accentColor[7]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-800\",accentColor[8]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-900\",accentColor[9]);\n    document.documentElement.style.setProperty(\"--nostri-chat-custom-accent-color-950\",accentColor[10]);\n  }\n\n  let showChat = false;\n  let minimizeChat = false;\n\n  const toggleChat = () => {\n    if (showChat) {\n      minimizeChat = !minimizeChat;\n    } else {\n      showChat = !showChat;\n    }\n  };\n</script>\n\n<div id=\"_chat-widget-container\" class=\"font-sans\">\n  <div\n    on:click|preventDefault={toggleChat}\n    class=\"text-white cursor-pointer shadow-md bg-purple-900 hover:bg-purple-700 w-full p-4 rounded-full flex-shrink-1 text-center font-semibold flex flex-row items-center gap-4\"\n  >\n    <span class=\"tracking-wider flex\">\n      {#if simplifyNostrText !== \"true\"}\n        <span class=\"text-white\">Nostri</span>\n      {/if}\n\n      <span\n        class={simplifyNostrText !== \"true\" ? \"text-purple-300\" : \"text-white\"}\n        >Chat</span\n      >\n    </span>\n    {#if hideNostrIcon !== \"true\"}\n      <svg\n        fill=\"#ffffff\"\n        version=\"1.1\"\n        id=\"Capa_1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        width=\"25px\"\n        height=\"25px\"\n        viewBox=\"0 0 571.004 571.004\"\n        xml:space=\"preserve\"\n      >\n        <g\n          ><g\n            ><path\n              d=\"M533.187,269.019c-1.432-1.746-2.219-3.876-1.252-5.993c1.868-4.08,0.611-7.658-0.931-11.465 c-0.877-2.167-0.796-4.716-1.15-7.095c-0.221-1.493-0.057-3.199-0.742-4.435c-1.775-3.199-3.812-6.275-5.949-9.245 c-2.681-3.717-5.564-7.291-8.38-10.914c-3.325-4.284-6.581-8.633-10.09-12.766c-0.706-0.833-2.604-1.42-3.607-1.085 c-2.411,0.808-4.732,2.052-6.874,3.452c-2.771,1.812-5.435,3.317-8.928,3.713c-3.953,0.453-8.062,1.403-11.604,3.154 c-5.189,2.562-9.747,6.401-14.924,9c-4.913,2.464-8.328,6.112-11.184,10.567c-0.783,1.22-1.705,2.371-2.685,3.444 c-3.252,3.574-5.549,7.629-7.051,12.248c-1.154,3.554-2.378,7.226-4.373,10.322c-1.963,3.044-3.256,6.194-4.162,9.601 c-0.285,1.065-0.44,2.167-0.656,3.251c-2.212-0.539-4.19-0.873-6.06-1.518c-1.709-0.592-3.684-1.15-4.879-2.375 c-2.979-3.052-6.528-5.059-10.388-6.577c-3.448-1.354-6.581-3.06-9.441-5.496c-1.514-1.29-3.771-1.738-5.721-2.489 c-1.419-0.547-3.043-0.714-4.3-1.501c-3.439-2.146-6.639-4.68-10.11-6.765c-2.256-1.359-4.737-2.542-7.271-3.166 c-1.722-0.424-2.293-0.865-2.216-2.599c0.241-5.227-0.832-10.175-3.235-14.872c-2.855-5.582-8.723-8.625-14.777-7.589 c-2.697,0.461-5.573,1.347-8.128,0.833c-3.329-0.669-6.516-2-10.028-1.861c-0.612,0.025-1.31-0.437-1.864-0.82 c-4.076-2.832-8.152-5.663-12.163-8.584c-1.489-1.085-2.782-1.154-4.442-0.322c-1.221,0.612-2.705,0.955-4.08,0.967 c-6.047,0.062-12.098-0.082-18.148-0.077c-5.173,0.004-10.498,1.815-15.377-1.399c-0.241-0.159-0.588-0.216-0.886-0.221 c-3.023-0.028-4.488-1.632-5.096-4.524c-0.171-0.82-1.436-1.971-2.236-2c-3.986-0.143-7.984-0.041-11.971,0.139 c-2.187,0.102-4.619,0.004-6.483,0.922c-3.941,1.942-7.556,4.533-11.355,6.773c-1.505,0.889-3.023,1.085-3.872-0.763 c0.979-1.261,2.337-2.272,2.627-3.525c0.771-3.37-3.705-7.181-6.969-6.059c-1.498,0.514-3.003,1.208-4.272,2.138 c-2.464,1.807-4.725,3.896-7.144,5.769c-3.011,2.33-6.055,4.655-10.449,4.737c0.983-3.753-1.718-5.104-4.108-6.597 c-1.094-0.686-2.293-1.281-3.525-1.652c-3.276-1-6.348-0.763-8.956,1.828c-2.158,2.142-3.488,2.179-6.014,0.367 c-3.081-2.208-3.986-2.175-7.128,0c-1.122,0.775-2.346,1.832-3.586,1.926c-4.268,0.318-6.646,3.052-8.931,6.132 c-1.632,2.203-3.244,4.472-5.173,6.405c-4.378,4.39-8.911,8.629-13.48,12.815c-0.608,0.559-1.95,0.873-2.709,0.608 c-3.378-1.191-5.582-3.823-6.899-7.001c-2.521-6.075-4.957-12.203-7.07-18.429c-0.816-2.399-1.11-5.165-0.865-7.687 c0.559-5.786,1.771-11.51,2.411-17.291c1.196-10.796,3.583-21.343,7.405-31.445c6.773-17.891,13.934-35.643,21.2-53.342 c4.619-11.249,7.817-22.852,10.167-34.75c1.644-8.319,2.477-16.63,1.901-25.137c-0.286-4.227,0.232-8.56,0.808-12.787 c1.669-12.232-2.46-19.547-13.843-24.068c-1.403-0.559-2.766-1.228-4.149-1.844c-2.15,0-4.3,0-6.455,0 c-2.909,0.91-5.871,1.681-8.715,2.762c-3.827,1.457-7.989,2.484-10.51,6.145c-1.701,2.472-4.088,3.5-6.916,4.06 c-3.9,0.771-7.797,1.62-11.62,2.705c-3.378,0.959-6.369,2.709-9.135,5.872c6.863,1.652,13.211,3.305,19.617,4.692 c7.629,1.652,14.558,4.729,20.518,9.763c2.954,2.493,5.667,5.447,6.165,9.425c0.51,4.084,0.608,8.271,0.392,12.383 c-0.563,10.694-4.137,20.661-7.976,30.515c-2.358,6.059-5.406,11.876-7.36,18.054c-4.321,13.656-8.486,27.348-14.19,40.522 c-3.309,7.646-6.83,15.251-8.307,23.534c-1.722,9.657-3.264,19.343-4.917,29.013c-0.845,4.958-0.877,10.049-2.864,14.819 c-0.873,2.093-1.269,4.406-1.693,6.654c-0.975,5.182-1.832,10.379-2.733,15.573c0,7.838,0,15.675,0,23.513 c0.632,3.905,1.363,7.801,1.877,11.722c1.481,11.232,4.773,21.955,8.825,32.489c0.816,2.121,1.322,4.378,1.783,6.613 c0.718,3.473,1.069,7.365,4.309,9.303c2.427,1.452,2.982,3.402,3.603,5.671c1.828,6.684,1.318,13.428,0.147,20.086 c-1.114,6.341-0.845,12.525,0.861,18.65c2.313,8.318,4.72,16.613,7.291,24.859c0.461,1.48,1.71,2.896,2.946,3.916 c5.3,4.382,10.735,8.605,16.108,12.897c0.355,0.281,0.645,0.656,0.914,1.028c2.652,3.672,6.373,5.879,10.677,6.638 c8.262,1.457,16.275,4.117,24.664,4.929c1.363,0.131,2.742,0.453,4.035,0.906c2.362,0.828,4.696,1.733,7.038,2.623 c1.257,0.824,2.391,1.832,3.415,3.064c-0.698,2.239-1.901,4.234-3.199,6.164c-3.529,5.239-8.344,8.948-14.007,11.633 c-5.818,2.754-11.975,4.442-18.242,5.744c-8.115,1.686-16.259,3.231-24.378,4.88c-6.789,1.379-13.248,3.79-19.633,6.414 c-8.25,3.39-16.463,6.879-24.77,10.13c-6.447,2.525-13.158,4.149-20.086,4.68c-2.077,0.159-4.178,0.017-6.267,0.065 c-0.604,0.017-1.326,0.045-1.783,0.367c-3.46,2.437-7.446,3.407-11.481,4.272c-1.607,0.347-3.203,0.742-4.802,1.117 c-4.423,1.049-7.703,3.672-10.237,7.36c-2.481,3.619-3.827,7.691-4.762,11.914c-1.26,5.708-1.685,11.521-1.921,17.344 c-0.306,7.405-0.526,14.814-0.828,22.22c-0.082,2.023-0.367,4.035-0.486,6.059c-0.033,0.592,0.012,1.302,0.314,1.779 c3.525,5.654,7.299,11.126,12.276,15.643c4.251,3.859,8.993,6.769,14.819,7.557c0.171,0.024,0.326,0.175,0.485,0.265 c1.775,0,3.55,0,5.32,0c1.032-0.253,2.085-0.444,3.097-0.767c2.216-0.702,4.415-1.461,6.663-2.212 c-0.196-1.881-0.971-3.166-2.317-3.962c-1.236-0.734-2.595-1.301-3.958-1.771c-1.73-0.596-3.55-0.942-5.275-1.554 c-1.114-0.396-2.208-0.968-3.174-1.648c-1.367-0.968-1.979-2.424-2.052-4.097c0.069-0.102,0.118-0.257,0.212-0.298 c4.643-1.885,7.16-5.879,9.694-9.837c0.298-0.461,0.294-1.195,0.241-1.787c-0.445-4.696-1.775-9.184-3.354-13.599 c-1.75-4.884-3.595-9.73-5.333-14.614c-0.551-1.547-0.836-3.183-1.326-4.749c-0.318-1.017,0.11-1.543,0.938-1.971 c1.64-0.841,3.423-0.832,5.189-0.886c2.464-0.073,4.945,0.041,7.393-0.188c1.408-0.131,2.925-0.515,4.121-1.236 c13.692-8.303,28.474-14.003,43.791-18.413c13.876-3.998,27.997-6.915,42.244-9.229c6.247-1.012,12.501-1.967,18.76-2.897 c0.918-0.134,1.665-0.428,2.371-1.027c4.227-3.595,9.217-5.586,14.635-6.259c5.773-0.715,11.608-0.951,17.393-1.563 c3.578-0.379,7.161-0.905,10.678-1.656c4.308-0.918,8.045-3.129,11.146-6.205c2.688-2.669,5.132-5.59,7.593-8.482 c3.28-3.855,6.414-7.834,9.727-11.661c1.02-1.179,2.432-2.012,3.631-3.039c0.792-0.674,1.501-0.653,2.391-0.11 c4.125,2.529,8.576,4.32,13.199,5.712c5.716,1.722,11.566,2.75,17.495,3.374c10.983,1.159,22,1.204,33.023,0.906 c3.166-0.086,6.333-0.09,9.503-0.184c0.93-0.029,1.718,0.171,2.473,0.729c3.309,2.444,6.646,4.852,9.963,7.291 c3.117,2.293,6.345,4.402,9.927,5.92c0.641,0.273,1.277,0.612,1.95,0.735c2.758,0.497,4.741,2.235,6.744,4.002 c5.908,5.214,11.343,10.894,16.161,17.111c6.324,8.156,12.468,16.455,18.617,24.745c6.152,8.295,12.342,16.557,19.396,24.125 c6.863,7.36,14.423,13.868,23.122,18.984c0.775,0.457,1.432,0.955,1.844,1.815c3.187,6.655,8.475,11.09,15.076,14.093 c6.81,3.097,14.006,4.256,21.444,4.142c10.33-0.159,20.062-2.53,28.906-8.014c5.264-3.264,9.572-7.471,12.347-13.097 c1.15-2.338,2.109-4.737,2.269-7.385c0.016-0.29,0.212-0.571,0.326-0.853c0-0.633,0-1.27,0-1.901 c-3.488-0.6-6.802,0.208-10.045,1.362c-3.101,1.102-6.124,2.416-9.25,3.443c-2.692,0.886-5.442,1.673-8.225,2.195 c-4.554,0.853-8.042-1.113-10.037-5.41c0.804-1.049,1.995-1.195,3.194-1.253c2.338-0.113,4.685-0.143,7.022-0.302 c0.799-0.053,1.664-0.249,2.338-0.648c0.6-0.359,1.121-1.024,1.411-1.673c0.498-1.126,0.311-1.44-0.869-2.085 c-3.402-1.856-6.993-3.264-10.714-4.324c-8.421-2.399-17.055-3.028-25.757-3.061c-1.836-0.008-3.677-0.004-5.513,0.082 c-0.963,0.045-1.66-0.249-2.366-0.906c-4.843-4.5-9.094-9.53-13.166-14.721c-6.613-8.429-12.48-17.389-18.47-26.259 c-2.836-4.198-5.786-8.319-8.769-12.411c-0.999-1.375-2.244-2.574-3.419-3.811c-0.384-0.404-0.885-0.727-1.383-0.991 c-1.358-0.727-2.269-0.408-2.905,1.003c-0.229,0.511-0.379,1.062-0.648,1.828c-0.633-0.465-1.179-0.841-1.697-1.253 c-5.03-4.019-8.866-9.058-11.905-14.655c-2.954-5.446-5.627-11.048-8.344-16.626c-2.607-5.353-5.092-10.767-8.438-15.712 c-1.521-2.248-3.317-4.312-4.9-6.523c-0.783-1.094-1.709-1.229-2.949-1.094c-5.324,0.579-10.625,0.494-15.843-0.894 c-2.591-0.689-5.035-1.718-7.1-3.488c-1.473-1.269-2.562-2.746-3.211-4.513c1.95-0.433,3.893-0.897,5.818-1.424 c6.459-1.767,12.926-2.469,19.552-2.081c7.964,0.466,15.92,1.159,23.892,1.437c2.853,0.098,5.966-0.172,8.557-1.244 c3.859-1.596,7.544-3.799,10.971-6.206c5.075-3.566,9.702-7.78,14.847-11.232c2.379-1.595,3.203-3.292,3.306-5.92 c0.134-3.509,1.9-4.781,5.3-4.149c0.6,0.114,1.203,0.253,1.787,0.44c3.852,1.229,7.633,1.028,11.489-0.163 c2.962-0.914,6.066-1.354,9.053-2.195c0.547-0.154,1.024-1.199,1.163-1.909c0.094-0.481-0.616-1.068-0.693-1.648 c-0.127-0.922-0.384-2.402,0.057-2.705c0.854-0.575,2.154-0.656,3.265-0.636c0.881,0.016,1.733,0.62,2.627,0.729 c2.064,0.258,3.995,0.021,5.247-1.986c1.232-1.971,1.277-3.864-0.163-5.757c-0.465-0.608-1.069-1.249-1.191-1.946 c-0.163-0.938-0.273-2.199,0.212-2.881c1.779-2.488,3.771-4.83,5.77-7.152c1.828-2.121,4.251-3.354,6.997-3.541 c0.967-0.065,2.158,0.742,2.966,1.465c0.633,0.562,0.686,1.729,1.261,2.407c0.674,0.795,1.628,1.347,2.465,2.007 c0.571-0.877,1.358-1.688,1.656-2.651c0.311-0.992-0.028-2.175,0.236-3.187c0.213-0.812,0.743-1.738,1.416-2.195 c3.591-2.439,7.442-4.524,10.861-7.177c2.574-1.991,4.508-4.786,6.944-6.98c4.182-3.771,9.526-5.097,14.789-6.472 c3.452-0.901,4.194-1.921,3.134-5.365c-0.514-1.673-1.228-3.309-2.052-4.854c-1.062-1.987-0.531-3.362,1.297-4.402 c0.727-0.412,1.498-0.751,2.252-1.114c2.387-1.139,4.08-2.701,4.688-5.521c0.612-2.827,1.75-5.549,2.741-8.286 c1.339-3.692,2.432-7.65,7.34-8.144c0.147-0.017,0.294-0.061,0.441-0.094c0-1.077,0-2.15,0-3.228 c-1.135-1.775-2.15-3.639-3.432-5.3C536.084,271.981,534.492,270.614,533.187,269.019z\"\n            /></g\n          ></g\n        >\n      </svg>\n    {/if}\n  </div>\n  {#if showChat}\n    <div\n      id=\"_chat-popup\"\n      class=\"absolute bottom-20 right-0 w-96 bg-white rounded-md shadow-md flex flex-col transition-all text-sm {minimizeChat\n        ? 'hidden'\n        : ''}\"\n    >\n      <Container\n        {startPage}\n        {websiteOwnerPubkey}\n        chatConfiguration={{\n          chatType,\n          chatTags,\n          chatId,\n          chatReferenceTags,\n        }}\n        {relays}\n        {toggleChat}\n      />\n    </div>\n  {/if}\n</div>\n\n<style>\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n\n  :root {\n    --nostri-chat-custom-accent-color-50: #faf5ff;\n    --nostri-chat-custom-accent-color-100: #f3e8ff;\n    --nostri-chat-custom-accent-color-200: #e9d5ff;\n    --nostri-chat-custom-accent-color-300: #d8b4fe;\n    --nostri-chat-custom-accent-color-400: #c084fc;\n    --nostri-chat-custom-accent-color-500: #a855f7;\n    --nostri-chat-custom-accent-color-600: #9333ea;\n    --nostri-chat-custom-accent-color-700: #7e22ce;\n    --nostri-chat-custom-accent-color-800: #6b21a8;\n    --nostri-chat-custom-accent-color-900: #581c87;\n    --nostri-chat-custom-accent-color-950: #3b0764;\n  }\n\n  #_chat-widget-container {\n    z-index: 995;\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n  }\n\n  #_chat-popup {\n    z-index: 996;\n    min-height: 500px;\n    max-height: 72vh;\n    transition: all 0.3s;\n    overflow: hidden;\n  }\n\n  @media (max-width: 768px) {\n    #_chat-popup {\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      max-height: 100%;\n      border-radius: 0;\n    }\n  }\n</style>\n","import Widget from './Widget.svelte';\n\nvar div = document.createElement('DIV');\nvar script = document.currentScript;\nconst websiteOwnerPubkey = script.getAttribute('data-website-owner-pubkey');\nconst chatType = script.getAttribute('data-chat-type');\nlet chatTags = script.getAttribute('data-chat-tags');\nlet chatId = script.getAttribute('data-chat-id');\nlet chatReferenceTags = script.getAttribute('data-chat-reference-tags');\nlet relays = script.getAttribute('data-relays');\nlet startPage = script.getAttribute('data-start-page');\nlet hideNostrIcon = script.getAttribute('data-hidenostricon');\nlet simplifyNostrText = script.getAttribute('data-simplifynostrnext');\nlet accentColor = script.getAttribute('data-accentcolor');\n\nscript.parentNode.insertBefore(div, script);\n\nif (!relays) {\n\trelays = 'wss://relay.f7z.io,wss://nos.lol,wss://relay.nostr.info,wss://nostr-pub.wellorder.net,wss://relay.current.fyi,wss://relay.nostr.band'\n}\n\nrelays = relays.split(',');\nchatTags = chatTags ? chatTags.split(',') : [];\nchatReferenceTags = chatReferenceTags ? chatReferenceTags.split(',') : [];\naccentColor = accentColor ? accentColor.split(',') : [];\n\nconst embed = new Widget({\n\ttarget: div,\n\tprops: {\n\t\taccentColor,\n\t\thideNostrIcon,\n\t\tsimplifyNostrText,\n\t\tstartPage,\n\t\twebsiteOwnerPubkey,\n\t\tchatType,\n\t\tchatTags,\n\t\tchatId,\n\t\tchatReferenceTags,\n\t\trelays\n\t},\n});\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","document","createElement","href","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","undefined","unsub","subscribe","unsubscribe","null_to_empty","value","set_store_value","ret","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","current_component","set_current_component","get_current_component","Error","onMount","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","seen_callbacks","flushidx","flush","saved_component","update","e","pop","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","ensure_array_like","array_like_or_iterator","Array","from","bind","index","props","bound","create_component","mount_component","m","new_on_destroy","map","filter","destroy_component","filtered","targets","indexOf","flush_render_callbacks","make_dirty","then","fill","init","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","context","Map","skip_bound","root","ready","rest","hydrate","nodes","childNodes","children","l","intro","SvelteComponent","$$set","$destroy","$on","type","splice","$set","obj","keys","__svelte","v","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","chatAdapter","chatData","events","profiles","selectedMessage","zappingMessage","zapsPerMessage","number","n","Number","isSafeInteger","bytes","lengths","Uint8Array","TypeError","includes","assert","bool","hash","outputLen","blockLen","exists","checkFinished","destroyed","finished","output","out","min","crypto","globalThis","createView","arr","DataView","buffer","byteOffset","byteLength","rotr","word","shift","Uint32Array","toBytes","str","TextEncoder","encode","utf8ToBytes","toString","padStart","Hash$2","clone","_cloneInto","wrapConstructor","hashConstructor","hashC","message","digest","tmp","randomBytes","bytesLength","getRandomValues","Hash","constructor","padOffset","isLE","super","pos","view","len","take","Math","subarray","process","dataView","roundClean","digestInto","setBigUint64","_32n","BigInt","_u32_max","wh","wl","h","setUint32","oview","outLen","state","get","res","slice","destroy","to","Maj","SHA256_K","IV","SHA256_W","SHA2","A","B","C","D","E","F","G","H","offset","getUint32","W15","W2","s0","s1","T1","T2","SHA256","sha256","SHA224","_0n","_1n","_2n","u8a","hexes","bytesToHex","hex","numberToHexUnpadded","num","hexToNumber","hexToBytes","array","j","hexByte","byte","parseInt","isNaN","bytesToNumberBE","bytesToNumberLE","reverse","numberToBytesBE","numberToBytesLE","ensureBytes","title","expectedLength","concatBytes","arrs","reduce","sum","pad","bitMask","u8n","u8fr","createHmacDrbg","hashLen","qByteLen","hmacFn","k","reset","reseed","seed","gen","sl","pred","validatorFns","bigint","val","function","boolean","string","isArray","field","object","Fp","isValid","validateObject","validators","optValidators","checkField","fieldName","isOptional","checkVal","String","entries","b1","b2","_3n","_4n","_5n","_8n","mod","result","pow","power","modulo","pow2","x","invert","u","FpSqrt","P","p1div4","eql","sqr","c1","n2","mul","nv","sub","ONE","legendreC","Q","S","Z","Q1div2","neg","g","ZERO","t2","ge","tonelliShanks","FIELD_FIELDS","validateField","ORDER","MASK","BYTES","BITS","nLength","nBitLength","_nBitLength","nByteLength","ceil","validateBasic","curve","Gx","Gy","freeze","b2n","h2b","ut","DER","Err","_parseInt","toSig","sBytes","s","rBytesLeft","hexFromSig","sig","shl","rhl","rl","weierstrassPoints","opts","CURVE","ut.validateObject","allowedPrivateKeyLengths","wrapPrivateKey","isTorsionFree","clearCofactor","allowInfinityPoint","fromBytes","endo","beta","splitScalar","validatePointOpts","point","isCompressed","toAffine","ut.concatBytes","y","tail","weierstrassEquation","x2","x3","isWithinCurveOrder","assertGE","normPrivateKeyToScalar","key","ut.bytesToHex","ut.bytesToNumberBE","error","mod.mod","pointPrecomputes","assertPrjPoint","other","Point","px","py","pz","static","is0","points","toInv","invertBatch","fromAffine","assertValidity","privateKey","BASE","multiply","_setWindowSize","windowSize","_WINDOW_SIZE","left","right","hasEvenY","isOdd","equals","X1","Y1","Z1","X2","Y2","Z2","U1","U2","negate","double","b3","X3","Y3","Z3","t0","t1","t3","t4","t5","subtract","wNAF","wnaf","wNAFCached","comp","multiplyUnsafe","I","unsafeLadder","k1neg","k1","k2neg","k2","k1p","k2p","scalar","fake","f1p","f2p","constTimeNegate","normalizeZ","multiplyAndAddUnsafe","iz","z","inv","ax","ay","zz","cofactor","toRawBytes","toHex","_bits","bits","condition","item","W","windows","elm","precomputeWindow","base","precomputes","mask","maxNumber","shiftBy","wbits","offset1","offset2","abs","cond1","cond2","precomputesMap","transform","ProjectivePoint","weierstrass","curveDef","hmac","bits2int","bits2int_modN","lowS","validateOpts","CURVE_ORDER","compressedLen","uncompressedLen","modN","invN","mod.invert","cat","head","y2","sqrt","numToNByteStr","ut.numberToBytesBE","isBiggerThanHalfOrder","slcNum","Signature","recovery","addRecoveryBit","recoverPublicKey","msgHash","rec","radj","prefix","R","fromHex","ir","u1","u2","hasHighS","normalizeS","toDERRawBytes","ut.hexToBytes","toDERHex","toCompactRawBytes","toCompactHex","utils","isValidPrivateKey","randomPrivateKey","groupOrder","minLen","mod.hashToPrivateScalar","precompute","isProbPub","delta","ORDER_MASK","ut.bitMask","int2octets","prepSig","defaultSigOpts","some","prehash","extraEntropy","ent","h1int","seedArgs","k2sig","kBytes","ik","q","normS","defaultVerOpts","getPublicKey","fromPrivateKey","getSharedSecret","privateA","publicB","sign","privKey","ut.createHmacDrbg","drbg","verify","signature","publicKey","sg","_sig","fromDER","derError","fromCompact","is","_key","iHash","oHash","buf","getPrototypeOf","HMAC","getHash","msgs","arrays","every","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b6","b9","b11","b22","b44","b88","b176","b220","b223","bitLen","redef","sqrtP","lhs","rhs","FpPow","div","sqrN","addN","subN","mulN","lst","nums","lastMultiplied","acc","inverted","reduceRight","FpInvertBatch","cmov","Field","secp256k1","defHash","createCurve","a1","a2","POW_2_128","c2","fe","TAGGED_HASH_PREFIXES","taggedHash","tag","messages","tagP","tagH","charCodeAt","pointToBytes","numTo32b","modP","GmulAdd","schnorrGetExtPubKey","priv","d_","lift_x","xx","challenge","args","schnorrVerify","pub","schnorr","auxRand","t","rand","k_","rx","isoMap","COEFF","xNum","xDen","yNum","yDen","htf.isogenyMap","mapSWU","mod.validateField","sqrtRatio","c3","c4","c5","c6","c7","tv1","tv2","tv3","tv5","tv4","isQR","tvv5","e1","y1","SWUFpSqrtRatio","tv6","mapToCurveSimpleSWU","mapToCurve","def","htf.createHasher","scalars","DST","encodeDST","expand","uint8a","Hash$1","assertNumber","chain","wrap","decode","alphabet","digits","input","letter","join","separator","split","padding","chr","end","normalize","convertRadix","carry","done","digit","digitBase","floor","gcd","radix2carry","convertRadix2","radix2","revPadding","unsafeWrapper","apply","base16","base32","toUpperCase","replace","base64","base64url","genBase58","abc","base58","XMR_BLOCK_LEN","base58xmr","concat","BECH_ALPHABET","POLYMOD_GENERATORS","bech32Polymod","pre","chk","bechChecksum","words","encodingConst","genBech32","encoding","ENCODING_CONST","_words","fromWords","toWords","fromWordsUnsafe","limit","lowered","toLowerCase","sepIndex","lastIndexOf","endsWith","actualLength","decodeToBytes","decodeUnsafe","bech32","CODERS","utf8","TextDecoder","defineProperty","english","wordlist","_assert","default","exports","wrapConstructorWithOpts","asyncLoop","u8","crypto_1","require$$0","u32","nextTick","async","iters","tick","ts","diff","checkOpts","defaults","prototype","assign","hashCons","msg","wrapXOFConstructorWithOpts","_assert_js_1","utils_js_1","require$$1","pbkdf2_1","pbkdf2$1","pbkdf2Async","pbkdf2","hmac_js_1","require$$2","pbkdf2Init","_password","_salt","_opts","dkLen","asyncTick","password","salt","DK","PRF","PRFSalt","pbkdf2Output","prfW","ti","Ti","setInt32","ui","_sha2","sha256$1","sha224","_sha2_js_1","SHA256$1","toBig","fromBig","U32_MASK64","le","Ah","Al","Bh","Bl","u64","shrSH","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5H","Eh","add5L","El","sha512","sha512$1","sha384","sha512_256","sha512_224","SHA512","_u64_js_1","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512$1","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","SHA512_224","SHA512_256","SHA384","stringToBytes","bytesToString","bech32m","base58check","base58xrp","base58flickr","base32hex","radix","checksum","payload","newChecksum","oldChecksum","base32crockford","coderTypeError","hasOwnProperty","bip39","mnemonicToSeedSync_1","mnemonicToSeedSync","mnemonicToSeed","validateMnemonic_1","validateMnemonic","entropyToMnemonic","mnemonicToEntropy","generateMnemonic_1","generateMnemonic","_assert_1","sha256_1","sha512_1","require$$3","utils_1","require$$4","base_1","require$$5","isJapanese","nfkd","norm","assertEntropy","entropy","strength","calcChecksum","bitsLeft","getCoder","mnemonic","passphrase","Rho","Id","_","Pi","idxL","idxR","shifts","shiftsL","idx","shiftsR","Kl","Kr","rotl","group","BUF","RIPEMD160","h0","h1","h2","h3","h4","al","ar","bl","br","cl","cr","dl","dr","el","er","rGroup","hbl","hbr","rr","sr","tl","tr","ripemd160","secp","base58checker","bytesToNumber","numberToBytes","MASTER_SECRET","BITCOIN_VERSIONS","private","public","HARDENED_OFFSET","toU32","HDKey","fingerprint","pubHash","identifier","pubKeyHash","privKeyBytes","pubKey","privateExtendedKey","serialize","versions","publicExtendedKey","assertBytes","chainCode","base58key","keyBuffer","keyView","version","opt","depth","parentFingerprint","isPriv","json","fromExtendedKey","xpriv","derive","path","test","parts","child","exec","deriveChild","childTweak","added","err","wipePrivateData","toJSON","xpub","__defProp","__export","all","enumerable","generatePrivateKey","MessageNode","MessageQueue","insertEventIntoAscendingList","insertEventIntoDescendingList","normalizeURL","utf8Decoder","utf8Encoder","URL","pathname","port","protocol","searchParams","sort","sortedArray","midPoint","position","created_at","id","_value","_next","next","_first","_last","first","messageNode","last","_size","enqueue","newNode","dequeue","prev","finishEvent","pubkey","getEventHash","getSignature","bytesToHex2","evt","validateEvent","JSON","stringify","kind","tags","content","serializeEvent","isRecord","match","verifySignature","schnorr2","signEvent","console","warn","matchFilter","ids","startsWith","kinds","authors","values","find","since","until","getHex64","getInt","sliced","getSubscriptionId","pstart","pend","matchEventId","matchEventPubkey","matchEventKind","newListeners","connect","disconnect","notice","auth","relayInit","listTimeout","getTimeout","countTimeout","ws","connectionPromise","openSubs","listeners","subListeners","pubListeners","connectRelay","reject","WebSocket","onopen","onerror","onclose","handleNextInterval","incomingMessageQueue","handleNext","clearInterval","subid","so","alreadyHaveEvent","parse","id2","skipVerification","filters","matchFilters","count","eose","ok","reason","failed","onmessage","setInterval","connected","readyState","trySend","params","setTimeout","send","log","verb","random","newFilters","newOpts","on","off","listeners2","_publishEvent","type2","list","timeout","clearTimeout","publish","close","OPEN","status","nip19_exports","BECH32_REGEX","naddrEncode","neventEncode","noteEncode","nprofileEncode","npubEncode","nrelayEncode","nsecEncode","Bech32MaxSize","nip19","tlv","parseTLV","bytesToHex3","relays","author","encodeBytes","profile","encodeTLV","addr","ArrayBuffer","vs","entry","nip04_exports","encrypt","privkey","normalizedKey","getNormalizedX","iv","plaintext","cryptoKey","subtle","importKey","ciphertext","decrypt","ctb64","ivb64","webcrypto","nip05_exports","NIP05_REGEX","queryProfile","searchDomain","useFetchImplementation","_fetch","fetch","fetchImplementation","domain","query","names","fullname","relay","parseNIP05Result","_e","privateKeyFromSeedWords","fromMasterSeed","bytesToHex4","generateSeedWords","validateWords","reply","mentions","eTags","eTagIndex","eTag","eTagEventId","eTagRelayUrl","eTagMarker","eventPointer","isFirstETag","isLastETag","getPow","total","msb","getLeadingZeroBits","hexToBytes2","finishRepostEvent","reposted","relayUrl","getRepostedEventPointer","lastETag","lastPTag","getRepostedEvent","pointer","repostedEvent","NOSTR_URI_REGEX","parse2","RegExp","source","uri","decoded","finishReactionEvent","reacted","inheritedTags","getReactedEventPointer","createDelegation","parameters","conditions","cond","sighash","sha2562","bytesToHex5","schnorr3","getDelegator","tag2","operator","matchAll","regex","replaceAll","matches","replacer","_fetch2","useFetchImplementation2","validateGithub","username","proof","authenticate","_fetch3","fail","nip57_exports","getZapEndpoint","makeZapReceipt","makeZapRequest","useFetchImplementation3","validateZapRequest","metadata","lnurl","lud06","lud16","bech322","body","allowsNostr","nostrPubkey","amount","comment","zr","round","zapRequestString","zapRequest","preimage","bolt11","paidAt","tagsFromZapRequest","zap","getTime","WS","browser","Relay","reconnect","me","onfn","init_websocket","catch","resolved","handle_nostr_message","reconnecting","manualClose","open","sleep","ms","Relay$1","wait_connected","retry","method","sub_id","RelayPool","relay_ids","find_relays","setupHandlers","remove","replays","rid","rnds8","rng","byteToHex","native","randomUUID","v4","rnds","unsafeStringify","w","plural","msAbs","isPlural","parseFloat","isFinite","long","fmtLong","fmtShort","common","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","enabled","self","curr","coerce","unshift","format","formatter","formatters","formatArgs","useColors","color","selectColor","extend","configurable","namespaces","delimiter","newDebug","toNamespace","regexp","substring","stack","disable","skips","enable","save","humanize","colors","load","module","lastC","storage","setItem","removeItem","getItem","DEBUG","__nwjs","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","table","$1","localStorage","localstorage","warned","Events","EE","once","addListener","emitter","listener","_events","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","getOwnPropertySymbols","handlers","ee","listenerCount","emit","a3","a4","a5","arguments","removeListener","removeAllListeners","prefixed","is_node","is_node_","global","_globalThis","naiveFallback","__global__","NativeWebSocket","MozWebSocket","websocket_version","W3CWebSocket","protocols","prop","w3cwebsocket","__values","Symbol","iterator","Container_1","Container","ForOfAdaptor_1","ForOfAdaptor","it_","last_","it","rbegin","rend","begin","e_1","_a","_b","_c","elem","e_1_1","return","__read","NativeArrayIterator_1","NativeArrayIterator","data_","index_","advance","swap","extendStatics","__extends","setPrototypeOf","__","LogicError_1","LogicError","Exception_1","Exception","_super","_newTarget","_this","proto","what","InvalidArgument_1","InvalidArgument","ErrorGenerator","OutOfRange_1","OutOfRange","get_class_name","__MODULE","negative_index","excessive_index","not_my_iterator","erased_iterator","negative_iterator","iterator_end_value","className","key_nout_found","__spreadArray","pack","UniqueSet_1","UniqueSet","SetContainer_1","SetContainer","factory","items","_i","_Insert_by_range","_Insert_by_key","Function","_Insert_by_hint","erase","_Erase_by_range","_Erase_by_val","_Handle_erase","ErrorGenerator_1","extract","param","_Extract_by_iterator","_Extract_by_val","merge","uid","get_uid","Global_1","Global","_Get_root","node_1","__s_pRoot","__s_iUID","uid_1","__get_m_iUID","hash_1","_Hash_boolean","MULTIPLIER","_Hash_number","_Hash_string","itemList","INIT_VALUE","itemList_1","itemList_1_1","valueOf","hashCode","hashed","comparators","greater_equal","greater","less_equal","less","not_equal_to","equal_to","IHashContainer","IAssociativeContainer_1","IAssociativeContainer","construct","ramda","comparators_1","Source","bucketFactory","post_process","hash_function","key_eq","container_1","tuple","ListIterator_1","ListIterator","prev_","next_","value_","_Set_prev","_Set_next","_Try_value","distance","stepper","_Distance_via_index","ListContainer_1","ListContainer","Repeater_1","Repeater","global_1","end_","_Create_iterator","par1","par2","begin_","size_","resize","expansion","push_front","push_back","pop_front","pop_back","erased_","_Insert_by_repeating_val","ReverseIterator_1","ReverseIterator","base_","_Create_neighbor","HashBuckets_1","HashBuckets","fetcher","hasher","fetcher_","hasher_","max_load_factor_","DEFAULT_MAX_FACTOR","initialize","rehash","e_2","max","MIN_BUCKET_COUNT","_d","row","row_1","row_1_1","e_2_1","reserve","capacity","at","load_factor","max_load_factor","bucket","Pair_1","make_pair","Pair","second","pair","HashSet","IHashContainer_1","SetElementList_1","SetElementList","associative","associative_","Iterator","_Swap_associative","source_","SetHashBuckets_1","SetHashBuckets","key_eq_","_Swap_source","bucket_1","bucket_1_1","thisArg","buckets_","bucket_count","bucket_size","_Handle_insert","hint","UniqueMap_1","UniqueMap","MapContainer_1","MapContainer","emplace","emplace_hint","_Erase_by_key","generator","insert_or_assign","_Insert_or_assign_with_key_value","_Insert_or_assign_with_hint","_Extract_by_key","HashMap","MapElementList_1","MapElementList","list_","MapHashBuckets_1","MapHashBuckets","Entry_1","Entry","Event_1","Event","__assign","websocket_1","EventTarget_1","HashSet_1","HashMap_1","EventTarget","listeners_","created_at_","dispatchEvent","timeStamp","CloseEvent_1","CloseEvent","MessageEvent_1","MessageEvent","ErrorEvent_1","ErrorEvent","on_","state_","CONNECTING","client_","client","_Handle_connect","_Handle_error","code","CLOSING","connection_","sendCloseFrame","sendUTF","Buffer","Blob","sendBytes","extensions","bytesWaitingToFlush","_Set_on","connection","_Handle_message","_Handle_close","EVENT_INIT","CLOSED","binaryData","utf8Data","bubbles","cancelable","DEFAULTNETWORK","scriptHash","validWitnessVersions","TESTNETWORK","REGTESTNETWORK","SIMNETWORK","FEATUREBIT_ORDER","DIVISORS","MAX_MILLISATS","MILLISATS_PER_BTC","TAGCODES","payment_hash","payment_secret","description","payee","description_hash","expiry","min_final_cltv_expiry","fallback_address","route_hint","feature_bits","TAGNAMES","currentName","currentCode","TAGPARSERS","wordsToIntBE","routes","shortChannelId","feeBaseMSats","feeProportionalMillionths","cltvExpiryDelta","routesBuffer","short_channel_id","fee_base_msat","fee_proportional_millionths","cltv_expiry_delta","bools","finalArr","itemArr","featureBits","featureName","extraBits","extra_bits","start_bit","has_required","bit","getUnknownParser","tagCode","MAX_SAFE_INTEGER","hrpToMillisat","hrpString","outputString","divisor","valueBN","millisatoshisBN","paymentRequest","network","sections","letters","sigWords","prefixMatches","bech32Prefix","coinNetwork","millisatoshis","timestamp","tagName","parser","tagLength","tagWords","exp","getValue","route_hints","section","DEFAULT_RELAYS","Zap","ndk","zappedEvent","zappedUser","getUser","hexpubkey","zapEndpoint","zapEndpointCallback","zapTag","getMatchingTags","fetchProfile","response","nostrPubKey","extraTags","nip57","tagReference","zapRequestEvent","NDKEvent","zapRequestNostrEvent","toNostrEvent","URLSearchParams","nostr","pr","pool","urls","isReplaceable","isParamReplaceable","follows","contactListEvents","fetchEvents","npubs","npub","nip192","user","NDKUser","relayUrls","nip193","nip05Id","nip05","setMetadataEvents","displayName","display_name","image","picture","banner","bio","about","zapService","website","mergeEvent","relayListEvents","assertSigner","newFollow","currentFollowList","follow","recipient","signer","pTags","sender","nip194","replaceableDTag","tagId","repost","getKind","EventEmitter2","rawEvent","userOrEvent","marker","tagEventAuthor","pTag","nostrEvent","generateTags","tagValue","removeTag","_signer","relaySet","entity","generateContentTags","dTag","dTagId","createZapRequest","NDKRelay2","EventEmitter3","scores","_status","connectedAt","_connectionStats","attempts","success","durations","complaining","activeSubscriptions","updateConnectionStats","disconnected","handleReconnection","handleNotice","isFlapping","avg","variance","attempt","subscription","subId","eventReceived","eoseReceived","scoreSlowerEvent","timeDiffInMs","connectionStats","NDKPool","EventEmitter4","relay2","handleRelayConnect","handleFlapping","stats","timeoutMs","promises","timeoutPromise","race","connecting","defaultOpts","closeOnEose","cacheUsage","groupable","groupableDelay","NDKSubscription","EventEmitter5","relaySubscriptions","eventFirstSeen","eosesSeen","eventsPerRelay","generateFilterId","groupableId","hasKind","noTimeConstraints","noLimit","shouldQueryCache","shouldQueryRelays","shouldWaitForCache","cacheAdapter","locking","cachePromise","startWithCache","resultHasAllRequestedIds","startWithRelaySet","promise","NDKRelaySet2","calculateRelaySetFromFilter","fromCache","timeSinceFirstSeen","setEvent","eoseTimeout","NDKSubscriptionGroup","subscriptions","debug4","mergeFilters","mergedFilters","forwardEvent","forwardEventDup","forwardEose","forwardClose","isEventForSubscription","subscribeOnRelay","getId","urlString","subGroupableId","executeSubscription","delayedSubscription","delayedSubscriptions","executeDelayedSubscription","executeSubscriptions","subGroup","connectedListener","NDK6","EventEmitter7","devWriteRelaySet","debug3","explicitRelayUrls","devWriteRelayUrls","fromRelayUrls","relayCount","autoStart","calculateRelaySetFromEvent","idOrFilter","nip195","filterFromId","relaySetSubscription","existingEvent","event1","event2","profilesLog","writeLog","NstrAdapter","relayStatus","eventEmitter","referenceTags","websiteOwnerPubkey","chatId","profileRequestQueue","requestedProfiles","profileRequestTimer","delayedSubscriptionTimeouts","clientPubkey","setChatConfiguration","emitMessage","tagPubKeys","sendKind4","sendKind42","sendKind1","signedEvent","_publish","subscribeToEventAndResponses","messageCallback","addProfileRequest","family","groups","_subscribe","uuid.v4","recSubId","onEvent","deletedEvents","decodedInvoice","zapRequestPayload","decodeURIComponent","amountSection","zappedEventId","zapper","zappee","zapped","zapInvoiceFromEvent","eventId","subscribeToResponses","reqProfile","requestProfiles","processReceivedProfile","NstrAdapterNip07","adapterConfig","destPubkey","nip04","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isGeneratorFunction","genFun","ctor","mark","awrap","iter","skipTempReset","charAt","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","_throw","_asyncToGenerator","_extends","_TimeRangeToUnix","TimeRanges","NostrRPC","secretKey","secret","_proto","_call","_callee3","_ref","_ref$request","_ref$request$id","_ref$request$params","request","_context3","randomID","connectToRelay","prepareRequest","prepareEvent","_ref2","_callee2","_context2","broadcastToRelay","skipResponse","_ref3","_callee","_context","isValidResponse","_x5","_x3","_x4","_x","_x2","_listen","_callee5","_this2","_context5","_ref4","_callee4","responseEvent","_context4","isValidRequest","handleRequest","_x6","_handleRequest","_callee6","_context6","_x7","_x8","_x9","_x10","_x11","_prepareEvent","_callee7","cipherText","veryOk","_context7","_x12","_connectToRelay","_callee8","realayURL","_context8","_x13","_x14","_x15","_broadcastToRelay","_callee9","skipSeen","_context9","TimeRangeToUnix","FIVE_MINS","ONE_HR","ONE_DAY","ONE_WEEK","ONE_MONTH","ONE_YEAR","ConnectURI","fromURI","hostname","ignore","encodeURIComponent","approve","_approve","rpc","_reject","Connect","_decrypt","_encrypt","_pubkey","_plaintext","_ciphertext","_proto2","_init","_payload$params","_disconnect","_getPublicKey","_signEvent","eventWithSig","describe","_describe","_callee10","_context10","_delegate","_callee11","delegatee","delegation","_context11","getRelays","_getRelays","_callee12","_context12","NstrAdapterNip46","NstrAdapterDiscadableKeys","button","create_if_block_4","create_if_block_2","button0","button1","if_block","create_if_block_3","create_if_block","create_if_block_1","div0","div1","nip46URI","firstStartupDone","$$props","managedLogin","startPage","chatConfiguration","toggleChat","useNip07","useNip46","chatType","chatTags","chatReferenceTags","showAdvanced","foundKeys","windowTitle","currentUrl","currentDomain","connectedPubKey","$$invalidate","location","connectURI","clipboard","writeText","fixError","newTarget","errorType","captureStackTrace","functionName","exclusion","lines","line","fixStack","errors","InternalError","InvalidDataError","RoutingError","UnsupportedMethodError","ConnectionError","MissingProviderError","RejectionError","requestProvider","errors_1","webln","__createBinding","__exportStar","t_value","span","icon","amountDisplay","mobilePR","hover","_userPromise","nip04Queue","nip04Processing","debug2","blockUntilReady","recipientHexPubKey","queueNip04","senderHexPubKey","counterpartyHexpubkey","processNip04Queue","retries","NDK","ndkEvent","alert","sendPayment","$zappingMessage","provider","getOwnPropertyDescriptor","__esModule","t1_value","div6","div2","div3","div4","div5","each_blocks","t4_value","if_block3","textContent","toLocaleString","img","img_src_value","button_class_value","div0_class_value","div8","div7","current","profilePicture","zappingIt","hovering","responses","zappedAmount","selectMessage","$selectedMessage","$chatAdapter","delayedSubscribe","byWebsiteOwner","$zapsPerMessage","$chatData","$","selector","querySelector","cumulativeOffset","top","offsetTop","offsetLeft","offsetParent","directScroll","scrollTop","inSetter","pageYOffset","scrollLeft","pageXOffset","defaultOptions","container","duration","delay","easing","onStart","onDone","onAborting","scrollX","scrollY","_scrollTo","cumulativeOffsetContainer","cumulativeOffsetTarget","initialX","initialY","targetX","targetY","diffX","diffY","scrolling","started","start_time","end_time","delayStart","progress","scrollToTopLeft","fulfill","loop","scrollContainerHeight","containerElement","scrollHeight","offsetHeight","html","clientHeight","scrollToBottom","proceedOptions","span_class_value","if_block0","create_if_block_9","if_block1","create_if_block_8","src","show_if","nostrnote_changes","deleted","create_if_block_10","each_value_1","create_if_block_7","create_if_block_5","if_block5","div2_class_value","div5_class_value","prevChatConfiguration","rootNoteId","responseEvents","getEventById","sendMessage","getElementById","extraParams","noteId","messageReceived","isThread","pubkeysTagged","scrollDown","animateScroll.scrollToBottom","zapReceived","reactionReceived","reaction","reactions","channelMetadata","connectivityStatus","deletedEventId","findIndex","connectedChatId","ownName","connectedRelays","totalRelays","pubkeyName","lastETagId","chatStarted","editedStartPage","editedStartPage2","svg","g1","g0","span0","span0_class_value","span1","accentColor","hideNostrIcon","simplifyNostrText","setProperty","showChat","minimizeChat","script","currentScript"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,112,116,117,118,120,122,123,124]}