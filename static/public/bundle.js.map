{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/lib/store.js","../../node_modules/@noble/hashes/esm/_assert.js","../../node_modules/@noble/hashes/esm/crypto.js","../../node_modules/@noble/hashes/esm/utils.js","../../node_modules/@noble/hashes/esm/_sha2.js","../../node_modules/@noble/hashes/esm/sha256.js","../../node_modules/@noble/curves/esm/abstract/utils.js","../../node_modules/@noble/curves/esm/abstract/modular.js","../../node_modules/@noble/curves/esm/abstract/curve.js","../../node_modules/@noble/curves/esm/abstract/weierstrass.js","../../node_modules/@noble/hashes/esm/hmac.js","../../node_modules/@noble/curves/esm/_shortw_utils.js","../../node_modules/@noble/curves/esm/secp256k1.js","../../node_modules/@noble/curves/esm/abstract/hash-to-curve.js","../../node_modules/@scure/base/lib/esm/index.js","../../node_modules/@scure/bip39/wordlists/english.js","../../node_modules/@noble/hashes/_assert.js","../../node_modules/@noble/hashes/crypto.js","../../node_modules/@noble/hashes/utils.js","../../node_modules/@noble/hashes/hmac.js","../../node_modules/@noble/hashes/pbkdf2.js","../../node_modules/@noble/hashes/_sha2.js","../../node_modules/@noble/hashes/sha256.js","../../node_modules/@noble/hashes/_u64.js","../../node_modules/@noble/hashes/sha512.js","../../node_modules/@scure/base/lib/index.js","../../node_modules/@scure/bip39/index.js","../../node_modules/@noble/hashes/esm/ripemd160.js","../../node_modules/@noble/hashes/esm/_u64.js","../../node_modules/@noble/hashes/esm/sha512.js","../../node_modules/@scure/bip32/lib/esm/index.js","../../node_modules/nostr-tools/lib/esm/nostr.mjs","../../node_modules/ws/lib/constants.js","../../15c861a31cbb590bb45f136455e8d2","../../node_modules/node-gyp-build/index.js","../../node_modules/node-gyp-build/node-gyp-build.js","../../node_modules/bufferutil/index.js","../../node_modules/bufferutil/fallback.js","../../node_modules/ws/lib/buffer-util.js","../../node_modules/ws/lib/permessage-deflate.js","../../node_modules/ws/lib/limiter.js","../../node_modules/utf-8-validate/index.js","../../355f6efa2839988db2ddf9f6f06144","../../node_modules/utf-8-validate/fallback.js","../../node_modules/ws/lib/validation.js","../../node_modules/ws/lib/receiver.js","../../node_modules/ws/lib/sender.js","../../node_modules/ws/lib/extension.js","../../node_modules/ws/lib/websocket.js","../../node_modules/ws/lib/event-target.js","../../node_modules/ws/lib/subprotocol.js","../../node_modules/ws/lib/websocket-server.js","../../node_modules/nostr/lib/relay.js","../../node_modules/ws/index.js","../../node_modules/ws/lib/stream.js","../../node_modules/nostr/lib/relay-pool.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/eventemitter3/index.js","../../node_modules/tstl/utility/node.js","../../node_modules/websocket/lib/browser.js","../../node_modules/es5-ext/global.js","../../node_modules/websocket/lib/version.js","../../node_modules/tstl/base/container/Container.js","../../node_modules/tstl/internal/iterator/disposable/ForOfAdaptor.js","../../node_modules/tstl/internal/iterator/disposable/NativeArrayIterator.js","../../node_modules/tstl/exception/LogicError.js","../../node_modules/tstl/exception/Exception.js","../../node_modules/tstl/exception/InvalidArgument.js","../../node_modules/tstl/internal/exception/ErrorGenerator.js","../../node_modules/tstl/exception/OutOfRange.js","../../node_modules/tstl/base/container/UniqueSet.js","../../node_modules/tstl/base/container/SetContainer.js","../../node_modules/tstl/functional/uid.js","../../node_modules/tstl/internal/Global.js","../../node_modules/tstl/functional/hash.js","../../node_modules/tstl/functional/comparators.js","../../node_modules/tstl/internal/container/associative/IHashContainer.js","../../node_modules/tstl/internal/container/associative/IAssociativeContainer.js","../../node_modules/tstl/internal/iterator/ListIterator.js","../../node_modules/tstl/iterator/global.js","../../node_modules/tstl/internal/container/linear/ListContainer.js","../../node_modules/tstl/internal/iterator/disposable/Repeater.js","../../node_modules/tstl/internal/iterator/ReverseIterator.js","../../node_modules/tstl/internal/hash/HashBuckets.js","../../node_modules/tstl/utility/Pair.js","../../node_modules/tstl/container/HashSet.js","../../node_modules/tstl/internal/container/associative/SetElementList.js","../../node_modules/tstl/internal/hash/SetHashBuckets.js","../../node_modules/tstl/base/container/UniqueMap.js","../../node_modules/tstl/base/container/MapContainer.js","../../node_modules/tstl/container/HashMap.js","../../node_modules/tstl/internal/container/associative/MapElementList.js","../../node_modules/tstl/internal/hash/MapHashBuckets.js","../../node_modules/tstl/utility/Entry.js","../../node_modules/websocket-polyfill/lib/events/Event.js","../../node_modules/websocket-polyfill/lib/index.js","../../node_modules/websocket-polyfill/lib/WebSocket.js","../../node_modules/websocket-polyfill/lib/events/EventTarget.js","../../node_modules/websocket-polyfill/lib/events/CloseEvent.js","../../node_modules/websocket-polyfill/lib/events/MessageEvent.js","../../node_modules/websocket-polyfill/lib/events/ErrorEvent.js","../../node_modules/light-bolt11-decoder/bolt11.js","../../node_modules/@nostr-dev-kit/ndk/lib/esm/ndk.mjs","../../src/lib/adapters/index.js","../../src/lib/adapters/nip07.js","../../node_modules/@nostr-connect/connect/dist/connect.esm.js","../../src/lib/adapters/nip46.js","../../src/lib/adapters/discardable-keys.js","../../src/KeyPrompt.svelte","../../node_modules/webln/lib/errors.js","../../node_modules/webln/lib/client.js","../../node_modules/webln/lib/index.js","../../src/ZapAmountButton.svelte","../../node_modules/webln/lib/provider.js","../../src/NostrNote.svelte","../../node_modules/svelte-scrollto/src/helper.js","../../node_modules/svelte-scrollto/src/index.js","../../node_modules/svelte/easing/index.mjs","../../src/ConnectedWidget.svelte","../../src/Container.svelte","../../src/Widget.svelte","../../src/widget.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\nfunction is_promise(value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function') && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n    return style.sheet;\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentNode !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data_map(node, data_map) {\n    Object.keys(data_map).forEach((key) => {\n        set_custom_element_data(node, key, data_map[key]);\n    });\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nfunction head_selector(nodeId, head) {\n    const result = [];\n    let started = 0;\n    for (const node of head.childNodes) {\n        if (node.nodeType === 8 /* comment node */) {\n            const comment = node.textContent.trim();\n            if (comment === `HEAD_${nodeId}_END`) {\n                started -= 1;\n                result.push(node);\n            }\n            else if (comment === `HEAD_${nodeId}_START`) {\n                started += 1;\n                result.push(node);\n            }\n        }\n        else if (started > 0) {\n            result.push(node);\n        }\n    }\n    return result;\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            else\n                this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\nfunction construct_svelte_component(component, props) {\n    return new component(props);\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { ownerNode } = info.stylesheet;\n            // there is no ownerNode if it runs on jsdom.\n            if (ownerNode)\n                detach(ownerNode);\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs#run-time-svelte-beforeupdate\n */\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs#run-time-svelte-onmount\n */\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n */\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs#run-time-svelte-ondestroy\n */\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * https://svelte.dev/docs#run-time-svelte-createeventdispatcher\n */\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-setcontext\n */\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-getcontext\n */\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs#run-time-svelte-getallcontexts\n */\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-hascontext\n */\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    // Do not reenter flush while dirty components are updated, as this can\n    // result in an infinite loop. Instead, let the inner flush handle it.\n    // Reentrancy is ok afterwards for bindings etc.\n    if (flushidx !== 0) {\n        return;\n    }\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        try {\n            while (flushidx < dirty_components.length) {\n                const component = dirty_components[flushidx];\n                flushidx++;\n                set_current_component(component);\n                update(component.$$);\n            }\n        }\n        catch (e) {\n            // reset dirty state to not end up in a deadlocked state and then rethrow\n            dirty_components.length = 0;\n            flushidx = 0;\n            throw e;\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    const options = { direction: 'in' };\n    let config = fn(node, params, options);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config(options);\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    const options = { direction: 'out' };\n    let config = fn(node, params, options);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config(options);\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    const options = { direction: 'both' };\n    let config = fn(node, params, options);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config(options);\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'inert',\n    'ismap',\n    'itemscope',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\n/** regex of all html void element names */\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${name}>.`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${escape_attribute_value(style_object[key])};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n            // if the component was destroyed immediately\n            // it will update the `$$.on_destroy` reference to `null`.\n            // the destructured on_destroy may still reference to the old array\n            if (component.$$.on_destroy) {\n                component.$$.on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: [],\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            if (!is_function(callback)) {\n                return noop;\n            }\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        if (!is_function(callback)) {\n            return noop;\n        }\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.55.1' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        console.warn(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\nfunction construct_svelte_component_dev(component, props) {\n    const error_message = 'this={...} of <svelte:component> should specify a Svelte component.';\n    try {\n        const instance = new component(props);\n        if (!instance.$$ || !instance.$set || !instance.$on || !instance.$destroy) {\n            throw new Error(error_message);\n        }\n        return instance;\n    }\n    catch (err) {\n        const { message } = err;\n        if (typeof message === 'string' && message.indexOf('is not a constructor') !== -1) {\n            throw new Error(error_message);\n        }\n        else {\n            throw err;\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, construct_svelte_component, construct_svelte_component_dev, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, head_selector, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_custom_element_data_map, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store';\n\nexport const chatAdapter = writable(null);\nexport const chatData = writable({ events: [], profiles: {}});\nexport const selectedMessage = writable(null);\nexport const zappingMessage = writable(null);\nexport const zapsPerMessage = writable({});","export function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexport function bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexport function hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexport function exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexport function output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexport default assert;\n//# sourceMappingURL=_assert.js.map","export const crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use `globalThis.crypto`, but node.js versions earlier than v19 don't\n// declare it in global scope. For node.js, package.json#exports field mapping\n// rewrites import from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n */\nexport function bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('deadbeef') // Uint8Array.from([0xde, 0xad, 0xbe, 0xef])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `globalThis.crypto` or node.js crypto module.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","import assert from './_assert.js';\nimport { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        assert.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_sha2.js.map","import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst u8a = (a) => a instanceof Uint8Array;\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nexport function bytesToHex(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexport function numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nexport function hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // Big Endian\n    return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n// Caching slows it down 2-3x\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    if (hex.length % 2)\n        throw new Error('hex string is invalid: unpadded ' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// Big Endian\nexport function bytesToNumberBE(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nexport function bytesToNumberLE(bytes) {\n    if (!u8a(bytes))\n        throw new Error('Uint8Array expected');\n    return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\nexport const numberToBytesBE = (n, len) => hexToBytes(n.toString(16).padStart(len * 2, '0'));\nexport const numberToBytesLE = (n, len) => numberToBytesBE(n, len).reverse();\n// Returns variable number bytes (minimal bigint encoding?)\nexport const numberToVarBytesBE = (n) => hexToBytes(numberToHexUnpadded(n));\nexport function ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = hexToBytes(hex);\n        }\n        catch (e) {\n            throw new Error(`${title} must be valid hex string, got \"${hex}\". Cause: ${e}`);\n        }\n    }\n    else if (u8a(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(`${title} must be hex string or Uint8Array`);\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(`${title} expected ${expectedLength} bytes, got ${len}`);\n    return res;\n}\n// Copies several Uint8Arrays into one.\nexport function concatBytes(...arrs) {\n    const r = new Uint8Array(arrs.reduce((sum, a) => sum + a.length, 0));\n    let pad = 0; // walk through each item, ensure they have proper type\n    arrs.forEach((a) => {\n        if (!u8a(a))\n            throw new Error('Uint8Array expected');\n        r.set(a, pad);\n        pad += a.length;\n    });\n    return r;\n}\nexport function equalBytes(b1, b2) {\n    // We don't care about timing attacks here\n    if (b1.length !== b2.length)\n        return false;\n    for (let i = 0; i < b1.length; i++)\n        if (b1[i] !== b2[i])\n            return false;\n    return true;\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\n// Bit operations\n// Amount of bits inside bigint (Same as n.toString(2).length)\nexport function bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n// Gets single bit at position. NOTE: first bit position is 0 (same as arrays)\n// Same as !!+Array.from(n.toString(2)).reverse()[pos]\nexport const bitGet = (n, pos) => (n >> BigInt(pos)) & _1n;\n// Sets single bit at position\nexport const bitSet = (n, pos, value) => n | ((value ? _1n : _0n) << BigInt(pos));\n// Return mask for N bits (Same as BigInt(`0b${Array(i).fill('1').join('')}`))\n// Not using ** operator with bigints for old engines.\nexport const bitMask = (n) => (_2n << BigInt(n - 1)) - _1n;\n// DRBG\nconst u8n = (data) => new Uint8Array(data); // creates Uint8Array\nconst u8fr = (arr) => Uint8Array.from(arr); // another shortcut\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n()) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return concatBytes(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nexport function validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error(`Invalid validator \"${type}\", expected function`);\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error(`Invalid param ${String(fieldName)}=${val} (${typeof val}), expected ${type}`);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n//# sourceMappingURL=utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Utilities for modular arithmetics and finite fields\nimport { bitMask, numberToBytesBE, numberToBytesLE, bytesToNumberBE, bytesToNumberLE, ensureBytes, validateObject, } from './utils.js';\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _4n = BigInt(4), _5n = BigInt(5), _8n = BigInt(8);\n// prettier-ignore\nconst _9n = BigInt(9), _16n = BigInt(16);\n// Calculates a modulo b\nexport function mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently exponentiate num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * powMod(2n, 6n, 11n) // 64n % 11n == 9n\n */\n// TODO: use field version && remove\nexport function pow(num, power, modulo) {\n    if (modulo <= _0n || power < _0n)\n        throw new Error('Expected power/modulo > 0');\n    if (modulo === _1n)\n        return _0n;\n    let res = _1n;\n    while (power > _0n) {\n        if (power & _1n)\n            res = (res * num) % modulo;\n        num = (num * num) % modulo;\n        power >>= _1n;\n    }\n    return res;\n}\n// Does x ^ (2 ^ power) mod p. pow2(30, 4) == 30 ^ (2 ^ 4)\nexport function pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n// Inverses number over modulo\nexport function invert(number, modulo) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    // Eucledian GCD https://brilliant.org/wiki/extended-euclidean-algorithm/\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n// Tonelli-Shanks algorithm\n// Paper 1: https://eprint.iacr.org/2012/685.pdf (page 12)\n// Paper 2: Square Roots from 1; 24, 51, 10 to Dan Shanks\nexport function tonelliShanks(P) {\n    // Legendre constant: used to calculate Legendre symbol (a | p),\n    // which denotes the value of a^((p-1)/2) (mod p).\n    // (a | p)  1    if a is a square (mod p)\n    // (a | p)  -1   if a is not a square (mod p)\n    // (a | p)  0    if a  0 (mod p)\n    const legendreC = (P - _1n) / _2n;\n    let Q, S, Z;\n    // Step 1: By factoring out powers of 2 from p - 1,\n    // find q and s such that p - 1 = q*(2^s) with q odd\n    for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++)\n        ;\n    // Step 2: Select a non-square z such that (z | p)  -1 and set c  zq\n    for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++)\n        ;\n    // Fast-path\n    if (S === 1) {\n        const p1div4 = (P + _1n) / _4n;\n        return function tonelliFast(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Slow-path\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        // Step 0: Check that n is indeed a square: (n | p) should not be  -1\n        if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE))\n            throw new Error('Cannot find square root');\n        let r = S;\n        // TODO: will fail at Fp2/etc\n        let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n        let x = Fp.pow(n, Q1div2); // first guess at the square root\n        let b = Fp.pow(n, Q); // first guess at the fudge factor\n        while (!Fp.eql(b, Fp.ONE)) {\n            if (Fp.eql(b, Fp.ZERO))\n                return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n            // Find m such b^(2^m)==1\n            let m = 1;\n            for (let t2 = Fp.sqr(b); m < r; m++) {\n                if (Fp.eql(t2, Fp.ONE))\n                    break;\n                t2 = Fp.sqr(t2); // t2 *= t2\n            }\n            // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n            const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n            g = Fp.sqr(ge); // g = ge * ge\n            x = Fp.mul(x, ge); // x *= ge\n            b = Fp.mul(b, g); // b *= g\n            r = m;\n        }\n        return x;\n    };\n}\nexport function FpSqrt(P) {\n    // NOTE: different algorithms can give different roots, it is up to user to decide which one they want.\n    // For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n    // P  3 (mod 4)\n    // n = n^((P+1)/4)\n    if (P % _4n === _3n) {\n        // Not all roots possible!\n        // const ORDER =\n        //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n        // const NUM = 72057594037927816n;\n        const p1div4 = (P + _1n) / _4n;\n        return function sqrt3mod4(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            // Throw if root**2 != n\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Atkin algorithm for q  5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n    if (P % _8n === _5n) {\n        const c1 = (P - _5n) / _8n;\n        return function sqrt5mod8(Fp, n) {\n            const n2 = Fp.mul(n, _2n);\n            const v = Fp.pow(n2, c1);\n            const nv = Fp.mul(n, v);\n            const i = Fp.mul(Fp.mul(nv, _2n), v);\n            const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // P  9 (mod 16)\n    if (P % _16n === _9n) {\n        // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n        // Means we cannot use sqrt for constants at all!\n        //\n        // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n        // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n        // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n        // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n        // sqrt = (x) => {\n        //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n        //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n        //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n        //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n        //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n        //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n        //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n        //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n        //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n        //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n        // }\n    }\n    // Other cases: Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nexport function validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'isSafeInteger',\n        BITS: 'isSafeInteger',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    return validateObject(field, opts);\n}\n// Generic field functions\nexport function FpPow(f, num, power) {\n    // Should have same speed as pow for bigints\n    // TODO: benchmark!\n    if (power < _0n)\n        throw new Error('Expected power > 0');\n    if (power === _0n)\n        return f.ONE;\n    if (power === _1n)\n        return num;\n    let p = f.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = f.mul(p, d);\n        d = f.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n// 0 is non-invertible: non-batched version will throw on 0\nexport function FpInvertBatch(f, nums) {\n    const tmp = new Array(nums.length);\n    // Walk from first to last, multiply them by each other MOD p\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = acc;\n        return f.mul(acc, num);\n    }, f.ONE);\n    // Invert last element\n    const inverted = f.inv(lastMultiplied);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = f.mul(acc, tmp[i]);\n        return f.mul(acc, num);\n    }, inverted);\n    return tmp;\n}\nexport function FpDiv(f, lhs, rhs) {\n    return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare(f) {\n    const legendreConst = (f.ORDER - _1n) / _2n; // Integer arithmetic\n    return (x) => {\n        const p = f.pow(x, legendreConst);\n        return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n    };\n}\n// CURVE.n lengths\nexport function nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Initializes a galois field over prime. Non-primes are not supported for now.\n * Do not init in loop: slow. Very fragile: always run a benchmark on change.\n * Major performance gains:\n * a) non-normalized operations like mulN instead of mul\n * b) `Object.freeze`\n * c) Same object shape: never add or remove keys\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(ORDER, bitLen, isLE = false, redef = {}) {\n    if (ORDER <= _0n)\n        throw new Error(`Expected Fp ORDER > 0, got ${ORDER}`);\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n    if (BYTES > 2048)\n        throw new Error('Field lengths over 2048 bytes are not supported');\n    const sqrtP = FpSqrt(ORDER);\n    const f = Object.freeze({\n        ORDER,\n        BITS,\n        BYTES,\n        MASK: bitMask(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error(`Invalid field element: expected bigint, got ${typeof num}`);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: redef.sqrt || ((n) => sqrtP(f, n)),\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // TODO: do we really need constant cmov?\n        // We don't have const-time bigints anyway, so probably will be not very useful\n        cmov: (a, b, c) => (c ? b : a),\n        toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error(`Fp.fromBytes: expected ${BYTES}, got ${bytes.length}`);\n            return isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n        },\n    });\n    return Object.freeze(f);\n}\nexport function FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nexport function FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * FIPS 186 B.4.1-compliant \"constant-time\" private key generation utility.\n * Can take (n+8) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being neglible.\n * Needs at least 40 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * @param hash hash output from SHA3 or a similar function\n * @returns valid private scalar\n */\nexport function hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = ensureBytes('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error(`hashToPrivateScalar: expected ${minLen}-1024 bytes of input, got ${hashLen}`);\n    const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n//# sourceMappingURL=modular.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Abelian group utilities\nimport { validateField, nLength } from './modular.js';\nimport { validateObject } from './utils.js';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n// Elliptic curve multiplication of Point by scalar. Fragile.\n// Scalars should always be less than curve order: this should be checked inside of a curve itself.\n// Creates precomputation tables for fast multiplication:\n// - private scalar is split by fixed size windows of W bits\n// - every window point is collected from window's table & added to accumulator\n// - since windows are different, same point inside tables won't be accessed more than once per calc\n// - each multiplication is 'Math.ceil(CURVE_ORDER / ) + 1' point additions (fixed for any scalar)\n// - +1 window is neccessary for wNAF\n// - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n// TODO: Research returning 2d JS array of windows, instead of a single window. This would allow\n// windows to be in different memory locations\nexport function wNAF(c, bits) {\n    const constTimeNegate = (condition, item) => {\n        const neg = item.negate();\n        return condition ? neg : item;\n    };\n    const opts = (W) => {\n        const windows = Math.ceil(bits / W) + 1; // +1, because\n        const windowSize = 2 ** (W - 1); // -1 because we skip zero\n        return { windows, windowSize };\n    };\n    return {\n        constTimeNegate,\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n) {\n            let p = c.ZERO;\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(1) * (Math.ceil( / ) + 1), where:\n         * -  is the window size\n         * -  is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = opts(W);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // =1, because we skip zero\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // TODO: maybe check that scalar is less than group order? wNAF behavious is undefined otherwise\n            // But need to carefully remove other checks before wNAF. ORDER == bits here\n            const { windows, windowSize } = opts(W);\n            let p = c.ZERO;\n            let f = c.BASE;\n            const mask = BigInt(2 ** W - 1); // Create mask with W ones: 0b1111 for W=4 etc.\n            const maxNumber = 2 ** W;\n            const shiftBy = BigInt(W);\n            for (let window = 0; window < windows; window++) {\n                const offset = window * windowSize;\n                // Extract W bits.\n                let wbits = Number(n & mask);\n                // Shift number by W bits.\n                n >>= shiftBy;\n                // If the bits are bigger than max size, we'll split those.\n                // +224 => 256 - 32\n                if (wbits > windowSize) {\n                    wbits -= maxNumber;\n                    n += _1n;\n                }\n                // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n                // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n                // there is negate now: it is possible that negated element from low value\n                // would be the same as high element, which will create carry into next window.\n                // It's not obvious how this can fail, but still worth investigating later.\n                // Check if we're onto Zero point.\n                // Add random point inside current window to f.\n                const offset1 = offset;\n                const offset2 = offset + Math.abs(wbits) - 1; // -1 because we skip zero\n                const cond1 = window % 2 !== 0;\n                const cond2 = wbits < 0;\n                if (wbits === 0) {\n                    // The most important part for const-time getPublicKey\n                    f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n                }\n                else {\n                    p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n                }\n            }\n            // JIT-compiler should not eliminate f here, since it will later be used in normalizeZ()\n            // Even if the variable is still unused, there are some checks which will\n            // throw an exception, so compiler needs to prove they won't happen, which is hard.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        wNAFCached(P, precomputesMap, n, transform) {\n            // @ts-ignore\n            const W = P._WINDOW_SIZE || 1;\n            // Calculate precomputes on a first run, reuse them after\n            let comp = precomputesMap.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1) {\n                    precomputesMap.set(P, transform(comp));\n                }\n            }\n            return this.wNAF(W, comp, n);\n        },\n    };\n}\nexport function validateBasic(curve) {\n    validateField(curve.Fp);\n    validateObject(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...nLength(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\n//# sourceMappingURL=curve.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y = x + ax + b\nimport * as mod from './modular.js';\nimport * as ut from './utils.js';\nimport { ensureBytes } from './utils.js';\nimport { wNAF, validateBasic } from './curve.js';\nfunction validatePointOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        a: 'field',\n        b: 'field',\n    }, {\n        allowedPrivateKeyLengths: 'array',\n        wrapPrivateKey: 'boolean',\n        isTorsionFree: 'function',\n        clearCofactor: 'function',\n        allowInfinityPoint: 'boolean',\n        fromBytes: 'function',\n        toBytes: 'function',\n    });\n    const { endo, Fp, a } = opts;\n    if (endo) {\n        if (!Fp.eql(a, Fp.ZERO)) {\n            throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n        }\n        if (typeof endo !== 'object' ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n        }\n    }\n    return Object.freeze({ ...opts });\n}\n// ASN.1 DER encoding utilities\nconst { bytesToNumberBE: b2n, hexToBytes: h2b } = ut;\nexport const DER = {\n    // asn.1 DER encoding utils\n    Err: class DERErr extends Error {\n        constructor(m = '') {\n            super(m);\n        }\n    },\n    _parseInt(data) {\n        const { Err: E } = DER;\n        if (data.length < 2 || data[0] !== 0x02)\n            throw new E('Invalid signature integer tag');\n        const len = data[1];\n        const res = data.subarray(2, len + 2);\n        if (!len || res.length !== len)\n            throw new E('Invalid signature integer: wrong length');\n        // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n        // since we always use positive integers here. It must always be empty:\n        // - add zero byte if exists\n        // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n        if (res[0] & 0b10000000)\n            throw new E('Invalid signature integer: negative');\n        if (res[0] === 0x00 && !(res[1] & 0b10000000))\n            throw new E('Invalid signature integer: unnecessary leading zero');\n        return { d: b2n(res), l: data.subarray(len + 2) }; // d is data, l is left\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E } = DER;\n        const data = typeof hex === 'string' ? h2b(hex) : hex;\n        if (!(data instanceof Uint8Array))\n            throw new Error('ui8a expected');\n        let l = data.length;\n        if (l < 2 || data[0] != 0x30)\n            throw new E('Invalid signature tag');\n        if (data[1] !== l - 2)\n            throw new E('Invalid signature: incorrect length');\n        const { d: r, l: sBytes } = DER._parseInt(data.subarray(2));\n        const { d: s, l: rBytesLeft } = DER._parseInt(sBytes);\n        if (rBytesLeft.length)\n            throw new E('Invalid signature: left bytes after parsing');\n        return { r, s };\n    },\n    hexFromSig(sig) {\n        // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n        const slice = (s) => (Number.parseInt(s[0], 16) & 0b1000 ? '00' + s : s);\n        const h = (num) => {\n            const hex = num.toString(16);\n            return hex.length & 1 ? `0${hex}` : hex;\n        };\n        const s = slice(h(sig.s));\n        const r = slice(h(sig.r));\n        const shl = s.length / 2;\n        const rhl = r.length / 2;\n        const sl = h(shl);\n        const rl = h(rhl);\n        return `30${h(rhl + shl + 4)}02${rl}${r}02${sl}${s}`;\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\nexport function weierstrassPoints(opts) {\n    const CURVE = validatePointOpts(opts);\n    const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n    const toBytes = CURVE.toBytes ||\n        ((c, point, isCompressed) => {\n            const a = point.toAffine();\n            return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n        });\n    const fromBytes = CURVE.fromBytes ||\n        ((bytes) => {\n            // const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n            const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n            const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n            return { x, y };\n        });\n    /**\n     * y = x + ax + b: Short weierstrass curve formula\n     * @returns y\n     */\n    function weierstrassEquation(x) {\n        const { a, b } = CURVE;\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x2 * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n    }\n    // Validate whether the passed curve params are valid.\n    // We check if curve equation works for generator point.\n    // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n    // ProjectivePoint class has not been initialized yet.\n    if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n        throw new Error('bad generator point: equation left != right');\n    // Valid group elements reside in range 1..n-1\n    function isWithinCurveOrder(num) {\n        return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n    }\n    function assertGE(num) {\n        if (!isWithinCurveOrder(num))\n            throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n    }\n    // Validates if priv key is valid and converts it to bigint.\n    // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n    function normPrivateKeyToScalar(key) {\n        const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n } = CURVE;\n        if (lengths && typeof key !== 'bigint') {\n            if (key instanceof Uint8Array)\n                key = ut.bytesToHex(key);\n            // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n            if (typeof key !== 'string' || !lengths.includes(key.length))\n                throw new Error('Invalid key');\n            key = key.padStart(nByteLength * 2, '0');\n        }\n        let num;\n        try {\n            num =\n                typeof key === 'bigint'\n                    ? key\n                    : ut.bytesToNumberBE(ensureBytes('private key', key, nByteLength));\n        }\n        catch (error) {\n            throw new Error(`private key must be ${nByteLength} bytes, hex or bigint, not ${typeof key}`);\n        }\n        if (wrapPrivateKey)\n            num = mod.mod(num, n); // disabled by default, enabled for BLS\n        assertGE(num); // num in range [1..N-1]\n        return num;\n    }\n    const pointPrecomputes = new Map();\n    function assertPrjPoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z)  (x=x/z, y=y/z)\n     * Default Point works in 2d / affine coordinates: (x, y)\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        constructor(px, py, pz) {\n            this.px = px;\n            this.py = py;\n            this.pz = pz;\n            if (px == null || !Fp.isValid(px))\n                throw new Error('x required');\n            if (py == null || !Fp.isValid(py))\n                throw new Error('y required');\n            if (pz == null || !Fp.isValid(pz))\n                throw new Error('z required');\n        }\n        // Does not validate if the point is on-curve.\n        // Use fromHex instead, or call assertValidity() later.\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            const is0 = (i) => Fp.eql(i, Fp.ZERO);\n            // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n            if (is0(x) && is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        /**\n         * Takes a bunch of Projective Points but executes only one\n         * inversion on all of them. Inversion is very slow operation,\n         * so this improves performance massively.\n         * Optimization: converts a list of projective points to a list of identical points with Z=1.\n         */\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.pz));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        /**\n         * Converts hash string or Uint8Array to Point.\n         * @param hex short/long ECDSA hex\n         */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        // Multiplies generator point by privateKey.\n        static fromPrivateKey(privateKey) {\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            this._WINDOW_SIZE = windowSize;\n            pointPrecomputes.delete(this);\n        }\n        // A point on curve is valid if it conforms to equation.\n        assertValidity() {\n            // Zero is valid point too!\n            if (this.is0()) {\n                if (CURVE.allowInfinityPoint)\n                    return;\n                throw new Error('bad point: ZERO');\n            }\n            // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n            const { x, y } = this.toAffine();\n            // Check if x, y are valid field elements\n            if (!Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('bad point: x or y not FE');\n            const left = Fp.sqr(y); // y\n            const right = weierstrassEquation(x); // x + ax + b\n            if (!Fp.eql(left, right))\n                throw new Error('bad point: equation left != right');\n            if (!this.isTorsionFree())\n                throw new Error('bad point: not in prime-order subgroup');\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (Fp.isOdd)\n                return !Fp.isOdd(y);\n            throw new Error(\"Field doesn't support isOdd\");\n        }\n        /**\n         * Compare one point to another.\n         */\n        equals(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /**\n         * Flips point to one corresponding to (x, -y) in Affine coordinates.\n         */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, pointPrecomputes, n, (comp) => {\n                const toInv = Fp.invertBatch(comp.map((p) => p.pz));\n                return comp.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n            });\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(n) {\n            const I = Point.ZERO;\n            if (n === _0n)\n                return I;\n            assertGE(n); // Will throw on 0\n            if (n === _1n)\n                return this;\n            const { endo } = CURVE;\n            if (!endo)\n                return wnaf.unsafeLadder(this, n);\n            // Apply endomorphism\n            let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let k1p = I;\n            let k2p = I;\n            let d = this;\n            while (k1 > _0n || k2 > _0n) {\n                if (k1 & _1n)\n                    k1p = k1p.add(d);\n                if (k2 & _1n)\n                    k2p = k2p.add(d);\n                d = d.double();\n                k1 >>= _1n;\n                k2 >>= _1n;\n            }\n            if (k1neg)\n                k1p = k1p.negate();\n            if (k2neg)\n                k2p = k2p.negate();\n            k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n            return k1p.add(k2p);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            assertGE(scalar);\n            let n = scalar;\n            let point, fake; // Fake point is used to const-time mult\n            const { endo } = CURVE;\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n                let { p: k1p, f: f1p } = this.wNAF(k1);\n                let { p: k2p, f: f2p } = this.wNAF(k2);\n                k1p = wnaf.constTimeNegate(k1neg, k1p);\n                k2p = wnaf.constTimeNegate(k2neg, k2p);\n                k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n                point = k1p.add(k2p);\n                fake = f1p.add(f2p);\n            }\n            else {\n                const { p, f } = this.wNAF(n);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n         * Not using Strauss-Shamir trick: precomputation tables are faster.\n         * The trick could be useful if both P and Q are not G (not in our case).\n         * @returns non-zero affine point\n         */\n        multiplyAndAddUnsafe(Q, a, b) {\n            const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n            const mul = (P, a // Select faster multiply() method\n            ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n            const sum = mul(this, a).add(mul(Q, b));\n            return sum.is0() ? undefined : sum;\n        }\n        // Converts Projective point to affine (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        // (x, y, z)  (x=x/z, y=y/z)\n        toAffine(iz) {\n            const { px: x, py: y, pz: z } = this;\n            const is0 = this.is0();\n            // If invZ was 0, we return zero point. However we still want to execute\n            // all operations, so we replace invZ with a random number, 1.\n            if (iz == null)\n                iz = is0 ? Fp.ONE : Fp.inv(z);\n            const ax = Fp.mul(x, iz);\n            const ay = Fp.mul(y, iz);\n            const zz = Fp.mul(z, iz);\n            if (is0)\n                return { x: Fp.ZERO, y: Fp.ZERO };\n            if (!Fp.eql(zz, Fp.ONE))\n                throw new Error('invZ was invalid');\n            return { x: ax, y: ay };\n        }\n        isTorsionFree() {\n            const { h: cofactor, isTorsionFree } = CURVE;\n            if (cofactor === _1n)\n                return true; // No subgroups, always torsion-free\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n        }\n        clearCofactor() {\n            const { h: cofactor, clearCofactor } = CURVE;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(CURVE.h);\n        }\n        toRawBytes(isCompressed = true) {\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        toHex(isCompressed = true) {\n            return ut.bytesToHex(this.toRawBytes(isCompressed));\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n    const _bits = CURVE.nBitLength;\n    const wnaf = wNAF(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n    // Validate if generator point is on curve\n    return {\n        CURVE,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    };\n}\nfunction validateOpts(curve) {\n    const opts = validateBasic(curve);\n    ut.validateObject(opts, {\n        hash: 'hash',\n        hmac: 'function',\n        randomBytes: 'function',\n    }, {\n        bits2int: 'function',\n        bits2int_modN: 'function',\n        lowS: 'boolean',\n    });\n    return Object.freeze({ lowS: true, ...opts });\n}\nexport function weierstrass(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER } = CURVE;\n    const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n    const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n    function isValidFieldElement(num) {\n        return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n    }\n    function modN(a) {\n        return mod.mod(a, CURVE_ORDER);\n    }\n    function invN(a) {\n        return mod.invert(a, CURVE_ORDER);\n    }\n    const { ProjectivePoint: Point, normPrivateKeyToScalar, weierstrassEquation, isWithinCurveOrder, } = weierstrassPoints({\n        ...CURVE,\n        toBytes(c, point, isCompressed) {\n            const a = point.toAffine();\n            const x = Fp.toBytes(a.x);\n            const cat = ut.concatBytes;\n            if (isCompressed) {\n                return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n            }\n            else {\n                return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n            }\n        },\n        fromBytes(bytes) {\n            const len = bytes.length;\n            const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // this.assertValidity() is done inside of fromHex\n            if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n                const x = ut.bytesToNumberBE(tail);\n                if (!isValidFieldElement(x))\n                    throw new Error('Point is not on curve');\n                const y2 = weierstrassEquation(x); // y = x + ax + b\n                let y = Fp.sqrt(y2); // y = y ^ (p+1)/4\n                const isYOdd = (y & _1n) === _1n;\n                // ECDSA\n                const isHeadOdd = (head & 1) === 1;\n                if (isHeadOdd !== isYOdd)\n                    y = Fp.neg(y);\n                return { x, y };\n            }\n            else if (len === uncompressedLen && head === 0x04) {\n                const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n                const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n                return { x, y };\n            }\n            else {\n                throw new Error(`Point of length ${len} was invalid. Expected ${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes`);\n            }\n        },\n    });\n    const numToNByteStr = (num) => ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n    }\n    // slice bytes num\n    const slcNum = (b, from, to) => ut.bytesToNumberBE(b.slice(from, to));\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            this.r = r;\n            this.s = s;\n            this.recovery = recovery;\n            this.assertValidity();\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const l = CURVE.nByteLength;\n            hex = ensureBytes('compactSignature', hex, l * 2);\n            return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = DER.toSig(ensureBytes('DER', hex));\n            return new Signature(r, s);\n        }\n        assertValidity() {\n            // can use assertGE here\n            if (!isWithinCurveOrder(this.r))\n                throw new Error('r must be 0 < r < CURVE.n');\n            if (!isWithinCurveOrder(this.s))\n                throw new Error('s must be 0 < s < CURVE.n');\n        }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        recoverPublicKey(msgHash) {\n            const { r, s, recovery: rec } = this;\n            const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n            if (radj >= Fp.ORDER)\n                throw new Error('recovery id 2 or 3 invalid');\n            const prefix = (rec & 1) === 0 ? '02' : '03';\n            const R = Point.fromHex(prefix + numToNByteStr(radj));\n            const ir = invN(radj); // r^-1\n            const u1 = modN(-h * ir); // -hr^-1\n            const u2 = modN(s * ir); // sr^-1\n            const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n            if (!Q)\n                throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return ut.hexToBytes(this.toDERHex());\n        }\n        toDERHex() {\n            return DER.hexFromSig({ r: this.r, s: this.s });\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return ut.hexToBytes(this.toCompactHex());\n        }\n        toCompactHex() {\n            return numToNByteStr(this.r) + numToNByteStr(this.s);\n        }\n    }\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size (nBitLength+64)\n         * as per FIPS 186 B.4.1 with modulo bias being neglible.\n         */\n        randomPrivateKey: () => {\n            const rand = CURVE.randomBytes(Fp.BYTES + 8);\n            const num = mod.hashToPrivateScalar(rand, CURVE_ORDER);\n            return ut.numberToBytesBE(num, CURVE.nByteLength);\n        },\n        /**\n         * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n         * Allows to massively speed-up `point.multiply(scalar)`.\n         * @returns cached point\n         * @example\n         * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n         * fast.multiply(privKey); // much faster ECDH now\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n            return point;\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        const arr = item instanceof Uint8Array;\n        const str = typeof item === 'string';\n        const len = (arr || str) && item.length;\n        if (arr)\n            return len === compressedLen || len === uncompressedLen;\n        if (str)\n            return len === 2 * compressedLen || len === 2 * uncompressedLen;\n        if (item instanceof Point)\n            return true;\n        return false;\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA))\n            throw new Error('first arg must be private key');\n        if (!isProbPub(publicB))\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = CURVE.bits2int ||\n        function (bytes) {\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = CURVE.bits2int_modN ||\n        function (bytes) {\n            return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        if (typeof num !== 'bigint')\n            throw new Error('bigint expected');\n        if (!(_0n <= num && num < ORDER_MASK))\n            throw new Error(`bigint expected < 2^${CURVE.nBitLength}`);\n        // works with order, can have different size than numToField!\n        return ut.numberToBytesBE(num, CURVE.nByteLength);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n    // Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash, randomBytes } = CURVE;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = ensureBytes('msgHash', msgHash);\n        if (prehash)\n            msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push(ensureBytes('extraEntropy', e, Fp.BYTES)); // check for being of size BYTES\n        }\n        const seed = ut.concatBytes(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!isWithinCurveOrder(k))\n                return; // Important: all mod() calls here must be done over N\n            const ik = invN(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = modN(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            // Can use scalar blinding b^-1(bm + bdr) where b  [1,q1] according to\n            // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n            // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n            const s = modN(ik * modN(m + r * d)); // Not using blinding here\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: CURVE.lowS, prehash: false };\n    const defaultVerOpts = { lowS: CURVE.lowS, prehash: false };\n    /**\n     * Signs message hash (not message: you need to hash it by yourself).\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G  k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param opts `lowS, extraEntropy, prehash`\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const drbg = ut.createHmacDrbg(CURVE.hash.outputLen, CURVE.nByteLength, CURVE.hmac);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE._setWindowSize(8);\n    // utils.precompute(8, ProjectivePoint.BASE)\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1G - U2P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = ensureBytes('msgHash', msgHash);\n        publicKey = ensureBytes('publicKey', publicKey);\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        const { lowS, prehash } = opts;\n        let _sig = undefined;\n        let P;\n        try {\n            if (typeof sg === 'string' || sg instanceof Uint8Array) {\n                // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n                // Since DER can also be 2*nByteLength bytes, we check for it first.\n                try {\n                    _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof DER.Err))\n                        throw derError;\n                    _sig = Signature.fromCompact(sg);\n                }\n            }\n            else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n                const { r, s } = sg;\n                _sig = new Signature(r, s);\n            }\n            else {\n                throw new Error('PARSE');\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            if (error.message === 'PARSE')\n                throw new Error(`signature must be Signature instance, Uint8Array or hex string`);\n            return false;\n        }\n        if (lowS && _sig.hasHighS())\n            return false;\n        if (prehash)\n            msgHash = CURVE.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = invN(s); // s^-1\n        const u1 = modN(h * is); // u1 = hs^-1 mod n\n        const u2 = modN(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1G + u2P\n        if (!R)\n            return false;\n        const v = modN(R.x);\n        return v === r;\n    }\n    return {\n        CURVE,\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        ProjectivePoint: Point,\n        Signature,\n        utils,\n    };\n}\n// Implementation of the Shallue and van de Woestijne method for any Weierstrass curve\n// TODO: check if there is a way to merge this with uvRatio in Edwards && move to modular?\n// b = True and y = sqrt(u / v) if (u / v) is square in F, and\n// b = False and y = sqrt(Z * (u / v)) otherwise.\nexport function SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    const c2 = (q - _1n) / _2n ** c1; // 2. c2 = (q - 1) / (2^c1)        # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n ** c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n ** (c1 - _1n); // 5. c5 = 2^(c1 - 1)              # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = _2n ** (i - _2n); // 18.    tv5 = i - 2;    19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n// From draft-irtf-cfrg-hash-to-curve-16\nexport function mapToCurveSimpleSWU(Fp, opts) {\n    mod.validateField(Fp);\n    if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n    if (!Fp.isOdd)\n        throw new Error('Fp.isOdd is not implemented!');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        x = Fp.div(x, tv4); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","import assert from './_assert.js';\nimport { Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assert.hash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        assert.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        assert.exists(this);\n        assert.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { concatBytes, randomBytes } from '@noble/hashes/utils';\nimport { weierstrass } from './abstract/weierstrass.js';\n// connects noble-curves to noble-hashes\nexport function getHash(hash) {\n    return {\n        hash,\n        hmac: (key, ...msgs) => hmac(hash, key, concatBytes(...msgs)),\n        randomBytes,\n    };\n}\nexport function createCurve(curveDef, defHash) {\n    const create = (hash) => weierstrass({ ...curveDef, ...getHash(hash) });\n    return Object.freeze({ ...create(defHash), create });\n}\n//# sourceMappingURL=_shortw_utils.js.map","/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha256';\nimport { randomBytes } from '@noble/hashes/utils';\nimport { Field, mod, pow2 } from './abstract/modular.js';\nimport { mapToCurveSimpleSWU } from './abstract/weierstrass.js';\nimport { bytesToNumberBE, concatBytes, ensureBytes, numberToBytesBE } from './abstract/utils.js';\nimport * as htf from './abstract/hash-to-curve.js';\nimport { createCurve } from './_shortw_utils.js';\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a, b) => (a + b / _2n) / b;\n/**\n * n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y) {\n    const P = secp256k1P;\n    // prettier-ignore\n    const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n    // prettier-ignore\n    const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n    const b2 = (y * y * y) % P; // x^3, 11\n    const b3 = (b2 * b2 * y) % P; // x^7\n    const b6 = (pow2(b3, _3n, P) * b3) % P;\n    const b9 = (pow2(b6, _3n, P) * b3) % P;\n    const b11 = (pow2(b9, _2n, P) * b2) % P;\n    const b22 = (pow2(b11, _11n, P) * b11) % P;\n    const b44 = (pow2(b22, _22n, P) * b22) % P;\n    const b88 = (pow2(b44, _44n, P) * b44) % P;\n    const b176 = (pow2(b88, _88n, P) * b88) % P;\n    const b220 = (pow2(b176, _44n, P) * b44) % P;\n    const b223 = (pow2(b220, _3n, P) * b3) % P;\n    const t1 = (pow2(b223, _23n, P) * b22) % P;\n    const t2 = (pow2(t1, _6n, P) * b2) % P;\n    const root = pow2(t2, _2n, P);\n    if (!Fp.eql(Fp.sqr(root), y))\n        throw new Error('Cannot find square root');\n    return root;\n}\nconst Fp = Field(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\nexport const secp256k1 = createCurve({\n    a: BigInt(0),\n    b: BigInt(7),\n    Fp,\n    n: secp256k1N,\n    // Base point (x, y) aka generator point\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1),\n    lowS: true,\n    /**\n     * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n     * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n     * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n     * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n     */\n    endo: {\n        beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n        splitScalar: (k) => {\n            const n = secp256k1N;\n            const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n            const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n            const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n            const b2 = a1;\n            const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n            const c1 = divNearest(b2 * k, n);\n            const c2 = divNearest(-b1 * k, n);\n            let k1 = mod(k - c1 * a1 - c2 * a2, n);\n            let k2 = mod(-c1 * b1 - c2 * b2, n);\n            const k1neg = k1 > POW_2_128;\n            const k2neg = k2 > POW_2_128;\n            if (k1neg)\n                k1 = n - k1;\n            if (k2neg)\n                k2 = n - k2;\n            if (k1 > POW_2_128 || k2 > POW_2_128) {\n                throw new Error('splitScalar: Endomorphism failed, k=' + k);\n            }\n            return { k1neg, k1, k2neg, k2 };\n        },\n    },\n}, sha256);\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\nconst fe = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1P;\nconst ge = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1N;\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES = {};\nfunction taggedHash(tag, ...messages) {\n    let tagP = TAGGED_HASH_PREFIXES[tag];\n    if (tagP === undefined) {\n        const tagH = sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n        tagP = concatBytes(tagH, tagH);\n        TAGGED_HASH_PREFIXES[tag] = tagP;\n    }\n    return sha256(concatBytes(tagP, ...messages));\n}\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n) => numberToBytesBE(n, 32);\nconst modP = (x) => mod(x, secp256k1P);\nconst modN = (x) => mod(x, secp256k1N);\nconst Point = secp256k1.ProjectivePoint;\nconst GmulAdd = (Q, a, b) => Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv) {\n    let d_ = secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n    let p = Point.fromPrivateKey(d_); // P = d'G; 0 < d' < n check is done inside\n    const scalar = p.hasEvenY() ? d_ : modN(-d_);\n    return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x) {\n    if (!fe(x))\n        throw new Error('bad x: need 0 < x < p'); // Fail if x  p.\n    const xx = modP(x * x);\n    const c = modP(xx * x + BigInt(7)); // Let c = x + 7 mod p.\n    let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n    if (y % _2n !== _0n)\n        y = modP(-y); // Return the unique point P such that x(P) = x and\n    const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n    p.assertValidity();\n    return p;\n}\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args) {\n    return modN(bytesToNumberBE(taggedHash('BIP0340/challenge', ...args)));\n}\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey) {\n    return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'n. Ret bytes(d'G)\n}\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message, privateKey, auxRand = randomBytes(32)) {\n    const m = ensureBytes('message', message);\n    const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n    const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n    const t = numTo32b(d ^ bytesToNumberBE(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n    const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n    const k_ = modN(bytesToNumberBE(rand)); // Let k' = int(rand) mod n\n    if (k_ === _0n)\n        throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n    const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'G.\n    const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n    const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n    sig.set(rx, 0);\n    sig.set(numTo32b(modN(k + e * d)), 32);\n    // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n    if (!schnorrVerify(sig, m, px))\n        throw new Error('sign: Invalid signature produced');\n    return sig;\n}\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature, message, publicKey) {\n    const sig = ensureBytes('signature', signature, 64);\n    const m = ensureBytes('message', message);\n    const pub = ensureBytes('publicKey', publicKey, 32);\n    try {\n        const P = lift_x(bytesToNumberBE(pub)); // P = lift_x(int(pk)); fail if that fails\n        const r = bytesToNumberBE(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r  p.\n        if (!fe(r))\n            return false;\n        const s = bytesToNumberBE(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s  n.\n        if (!ge(s))\n            return false;\n        const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n        const R = GmulAdd(P, s, modN(-e)); // R = sG - eP\n        if (!R || !R.hasEvenY() || R.toAffine().x !== r)\n            return false; // -eP == (n-e)P\n        return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R)  r.\n    }\n    catch (error) {\n        return false;\n    }\n}\nexport const schnorr = {\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    utils: {\n        randomPrivateKey: secp256k1.utils.randomPrivateKey,\n        lift_x,\n        pointToBytes,\n        numberToBytesBE,\n        bytesToNumberBE,\n        taggedHash,\n        mod,\n    },\n};\nconst isoMap = htf.isogenyMap(Fp, [\n    // xNum\n    [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n    ],\n    // xDen\n    [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n    // yNum\n    [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n    ],\n    // yDen\n    [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n].map((i) => i.map((j) => BigInt(j))));\nconst mapSWU = mapToCurveSimpleSWU(Fp, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fp.create(BigInt('-11')),\n});\nexport const { hashToCurve, encodeToCurve } = htf.createHasher(secp256k1.ProjectivePoint, (scalars) => {\n    const { x, y } = mapSWU(Fp.create(scalars[0]));\n    return isoMap(x, y);\n}, {\n    DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n    encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha256,\n});\n//# sourceMappingURL=secp256k1.js.map","import { mod } from './modular.js';\nimport { bytesToNumberBE, concatBytes, utf8ToBytes, validateObject } from './utils.js';\nfunction validateDST(dst) {\n    if (dst instanceof Uint8Array)\n        return dst;\n    if (typeof dst === 'string')\n        return utf8ToBytes(dst);\n    throw new Error('DST must be Uint8Array or string');\n}\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = bytesToNumberBE;\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value, length) {\n    if (value < 0 || value >= 1 << (8 * length)) {\n        throw new Error(`bad I2OSP call: value=${value} length=${length}`);\n    }\n    const res = Array.from({ length }).fill(0);\n    for (let i = length - 1; i >= 0; i--) {\n        res[i] = value & 0xff;\n        value >>>= 8;\n    }\n    return new Uint8Array(res);\n}\nfunction strxor(a, b) {\n    const arr = new Uint8Array(a.length);\n    for (let i = 0; i < a.length; i++) {\n        arr[i] = a[i] ^ b[i];\n    }\n    return arr;\n}\nfunction isBytes(item) {\n    if (!(item instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n}\nfunction isNum(item) {\n    if (!Number.isSafeInteger(item))\n        throw new Error('number expected');\n}\n// Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits\n// https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-11#section-5.4.1\nexport function expand_message_xmd(msg, DST, lenInBytes, H) {\n    isBytes(msg);\n    isBytes(DST);\n    isNum(lenInBytes);\n    // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-5.3.3\n    if (DST.length > 255)\n        DST = H(concatBytes(utf8ToBytes('H2C-OVERSIZE-DST-'), DST));\n    const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n    const ell = Math.ceil(lenInBytes / b_in_bytes);\n    if (ell > 255)\n        throw new Error('Invalid xmd length');\n    const DST_prime = concatBytes(DST, i2osp(DST.length, 1));\n    const Z_pad = i2osp(0, r_in_bytes);\n    const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n    const b = new Array(ell);\n    const b_0 = H(concatBytes(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n    b[0] = H(concatBytes(b_0, i2osp(1, 1), DST_prime));\n    for (let i = 1; i <= ell; i++) {\n        const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n        b[i] = H(concatBytes(...args));\n    }\n    const pseudo_random_bytes = concatBytes(...b);\n    return pseudo_random_bytes.slice(0, lenInBytes);\n}\nexport function expand_message_xof(msg, DST, lenInBytes, k, H) {\n    isBytes(msg);\n    isBytes(DST);\n    isNum(lenInBytes);\n    // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-5.3.3\n    // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n    if (DST.length > 255) {\n        const dkLen = Math.ceil((2 * k) / 8);\n        DST = H.create({ dkLen }).update(utf8ToBytes('H2C-OVERSIZE-DST-')).update(DST).digest();\n    }\n    if (lenInBytes > 65535 || DST.length > 255)\n        throw new Error('expand_message_xof: invalid lenInBytes');\n    return (H.create({ dkLen: lenInBytes })\n        .update(msg)\n        .update(i2osp(lenInBytes, 2))\n        // 2. DST_prime = DST || I2OSP(len(DST), 1)\n        .update(DST)\n        .update(i2osp(DST.length, 1))\n        .digest());\n}\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F\n * https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-11#section-5.3\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nexport function hash_to_field(msg, count, options) {\n    validateObject(options, {\n        DST: 'string',\n        p: 'bigint',\n        m: 'isSafeInteger',\n        k: 'isSafeInteger',\n        hash: 'hash',\n    });\n    const { p, k, m, hash, expand, DST: _DST } = options;\n    isBytes(msg);\n    isNum(count);\n    const DST = validateDST(_DST);\n    const log2p = p.toString(2).length;\n    const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n    const len_in_bytes = count * m * L;\n    let prb; // pseudo_random_bytes\n    if (expand === 'xmd') {\n        prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n    }\n    else if (expand === 'xof') {\n        prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n    }\n    else if (expand === '_internal_pass') {\n        // for internal tests only\n        prb = msg;\n    }\n    else {\n        throw new Error('expand must be \"xmd\" or \"xof\"');\n    }\n    const u = new Array(count);\n    for (let i = 0; i < count; i++) {\n        const e = new Array(m);\n        for (let j = 0; j < m; j++) {\n            const elm_offset = L * (j + i * m);\n            const tv = prb.subarray(elm_offset, elm_offset + L);\n            e[j] = mod(os2ip(tv), p);\n        }\n        u[i] = e;\n    }\n    return u;\n}\nexport function isogenyMap(field, map) {\n    // Make same order as in spec\n    const COEFF = map.map((i) => Array.from(i).reverse());\n    return (x, y) => {\n        const [xNum, xDen, yNum, yDen] = COEFF.map((val) => val.reduce((acc, i) => field.add(field.mul(acc, x), i)));\n        x = field.div(xNum, xDen); // xNum / xDen\n        y = field.mul(y, field.div(yNum, yDen)); // y * (yNum / yDev)\n        return { x, y };\n    };\n}\nexport function createHasher(Point, mapToCurve, def) {\n    if (typeof mapToCurve !== 'function')\n        throw new Error('mapToCurve() must be defined');\n    return {\n        // Encodes byte string to elliptic curve\n        // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-3\n        hashToCurve(msg, options) {\n            const u = hash_to_field(msg, 2, { ...def, DST: def.DST, ...options });\n            const u0 = Point.fromAffine(mapToCurve(u[0]));\n            const u1 = Point.fromAffine(mapToCurve(u[1]));\n            const P = u0.add(u1).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n        // https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-hash-to-curve-16#section-3\n        encodeToCurve(msg, options) {\n            const u = hash_to_field(msg, 1, { ...def, DST: def.encodeDST, ...options });\n            const P = Point.fromAffine(mapToCurve(u[0])).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n    };\n}\n//# sourceMappingURL=hash-to-curve.js.map","/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nexport function assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexport const utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexport const base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexport const base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexport const base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexport const base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexport const base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexport const base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexport const base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexport const base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexport const base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexport const base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nexport const base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), base58);\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexport const bech32 = genBech32('bech32');\nexport const bech32m = genBech32('bech32m');\nexport const utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexport const hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nexport const bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexport const str = bytesToString;\nexport const stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexport const bytes = stringToBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wordlist = void 0;\nexports.wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`Expected boolean, not ${b}`);\n}\nexports.bool = bool;\nfunction bytes(b, ...lengths) {\n    if (!(b instanceof Uint8Array))\n        throw new TypeError('Expected Uint8Array');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(hash.outputLen);\n    number(hash.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = {\n    number,\n    bool,\n    bytes,\n    hash,\n    exists,\n    output,\n};\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.isLE = exports.rotr = exports.createView = exports.u32 = exports.u8 = void 0;\n// We use `globalThis.crypto`, but node.js versions earlier than v19 don't\n// declare it in global scope. For node.js, package.json#exports field mapping\n// rewrites import from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated, we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// big-endian hardware is rare. Just in case someone still decides to run hashes:\n// early-throw an error because we don't support BE yet.\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\nif (!exports.isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n */\nfunction bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n/**\n * @example hexToBytes('deadbeef') // Uint8Array.from([0xde, 0xad, 0xbe, 0xef])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexports.utf8ToBytes = utf8ToBytes;\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nfunction concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n        throw new TypeError('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\n/**\n * Secure PRNG. Uses `globalThis.crypto` or node.js crypto module.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hmac = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// HMAC (RFC 2104)\nclass HMAC extends utils_js_1.Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        _assert_js_1.default.hash(hash);\n        const key = (0, utils_js_1.toBytes)(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        _assert_js_1.default.exists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.bytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nconst hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nexports.hmac = hmac;\nexports.hmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pbkdf2Async = exports.pbkdf2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst hmac_js_1 = require(\"./hmac.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash, _password, _salt, _opts) {\n    _assert_js_1.default.hash(hash);\n    const opts = (0, utils_js_1.checkOpts)({ dkLen: 32, asyncTick: 10 }, _opts);\n    const { c, dkLen, asyncTick } = opts;\n    _assert_js_1.default.number(c);\n    _assert_js_1.default.number(dkLen);\n    _assert_js_1.default.number(asyncTick);\n    if (c < 1)\n        throw new Error('PBKDF2: iterations (c) should be >= 1');\n    const password = (0, utils_js_1.toBytes)(_password);\n    const salt = (0, utils_js_1.toBytes)(_salt);\n    // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n    const DK = new Uint8Array(dkLen);\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    const PRF = hmac_js_1.hmac.create(hash, password);\n    const PRFSalt = PRF._cloneInto().update(salt);\n    return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\nfunction pbkdf2Output(PRF, PRFSalt, DK, prfW, u) {\n    PRF.destroy();\n    PRFSalt.destroy();\n    if (prfW)\n        prfW.destroy();\n    u.fill(0);\n    return DK;\n}\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n */\nfunction pbkdf2(hash, password, salt, opts) {\n    const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 +  + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        for (let ui = 1; ui < c; ui++) {\n            // Uc = PRF(Password, Uc1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        }\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2 = pbkdf2;\nasync function pbkdf2Async(hash, password, salt, opts) {\n    const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n    let prfW; // Working copy\n    const arr = new Uint8Array(4);\n    const view = (0, utils_js_1.createView)(arr);\n    const u = new Uint8Array(PRF.outputLen);\n    // DK = T1 + T2 +  + Tdklen/hlen\n    for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n        // Ti = F(Password, Salt, c, i)\n        const Ti = DK.subarray(pos, pos + PRF.outputLen);\n        view.setInt32(0, ti, false);\n        // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n        // U1 = PRF(Password, Salt + INT_32_BE(i))\n        (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n        Ti.set(u.subarray(0, Ti.length));\n        await (0, utils_js_1.asyncLoop)(c - 1, asyncTick, (i) => {\n            // Uc = PRF(Password, Uc1)\n            PRF._cloneInto(prfW).update(u).digestInto(u);\n            for (let i = 0; i < Ti.length; i++)\n                Ti[i] ^= u[i];\n        });\n    }\n    return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\nexports.pbkdf2Async = pbkdf2Async;\n//# sourceMappingURL=pbkdf2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SHA2 = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nclass SHA2 extends utils_js_1.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0, utils_js_1.createView)(this.buffer);\n    }\n    update(data) {\n        _assert_js_1.default.exists(this);\n        const { view, buffer, blockLen } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0, utils_js_1.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        _assert_js_1.default.exists(this);\n        _assert_js_1.default.output(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0, utils_js_1.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\nexports.SHA2 = SHA2;\n//# sourceMappingURL=_sha2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha224 = exports.sha256 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0, utils_js_1.rotr)(W15, 7) ^ (0, utils_js_1.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0, utils_js_1.rotr)(W2, 17) ^ (0, utils_js_1.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0, utils_js_1.rotr)(E, 6) ^ (0, utils_js_1.rotr)(E, 11) ^ (0, utils_js_1.rotr)(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0, utils_js_1.rotr)(A, 2) ^ (0, utils_js_1.rotr)(A, 13) ^ (0, utils_js_1.rotr)(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexports.sha256 = (0, utils_js_1.wrapConstructor)(() => new SHA256());\nexports.sha224 = (0, utils_js_1.wrapConstructor)(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.add = exports.toBig = exports.split = exports.fromBig = void 0;\nconst U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexports.fromBig = fromBig;\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexports.split = split;\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\nexports.add = add;\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig: exports.toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha384 = exports.sha512_256 = exports.sha512_224 = exports.sha512 = exports.SHA512 = void 0;\nconst _sha2_js_1 = require(\"./_sha2.js\");\nconst _u64_js_1 = require(\"./_u64.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = _u64_js_1.default.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nclass SHA512 extends _sha2_js_1.SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = _u64_js_1.default.rotrSH(W15h, W15l, 1) ^ _u64_js_1.default.rotrSH(W15h, W15l, 8) ^ _u64_js_1.default.shrSH(W15h, W15l, 7);\n            const s0l = _u64_js_1.default.rotrSL(W15h, W15l, 1) ^ _u64_js_1.default.rotrSL(W15h, W15l, 8) ^ _u64_js_1.default.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = _u64_js_1.default.rotrSH(W2h, W2l, 19) ^ _u64_js_1.default.rotrBH(W2h, W2l, 61) ^ _u64_js_1.default.shrSH(W2h, W2l, 6);\n            const s1l = _u64_js_1.default.rotrSL(W2h, W2l, 19) ^ _u64_js_1.default.rotrBL(W2h, W2l, 61) ^ _u64_js_1.default.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = _u64_js_1.default.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = _u64_js_1.default.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = _u64_js_1.default.rotrSH(Eh, El, 14) ^ _u64_js_1.default.rotrSH(Eh, El, 18) ^ _u64_js_1.default.rotrBH(Eh, El, 41);\n            const sigma1l = _u64_js_1.default.rotrSL(Eh, El, 14) ^ _u64_js_1.default.rotrSL(Eh, El, 18) ^ _u64_js_1.default.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = _u64_js_1.default.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = _u64_js_1.default.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = _u64_js_1.default.rotrSH(Ah, Al, 28) ^ _u64_js_1.default.rotrBH(Ah, Al, 34) ^ _u64_js_1.default.rotrBH(Ah, Al, 39);\n            const sigma0l = _u64_js_1.default.rotrSL(Ah, Al, 28) ^ _u64_js_1.default.rotrBL(Ah, Al, 34) ^ _u64_js_1.default.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = _u64_js_1.default.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = _u64_js_1.default.add3L(T1l, sigma0l, MAJl);\n            Ah = _u64_js_1.default.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = _u64_js_1.default.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = _u64_js_1.default.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = _u64_js_1.default.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = _u64_js_1.default.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = _u64_js_1.default.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = _u64_js_1.default.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = _u64_js_1.default.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = _u64_js_1.default.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexports.SHA512 = SHA512;\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexports.sha512 = (0, utils_js_1.wrapConstructor)(() => new SHA512());\nexports.sha512_224 = (0, utils_js_1.wrapConstructor)(() => new SHA512_224());\nexports.sha512_256 = (0, utils_js_1.wrapConstructor)(() => new SHA512_256());\nexports.sha384 = (0, utils_js_1.wrapConstructor)(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","\"use strict\";\n/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bytes = exports.stringToBytes = exports.str = exports.bytesToString = exports.hex = exports.utf8 = exports.bech32m = exports.bech32 = exports.base58check = exports.base58xmr = exports.base58xrp = exports.base58flickr = exports.base58 = exports.base64url = exports.base64 = exports.base32crockford = exports.base32hex = exports.base32 = exports.base16 = exports.utils = exports.assertNumber = void 0;\nfunction assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nexports.assertNumber = assertNumber;\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexports.utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexports.base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexports.base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexports.base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexports.base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexports.base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexports.base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexports.base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexports.base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexports.base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexports.base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = exports.base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nconst base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), exports.base58);\nexports.base58check = base58check;\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexports.bech32 = genBech32('bech32');\nexports.bech32m = genBech32('bech32m');\nexports.utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexports.hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8: exports.utf8, hex: exports.hex, base16: exports.base16, base32: exports.base32, base64: exports.base64, base64url: exports.base64url, base58: exports.base58, base58xmr: exports.base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nconst bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexports.bytesToString = bytesToString;\nexports.str = exports.bytesToString;\nconst stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexports.stringToBytes = stringToBytes;\nexports.bytes = exports.stringToBytes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mnemonicToSeedSync = exports.mnemonicToSeed = exports.validateMnemonic = exports.entropyToMnemonic = exports.mnemonicToEntropy = exports.generateMnemonic = void 0;\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nconst _assert_1 = require(\"@noble/hashes/_assert\");\nconst pbkdf2_1 = require(\"@noble/hashes/pbkdf2\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst sha512_1 = require(\"@noble/hashes/sha512\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst base_1 = require(\"@scure/base\");\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError(`Invalid mnemonic type: ${typeof str}`);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction assertEntropy(entropy) {\n    _assert_1.default.bytes(entropy, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction generateMnemonic(wordlist, strength = 128) {\n    _assert_1.default.number(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic((0, utils_1.randomBytes)(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([((0, sha256_1.sha256)(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\n        throw new Error('Worlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error(`Wordlist: non-string element: ${i}`);\n    });\n    return base_1.utils.chain(base_1.utils.checksum(1, calcChecksum), base_1.utils.radix2(11, true), base_1.utils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    assertEntropy(entropy);\n    return entropy;\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction entropyToMnemonic(entropy, wordlist) {\n    assertEntropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nconst salt = (passphrase) => nfkd(`mnemonic${passphrase}`);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeed(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2Async)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\n","import { SHA2 } from './_sha2.js';\nimport { wrapConstructor } from './utils.js';\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = Uint8Array.from({ length: 16 }, (_, i) => i);\nconst Pi = Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++)\n    for (let j of [idxL, idxR])\n        j.push(j[i].map((k) => Rho[k]));\nconst shifts = [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\nconst shiftsL = idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst Kl = new Uint32Array([0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]);\nconst Kr = new Uint32Array([0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]);\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | (word >>> (32 - shift));\n// It's called f() in spec.\nfunction f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    else if (group === 1)\n        return (x & y) | (~x & z);\n    else if (group === 2)\n        return (x | ~y) ^ z;\n    else if (group === 3)\n        return (x & z) | (y & ~z);\n    else\n        return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst BUF = new Uint32Array(16);\nexport class RIPEMD160 extends SHA2 {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = (rotl(al + f(group, bl, cl, dl) + BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = (rotl(ar + f(rGroup, br, cr, dr) + BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        BUF.fill(0);\n    }\n    destroy() {\n        this.destroyed = true;\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexport const ripemd160 = wrapConstructor(() => new RIPEMD160());\n//# sourceMappingURL=ripemd160.js.map","const U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nexport function fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexport function split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexport const toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h, l) => l;\nconst rotr32L = (h, l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nexport function add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\nexport class SHA512 extends SHA2 {\n    constructor() {\n        super(128, 64, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n        this.outputLen = 28;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n        this.outputLen = 32;\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super();\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n        this.outputLen = 48;\n    }\n}\nexport const sha512 = wrapConstructor(() => new SHA512());\nexport const sha512_224 = wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = wrapConstructor(() => new SHA512_256());\nexport const sha384 = wrapConstructor(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","import { hmac } from '@noble/hashes/hmac';\nimport { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512 } from '@noble/hashes/sha512';\nimport { bytes as assertBytes } from '@noble/hashes/_assert';\nimport { bytesToHex, concatBytes, createView, hexToBytes, utf8ToBytes } from '@noble/hashes/utils';\nimport { secp256k1 as secp } from '@noble/curves/secp256k1';\nimport { mod } from '@noble/curves/abstract/modular';\nimport { base58check as base58checker } from '@scure/base';\nconst Point = secp.ProjectivePoint;\nconst base58check = base58checker(sha256);\nfunction bytesToNumber(bytes) {\n    return BigInt(`0x${bytesToHex(bytes)}`);\n}\nfunction numberToBytes(num) {\n    return hexToBytes(num.toString(16).padStart(64, '0'));\n}\nconst MASTER_SECRET = utf8ToBytes('Bitcoin seed');\nconst BITCOIN_VERSIONS = { private: 0x0488ade4, public: 0x0488b21e };\nexport const HARDENED_OFFSET = 0x80000000;\nconst hash160 = (data) => ripemd160(sha256(data));\nconst fromU32 = (data) => createView(data).getUint32(0, false);\nconst toU32 = (n) => {\n    if (!Number.isSafeInteger(n) || n < 0 || n > 2 ** 32 - 1) {\n        throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);\n    }\n    const buf = new Uint8Array(4);\n    createView(buf).setUint32(0, n, false);\n    return buf;\n};\nexport class HDKey {\n    get fingerprint() {\n        if (!this.pubHash) {\n            throw new Error('No publicKey set!');\n        }\n        return fromU32(this.pubHash);\n    }\n    get identifier() {\n        return this.pubHash;\n    }\n    get pubKeyHash() {\n        return this.pubHash;\n    }\n    get privateKey() {\n        return this.privKeyBytes || null;\n    }\n    get publicKey() {\n        return this.pubKey || null;\n    }\n    get privateExtendedKey() {\n        const priv = this.privateKey;\n        if (!priv) {\n            throw new Error('No private key');\n        }\n        return base58check.encode(this.serialize(this.versions.private, concatBytes(new Uint8Array([0]), priv)));\n    }\n    get publicExtendedKey() {\n        if (!this.pubKey) {\n            throw new Error('No public key');\n        }\n        return base58check.encode(this.serialize(this.versions.public, this.pubKey));\n    }\n    static fromMasterSeed(seed, versions = BITCOIN_VERSIONS) {\n        assertBytes(seed);\n        if (8 * seed.length < 128 || 8 * seed.length > 512) {\n            throw new Error(`HDKey: wrong seed length=${seed.length}. Should be between 128 and 512 bits; 256 bits is advised)`);\n        }\n        const I = hmac(sha512, MASTER_SECRET, seed);\n        return new HDKey({\n            versions,\n            chainCode: I.slice(32),\n            privateKey: I.slice(0, 32),\n        });\n    }\n    static fromExtendedKey(base58key, versions = BITCOIN_VERSIONS) {\n        const keyBuffer = base58check.decode(base58key);\n        const keyView = createView(keyBuffer);\n        const version = keyView.getUint32(0, false);\n        const opt = {\n            versions,\n            depth: keyBuffer[4],\n            parentFingerprint: keyView.getUint32(5, false),\n            index: keyView.getUint32(9, false),\n            chainCode: keyBuffer.slice(13, 45),\n        };\n        const key = keyBuffer.slice(45);\n        const isPriv = key[0] === 0;\n        if (version !== versions[isPriv ? 'private' : 'public']) {\n            throw new Error('Version mismatch');\n        }\n        if (isPriv) {\n            return new HDKey({ ...opt, privateKey: key.slice(1) });\n        }\n        else {\n            return new HDKey({ ...opt, publicKey: key });\n        }\n    }\n    static fromJSON(json) {\n        return HDKey.fromExtendedKey(json.xpriv);\n    }\n    constructor(opt) {\n        this.depth = 0;\n        this.index = 0;\n        this.chainCode = null;\n        this.parentFingerprint = 0;\n        if (!opt || typeof opt !== 'object') {\n            throw new Error('HDKey.constructor must not be called directly');\n        }\n        this.versions = opt.versions || BITCOIN_VERSIONS;\n        this.depth = opt.depth || 0;\n        this.chainCode = opt.chainCode;\n        this.index = opt.index || 0;\n        this.parentFingerprint = opt.parentFingerprint || 0;\n        if (!this.depth) {\n            if (this.parentFingerprint || this.index) {\n                throw new Error('HDKey: zero depth with non-zero index/parent fingerprint');\n            }\n        }\n        if (opt.publicKey && opt.privateKey) {\n            throw new Error('HDKey: publicKey and privateKey at same time.');\n        }\n        if (opt.privateKey) {\n            if (!secp.utils.isValidPrivateKey(opt.privateKey)) {\n                throw new Error('Invalid private key');\n            }\n            this.privKey =\n                typeof opt.privateKey === 'bigint' ? opt.privateKey : bytesToNumber(opt.privateKey);\n            this.privKeyBytes = numberToBytes(this.privKey);\n            this.pubKey = secp.getPublicKey(opt.privateKey, true);\n        }\n        else if (opt.publicKey) {\n            this.pubKey = Point.fromHex(opt.publicKey).toRawBytes(true);\n        }\n        else {\n            throw new Error('HDKey: no public or private key provided');\n        }\n        this.pubHash = hash160(this.pubKey);\n    }\n    derive(path) {\n        if (!/^[mM]'?/.test(path)) {\n            throw new Error('Path must start with \"m\" or \"M\"');\n        }\n        if (/^[mM]'?$/.test(path)) {\n            return this;\n        }\n        const parts = path.replace(/^[mM]'?\\//, '').split('/');\n        let child = this;\n        for (const c of parts) {\n            const m = /^(\\d+)('?)$/.exec(c);\n            if (!m || m.length !== 3) {\n                throw new Error(`Invalid child index: ${c}`);\n            }\n            let idx = +m[1];\n            if (!Number.isSafeInteger(idx) || idx >= HARDENED_OFFSET) {\n                throw new Error('Invalid index');\n            }\n            if (m[2] === \"'\") {\n                idx += HARDENED_OFFSET;\n            }\n            child = child.deriveChild(idx);\n        }\n        return child;\n    }\n    deriveChild(index) {\n        if (!this.pubKey || !this.chainCode) {\n            throw new Error('No publicKey or chainCode set');\n        }\n        let data = toU32(index);\n        if (index >= HARDENED_OFFSET) {\n            const priv = this.privateKey;\n            if (!priv) {\n                throw new Error('Could not derive hardened child key');\n            }\n            data = concatBytes(new Uint8Array([0]), priv, data);\n        }\n        else {\n            data = concatBytes(this.pubKey, data);\n        }\n        const I = hmac(sha512, this.chainCode, data);\n        const childTweak = bytesToNumber(I.slice(0, 32));\n        const chainCode = I.slice(32);\n        if (!secp.utils.isValidPrivateKey(childTweak)) {\n            throw new Error('Tweak bigger than curve order');\n        }\n        const opt = {\n            versions: this.versions,\n            chainCode,\n            depth: this.depth + 1,\n            parentFingerprint: this.fingerprint,\n            index,\n        };\n        try {\n            if (this.privateKey) {\n                const added = mod(this.privKey + childTweak, secp.CURVE.n);\n                if (!secp.utils.isValidPrivateKey(added)) {\n                    throw new Error('The tweak was out of range or the resulted private key is invalid');\n                }\n                opt.privateKey = added;\n            }\n            else {\n                const added = Point.fromHex(this.pubKey).add(Point.fromPrivateKey(childTweak));\n                if (added.equals(Point.ZERO)) {\n                    throw new Error('The tweak was equal to negative P, which made the result key invalid');\n                }\n                opt.publicKey = added.toRawBytes(true);\n            }\n            return new HDKey(opt);\n        }\n        catch (err) {\n            return this.deriveChild(index + 1);\n        }\n    }\n    sign(hash) {\n        if (!this.privateKey) {\n            throw new Error('No privateKey set!');\n        }\n        assertBytes(hash, 32);\n        return secp.sign(hash, this.privKey).toCompactRawBytes();\n    }\n    verify(hash, signature) {\n        assertBytes(hash, 32);\n        assertBytes(signature, 64);\n        if (!this.publicKey) {\n            throw new Error('No publicKey set!');\n        }\n        let sig;\n        try {\n            sig = secp.Signature.fromCompact(signature);\n        }\n        catch (error) {\n            return false;\n        }\n        return secp.verify(sig, hash, this.publicKey);\n    }\n    wipePrivateData() {\n        this.privKey = undefined;\n        if (this.privKeyBytes) {\n            this.privKeyBytes.fill(0);\n            this.privKeyBytes = undefined;\n        }\n        return this;\n    }\n    toJSON() {\n        return {\n            xpriv: this.privateExtendedKey,\n            xpub: this.publicExtendedKey,\n        };\n    }\n    serialize(version, key) {\n        if (!this.chainCode) {\n            throw new Error('No chainCode set');\n        }\n        assertBytes(key, 33);\n        return concatBytes(toU32(version), new Uint8Array([this.depth]), toU32(this.parentFingerprint), toU32(this.index), this.chainCode, key);\n    }\n}\n//# sourceMappingURL=index.js.map","var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// keys.ts\nimport { schnorr } from \"@noble/curves/secp256k1\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\nfunction generatePrivateKey() {\n  return bytesToHex(schnorr.utils.randomPrivateKey());\n}\nfunction getPublicKey(privateKey) {\n  return bytesToHex(schnorr.getPublicKey(privateKey));\n}\n\n// event.ts\nimport { schnorr as schnorr2 } from \"@noble/curves/secp256k1\";\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { bytesToHex as bytesToHex2 } from \"@noble/hashes/utils\";\n\n// utils.ts\nvar utils_exports = {};\n__export(utils_exports, {\n  insertEventIntoAscendingList: () => insertEventIntoAscendingList,\n  insertEventIntoDescendingList: () => insertEventIntoDescendingList,\n  normalizeURL: () => normalizeURL,\n  utf8Decoder: () => utf8Decoder,\n  utf8Encoder: () => utf8Encoder\n});\nvar utf8Decoder = new TextDecoder(\"utf-8\");\nvar utf8Encoder = new TextEncoder();\nfunction normalizeURL(url) {\n  let p = new URL(url);\n  p.pathname = p.pathname.replace(/\\/+/g, \"/\");\n  if (p.pathname.endsWith(\"/\"))\n    p.pathname = p.pathname.slice(0, -1);\n  if (p.port === \"80\" && p.protocol === \"ws:\" || p.port === \"443\" && p.protocol === \"wss:\")\n    p.port = \"\";\n  p.searchParams.sort();\n  p.hash = \"\";\n  return p.toString();\n}\nfunction insertEventIntoDescendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at < sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at >= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at > event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at < event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\nfunction insertEventIntoAscendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at > sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at <= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at < event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at > event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\n\n// event.ts\nvar Kind = /* @__PURE__ */ ((Kind3) => {\n  Kind3[Kind3[\"Metadata\"] = 0] = \"Metadata\";\n  Kind3[Kind3[\"Text\"] = 1] = \"Text\";\n  Kind3[Kind3[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  Kind3[Kind3[\"Contacts\"] = 3] = \"Contacts\";\n  Kind3[Kind3[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  Kind3[Kind3[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  Kind3[Kind3[\"Repost\"] = 6] = \"Repost\";\n  Kind3[Kind3[\"Reaction\"] = 7] = \"Reaction\";\n  Kind3[Kind3[\"BadgeAward\"] = 8] = \"BadgeAward\";\n  Kind3[Kind3[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  Kind3[Kind3[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  Kind3[Kind3[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  Kind3[Kind3[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  Kind3[Kind3[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  Kind3[Kind3[\"Blank\"] = 255] = \"Blank\";\n  Kind3[Kind3[\"Report\"] = 1984] = \"Report\";\n  Kind3[Kind3[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  Kind3[Kind3[\"Zap\"] = 9735] = \"Zap\";\n  Kind3[Kind3[\"RelayList\"] = 10002] = \"RelayList\";\n  Kind3[Kind3[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  Kind3[Kind3[\"BadgeDefinition\"] = 30008] = \"BadgeDefinition\";\n  Kind3[Kind3[\"ProfileBadge\"] = 30009] = \"ProfileBadge\";\n  Kind3[Kind3[\"Article\"] = 30023] = \"Article\";\n  return Kind3;\n})(Kind || {});\nfunction getBlankEvent(kind = 255 /* Blank */) {\n  return {\n    kind,\n    content: \"\",\n    tags: [],\n    created_at: 0\n  };\n}\nfunction finishEvent(t, privateKey) {\n  let event = t;\n  event.pubkey = getPublicKey(privateKey);\n  event.id = getEventHash(event);\n  event.sig = getSignature(event, privateKey);\n  return event;\n}\nfunction serializeEvent(evt) {\n  if (!validateEvent(evt))\n    throw new Error(\"can't serialize event with wrong or missing properties\");\n  return JSON.stringify([\n    0,\n    evt.pubkey,\n    evt.created_at,\n    evt.kind,\n    evt.tags,\n    evt.content\n  ]);\n}\nfunction getEventHash(event) {\n  let eventHash = sha256(utf8Encoder.encode(serializeEvent(event)));\n  return bytesToHex2(eventHash);\n}\nvar isRecord = (obj) => obj instanceof Object;\nfunction validateEvent(event) {\n  if (!isRecord(event))\n    return false;\n  if (typeof event.kind !== \"number\")\n    return false;\n  if (typeof event.content !== \"string\")\n    return false;\n  if (typeof event.created_at !== \"number\")\n    return false;\n  if (typeof event.pubkey !== \"string\")\n    return false;\n  if (!event.pubkey.match(/^[a-f0-9]{64}$/))\n    return false;\n  if (!Array.isArray(event.tags))\n    return false;\n  for (let i = 0; i < event.tags.length; i++) {\n    let tag = event.tags[i];\n    if (!Array.isArray(tag))\n      return false;\n    for (let j = 0; j < tag.length; j++) {\n      if (typeof tag[j] === \"object\")\n        return false;\n    }\n  }\n  return true;\n}\nfunction verifySignature(event) {\n  try {\n    return schnorr2.verify(event.sig, getEventHash(event), event.pubkey);\n  } catch (err) {\n    return false;\n  }\n}\nfunction signEvent(event, key) {\n  console.warn(\n    \"nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead.\"\n  );\n  return getSignature(event, key);\n}\nfunction getSignature(event, key) {\n  return bytesToHex2(schnorr2.sign(getEventHash(event), key));\n}\n\n// filter.ts\nfunction matchFilter(filter, event) {\n  if (filter.ids && filter.ids.indexOf(event.id) === -1) {\n    if (!filter.ids.some((prefix) => event.id.startsWith(prefix))) {\n      return false;\n    }\n  }\n  if (filter.kinds && filter.kinds.indexOf(event.kind) === -1)\n    return false;\n  if (filter.authors && filter.authors.indexOf(event.pubkey) === -1) {\n    if (!filter.authors.some((prefix) => event.pubkey.startsWith(prefix))) {\n      return false;\n    }\n  }\n  for (let f in filter) {\n    if (f[0] === \"#\") {\n      let tagName = f.slice(1);\n      let values = filter[`#${tagName}`];\n      if (values && !event.tags.find(\n        ([t, v]) => t === f.slice(1) && values.indexOf(v) !== -1\n      ))\n        return false;\n    }\n  }\n  if (filter.since && event.created_at < filter.since)\n    return false;\n  if (filter.until && event.created_at >= filter.until)\n    return false;\n  return true;\n}\nfunction matchFilters(filters, event) {\n  for (let i = 0; i < filters.length; i++) {\n    if (matchFilter(filters[i], event))\n      return true;\n  }\n  return false;\n}\n\n// fakejson.ts\nvar fakejson_exports = {};\n__export(fakejson_exports, {\n  getHex64: () => getHex64,\n  getInt: () => getInt,\n  getSubscriptionId: () => getSubscriptionId,\n  matchEventId: () => matchEventId,\n  matchEventKind: () => matchEventKind,\n  matchEventPubkey: () => matchEventPubkey\n});\nfunction getHex64(json, field) {\n  let len = field.length + 3;\n  let idx = json.indexOf(`\"${field}\":`) + len;\n  let s = json.slice(idx).indexOf(`\"`) + idx + 1;\n  return json.slice(s, s + 64);\n}\nfunction getInt(json, field) {\n  let len = field.length;\n  let idx = json.indexOf(`\"${field}\":`) + len + 3;\n  let sliced = json.slice(idx);\n  let end = Math.min(sliced.indexOf(\",\"), sliced.indexOf(\"}\"));\n  return parseInt(sliced.slice(0, end), 10);\n}\nfunction getSubscriptionId(json) {\n  let idx = json.slice(0, 22).indexOf(`\"EVENT\"`);\n  if (idx === -1)\n    return null;\n  let pstart = json.slice(idx + 7 + 1).indexOf(`\"`);\n  if (pstart === -1)\n    return null;\n  let start = idx + 7 + 1 + pstart;\n  let pend = json.slice(start + 1, 80).indexOf(`\"`);\n  if (pend === -1)\n    return null;\n  let end = start + 1 + pend;\n  return json.slice(start + 1, end);\n}\nfunction matchEventId(json, id) {\n  return id === getHex64(json, \"id\");\n}\nfunction matchEventPubkey(json, pubkey) {\n  return pubkey === getHex64(json, \"pubkey\");\n}\nfunction matchEventKind(json, kind) {\n  return kind === getInt(json, \"kind\");\n}\n\n// relay.ts\nvar newListeners = () => ({\n  connect: [],\n  disconnect: [],\n  error: [],\n  notice: [],\n  auth: []\n});\nfunction relayInit(url, options = {}) {\n  let { listTimeout = 3e3, getTimeout = 3e3, countTimeout = 3e3 } = options;\n  var ws;\n  var openSubs = {};\n  var listeners = newListeners();\n  var subListeners = {};\n  var pubListeners = {};\n  var connectionPromise;\n  async function connectRelay() {\n    if (connectionPromise)\n      return connectionPromise;\n    connectionPromise = new Promise((resolve, reject) => {\n      try {\n        ws = new WebSocket(url);\n      } catch (err) {\n        reject(err);\n      }\n      ws.onopen = () => {\n        listeners.connect.forEach((cb) => cb());\n        resolve();\n      };\n      ws.onerror = () => {\n        connectionPromise = void 0;\n        listeners.error.forEach((cb) => cb());\n        reject();\n      };\n      ws.onclose = async () => {\n        connectionPromise = void 0;\n        listeners.disconnect.forEach((cb) => cb());\n      };\n      let incomingMessageQueue = [];\n      let handleNextInterval;\n      ws.onmessage = (e) => {\n        incomingMessageQueue.push(e.data);\n        if (!handleNextInterval) {\n          handleNextInterval = setInterval(handleNext, 0);\n        }\n      };\n      function handleNext() {\n        if (incomingMessageQueue.length === 0) {\n          clearInterval(handleNextInterval);\n          handleNextInterval = null;\n          return;\n        }\n        var json = incomingMessageQueue.shift();\n        if (!json)\n          return;\n        let subid = getSubscriptionId(json);\n        if (subid) {\n          let so = openSubs[subid];\n          if (so && so.alreadyHaveEvent && so.alreadyHaveEvent(getHex64(json, \"id\"), url)) {\n            return;\n          }\n        }\n        try {\n          let data = JSON.parse(json);\n          switch (data[0]) {\n            case \"EVENT\": {\n              let id2 = data[1];\n              let event = data[2];\n              if (validateEvent(event) && openSubs[id2] && (openSubs[id2].skipVerification || verifySignature(event)) && matchFilters(openSubs[id2].filters, event)) {\n                openSubs[id2];\n                (subListeners[id2]?.event || []).forEach((cb) => cb(event));\n              }\n              return;\n            }\n            case \"COUNT\":\n              let id = data[1];\n              let payload = data[2];\n              if (openSubs[id]) {\n                ;\n                (subListeners[id]?.count || []).forEach((cb) => cb(payload));\n              }\n              return;\n            case \"EOSE\": {\n              let id2 = data[1];\n              if (id2 in subListeners) {\n                subListeners[id2].eose.forEach((cb) => cb());\n                subListeners[id2].eose = [];\n              }\n              return;\n            }\n            case \"OK\": {\n              let id2 = data[1];\n              let ok = data[2];\n              let reason = data[3] || \"\";\n              if (id2 in pubListeners) {\n                if (ok)\n                  pubListeners[id2].ok.forEach((cb) => cb());\n                else\n                  pubListeners[id2].failed.forEach((cb) => cb(reason));\n                pubListeners[id2].ok = [];\n                pubListeners[id2].failed = [];\n              }\n              return;\n            }\n            case \"NOTICE\":\n              let notice = data[1];\n              listeners.notice.forEach((cb) => cb(notice));\n              return;\n            case \"AUTH\": {\n              let challenge = data[1];\n              listeners.auth?.forEach((cb) => cb(challenge));\n              return;\n            }\n          }\n        } catch (err) {\n          return;\n        }\n      }\n    });\n    return connectionPromise;\n  }\n  function connected() {\n    return ws?.readyState === 1;\n  }\n  async function connect() {\n    if (connected())\n      return;\n    await connectRelay();\n  }\n  async function trySend(params) {\n    let msg = JSON.stringify(params);\n    if (!connected()) {\n      await new Promise((resolve) => setTimeout(resolve, 1e3));\n      if (!connected()) {\n        return;\n      }\n    }\n    try {\n      ws.send(msg);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  const sub = (filters, {\n    verb = \"REQ\",\n    skipVerification = false,\n    alreadyHaveEvent = null,\n    id = Math.random().toString().slice(2)\n  } = {}) => {\n    let subid = id;\n    openSubs[subid] = {\n      id: subid,\n      filters,\n      skipVerification,\n      alreadyHaveEvent\n    };\n    trySend([verb, subid, ...filters]);\n    return {\n      sub: (newFilters, newOpts = {}) => sub(newFilters || filters, {\n        skipVerification: newOpts.skipVerification || skipVerification,\n        alreadyHaveEvent: newOpts.alreadyHaveEvent || alreadyHaveEvent,\n        id: subid\n      }),\n      unsub: () => {\n        delete openSubs[subid];\n        delete subListeners[subid];\n        trySend([\"CLOSE\", subid]);\n      },\n      on: (type, cb) => {\n        subListeners[subid] = subListeners[subid] || {\n          event: [],\n          count: [],\n          eose: []\n        };\n        subListeners[subid][type].push(cb);\n      },\n      off: (type, cb) => {\n        let listeners2 = subListeners[subid];\n        let idx = listeners2[type].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type].splice(idx, 1);\n      }\n    };\n  };\n  function _publishEvent(event, type) {\n    if (!event.id)\n      throw new Error(`event ${event} has no id`);\n    let id = event.id;\n    trySend([type, event]);\n    return {\n      on: (type2, cb) => {\n        pubListeners[id] = pubListeners[id] || {\n          ok: [],\n          failed: []\n        };\n        pubListeners[id][type2].push(cb);\n      },\n      off: (type2, cb) => {\n        let listeners2 = pubListeners[id];\n        if (!listeners2)\n          return;\n        let idx = listeners2[type2].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type2].splice(idx, 1);\n      }\n    };\n  }\n  return {\n    url,\n    sub,\n    on: (type, cb) => {\n      listeners[type].push(cb);\n      if (type === \"connect\" && ws?.readyState === 1) {\n        ;\n        cb();\n      }\n    },\n    off: (type, cb) => {\n      let index = listeners[type].indexOf(cb);\n      if (index !== -1)\n        listeners[type].splice(index, 1);\n    },\n    list: (filters, opts) => new Promise((resolve) => {\n      let s = sub(filters, opts);\n      let events = [];\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(events);\n      }, listTimeout);\n      s.on(\"eose\", () => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(events);\n      });\n      s.on(\"event\", (event) => {\n        events.push(event);\n      });\n    }),\n    get: (filter, opts) => new Promise((resolve) => {\n      let s = sub([filter], opts);\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, getTimeout);\n      s.on(\"event\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    count: (filters) => new Promise((resolve) => {\n      let s = sub(filters, { ...sub, verb: \"COUNT\" });\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, countTimeout);\n      s.on(\"count\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    publish(event) {\n      return _publishEvent(event, \"EVENT\");\n    },\n    auth(event) {\n      return _publishEvent(event, \"AUTH\");\n    },\n    connect,\n    close() {\n      listeners = newListeners();\n      subListeners = {};\n      pubListeners = {};\n      if (ws.readyState === WebSocket.OPEN) {\n        ws?.close();\n      }\n    },\n    get status() {\n      return ws?.readyState ?? 3;\n    }\n  };\n}\n\n// pool.ts\nvar SimplePool = class {\n  _conn;\n  _seenOn = {};\n  eoseSubTimeout;\n  getTimeout;\n  constructor(options = {}) {\n    this._conn = {};\n    this.eoseSubTimeout = options.eoseSubTimeout || 3400;\n    this.getTimeout = options.getTimeout || 3400;\n  }\n  close(relays) {\n    relays.forEach((url) => {\n      let relay = this._conn[normalizeURL(url)];\n      if (relay)\n        relay.close();\n    });\n  }\n  async ensureRelay(url) {\n    const nm = normalizeURL(url);\n    if (!this._conn[nm]) {\n      this._conn[nm] = relayInit(nm, {\n        getTimeout: this.getTimeout * 0.9,\n        listTimeout: this.getTimeout * 0.9\n      });\n    }\n    const relay = this._conn[nm];\n    await relay.connect();\n    return relay;\n  }\n  sub(relays, filters, opts) {\n    let _knownIds = /* @__PURE__ */ new Set();\n    let modifiedOpts = { ...opts || {} };\n    modifiedOpts.alreadyHaveEvent = (id, url) => {\n      if (opts?.alreadyHaveEvent?.(id, url)) {\n        return true;\n      }\n      let set = this._seenOn[id] || /* @__PURE__ */ new Set();\n      set.add(url);\n      this._seenOn[id] = set;\n      return _knownIds.has(id);\n    };\n    let subs = [];\n    let eventListeners = /* @__PURE__ */ new Set();\n    let eoseListeners = /* @__PURE__ */ new Set();\n    let eosesMissing = relays.length;\n    let eoseSent = false;\n    let eoseTimeout = setTimeout(() => {\n      eoseSent = true;\n      for (let cb of eoseListeners.values())\n        cb();\n    }, this.eoseSubTimeout);\n    relays.forEach(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n      } catch (err) {\n        handleEose();\n        return;\n      }\n      if (!r)\n        return;\n      let s = r.sub(filters, modifiedOpts);\n      s.on(\"event\", (event) => {\n        _knownIds.add(event.id);\n        for (let cb of eventListeners.values())\n          cb(event);\n      });\n      s.on(\"eose\", () => {\n        if (eoseSent)\n          return;\n        handleEose();\n      });\n      subs.push(s);\n      function handleEose() {\n        eosesMissing--;\n        if (eosesMissing === 0) {\n          clearTimeout(eoseTimeout);\n          for (let cb of eoseListeners.values())\n            cb();\n        }\n      }\n    });\n    let greaterSub = {\n      sub(filters2, opts2) {\n        subs.forEach((sub) => sub.sub(filters2, opts2));\n        return greaterSub;\n      },\n      unsub() {\n        subs.forEach((sub) => sub.unsub());\n      },\n      on(type, cb) {\n        if (type === \"event\") {\n          eventListeners.add(cb);\n        } else if (type === \"eose\") {\n          eoseListeners.add(cb);\n        }\n      },\n      off(type, cb) {\n        if (type === \"event\") {\n          eventListeners.delete(cb);\n        } else if (type === \"eose\")\n          eoseListeners.delete(cb);\n      }\n    };\n    return greaterSub;\n  }\n  get(relays, filter, opts) {\n    return new Promise((resolve) => {\n      let sub = this.sub(relays, [filter], opts);\n      let timeout = setTimeout(() => {\n        sub.unsub();\n        resolve(null);\n      }, this.getTimeout);\n      sub.on(\"event\", (event) => {\n        resolve(event);\n        clearTimeout(timeout);\n        sub.unsub();\n      });\n    });\n  }\n  list(relays, filters, opts) {\n    return new Promise((resolve) => {\n      let events = [];\n      let sub = this.sub(relays, filters, opts);\n      sub.on(\"event\", (event) => {\n        events.push(event);\n      });\n      sub.on(\"eose\", () => {\n        sub.unsub();\n        resolve(events);\n      });\n    });\n  }\n  publish(relays, event) {\n    const pubPromises = relays.map(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n        return r.publish(event);\n      } catch (_) {\n        return { on() {\n        }, off() {\n        } };\n      }\n    });\n    const callbackMap = /* @__PURE__ */ new Map();\n    return {\n      on(type, cb) {\n        relays.forEach(async (relay, i) => {\n          let pub = await pubPromises[i];\n          let callback = () => cb(relay);\n          callbackMap.set(cb, callback);\n          pub.on(type, callback);\n        });\n      },\n      off(type, cb) {\n        relays.forEach(async (_, i) => {\n          let callback = callbackMap.get(cb);\n          if (callback) {\n            let pub = await pubPromises[i];\n            pub.off(type, callback);\n          }\n        });\n      }\n    };\n  }\n  seenOn(id) {\n    return Array.from(this._seenOn[id]?.values?.() || []);\n  }\n};\n\n// nip19.ts\nvar nip19_exports = {};\n__export(nip19_exports, {\n  BECH32_REGEX: () => BECH32_REGEX,\n  decode: () => decode,\n  naddrEncode: () => naddrEncode,\n  neventEncode: () => neventEncode,\n  noteEncode: () => noteEncode,\n  nprofileEncode: () => nprofileEncode,\n  npubEncode: () => npubEncode,\n  nrelayEncode: () => nrelayEncode,\n  nsecEncode: () => nsecEncode\n});\nimport { bytesToHex as bytesToHex3, concatBytes, hexToBytes } from \"@noble/hashes/utils\";\nimport { bech32 } from \"@scure/base\";\nvar Bech32MaxSize = 5e3;\nvar BECH32_REGEX = /[\\x21-\\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;\nfunction decode(nip19) {\n  let { prefix, words } = bech32.decode(nip19, Bech32MaxSize);\n  let data = new Uint8Array(bech32.fromWords(words));\n  switch (prefix) {\n    case \"nprofile\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nprofile\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      return {\n        type: \"nprofile\",\n        data: {\n          pubkey: bytesToHex3(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nevent\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nevent\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      if (tlv[2] && tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      return {\n        type: \"nevent\",\n        data: {\n          id: bytesToHex3(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : [],\n          author: tlv[2]?.[0] ? bytesToHex3(tlv[2][0]) : void 0\n        }\n      };\n    }\n    case \"naddr\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for naddr\");\n      if (!tlv[2]?.[0])\n        throw new Error(\"missing TLV 2 for naddr\");\n      if (tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      if (!tlv[3]?.[0])\n        throw new Error(\"missing TLV 3 for naddr\");\n      if (tlv[3][0].length !== 4)\n        throw new Error(\"TLV 3 should be 4 bytes\");\n      return {\n        type: \"naddr\",\n        data: {\n          identifier: utf8Decoder.decode(tlv[0][0]),\n          pubkey: bytesToHex3(tlv[2][0]),\n          kind: parseInt(bytesToHex3(tlv[3][0]), 16),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nrelay\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nrelay\");\n      return {\n        type: \"nrelay\",\n        data: utf8Decoder.decode(tlv[0][0])\n      };\n    }\n    case \"nsec\":\n    case \"npub\":\n    case \"note\":\n      return { type: prefix, data: bytesToHex3(data) };\n    default:\n      throw new Error(`unknown prefix ${prefix}`);\n  }\n}\nfunction parseTLV(data) {\n  let result = {};\n  let rest = data;\n  while (rest.length > 0) {\n    let t = rest[0];\n    let l = rest[1];\n    let v = rest.slice(2, 2 + l);\n    rest = rest.slice(2 + l);\n    if (v.length < l)\n      continue;\n    result[t] = result[t] || [];\n    result[t].push(v);\n  }\n  return result;\n}\nfunction nsecEncode(hex) {\n  return encodeBytes(\"nsec\", hex);\n}\nfunction npubEncode(hex) {\n  return encodeBytes(\"npub\", hex);\n}\nfunction noteEncode(hex) {\n  return encodeBytes(\"note\", hex);\n}\nfunction encodeBytes(prefix, hex) {\n  let data = hexToBytes(hex);\n  let words = bech32.toWords(data);\n  return bech32.encode(prefix, words, Bech32MaxSize);\n}\nfunction nprofileEncode(profile) {\n  let data = encodeTLV({\n    0: [hexToBytes(profile.pubkey)],\n    1: (profile.relays || []).map((url) => utf8Encoder.encode(url))\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nprofile\", words, Bech32MaxSize);\n}\nfunction neventEncode(event) {\n  let data = encodeTLV({\n    0: [hexToBytes(event.id)],\n    1: (event.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: event.author ? [hexToBytes(event.author)] : []\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nevent\", words, Bech32MaxSize);\n}\nfunction naddrEncode(addr) {\n  let kind = new ArrayBuffer(4);\n  new DataView(kind).setUint32(0, addr.kind, false);\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(addr.identifier)],\n    1: (addr.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: [hexToBytes(addr.pubkey)],\n    3: [new Uint8Array(kind)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"naddr\", words, Bech32MaxSize);\n}\nfunction nrelayEncode(url) {\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(url)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nrelay\", words, Bech32MaxSize);\n}\nfunction encodeTLV(tlv) {\n  let entries = [];\n  Object.entries(tlv).forEach(([t, vs]) => {\n    vs.forEach((v) => {\n      let entry = new Uint8Array(v.length + 2);\n      entry.set([parseInt(t)], 0);\n      entry.set([v.length], 1);\n      entry.set(v, 2);\n      entries.push(entry);\n    });\n  });\n  return concatBytes(...entries);\n}\n\n// references.ts\nvar mentionRegex = /\\bnostr:((note|npub|naddr|nevent|nprofile)1\\w+)\\b|#\\[(\\d+)\\]/g;\nfunction parseReferences(evt) {\n  let references = [];\n  for (let ref of evt.content.matchAll(mentionRegex)) {\n    if (ref[2]) {\n      try {\n        let { type, data } = decode(ref[1]);\n        switch (type) {\n          case \"npub\": {\n            references.push({\n              text: ref[0],\n              profile: { pubkey: data, relays: [] }\n            });\n            break;\n          }\n          case \"nprofile\": {\n            references.push({\n              text: ref[0],\n              profile: data\n            });\n            break;\n          }\n          case \"note\": {\n            references.push({\n              text: ref[0],\n              event: { id: data, relays: [] }\n            });\n            break;\n          }\n          case \"nevent\": {\n            references.push({\n              text: ref[0],\n              event: data\n            });\n            break;\n          }\n          case \"naddr\": {\n            references.push({\n              text: ref[0],\n              address: data\n            });\n            break;\n          }\n        }\n      } catch (err) {\n      }\n    } else if (ref[3]) {\n      let idx = parseInt(ref[3], 10);\n      let tag = evt.tags[idx];\n      if (!tag)\n        continue;\n      switch (tag[0]) {\n        case \"p\": {\n          references.push({\n            text: ref[0],\n            profile: { pubkey: tag[1], relays: tag[2] ? [tag[2]] : [] }\n          });\n          break;\n        }\n        case \"e\": {\n          references.push({\n            text: ref[0],\n            event: { id: tag[1], relays: tag[2] ? [tag[2]] : [] }\n          });\n          break;\n        }\n        case \"a\": {\n          try {\n            let [kind, pubkey, identifier] = tag[1].split(\":\");\n            references.push({\n              text: ref[0],\n              address: {\n                identifier,\n                pubkey,\n                kind: parseInt(kind, 10),\n                relays: tag[2] ? [tag[2]] : []\n              }\n            });\n          } catch (err) {\n          }\n          break;\n        }\n      }\n    }\n  }\n  return references;\n}\n\n// nip04.ts\nvar nip04_exports = {};\n__export(nip04_exports, {\n  decrypt: () => decrypt,\n  encrypt: () => encrypt\n});\nimport { randomBytes } from \"@noble/hashes/utils\";\nimport { secp256k1 } from \"@noble/curves/secp256k1\";\nimport { base64 } from \"@scure/base\";\nif (typeof crypto !== \"undefined\" && !crypto.subtle && crypto.webcrypto) {\n  crypto.subtle = crypto.webcrypto.subtle;\n}\nasync function encrypt(privkey, pubkey, text) {\n  const key = secp256k1.getSharedSecret(privkey, \"02\" + pubkey);\n  const normalizedKey = getNormalizedX(key);\n  let iv = Uint8Array.from(randomBytes(16));\n  let plaintext = utf8Encoder.encode(text);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"encrypt\"]\n  );\n  let ciphertext = await crypto.subtle.encrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    plaintext\n  );\n  let ctb64 = base64.encode(new Uint8Array(ciphertext));\n  let ivb64 = base64.encode(new Uint8Array(iv.buffer));\n  return `${ctb64}?iv=${ivb64}`;\n}\nasync function decrypt(privkey, pubkey, data) {\n  let [ctb64, ivb64] = data.split(\"?iv=\");\n  let key = secp256k1.getSharedSecret(privkey, \"02\" + pubkey);\n  let normalizedKey = getNormalizedX(key);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"decrypt\"]\n  );\n  let ciphertext = base64.decode(ctb64);\n  let iv = base64.decode(ivb64);\n  let plaintext = await crypto.subtle.decrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    ciphertext\n  );\n  let text = utf8Decoder.decode(plaintext);\n  return text;\n}\nfunction getNormalizedX(key) {\n  return key.slice(1, 33);\n}\n\n// nip05.ts\nvar nip05_exports = {};\n__export(nip05_exports, {\n  NIP05_REGEX: () => NIP05_REGEX,\n  queryProfile: () => queryProfile,\n  searchDomain: () => searchDomain,\n  useFetchImplementation: () => useFetchImplementation\n});\nvar NIP05_REGEX = /^(?:([\\w.+-]+)@)?([\\w.-]+)$/;\nvar _fetch;\ntry {\n  _fetch = fetch;\n} catch {\n}\nfunction useFetchImplementation(fetchImplementation) {\n  _fetch = fetchImplementation;\n}\nasync function searchDomain(domain, query = \"\") {\n  try {\n    let res = await (await _fetch(`https://${domain}/.well-known/nostr.json?name=${query}`)).json();\n    return res.names;\n  } catch (_) {\n    return {};\n  }\n}\nasync function queryProfile(fullname) {\n  const match = fullname.match(NIP05_REGEX);\n  if (!match)\n    return null;\n  const [_, name = \"_\", domain] = match;\n  try {\n    const res = await _fetch(`https://${domain}/.well-known/nostr.json?name=${name}`);\n    const { names, relays } = parseNIP05Result(await res.json());\n    const pubkey = names[name];\n    return pubkey ? { pubkey, relays: relays?.[pubkey] } : null;\n  } catch (_e) {\n    return null;\n  }\n}\nfunction parseNIP05Result(json) {\n  const result = {\n    names: {}\n  };\n  for (const [name, pubkey] of Object.entries(json.names)) {\n    if (typeof name === \"string\" && typeof pubkey === \"string\") {\n      result.names[name] = pubkey;\n    }\n  }\n  if (json.relays) {\n    result.relays = {};\n    for (const [pubkey, relays] of Object.entries(json.relays)) {\n      if (typeof pubkey === \"string\" && Array.isArray(relays)) {\n        result.relays[pubkey] = relays.filter((relay) => typeof relay === \"string\");\n      }\n    }\n  }\n  return result;\n}\n\n// nip06.ts\nvar nip06_exports = {};\n__export(nip06_exports, {\n  generateSeedWords: () => generateSeedWords,\n  privateKeyFromSeedWords: () => privateKeyFromSeedWords,\n  validateWords: () => validateWords\n});\nimport { bytesToHex as bytesToHex4 } from \"@noble/hashes/utils\";\nimport { wordlist } from \"@scure/bip39/wordlists/english.js\";\nimport {\n  generateMnemonic,\n  mnemonicToSeedSync,\n  validateMnemonic\n} from \"@scure/bip39\";\nimport { HDKey } from \"@scure/bip32\";\nfunction privateKeyFromSeedWords(mnemonic, passphrase) {\n  let root = HDKey.fromMasterSeed(mnemonicToSeedSync(mnemonic, passphrase));\n  let privateKey = root.derive(`m/44'/1237'/0'/0/0`).privateKey;\n  if (!privateKey)\n    throw new Error(\"could not derive private key\");\n  return bytesToHex4(privateKey);\n}\nfunction generateSeedWords() {\n  return generateMnemonic(wordlist);\n}\nfunction validateWords(words) {\n  return validateMnemonic(words, wordlist);\n}\n\n// nip10.ts\nvar nip10_exports = {};\n__export(nip10_exports, {\n  parse: () => parse\n});\nfunction parse(event) {\n  const result = {\n    reply: void 0,\n    root: void 0,\n    mentions: [],\n    profiles: []\n  };\n  const eTags = [];\n  for (const tag of event.tags) {\n    if (tag[0] === \"e\" && tag[1]) {\n      eTags.push(tag);\n    }\n    if (tag[0] === \"p\" && tag[1]) {\n      result.profiles.push({\n        pubkey: tag[1],\n        relays: tag[2] ? [tag[2]] : []\n      });\n    }\n  }\n  for (let eTagIndex = 0; eTagIndex < eTags.length; eTagIndex++) {\n    const eTag = eTags[eTagIndex];\n    const [_, eTagEventId, eTagRelayUrl, eTagMarker] = eTag;\n    const eventPointer = {\n      id: eTagEventId,\n      relays: eTagRelayUrl ? [eTagRelayUrl] : []\n    };\n    const isFirstETag = eTagIndex === 0;\n    const isLastETag = eTagIndex === eTags.length - 1;\n    if (eTagMarker === \"root\") {\n      result.root = eventPointer;\n      continue;\n    }\n    if (eTagMarker === \"reply\") {\n      result.reply = eventPointer;\n      continue;\n    }\n    if (eTagMarker === \"mention\") {\n      result.mentions.push(eventPointer);\n      continue;\n    }\n    if (isFirstETag) {\n      result.root = eventPointer;\n      continue;\n    }\n    if (isLastETag) {\n      result.reply = eventPointer;\n      continue;\n    }\n    result.mentions.push(eventPointer);\n  }\n  return result;\n}\n\n// nip13.ts\nvar nip13_exports = {};\n__export(nip13_exports, {\n  getPow: () => getPow\n});\nimport { hexToBytes as hexToBytes2 } from \"@noble/hashes/utils\";\nfunction getPow(id) {\n  return getLeadingZeroBits(hexToBytes2(id));\n}\nfunction getLeadingZeroBits(hash) {\n  let total, i, bits;\n  for (i = 0, total = 0; i < hash.length; i++) {\n    bits = msb(hash[i]);\n    total += bits;\n    if (bits !== 8) {\n      break;\n    }\n  }\n  return total;\n}\nfunction msb(b) {\n  let n = 0;\n  if (b === 0) {\n    return 8;\n  }\n  while (b >>= 1) {\n    n++;\n  }\n  return 7 - n;\n}\n\n// nip18.ts\nvar nip18_exports = {};\n__export(nip18_exports, {\n  finishRepostEvent: () => finishRepostEvent,\n  getRepostedEvent: () => getRepostedEvent,\n  getRepostedEventPointer: () => getRepostedEventPointer\n});\nfunction finishRepostEvent(t, reposted, relayUrl, privateKey) {\n  return finishEvent({\n    kind: 6 /* Repost */,\n    tags: [\n      ...t.tags ?? [],\n      [\"e\", reposted.id, relayUrl],\n      [\"p\", reposted.pubkey]\n    ],\n    content: t.content === \"\" ? \"\" : JSON.stringify(reposted),\n    created_at: t.created_at\n  }, privateKey);\n}\nfunction getRepostedEventPointer(event) {\n  if (event.kind !== 6 /* Repost */) {\n    return void 0;\n  }\n  let lastETag;\n  let lastPTag;\n  for (let i = event.tags.length - 1; i >= 0 && (lastETag === void 0 || lastPTag === void 0); i--) {\n    const tag = event.tags[i];\n    if (tag.length >= 2) {\n      if (tag[0] === \"e\" && lastETag === void 0) {\n        lastETag = tag;\n      } else if (tag[0] === \"p\" && lastPTag === void 0) {\n        lastPTag = tag;\n      }\n    }\n  }\n  if (lastETag === void 0) {\n    return void 0;\n  }\n  return {\n    id: lastETag[1],\n    relays: [lastETag[2], lastPTag?.[2]].filter((x) => typeof x === \"string\"),\n    author: lastPTag?.[1]\n  };\n}\nfunction getRepostedEvent(event, { skipVerification } = {}) {\n  const pointer = getRepostedEventPointer(event);\n  if (pointer === void 0 || event.content === \"\") {\n    return void 0;\n  }\n  let repostedEvent;\n  try {\n    repostedEvent = JSON.parse(event.content);\n  } catch (error) {\n    return void 0;\n  }\n  if (repostedEvent.id !== pointer.id) {\n    return void 0;\n  }\n  if (!skipVerification && !verifySignature(repostedEvent)) {\n    return void 0;\n  }\n  return repostedEvent;\n}\n\n// nip21.ts\nvar nip21_exports = {};\n__export(nip21_exports, {\n  NOSTR_URI_REGEX: () => NOSTR_URI_REGEX,\n  parse: () => parse2,\n  test: () => test\n});\nvar NOSTR_URI_REGEX = new RegExp(`nostr:(${BECH32_REGEX.source})`);\nfunction test(value) {\n  return typeof value === \"string\" && new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(value);\n}\nfunction parse2(uri) {\n  const match = uri.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));\n  if (!match)\n    throw new Error(`Invalid Nostr URI: ${uri}`);\n  return {\n    uri: match[0],\n    value: match[1],\n    decoded: decode(match[1])\n  };\n}\n\n// nip25.ts\nvar nip25_exports = {};\n__export(nip25_exports, {\n  finishReactionEvent: () => finishReactionEvent,\n  getReactedEventPointer: () => getReactedEventPointer\n});\nfunction finishReactionEvent(t, reacted, privateKey) {\n  const inheritedTags = reacted.tags.filter(\n    (tag) => tag.length >= 2 && (tag[0] === \"e\" || tag[0] === \"p\")\n  );\n  return finishEvent({\n    ...t,\n    kind: 7 /* Reaction */,\n    tags: [\n      ...t.tags ?? [],\n      ...inheritedTags,\n      [\"e\", reacted.id],\n      [\"p\", reacted.pubkey]\n    ],\n    content: t.content ?? \"+\"\n  }, privateKey);\n}\nfunction getReactedEventPointer(event) {\n  if (event.kind !== 7 /* Reaction */) {\n    return void 0;\n  }\n  let lastETag;\n  let lastPTag;\n  for (let i = event.tags.length - 1; i >= 0 && (lastETag === void 0 || lastPTag === void 0); i--) {\n    const tag = event.tags[i];\n    if (tag.length >= 2) {\n      if (tag[0] === \"e\" && lastETag === void 0) {\n        lastETag = tag;\n      } else if (tag[0] === \"p\" && lastPTag === void 0) {\n        lastPTag = tag;\n      }\n    }\n  }\n  if (lastETag === void 0 || lastPTag === void 0) {\n    return void 0;\n  }\n  return {\n    id: lastETag[1],\n    relays: [lastETag[2], lastPTag[2]].filter((x) => x !== void 0),\n    author: lastPTag[1]\n  };\n}\n\n// nip26.ts\nvar nip26_exports = {};\n__export(nip26_exports, {\n  createDelegation: () => createDelegation,\n  getDelegator: () => getDelegator\n});\nimport { schnorr as schnorr3 } from \"@noble/curves/secp256k1\";\nimport { bytesToHex as bytesToHex5 } from \"@noble/hashes/utils\";\nimport { sha256 as sha2562 } from \"@noble/hashes/sha256\";\nfunction createDelegation(privateKey, parameters) {\n  let conditions = [];\n  if ((parameters.kind || -1) >= 0)\n    conditions.push(`kind=${parameters.kind}`);\n  if (parameters.until)\n    conditions.push(`created_at<${parameters.until}`);\n  if (parameters.since)\n    conditions.push(`created_at>${parameters.since}`);\n  let cond = conditions.join(\"&\");\n  if (cond === \"\")\n    throw new Error(\"refusing to create a delegation without any conditions\");\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${parameters.pubkey}:${cond}`)\n  );\n  let sig = bytesToHex5(\n    schnorr3.sign(sighash, privateKey)\n  );\n  return {\n    from: getPublicKey(privateKey),\n    to: parameters.pubkey,\n    cond,\n    sig\n  };\n}\nfunction getDelegator(event) {\n  let tag = event.tags.find((tag2) => tag2[0] === \"delegation\" && tag2.length >= 4);\n  if (!tag)\n    return null;\n  let pubkey = tag[1];\n  let cond = tag[2];\n  let sig = tag[3];\n  let conditions = cond.split(\"&\");\n  for (let i = 0; i < conditions.length; i++) {\n    let [key, operator, value] = conditions[i].split(/\\b/);\n    if (key === \"kind\" && operator === \"=\" && event.kind === parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \"<\" && event.created_at < parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \">\" && event.created_at > parseInt(value))\n      continue;\n    else\n      return null;\n  }\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${event.pubkey}:${cond}`)\n  );\n  if (!schnorr3.verify(sig, sighash, pubkey))\n    return null;\n  return pubkey;\n}\n\n// nip27.ts\nvar nip27_exports = {};\n__export(nip27_exports, {\n  matchAll: () => matchAll,\n  regex: () => regex,\n  replaceAll: () => replaceAll\n});\nvar regex = () => new RegExp(`\\\\b${NOSTR_URI_REGEX.source}\\\\b`, \"g\");\nfunction* matchAll(content) {\n  const matches = content.matchAll(regex());\n  for (const match of matches) {\n    const [uri, value] = match;\n    yield {\n      uri,\n      value,\n      decoded: decode(value),\n      start: match.index,\n      end: match.index + uri.length\n    };\n  }\n}\nfunction replaceAll(content, replacer) {\n  return content.replaceAll(regex(), (uri, value) => {\n    return replacer({\n      uri,\n      value,\n      decoded: decode(value)\n    });\n  });\n}\n\n// nip39.ts\nvar nip39_exports = {};\n__export(nip39_exports, {\n  useFetchImplementation: () => useFetchImplementation2,\n  validateGithub: () => validateGithub\n});\nvar _fetch2;\ntry {\n  _fetch2 = fetch;\n} catch {\n}\nfunction useFetchImplementation2(fetchImplementation) {\n  _fetch2 = fetchImplementation;\n}\nasync function validateGithub(pubkey, username, proof) {\n  try {\n    let res = await (await _fetch2(`https://gist.github.com/${username}/${proof}/raw`)).text();\n    return res === `Verifying that I control the following Nostr public key: ${pubkey}`;\n  } catch (_) {\n    return false;\n  }\n}\n\n// nip42.ts\nvar nip42_exports = {};\n__export(nip42_exports, {\n  authenticate: () => authenticate\n});\nvar authenticate = async ({\n  challenge,\n  relay,\n  sign\n}) => {\n  const e = {\n    kind: 22242 /* ClientAuth */,\n    created_at: Math.floor(Date.now() / 1e3),\n    tags: [\n      [\"relay\", relay.url],\n      [\"challenge\", challenge]\n    ],\n    content: \"\"\n  };\n  const pub = relay.auth(await sign(e));\n  return new Promise((resolve, reject) => {\n    pub.on(\"ok\", function ok() {\n      pub.off(\"ok\", ok);\n      resolve();\n    });\n    pub.on(\"failed\", function fail(reason) {\n      pub.off(\"failed\", fail);\n      reject(reason);\n    });\n  });\n};\n\n// nip57.ts\nvar nip57_exports = {};\n__export(nip57_exports, {\n  getZapEndpoint: () => getZapEndpoint,\n  makeZapReceipt: () => makeZapReceipt,\n  makeZapRequest: () => makeZapRequest,\n  useFetchImplementation: () => useFetchImplementation3,\n  validateZapRequest: () => validateZapRequest\n});\nimport { bech32 as bech322 } from \"@scure/base\";\nvar _fetch3;\ntry {\n  _fetch3 = fetch;\n} catch {\n}\nfunction useFetchImplementation3(fetchImplementation) {\n  _fetch3 = fetchImplementation;\n}\nasync function getZapEndpoint(metadata) {\n  try {\n    let lnurl = \"\";\n    let { lud06, lud16 } = JSON.parse(metadata.content);\n    if (lud06) {\n      let { words } = bech322.decode(lud06, 1e3);\n      let data = bech322.fromWords(words);\n      lnurl = utf8Decoder.decode(data);\n    } else if (lud16) {\n      let [name, domain] = lud16.split(\"@\");\n      lnurl = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else {\n      return null;\n    }\n    let res = await _fetch3(lnurl);\n    let body = await res.json();\n    if (body.allowsNostr && body.nostrPubkey) {\n      return body.callback;\n    }\n  } catch (err) {\n  }\n  return null;\n}\nfunction makeZapRequest({\n  profile,\n  event,\n  amount,\n  relays,\n  comment = \"\"\n}) {\n  if (!amount)\n    throw new Error(\"amount not given\");\n  if (!profile)\n    throw new Error(\"profile not given\");\n  let zr = {\n    kind: 9734,\n    created_at: Math.round(Date.now() / 1e3),\n    content: comment,\n    tags: [\n      [\"p\", profile],\n      [\"amount\", amount.toString()],\n      [\"relays\", ...relays]\n    ]\n  };\n  if (event) {\n    zr.tags.push([\"e\", event]);\n  }\n  return zr;\n}\nfunction validateZapRequest(zapRequestString) {\n  let zapRequest;\n  try {\n    zapRequest = JSON.parse(zapRequestString);\n  } catch (err) {\n    return \"Invalid zap request JSON.\";\n  }\n  if (!validateEvent(zapRequest))\n    return \"Zap request is not a valid Nostr event.\";\n  if (!verifySignature(zapRequest))\n    return \"Invalid signature on zap request.\";\n  let p = zapRequest.tags.find(([t, v]) => t === \"p\" && v);\n  if (!p)\n    return \"Zap request doesn't have a 'p' tag.\";\n  if (!p[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'p' tag is not valid hex.\";\n  let e = zapRequest.tags.find(([t, v]) => t === \"e\" && v);\n  if (e && !e[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'e' tag is not valid hex.\";\n  let relays = zapRequest.tags.find(([t, v]) => t === \"relays\" && v);\n  if (!relays)\n    return \"Zap request doesn't have a 'relays' tag.\";\n  return null;\n}\nfunction makeZapReceipt({\n  zapRequest,\n  preimage,\n  bolt11,\n  paidAt\n}) {\n  let zr = JSON.parse(zapRequest);\n  let tagsFromZapRequest = zr.tags.filter(\n    ([t]) => t === \"e\" || t === \"p\" || t === \"a\"\n  );\n  let zap = {\n    kind: 9735,\n    created_at: Math.round(paidAt.getTime() / 1e3),\n    content: \"\",\n    tags: [\n      ...tagsFromZapRequest,\n      [\"bolt11\", bolt11],\n      [\"description\", zapRequest]\n    ]\n  };\n  if (preimage) {\n    zap.tags.push([\"preimage\", preimage]);\n  }\n  return zap;\n}\nexport {\n  Kind,\n  SimplePool,\n  finishEvent,\n  fakejson_exports as fj,\n  generatePrivateKey,\n  getBlankEvent,\n  getEventHash,\n  getPublicKey,\n  getSignature,\n  matchFilter,\n  matchFilters,\n  nip04_exports as nip04,\n  nip05_exports as nip05,\n  nip06_exports as nip06,\n  nip10_exports as nip10,\n  nip13_exports as nip13,\n  nip18_exports as nip18,\n  nip19_exports as nip19,\n  nip21_exports as nip21,\n  nip25_exports as nip25,\n  nip26_exports as nip26,\n  nip27_exports as nip27,\n  nip39_exports as nip39,\n  nip42_exports as nip42,\n  nip57_exports as nip57,\n  parseReferences,\n  relayInit,\n  serializeEvent,\n  signEvent,\n  utils_exports as utils,\n  validateEvent,\n  verifySignature\n};\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","export default '/Users/pablofernandez/src/pablo/nostri.chat/node_modules/bufferutil'","if (typeof process.addon === 'function') { // if the platform supports native resolving prefer that\n  module.exports = process.addon.bind(process)\n} else { // else use the runtime version here\n  module.exports = require('./node-gyp-build.js')\n}\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : (isNwjs() ? 'node-webkit' : 'node')\n\nvar arch = process.env.npm_config_arch || os.arch()\nvar platform = process.env.npm_config_platform || os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.resolve(dir))\n}\n\nload.resolve = load.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isNwjs () {\n  return !!(process.versions && process.versions.nw)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","export default '/Users/pablofernandez/src/pablo/nostri.chat/node_modules/utf-8-validate'","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = {\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data, true);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf, false);\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        randomFillSync(mask, 0, 4);\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        [kByteLength]: byteLength,\n        fin: options.fin,\n        generateMask: this._generateMask,\n        mask: options.mask,\n        maskBuffer: this._maskBuffer,\n        opcode,\n        readOnly,\n        rsv1\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n      } else {\n        this.dispatch(data, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(data, {\n          [kByteLength]: byteLength,\n          fin: options.fin,\n          generateMask: this._generateMask,\n          mask: options.mask,\n          maskBuffer: this._maskBuffer,\n          opcode,\n          readOnly,\n          rsv1: false\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const params = this._queue[i];\n          const callback = params[params.length - 1];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    this._sender = new Sender(socket, this._extensions, options.generateMask);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n\n    websocket._url = address;\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    if (res.headers.upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  req.end();\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (req.headers.upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!key || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","const WS = typeof WebSocket !== 'undefined' ? WebSocket : require('ws')\n\nRelay.prototype.wait_connected = async function relay_wait_connected(data) {\n\tlet retry = 1000\n\twhile (true) {\n\t\tif (this.ws.readyState !== 1) {\n\t\t\tawait sleep(retry)\n\t\t\tretry *= 1.5\n\t\t}\n\t\telse {\n\t\t\treturn\n\t\t}\n\t}\n}\n\n\nfunction Relay(relay, opts={})\n{\n\tif (!(this instanceof Relay))\n\t\treturn new Relay(relay, opts)\n\n\tthis.url = relay\n\tthis.opts = opts\n\n\tif (opts.reconnect == null)\n\t\topts.reconnect = true\n\n\tconst me = this\n\tme.onfn = {}\n\n\tinit_websocket(me)\n\t\t.catch(e => {\n\t\t\tif (me.onfn.error)\n\t\t\t\tme.onfn.error(e)\n\t\t})\n\n\treturn this\n}\n\nfunction init_websocket(me) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst ws = me.ws = new WS(me.url);\n\n\t\tlet resolved = false\n\t\tws.onmessage = (m) => {\n\t\t\thandle_nostr_message(me, m)\n\t\t\tif (me.onfn.message)\n\t\t\t\tme.onfn.message(m)\n\t\t}\n\t\tws.onclose = (e) => {\n\t\t\tif (me.onfn.close)\n\t\t\t\tme.onfn.close(e)\n\t\t\tif (me.reconnecting)\n\t\t\t\treturn reject(new Error(\"close during reconnect\"))\n\t\t\tif (!me.manualClose && me.opts.reconnect)\n\t\t\t\treconnect(me)\n\t\t}\n\t\tws.onerror = (e) => {\n\t\t\tif (me.onfn.error)\n\t\t\t\tme.onfn.error(e)\n\t\t\tif (me.reconnecting)\n\t\t\t\treturn reject(new Error(\"error during reconnect\"))\n\t\t\tif (me.opts.reconnect)\n\t\t\t\treconnect(me)\n\t\t}\n\t\tws.onopen = (e) => {\n\t\t\tif (me.onfn.open)\n\t\t\t\tme.onfn.open(e)\n\n\t\t\tif (resolved) return\n\n\t\t\tresolved = true\n\t\t\tresolve(me)\n\t\t}\n\t});\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function reconnect(me)\n{\n\tconst reconnecting = true\n\tlet n = 100\n\ttry {\n\t\tme.reconnecting = true\n\t\tawait init_websocket(me)\n\t\tme.reconnecting = false\n\t} catch {\n\t\t//console.error(`error thrown during reconnect... trying again in ${n} ms`)\n\t\tawait sleep(n)\n\t\tn *= 1.5\n\t}\n}\n\nRelay.prototype.on = function relayOn(method, fn) {\n\tthis.onfn[method] = fn\n\treturn this\n}\n\nRelay.prototype.close = function relayClose() {\n\tif (this.ws) {\n\t\tthis.manualClose = true\n\t\tthis.ws.close()\n\t}\n}\n\nRelay.prototype.subscribe = function relay_subscribe(sub_id, filters) {\n\tif (Array.isArray(filters))\n\t\tthis.send([\"REQ\", sub_id, ...filters])\n\telse\n\t\tthis.send([\"REQ\", sub_id, filters])\n}\n\nRelay.prototype.unsubscribe = function relay_unsubscribe(sub_id) {\n\tthis.send([\"CLOSE\", sub_id])\n}\n\nRelay.prototype.send = async function relay_send(data) {\n\tawait this.wait_connected()\n\tthis.ws.send(JSON.stringify(data))\n}\n\nfunction handle_nostr_message(relay, msg)\n{\n\tlet data\n\ttry {\n\t\tdata = JSON.parse(msg.data)\n\t} catch (e) {\n\t\tconsole.error(\"handle_nostr_message\", e)\n\t\treturn\n\t}\n\tif (data.length >= 2) {\n\t\tswitch (data[0]) {\n\t\tcase \"EVENT\":\n\t\t\tif (data.length < 3)\n\t\t\t\treturn\n\t\t\treturn relay.onfn.event && relay.onfn.event(data[1], data[2])\n\t\tcase \"EOSE\":\n\t\t\treturn relay.onfn.eose && relay.onfn.eose(data[1])\n\t\tcase \"NOTICE\":\n\t\t\treturn relay.onfn.notice && relay.onfn.notice(...data.slice(1))\n\t\tcase \"OK\":\n\t\t\treturn relay.onfn.ok && relay.onfn.ok(...data.slice(1))\n\t\t}\n\t}\n}\n\nmodule.exports = Relay\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","\nconst Relay = require('./relay')\n\nfunction RelayPool(relays, opts)\n{\n\tif (!(this instanceof RelayPool))\n\t\treturn new RelayPool(relays, opts)\n\n\tthis.onfn = {}\n\tthis.relays = []\n\tthis.opts = opts\n\n\tfor (const relay of relays) {\n\t\tthis.add(relay)\n\t}\n\n\treturn this\n}\n\nRelayPool.prototype.close = function relayPoolClose() {\n\tfor (const relay of this.relays) {\n\t\trelay.close()\n\t}\n}\n\nRelayPool.prototype.on = function relayPoolOn(method, fn) {\n\tfor (const relay of this.relays) {\n\t\tthis.onfn[method] = fn\n\t\trelay.onfn[method] = fn.bind(null, relay)\n\t}\n\treturn this\n}\n\nRelayPool.prototype.has = function relayPoolHas(relayUrl) {\n\tfor (const relay of this.relays) {\n\t\tif (relay.url === relayUrl)\n\t\t\treturn true\n\t}\n\n\treturn false\n}\n\nRelayPool.prototype.send = function relayPoolSend(payload, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.send(payload)\n\t}\n}\n\nRelayPool.prototype.setupHandlers = function relayPoolSetupHandlers()\n{\n\t// setup its message handlers with the ones we have already\n\tconst keys = Object.keys(this.onfn)\n\tfor (const handler of keys) {\n\t\tfor (const relay of this.relays) {\n\t\t\trelay.onfn[handler] = this.onfn[handler].bind(null, relay)\n\t\t}\n\t}\n}\n\nRelayPool.prototype.remove = function relayPoolRemove(url) {\n\tlet i = 0\n\n\tfor (const relay of this.relays) {\n\t\tif (relay.url === url) {\n\t\t\trelay.ws && relay.ws.close()\n\t\t\tthis.relays = this.replays.splice(i, 1)\n\t\t\treturn true\n\t\t}\n\n\t\ti += 1\n\t}\n\n\treturn false\n}\n\nRelayPool.prototype.subscribe = function relayPoolSubscribe(sub_id, filters, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.subscribe(sub_id, filters)\n\t}\n}\n\nRelayPool.prototype.unsubscribe = function relayPoolUnsubscibe(sub_id, relay_ids) {\n\tconst relays = relay_ids ? this.find_relays(relay_ids) : this.relays\n\tfor (const relay of relays) {\n\t\trelay.unsubscribe(sub_id)\n\t}\n}\n\n\nRelayPool.prototype.add = function relayPoolAdd(relay) {\n\tif (relay instanceof Relay) {\n\t\tif (this.has(relay.url))\n\t\t\treturn false\n\n\t\tthis.relays.push(relay)\n\t\tthis.setupHandlers()\n\t\treturn true\n\t}\n\n\tif (this.has(relay))\n\t\treturn false\n\n\tconst r = Relay(relay, this.opts)\n\tthis.relays.push(r)\n\tthis.setupHandlers()\n\treturn true\n}\n\nRelayPool.prototype.find_relays = function relayPoolFindRelays(relay_ids) {\n\tif (relay_ids instanceof Relay)\n\t\treturn [relay_ids]\n\n\tif (relay_ids.length === 0)\n\t\treturn []\n\n\tif (!relay_ids[0])\n\t\tthrow new Error(\"what!?\")\n\n\tif (relay_ids[0] instanceof Relay)\n\t\treturn relay_ids\n\n\treturn this.relays.reduce((acc, relay) => {\n\t\tif (relay_ids.some((rid) => relay.url === rid))\n\t\t\tacc.push(relay)\n\t\treturn acc\n\t}, [])\n}\n\nmodule.exports = RelayPool\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.is_node = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar is_node_ = null;\r\n/**\r\n * Test whether the code is running on NodeJS.\r\n *\r\n * @return Whether NodeJS or not.\r\n */\r\nfunction is_node() {\r\n    if (is_node_ === null)\r\n        is_node_ =\r\n            typeof global === \"object\" &&\r\n                typeof global.process === \"object\" &&\r\n                typeof global.process.versions === \"object\" &&\r\n                typeof global.process.versions.node !== \"undefined\";\r\n    return is_node_;\r\n}\r\nexports.is_node = is_node;\r\n//# sourceMappingURL=node.js.map","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Container = void 0;\r\nvar ForOfAdaptor_1 = require(\"../../internal/iterator/disposable/ForOfAdaptor\");\r\n/**\r\n * Basic container.\r\n *\r\n * @template T Stored elements' type\r\n * @template SourceT Derived type extending this {@link Container}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n * @template PElem Parent type of *T*, used for inserting elements through {@link assign} and {@link insert}.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Container = /** @class */ (function () {\r\n    function Container() {\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.empty = function () {\r\n        return this.size() === 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rbegin = function () {\r\n        return this.end().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.rend = function () {\r\n        return this.begin().reverse();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype[Symbol.iterator] = function () {\r\n        return new ForOfAdaptor_1.ForOfAdaptor(this.begin(), this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Container.prototype.toJSON = function () {\r\n        var e_1, _a;\r\n        var ret = [];\r\n        try {\r\n            for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var elem = _c.value;\r\n                ret.push(elem);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return ret;\r\n    };\r\n    return Container;\r\n}());\r\nexports.Container = Container;\r\n//# sourceMappingURL=Container.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ForOfAdaptor = void 0;\r\n/**\r\n * Adaptor for `for ... of` iteration.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ForOfAdaptor = /** @class */ (function () {\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first Input iteartor of the first position.\r\n     * @param last Input iterator of the last position.\r\n     */\r\n    function ForOfAdaptor(first, last) {\r\n        this.it_ = first;\r\n        this.last_ = last;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype.next = function () {\r\n        if (this.it_.equals(this.last_))\r\n            return {\r\n                done: true,\r\n                value: undefined,\r\n            };\r\n        else {\r\n            var it = this.it_;\r\n            this.it_ = this.it_.next();\r\n            return {\r\n                done: false,\r\n                value: it.value,\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ForOfAdaptor.prototype[Symbol.iterator] = function () {\r\n        return this;\r\n    };\r\n    return ForOfAdaptor;\r\n}());\r\nexports.ForOfAdaptor = ForOfAdaptor;\r\n//# sourceMappingURL=ForOfAdaptor.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NativeArrayIterator = void 0;\r\nvar NativeArrayIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function NativeArrayIterator(data, index) {\r\n        this.data_ = data;\r\n        this.index_ = index;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(NativeArrayIterator.prototype, \"value\", {\r\n        get: function () {\r\n            return this.data_[this.index_];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.prev = function () {\r\n        --this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    NativeArrayIterator.prototype.advance = function (n) {\r\n        this.index_ += n;\r\n        return this;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    NativeArrayIterator.prototype.equals = function (obj) {\r\n        return this.data_ === obj.data_ && this.index_ === obj.index_;\r\n    };\r\n    NativeArrayIterator.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        _b = __read([obj.index_, this.index_], 2), this.index_ = _b[0], obj.index_ = _b[1];\r\n    };\r\n    return NativeArrayIterator;\r\n}());\r\nexports.NativeArrayIterator = NativeArrayIterator;\r\n//# sourceMappingURL=NativeArrayIterator.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LogicError = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Exception_1 = require(\"./Exception\");\r\n/**\r\n * Logic Error.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar LogicError = /** @class */ (function (_super) {\r\n    __extends(LogicError, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function LogicError(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return LogicError;\r\n}(Exception_1.Exception));\r\nexports.LogicError = LogicError;\r\n//# sourceMappingURL=LogicError.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Exception = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\n/**\r\n * Base Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Exception = /** @class */ (function (_super) {\r\n    __extends(Exception, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function Exception(message) {\r\n        var _newTarget = this.constructor;\r\n        var _this = _super.call(this, message) || this;\r\n        // INHERITANCE POLYFILL\r\n        var proto = _newTarget.prototype;\r\n        if (Object.setPrototypeOf)\r\n            Object.setPrototypeOf(_this, proto);\r\n        else\r\n            _this.__proto__ = proto;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Exception.prototype, \"name\", {\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * The error name.\r\n         */\r\n        get: function () {\r\n            return this.constructor.name;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Get error message.\r\n     *\r\n     * @return The error message.\r\n     */\r\n    Exception.prototype.what = function () {\r\n        return this.message;\r\n    };\r\n    /**\r\n     * Native function for `JSON.stringify()`.\r\n     *\r\n     * The {@link Exception.toJSON} function returns only three properties; ({@link name}, {@link message} and {@link stack}). If you want to define a new sub-class extending the {@link Exception} and const the class to export additional props (or remove some props), override this {@link Exception.toJSON} method.\r\n     *\r\n     * @return An object for `JSON.stringify()`.\r\n     */\r\n    Exception.prototype.toJSON = function () {\r\n        return {\r\n            name: this.name,\r\n            message: this.message,\r\n            stack: this.stack,\r\n        };\r\n    };\r\n    return Exception;\r\n}(Error));\r\nexports.Exception = Exception;\r\n//# sourceMappingURL=Exception.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InvalidArgument = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Invalid Argument Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar InvalidArgument = /** @class */ (function (_super) {\r\n    __extends(InvalidArgument, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function InvalidArgument(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return InvalidArgument;\r\n}(LogicError_1.LogicError));\r\nexports.InvalidArgument = InvalidArgument;\r\n//# sourceMappingURL=InvalidArgument.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorGenerator = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar InvalidArgument_1 = require(\"../../exception/InvalidArgument\");\r\nvar OutOfRange_1 = require(\"../../exception/OutOfRange\");\r\nvar ErrorGenerator;\r\n(function (ErrorGenerator) {\r\n    /* ---------------------------------------------------------\r\n        COMMON\r\n    --------------------------------------------------------- */\r\n    function get_class_name(instance) {\r\n        if (typeof instance === \"string\")\r\n            return instance;\r\n        var ret = instance.constructor.name;\r\n        if (instance.constructor.__MODULE)\r\n            ret = \"\".concat(instance.constructor.__MODULE, \".\").concat(ret);\r\n        return \"std.\".concat(ret);\r\n    }\r\n    ErrorGenerator.get_class_name = get_class_name;\r\n    /* ---------------------------------------------------------\r\n        CONTAINERS\r\n    --------------------------------------------------------- */\r\n    function empty(instance, method) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): it's empty container.\"));\r\n    }\r\n    ErrorGenerator.empty = empty;\r\n    function negative_index(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is negative -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_index = negative_index;\r\n    function excessive_index(instance, method, index, size) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric index is equal or greater than size -> (index = \").concat(index, \", size: \").concat(size, \").\"));\r\n    }\r\n    ErrorGenerator.excessive_index = excessive_index;\r\n    function not_my_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is not this container's own.\"));\r\n    }\r\n    ErrorGenerator.not_my_iterator = not_my_iterator;\r\n    function erased_iterator(instance, method) {\r\n        return new InvalidArgument_1.InvalidArgument(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator, it already has been erased.\"));\r\n    }\r\n    ErrorGenerator.erased_iterator = erased_iterator;\r\n    function negative_iterator(instance, method, index) {\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): parametric iterator is directing negative position -> (index = \").concat(index, \").\"));\r\n    }\r\n    ErrorGenerator.negative_iterator = negative_iterator;\r\n    function iterator_end_value(instance, method) {\r\n        if (method === void 0) { method = \"end\"; }\r\n        var className = get_class_name(instance);\r\n        return new OutOfRange_1.OutOfRange(\"Error on \".concat(className, \".Iterator.value: cannot access to the \").concat(className, \".\").concat(method, \"().value.\"));\r\n    }\r\n    ErrorGenerator.iterator_end_value = iterator_end_value;\r\n    function key_nout_found(instance, method, key) {\r\n        throw new OutOfRange_1.OutOfRange(\"Error on \".concat(get_class_name(instance), \".\").concat(method, \"(): unable to find the matched key -> \").concat(key));\r\n    }\r\n    ErrorGenerator.key_nout_found = key_nout_found;\r\n})(ErrorGenerator = exports.ErrorGenerator || (exports.ErrorGenerator = {}));\r\n//# sourceMappingURL=ErrorGenerator.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutOfRange = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar LogicError_1 = require(\"./LogicError\");\r\n/**\r\n * Out-of-range Exception.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar OutOfRange = /** @class */ (function (_super) {\r\n    __extends(OutOfRange, _super);\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param message The error messgae.\r\n     */\r\n    function OutOfRange(message) {\r\n        return _super.call(this, message) || this;\r\n    }\r\n    return OutOfRange;\r\n}(LogicError_1.LogicError));\r\nexports.OutOfRange = OutOfRange;\r\n//# sourceMappingURL=OutOfRange.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar SetContainer_1 = require(\"./SetContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic set container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template Source Derived type extending this {@link UniqueSet}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueSet = /** @class */ (function (_super) {\r\n    __extends(UniqueSet, _super);\r\n    function UniqueSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSOR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    UniqueSet.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueSet.prototype._Insert_by_range = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this._Insert_by_key(first.value);\r\n    };\r\n    UniqueSet.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_val(param);\r\n    };\r\n    UniqueSet.prototype._Extract_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        this._Erase_by_range(it);\r\n        return key;\r\n    };\r\n    UniqueSet.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true || this.has(it.value) === false)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueSet.prototype._Erase_by_val = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueSet.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());) {\r\n            if (this.has(it.value) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n        }\r\n    };\r\n    return UniqueSet;\r\n}(SetContainer_1.SetContainer));\r\nexports.UniqueSet = UniqueSet;\r\n//# sourceMappingURL=UniqueSet.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic set container.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link SetContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetContainer = /** @class */ (function (_super) {\r\n    __extends(SetContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function SetContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    SetContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    SetContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this._Insert_by_key(args[0]);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this._Insert_by_hint(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            !(args[0] instanceof this.end().constructor &&\r\n                args[0].source() === this))\r\n            return this._Erase_by_val(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    SetContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return SetContainer;\r\n}(Container_1.Container));\r\nexports.SetContainer = SetContainer;\r\n//# sourceMappingURL=SetContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get_uid = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar Global_1 = require(\"../internal/Global\");\r\n/**\r\n * Get unique identifier.\r\n *\r\n * @param obj Target object.\r\n * @return The identifier number.\r\n */\r\nfunction get_uid(obj) {\r\n    // NO UID EXISTS, THEN ISSUE ONE.\r\n    if (obj instanceof Object) {\r\n        if (obj.hasOwnProperty(\"__get_m_iUID\") === false) {\r\n            var uid_1 = ++(0, Global_1._Get_root)().__s_iUID;\r\n            Object.defineProperty(obj, \"__get_m_iUID\", {\r\n                value: function () {\r\n                    return uid_1;\r\n                },\r\n            });\r\n        }\r\n        // RETURNS\r\n        return obj.__get_m_iUID();\r\n    }\r\n    else if (obj === undefined)\r\n        return -1;\r\n    // is null\r\n    else\r\n        return 0;\r\n}\r\nexports.get_uid = get_uid;\r\n//# sourceMappingURL=uid.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._Get_root = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar node_1 = require(\"../utility/node\");\r\n/**\r\n * @internal\r\n */\r\nfunction _Get_root() {\r\n    if (__s_pRoot === null) {\r\n        __s_pRoot = ((0, node_1.is_node)() ? global : self);\r\n        if (__s_pRoot.__s_iUID === undefined)\r\n            __s_pRoot.__s_iUID = 0;\r\n    }\r\n    return __s_pRoot;\r\n}\r\nexports._Get_root = _Get_root;\r\n/**\r\n * @internal\r\n */\r\nvar __s_pRoot = null;\r\n//# sourceMappingURL=Global.js.map","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.hash = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Hash function.\r\n *\r\n * @param itemList The items to be hashed.\r\n * @return The hash code.\r\n */\r\nfunction hash() {\r\n    var e_1, _a;\r\n    var itemList = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        itemList[_i] = arguments[_i];\r\n    }\r\n    var ret = INIT_VALUE;\r\n    try {\r\n        for (var itemList_1 = __values(itemList), itemList_1_1 = itemList_1.next(); !itemList_1_1.done; itemList_1_1 = itemList_1.next()) {\r\n            var item = itemList_1_1.value;\r\n            item = item ? item.valueOf() : item;\r\n            var type = typeof item;\r\n            if (type === \"boolean\")\r\n                // BOOLEAN -> 1 BYTE\r\n                ret = _Hash_boolean(item, ret);\r\n            else if (type === \"number\" || type === \"bigint\")\r\n                // NUMBER -> 8 BYTES\r\n                ret = _Hash_number(item, ret);\r\n            else if (type === \"string\")\r\n                // STRING -> {LENGTH} BYTES\r\n                ret = _Hash_string(item, ret);\r\n            else if (item instanceof Object &&\r\n                item.hashCode instanceof Function) {\r\n                var hashed = item.hashCode();\r\n                if (itemList.length === 1)\r\n                    return hashed;\r\n                else {\r\n                    ret = ret ^ hashed;\r\n                    ret *= MULTIPLIER;\r\n                }\r\n            } // object | null | undefined\r\n            else\r\n                ret = _Hash_number((0, uid_1.get_uid)(item), ret);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (itemList_1_1 && !itemList_1_1.done && (_a = itemList_1.return)) _a.call(itemList_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return Math.abs(ret);\r\n}\r\nexports.hash = hash;\r\nfunction _Hash_boolean(val, ret) {\r\n    ret ^= val ? 1 : 0;\r\n    ret *= MULTIPLIER;\r\n    return ret;\r\n}\r\nfunction _Hash_number(val, ret) {\r\n    return _Hash_string(val.toString(), ret);\r\n    // // ------------------------------------------\r\n    // //    IN C++\r\n    // //        CONSIDER A NUMBER AS A STRING\r\n    // //        HASH<STRING>((CHAR*)&VAL, 8)\r\n    // // ------------------------------------------\r\n    // // CONSTRUCT BUFFER AND BYTE_ARRAY\r\n    // const buffer: ArrayBuffer = new ArrayBuffer(8);\r\n    // const byteArray: Int8Array = new Int8Array(buffer);\r\n    // const valueArray: Float64Array = new Float64Array(buffer);\r\n    // valueArray[0] = val;\r\n    // for (let i: number = 0; i < byteArray.length; ++i)\r\n    // {\r\n    //     const byte = (byteArray[i] < 0) ? byteArray[i] + 256 : byteArray[i];\r\n    //     ret ^= byte;\r\n    //     ret *= _HASH_MULTIPLIER;\r\n    // }\r\n    // return Math.abs(ret);\r\n}\r\nfunction _Hash_string(str, ret) {\r\n    for (var i = 0; i < str.length; ++i) {\r\n        ret ^= str.charCodeAt(i);\r\n        ret *= MULTIPLIER;\r\n    }\r\n    return Math.abs(ret);\r\n}\r\n/* ---------------------------------------------------------\r\n    RESERVED ITEMS\r\n--------------------------------------------------------- */\r\nvar INIT_VALUE = 2166136261;\r\nvar MULTIPLIER = 16777619;\r\n//# sourceMappingURL=hash.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.greater_equal = exports.greater = exports.less_equal = exports.less = exports.not_equal_to = exports.equal_to = void 0;\r\nvar uid_1 = require(\"./uid\");\r\n/**\r\n * Test whether two arguments are equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether two arguments are equal or not.\r\n */\r\nfunction equal_to(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x ? x.valueOf() : x;\r\n    y = y ? y.valueOf() : y;\r\n    // DO COMPARE\r\n    if (x instanceof Object &&\r\n        x.equals instanceof Function)\r\n        return x.equals(y);\r\n    else\r\n        return x === y;\r\n}\r\nexports.equal_to = equal_to;\r\n/**\r\n * Test whether two arguments are not equal.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Returns `true`, if two arguments are not equal, otherwise `false`.\r\n */\r\nfunction not_equal_to(x, y) {\r\n    return !equal_to(x, y);\r\n}\r\nexports.not_equal_to = not_equal_to;\r\n/**\r\n * Test whether *x* is less than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than *y*.\r\n */\r\nfunction less(x, y) {\r\n    // CONVERT TO PRIMITIVE TYPE\r\n    x = x.valueOf();\r\n    y = y.valueOf();\r\n    // DO COMPARE\r\n    if (x instanceof Object)\r\n        if (x.less instanceof Function)\r\n            // has less()\r\n            return x.less(y);\r\n        else\r\n            return (0, uid_1.get_uid)(x) < (0, uid_1.get_uid)(y);\r\n    else\r\n        return x < y;\r\n}\r\nexports.less = less;\r\n/**\r\n * Test whether *x* is less than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is less than or equal to *y*.\r\n */\r\nfunction less_equal(x, y) {\r\n    return less(x, y) || equal_to(x, y);\r\n}\r\nexports.less_equal = less_equal;\r\n/**\r\n * Test whether *x* is greater than *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than *y*.\r\n */\r\nfunction greater(x, y) {\r\n    return !less_equal(x, y);\r\n}\r\nexports.greater = greater;\r\n/**\r\n * Test whether *x* is greater than or equal to *y*.\r\n *\r\n * @param x The first argument to compare.\r\n * @param y The second argument to compare.\r\n * @return Whether *x* is greater than or equal to *y*.\r\n */\r\nfunction greater_equal(x, y) {\r\n    return !less(x, y);\r\n}\r\nexports.greater_equal = greater_equal;\r\n//# sourceMappingURL=comparators.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IHashContainer = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar IAssociativeContainer_1 = require(\"./IAssociativeContainer\");\r\nvar hash_1 = require(\"../../../functional/hash\");\r\nvar comparators_1 = require(\"../../../functional/comparators\");\r\nvar IHashContainer;\r\n(function (IHashContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source, Source, bucketFactory) {\r\n        var args = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            args[_i - 3] = arguments[_i];\r\n        }\r\n        // DECLARE MEMBERS\r\n        var post_process = null;\r\n        var hash_function = hash_1.hash;\r\n        var key_eq = comparators_1.equal_to;\r\n        //----\r\n        // INITIALIZE MEMBERS AND POST-PROCESS\r\n        //----\r\n        // BRANCH - METHOD OVERLOADINGS\r\n        if (args.length === 1 && args[0] instanceof Source) {\r\n            // PARAMETERS\r\n            var container_1 = args[0];\r\n            hash_function = container_1.hash_function();\r\n            key_eq = container_1.key_eq();\r\n            // COPY CONSTRUCTOR\r\n            post_process = function () {\r\n                var first = container_1.begin();\r\n                var last = container_1.end();\r\n                source.assign(first, last);\r\n            };\r\n        }\r\n        else {\r\n            var tuple = IAssociativeContainer_1.IAssociativeContainer.construct.apply(IAssociativeContainer_1.IAssociativeContainer, __spreadArray([source], __read(args), false));\r\n            post_process = tuple.ramda;\r\n            if (tuple.tail.length >= 1)\r\n                hash_function = tuple.tail[0];\r\n            if (tuple.tail.length >= 2)\r\n                key_eq = tuple.tail[1];\r\n        }\r\n        //----\r\n        // DO PROCESS\r\n        //----\r\n        // CONSTRUCT BUCKET\r\n        bucketFactory(hash_function, key_eq);\r\n        // ACT POST-PROCESS\r\n        if (post_process !== null)\r\n            post_process();\r\n    }\r\n    IHashContainer.construct = construct;\r\n})(IHashContainer = exports.IHashContainer || (exports.IHashContainer = {}));\r\n//# sourceMappingURL=IHashContainer.js.map","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IAssociativeContainer = void 0;\r\nvar IAssociativeContainer;\r\n(function (IAssociativeContainer) {\r\n    /**\r\n     * @internal\r\n     */\r\n    function construct(source) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var ramda;\r\n        var tail;\r\n        if (args.length >= 1 && args[0] instanceof Array) {\r\n            // INITIALIZER LIST CONSTRUCTOR\r\n            ramda = function () {\r\n                var items = args[0];\r\n                source.push.apply(source, __spreadArray([], __read(items), false));\r\n            };\r\n            tail = args.slice(1);\r\n        }\r\n        else if (args.length >= 2 &&\r\n            args[0].next instanceof Function &&\r\n            args[1].next instanceof Function) {\r\n            // RANGE CONSTRUCTOR\r\n            ramda = function () {\r\n                var first = args[0];\r\n                var last = args[1];\r\n                source.assign(first, last);\r\n            };\r\n            tail = args.slice(2);\r\n        }\r\n        else {\r\n            // DEFAULT CONSTRUCTOR\r\n            ramda = null;\r\n            tail = args;\r\n        }\r\n        return { ramda: ramda, tail: tail };\r\n    }\r\n    IAssociativeContainer.construct = construct;\r\n})(IAssociativeContainer = exports.IAssociativeContainer || (exports.IAssociativeContainer = {}));\r\n//# sourceMappingURL=IAssociativeContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListIterator = void 0;\r\nvar ErrorGenerator_1 = require(\"../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------------- */\r\n    function ListIterator(prev, next, value) {\r\n        this.prev_ = prev;\r\n        this.next_ = next;\r\n        this.value_ = value;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_prev = function (it, prev) {\r\n        it.prev_ = prev;\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    ListIterator._Set_next = function (it, next) {\r\n        it.next_ = next;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.prev = function () {\r\n        return this.prev_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.next = function () {\r\n        return this.next_;\r\n    };\r\n    Object.defineProperty(ListIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            this._Try_value();\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ListIterator.prototype._Try_value = function () {\r\n        if (this.value_ === undefined &&\r\n            this.equals(this.source().end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.iterator_end_value(this.source());\r\n    };\r\n    /* ---------------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListIterator.prototype.equals = function (obj) {\r\n        return this === obj;\r\n    };\r\n    return ListIterator;\r\n}());\r\nexports.ListIterator = ListIterator;\r\n//# sourceMappingURL=ListIterator.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.next = exports.prev = exports.advance = exports.distance = exports.size = exports.empty = void 0;\r\nvar InvalidArgument_1 = require(\"../exception/InvalidArgument\");\r\n/* =========================================================\r\n    GLOBAL FUNCTIONS\r\n        - ACCESSORS\r\n        - MOVERS\r\n        - FACTORIES\r\n============================================================\r\n    ACCESSORS\r\n--------------------------------------------------------- */\r\n/**\r\n * Test whether a container is empty.\r\n *\r\n * @param source Target container.\r\n * @return Whether empty or not.\r\n */\r\nfunction empty(source) {\r\n    if (source instanceof Array)\r\n        return source.length !== 0;\r\n    else\r\n        return source.empty();\r\n}\r\nexports.empty = empty;\r\n/**\r\n * Get number of elements of a container.\r\n *\r\n * @param source Target container.\r\n * @return The number of elements in the container.\r\n */\r\nfunction size(source) {\r\n    if (source instanceof Array)\r\n        return source.length;\r\n    else\r\n        return source.size();\r\n}\r\nexports.size = size;\r\nfunction distance(first, last) {\r\n    if (first.index instanceof Function)\r\n        return _Distance_via_index(first, last);\r\n    var ret = 0;\r\n    for (; !first.equals(last); first = first.next())\r\n        ++ret;\r\n    return ret;\r\n}\r\nexports.distance = distance;\r\nfunction _Distance_via_index(first, last) {\r\n    var x = first.index();\r\n    var y = last.index();\r\n    if (first.base instanceof Function)\r\n        return x - y;\r\n    else\r\n        return y - x;\r\n}\r\nfunction advance(it, n) {\r\n    if (n === 0)\r\n        return it;\r\n    else if (it.advance instanceof Function)\r\n        return it.advance(n);\r\n    var stepper;\r\n    if (n < 0) {\r\n        if (!(it.prev instanceof Function))\r\n            throw new InvalidArgument_1.InvalidArgument(\"Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.\");\r\n        stepper = function (it) { return it.prev(); };\r\n        n = -n;\r\n    }\r\n    else\r\n        stepper = function (it) { return it.next(); };\r\n    while (n-- > 0)\r\n        it = stepper(it);\r\n    return it;\r\n}\r\nexports.advance = advance;\r\n/**\r\n * Get previous iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move prev.\r\n * @return An iterator moved to prev *n* steps.\r\n */\r\nfunction prev(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.prev();\r\n    else\r\n        return advance(it, -n);\r\n}\r\nexports.prev = prev;\r\n/**\r\n * Get next iterator.\r\n *\r\n * @param it Iterator to move.\r\n * @param n Step to move next.\r\n * @return Iterator moved to next *n* steps.\r\n */\r\nfunction next(it, n) {\r\n    if (n === void 0) { n = 1; }\r\n    if (n === 1)\r\n        return it.next();\r\n    else\r\n        return advance(it, n);\r\n}\r\nexports.next = next;\r\n//# sourceMappingURL=global.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListContainer = void 0;\r\nvar Container_1 = require(\"../../../base/container/Container\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar Repeater_1 = require(\"../../iterator/disposable/Repeater\");\r\nvar NativeArrayIterator_1 = require(\"../../iterator/disposable/NativeArrayIterator\");\r\nvar global_1 = require(\"../../../iterator/global\");\r\nvar ErrorGenerator_1 = require(\"../../exception/ErrorGenerator\");\r\n/**\r\n * Basic List Container.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ListContainer = /** @class */ (function (_super) {\r\n    __extends(ListContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function ListContainer() {\r\n        var _this = _super.call(this) || this;\r\n        // INIT MEMBERS\r\n        _this.end_ = _this._Create_iterator(null, null);\r\n        _this.clear();\r\n        return _this;\r\n    }\r\n    ListContainer.prototype.assign = function (par1, par2) {\r\n        this.clear();\r\n        this.insert(this.end(), par1, par2);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.clear = function () {\r\n        // DISCONNECT NODES\r\n        ListIterator_1.ListIterator._Set_prev(this.end_, this.end_);\r\n        ListIterator_1.ListIterator._Set_next(this.end_, this.end_);\r\n        // RE-SIZE -> 0\r\n        this.begin_ = this.end_;\r\n        this.size_ = 0;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.resize = function (n) {\r\n        var expansion = n - this.size();\r\n        if (expansion > 0)\r\n            this.insert(this.end(), expansion, undefined);\r\n        else if (expansion < 0)\r\n            this.erase((0, global_1.advance)(this.end(), -expansion), this.end());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.begin = function () {\r\n        return this.begin_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.end = function () {\r\n        return this.end_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - PUSH & POP\r\n            - INSERT\r\n            - ERASE\r\n            - POST-PROCESS\r\n    ============================================================\r\n        PUSH & POP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_front = function (val) {\r\n        this.insert(this.begin_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push_back = function (val) {\r\n        this.insert(this.end_, val);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_front = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_front\");\r\n        this.erase(this.begin_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.pop_back = function () {\r\n        if (this.empty() === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.empty(this.end_.source().constructor.name, \"pop_back\");\r\n        this.erase(this.end_.prev());\r\n    };\r\n    /* ---------------------------------------------------------\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        if (items.length === 0)\r\n            return this.size();\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this._Insert_by_range(this.end(), first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    ListContainer.prototype.insert = function (pos) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        // VALIDATION\r\n        if (pos.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (pos.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        // BRANCHES\r\n        if (args.length === 1)\r\n            return this._Insert_by_repeating_val(pos, 1, args[0]);\r\n        else if (args.length === 2 && typeof args[0] === \"number\")\r\n            return this._Insert_by_repeating_val(pos, args[0], args[1]);\r\n        else\r\n            return this._Insert_by_range(pos, args[0], args[1]);\r\n    };\r\n    ListContainer.prototype._Insert_by_repeating_val = function (position, n, val) {\r\n        var first = new Repeater_1.Repeater(0, val);\r\n        var last = new Repeater_1.Repeater(n);\r\n        return this._Insert_by_range(position, first, last);\r\n    };\r\n    ListContainer.prototype._Insert_by_range = function (position, begin, end) {\r\n        var prev = position.prev();\r\n        var first = null;\r\n        var size = 0;\r\n        for (var it = begin; it.equals(end) === false; it = it.next()) {\r\n            // CONSTRUCT ITEM, THE NEW ELEMENT\r\n            var item = this._Create_iterator(prev, null, it.value);\r\n            if (size === 0)\r\n                first = item;\r\n            // PLACE ITEM ON THE NEXT OF \"PREV\"\r\n            ListIterator_1.ListIterator._Set_next(prev, item);\r\n            // SHIFT CURRENT ITEM TO PREVIOUS\r\n            prev = item;\r\n            ++size;\r\n        }\r\n        // WILL FIRST BE THE BEGIN?\r\n        if (position.equals(this.begin()) === true)\r\n            this.begin_ = first;\r\n        // CONNECT BETWEEN LAST AND POSITION\r\n        ListIterator_1.ListIterator._Set_next(prev, position);\r\n        ListIterator_1.ListIterator._Set_prev(position, prev);\r\n        this.size_ += size;\r\n        return first;\r\n    };\r\n    ListContainer.prototype.erase = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        return this._Erase_by_range(first, last);\r\n    };\r\n    ListContainer.prototype._Erase_by_range = function (first, last) {\r\n        // VALIDATION\r\n        if (first.source() !== this.end_.source())\r\n            throw ErrorGenerator_1.ErrorGenerator.not_my_iterator(this.end_.source(), \"insert\");\r\n        else if (first.erased_ === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.erased_iterator(this.end_.source(), \"insert\");\r\n        else if (first.equals(this.end_))\r\n            return this.end_;\r\n        // FIND PREV AND NEXT\r\n        var prev = first.prev();\r\n        // SHRINK\r\n        ListIterator_1.ListIterator._Set_next(prev, last);\r\n        ListIterator_1.ListIterator._Set_prev(last, prev);\r\n        for (var it = first; !it.equals(last); it = it.next()) {\r\n            it.erased_ = true;\r\n            --this.size_;\r\n        }\r\n        if (first.equals(this.begin_))\r\n            this.begin_ = last;\r\n        return last;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        SWAP\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ListContainer.prototype.swap = function (obj) {\r\n        var _a, _b, _c;\r\n        _a = __read([obj.begin_, this.begin_], 2), this.begin_ = _a[0], obj.begin_ = _a[1];\r\n        _b = __read([obj.end_, this.end_], 2), this.end_ = _b[0], obj.end_ = _b[1];\r\n        _c = __read([obj.size_, this.size_], 2), this.size_ = _c[0], obj.size_ = _c[1];\r\n    };\r\n    return ListContainer;\r\n}(Container_1.Container));\r\nexports.ListContainer = ListContainer;\r\n//# sourceMappingURL=ListContainer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Repeater = void 0;\r\nvar Repeater = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function Repeater(index, value) {\r\n        this.index_ = index;\r\n        this.value_ = value;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.index = function () {\r\n        return this.index_;\r\n    };\r\n    Object.defineProperty(Repeater.prototype, \"value\", {\r\n        get: function () {\r\n            return this.value_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS & COMPARE\r\n    --------------------------------------------------------- */\r\n    Repeater.prototype.next = function () {\r\n        ++this.index_;\r\n        return this;\r\n    };\r\n    Repeater.prototype.equals = function (obj) {\r\n        return this.index_ === obj.index_;\r\n    };\r\n    return Repeater;\r\n}());\r\nexports.Repeater = Repeater;\r\n//# sourceMappingURL=Repeater.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ReverseIterator = void 0;\r\n/**\r\n * Basic reverse iterator.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar ReverseIterator = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param base The base iterator.\r\n     */\r\n    function ReverseIterator(base) {\r\n        this.base_ = base.prev();\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Get source container.\r\n     *\r\n     * @return The source container.\r\n     */\r\n    ReverseIterator.prototype.source = function () {\r\n        return this.base_.source();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.base = function () {\r\n        return this.base_.next();\r\n    };\r\n    Object.defineProperty(ReverseIterator.prototype, \"value\", {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        get: function () {\r\n            return this.base_.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* ---------------------------------------------------------\r\n        MOVERS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.prev = function () {\r\n        // this.base().next()\r\n        return this._Create_neighbor(this.base().next());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.next = function () {\r\n        // this.base().prev()\r\n        return this._Create_neighbor(this.base_);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        COMPARES\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ReverseIterator.prototype.equals = function (obj) {\r\n        return this.base_.equals(obj.base_);\r\n    };\r\n    return ReverseIterator;\r\n}());\r\nexports.ReverseIterator = ReverseIterator;\r\n//# sourceMappingURL=ReverseIterator.js.map","\"use strict\";\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashBuckets = void 0;\r\n/**\r\n * Hash buckets\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashBuckets = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function HashBuckets(fetcher, hasher) {\r\n        this.fetcher_ = fetcher;\r\n        this.hasher_ = hasher;\r\n        this.max_load_factor_ = DEFAULT_MAX_FACTOR;\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    }\r\n    HashBuckets.prototype.clear = function () {\r\n        this.data_ = [];\r\n        this.size_ = 0;\r\n        this.initialize();\r\n    };\r\n    HashBuckets.prototype.rehash = function (length) {\r\n        var e_1, _a, e_2, _b;\r\n        length = Math.max(length, MIN_BUCKET_COUNT);\r\n        var data = [];\r\n        for (var i = 0; i < length; ++i)\r\n            data.push([]);\r\n        try {\r\n            for (var _c = __values(this.data_), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var row = _d.value;\r\n                try {\r\n                    for (var row_1 = (e_2 = void 0, __values(row)), row_1_1 = row_1.next(); !row_1_1.done; row_1_1 = row_1.next()) {\r\n                        var elem = row_1_1.value;\r\n                        var index = this.hasher_(this.fetcher_(elem)) % data.length;\r\n                        data[index].push(elem);\r\n                    }\r\n                }\r\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (row_1_1 && !row_1_1.done && (_b = row_1.return)) _b.call(row_1);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        this.data_ = data;\r\n    };\r\n    HashBuckets.prototype.reserve = function (length) {\r\n        if (length > this.capacity()) {\r\n            length = Math.floor(length / this.max_load_factor_);\r\n            this.rehash(length);\r\n        }\r\n    };\r\n    HashBuckets.prototype.initialize = function () {\r\n        for (var i = 0; i < MIN_BUCKET_COUNT; ++i)\r\n            this.data_.push([]);\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.length = function () {\r\n        return this.data_.length;\r\n    };\r\n    HashBuckets.prototype.capacity = function () {\r\n        return this.data_.length * this.max_load_factor_;\r\n    };\r\n    HashBuckets.prototype.at = function (index) {\r\n        return this.data_[index];\r\n    };\r\n    HashBuckets.prototype.load_factor = function () {\r\n        return this.size_ / this.length();\r\n    };\r\n    HashBuckets.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        if (z === null)\r\n            return this.max_load_factor_;\r\n        else\r\n            this.max_load_factor_ = z;\r\n    };\r\n    HashBuckets.prototype.hash_function = function () {\r\n        return this.hasher_;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS I/O\r\n    --------------------------------------------------------- */\r\n    HashBuckets.prototype.index = function (elem) {\r\n        return this.hasher_(this.fetcher_(elem)) % this.length();\r\n    };\r\n    HashBuckets.prototype.insert = function (val) {\r\n        var capacity = this.capacity();\r\n        if (++this.size_ > capacity)\r\n            this.reserve(capacity * 2);\r\n        var index = this.index(val);\r\n        this.data_[index].push(val);\r\n    };\r\n    HashBuckets.prototype.erase = function (val) {\r\n        var index = this.index(val);\r\n        var bucket = this.data_[index];\r\n        for (var i = 0; i < bucket.length; ++i)\r\n            if (bucket[i] === val) {\r\n                bucket.splice(i, 1);\r\n                --this.size_;\r\n                break;\r\n            }\r\n    };\r\n    return HashBuckets;\r\n}());\r\nexports.HashBuckets = HashBuckets;\r\nvar MIN_BUCKET_COUNT = 10;\r\nvar DEFAULT_MAX_FACTOR = 1.0;\r\n//# sourceMappingURL=HashBuckets.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.make_pair = exports.Pair = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Pair of two elements.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Pair = /** @class */ (function () {\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor.\r\n     *\r\n     * @param first The first element.\r\n     * @param second The second element.\r\n     */\r\n    function Pair(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        COMPARISON\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.equals = function (pair) {\r\n        return ((0, comparators_1.equal_to)(this.first, pair.first) &&\r\n            (0, comparators_1.equal_to)(this.second, pair.second));\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.less = function (pair) {\r\n        if ((0, comparators_1.equal_to)(this.first, pair.first) === false)\r\n            return (0, comparators_1.less)(this.first, pair.first);\r\n        else\r\n            return (0, comparators_1.less)(this.second, pair.second);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Pair.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first, this.second);\r\n    };\r\n    return Pair;\r\n}());\r\nexports.Pair = Pair;\r\n/**\r\n * Create a {@link Pair}.\r\n *\r\n * @param first The 1st element.\r\n * @param second The 2nd element.\r\n *\r\n * @return A {@link Pair} object.\r\n */\r\nfunction make_pair(first, second) {\r\n    return new Pair(first, second);\r\n}\r\nexports.make_pair = make_pair;\r\n//# sourceMappingURL=Pair.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashSet = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueSet_1 = require(\"../base/container/UniqueSet\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar SetElementList_1 = require(\"../internal/container/associative/SetElementList\");\r\nvar SetHashBuckets_1 = require(\"../internal/hash/SetHashBuckets\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Set based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashSet = /** @class */ (function (_super) {\r\n    __extends(HashSet, _super);\r\n    function HashSet() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new SetElementList_1.SetElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashSet,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new SetHashBuckets_1.SetHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        SetElementList_1.SetElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        SetHashBuckets_1.SetHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashSet.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashSet.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashSet.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashSet.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket_size = function (n) {\r\n        return this.buckets_.at(n).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashSet.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashSet.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n            - SWAP\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Insert_by_key = function (key) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(key);\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    HashSet.prototype._Insert_by_hint = function (hint, key) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, key);\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashSet.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashSet.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashSet;\r\n}(UniqueSet_1.UniqueSet));\r\nexports.HashSet = HashSet;\r\n/**\r\n *\r\n */\r\n(function (HashSet) {\r\n    // BODY\r\n    HashSet.Iterator = SetElementList_1.SetElementList.Iterator;\r\n    HashSet.ReverseIterator = SetElementList_1.SetElementList.ReverseIterator;\r\n})(HashSet = exports.HashSet || (exports.HashSet = {}));\r\nexports.HashSet = HashSet;\r\n//# sourceMappingURL=HashSet.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing set elements.\r\n *\r\n * @template Key Key type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source container type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetElementList = /** @class */ (function (_super) {\r\n    __extends(SetElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function SetElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    SetElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return SetElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    SetElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    SetElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return SetElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.SetElementList = SetElementList;\r\n/**\r\n *\r\n */\r\n(function (SetElementList) {\r\n    /**\r\n     * Iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.source_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.source_.associative();\r\n        };\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    SetElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverser iterator of set container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    SetElementList.ReverseIterator = ReverseIterator;\r\n})(SetElementList = exports.SetElementList || (exports.SetElementList = {}));\r\nexports.SetElementList = SetElementList;\r\n//# sourceMappingURL=SetElementList.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for set containers\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar SetHashBuckets = /** @class */ (function (_super) {\r\n    __extends(SetHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source set container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function SetHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    SetHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    SetHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    SetHashBuckets.prototype.find = function (val) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(val) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.value, val))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return SetHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.SetHashBuckets = SetHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.value;\r\n}\r\n//# sourceMappingURL=SetHashBuckets.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UniqueMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.base\r\n */\r\n//================================================================\r\nvar MapContainer_1 = require(\"./MapContainer\");\r\nvar ErrorGenerator_1 = require(\"../../internal/exception/ErrorGenerator\");\r\n/**\r\n * Basic map container blocking duplicated key.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Source Derived type extending this {@link UniqueMap}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar UniqueMap = /** @class */ (function (_super) {\r\n    __extends(UniqueMap, _super);\r\n    function UniqueMap() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.count = function (key) {\r\n        return this.find(key).equals(this.end()) ? 0 : 1;\r\n    };\r\n    /**\r\n     * Get a value.\r\n     *\r\n     * @param key Key to search for.\r\n     * @return The value mapped by the key.\r\n     */\r\n    UniqueMap.prototype.get = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"get\", key);\r\n        return it.second;\r\n    };\r\n    /**\r\n     * Take a value.\r\n     *\r\n     * Get a value, or set the value and returns it.\r\n     *\r\n     * @param key Key to search for.\r\n     * @param generator Value generator when the matched key not found\r\n     * @returns Value, anyway\r\n     */\r\n    UniqueMap.prototype.take = function (key, generator) {\r\n        var it = this.find(key);\r\n        return it.equals(this.end())\r\n            ? this.emplace(key, generator()).first.second\r\n            : it.second;\r\n    };\r\n    /**\r\n     * Set a value with key.\r\n     *\r\n     * @param key Key to be mapped or search for.\r\n     * @param val Value to insert or assign.\r\n     */\r\n    UniqueMap.prototype.set = function (key, val) {\r\n        this.insert_or_assign(key, val);\r\n    };\r\n    UniqueMap.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.insert.apply(this, __spreadArray([], __read(args), false));\r\n    };\r\n    UniqueMap.prototype._Insert_by_range = function (first, last) {\r\n        for (var it = first; !it.equals(last); it = it.next())\r\n            this.emplace(it.value.first, it.value.second);\r\n    };\r\n    UniqueMap.prototype.insert_or_assign = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 2) {\r\n            return this._Insert_or_assign_with_key_value(args[0], args[1]);\r\n        }\r\n        else if (args.length === 3) {\r\n            // INSERT OR ASSIGN AN ELEMENT\r\n            return this._Insert_or_assign_with_hint(args[0], args[1], args[2]);\r\n        }\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_key_value = function (key, value) {\r\n        var ret = this.emplace(key, value);\r\n        if (ret.second === false)\r\n            ret.first.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Insert_or_assign_with_hint = function (hint, key, value) {\r\n        var ret = this.emplace_hint(hint, key, value);\r\n        if (ret.second !== value)\r\n            ret.second = value;\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype.extract = function (param) {\r\n        if (param instanceof this.end().constructor)\r\n            return this._Extract_by_iterator(param);\r\n        else\r\n            return this._Extract_by_key(param);\r\n    };\r\n    UniqueMap.prototype._Extract_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            throw ErrorGenerator_1.ErrorGenerator.key_nout_found(this, \"extract\", key);\r\n        var ret = it.value;\r\n        this._Erase_by_range(it);\r\n        return ret;\r\n    };\r\n    UniqueMap.prototype._Extract_by_iterator = function (it) {\r\n        if (it.equals(this.end()) === true)\r\n            return this.end();\r\n        this._Erase_by_range(it);\r\n        return it;\r\n    };\r\n    UniqueMap.prototype._Erase_by_key = function (key) {\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true)\r\n            return 0;\r\n        this._Erase_by_range(it);\r\n        return 1;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        UTILITY\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    UniqueMap.prototype.merge = function (source) {\r\n        for (var it = source.begin(); !it.equals(source.end());)\r\n            if (this.has(it.first) === false) {\r\n                this.insert(it.value);\r\n                it = source.erase(it);\r\n            }\r\n            else\r\n                it = it.next();\r\n    };\r\n    return UniqueMap;\r\n}(MapContainer_1.MapContainer));\r\nexports.UniqueMap = UniqueMap;\r\n//# sourceMappingURL=UniqueMap.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapContainer = void 0;\r\nvar Container_1 = require(\"./Container\");\r\nvar NativeArrayIterator_1 = require(\"../../internal/iterator/disposable/NativeArrayIterator\");\r\n/**\r\n * Basic map container.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Derived type extending this {@link MapContainer}\r\n * @template IteratorT Iterator type\r\n * @template ReverseT Reverse iterator type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapContainer = /** @class */ (function (_super) {\r\n    __extends(MapContainer, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTURCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Default Constructor.\r\n     */\r\n    function MapContainer(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data_ = factory(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.assign = function (first, last) {\r\n        // INSERT\r\n        this.clear();\r\n        this.insert(first, last);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.clear = function () {\r\n        // TO BE ABSTRACT\r\n        this.data_.clear();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.begin = function () {\r\n        return this.data_.begin();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.end = function () {\r\n        return this.data_.end();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ELEMENTS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.has = function (key) {\r\n        return !this.find(key).equals(this.end());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.size = function () {\r\n        return this.data_.size();\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - ERASE\r\n            - UTILITY\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    MapContainer.prototype.push = function () {\r\n        var items = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            items[_i] = arguments[_i];\r\n        }\r\n        // INSERT BY RANGE\r\n        var first = new NativeArrayIterator_1.NativeArrayIterator(items, 0);\r\n        var last = new NativeArrayIterator_1.NativeArrayIterator(items, items.length);\r\n        this.insert(first, last);\r\n        // RETURN SIZE\r\n        return this.size();\r\n    };\r\n    MapContainer.prototype.insert = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1)\r\n            return this.emplace(args[0].first, args[0].second);\r\n        else if (args[0].next instanceof Function &&\r\n            args[1].next instanceof Function)\r\n            return this._Insert_by_range(args[0], args[1]);\r\n        else\r\n            return this.emplace_hint(args[0], args[1].first, args[1].second);\r\n    };\r\n    MapContainer.prototype.erase = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (args.length === 1 &&\r\n            (args[0] instanceof this.end().constructor === false ||\r\n                args[0].source() !== this))\r\n            return this._Erase_by_key(args[0]);\r\n        else if (args.length === 1)\r\n            return this._Erase_by_range(args[0]);\r\n        else\r\n            return this._Erase_by_range(args[0], args[1]);\r\n    };\r\n    MapContainer.prototype._Erase_by_range = function (first, last) {\r\n        if (last === void 0) { last = first.next(); }\r\n        // ERASE\r\n        var it = this.data_.erase(first, last);\r\n        // POST-PROCESS\r\n        this._Handle_erase(first, last);\r\n        return it;\r\n    };\r\n    return MapContainer;\r\n}(Container_1.Container));\r\nexports.MapContainer = MapContainer;\r\n//# sourceMappingURL=MapContainer.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HashMap = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std\r\n */\r\n//================================================================\r\nvar UniqueMap_1 = require(\"../base/container/UniqueMap\");\r\nvar IHashContainer_1 = require(\"../internal/container/associative/IHashContainer\");\r\nvar MapElementList_1 = require(\"../internal/container/associative/MapElementList\");\r\nvar MapHashBuckets_1 = require(\"../internal/hash/MapHashBuckets\");\r\nvar Entry_1 = require(\"../utility/Entry\");\r\nvar Pair_1 = require(\"../utility/Pair\");\r\n/**\r\n * Unique-key Map based on Hash buckets.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar HashMap = /** @class */ (function (_super) {\r\n    __extends(HashMap, _super);\r\n    function HashMap() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, function (thisArg) { return new MapElementList_1.MapElementList(thisArg); }) || this;\r\n        IHashContainer_1.IHashContainer.construct.apply(IHashContainer_1.IHashContainer, __spreadArray([_this,\r\n            HashMap,\r\n            function (hash, pred) {\r\n                _this.buckets_ = new MapHashBuckets_1.MapHashBuckets(_this, hash, pred);\r\n            }], __read(args), false));\r\n        return _this;\r\n    }\r\n    /* ---------------------------------------------------------\r\n        ASSIGN & CLEAR\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.clear = function () {\r\n        this.buckets_.clear();\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.swap = function (obj) {\r\n        var _a, _b;\r\n        // SWAP CONTENTS\r\n        _a = __read([obj.data_, this.data_], 2), this.data_ = _a[0], obj.data_ = _a[1];\r\n        MapElementList_1.MapElementList._Swap_associative(this.data_, obj.data_);\r\n        // SWAP BUCKETS\r\n        MapHashBuckets_1.MapHashBuckets._Swap_source(this.buckets_, obj.buckets_);\r\n        _b = __read([obj.buckets_, this.buckets_], 2), this.buckets_ = _b[0], obj.buckets_ = _b[1];\r\n    };\r\n    /* =========================================================\r\n        ACCESSORS\r\n            - MEMBER\r\n            - HASH\r\n    ============================================================\r\n        MEMBER\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.find = function (key) {\r\n        return this.buckets_.find(key);\r\n    };\r\n    HashMap.prototype.begin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.begin.call(this);\r\n        else\r\n            return this.buckets_.at(index)[0];\r\n    };\r\n    HashMap.prototype.end = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        if (index === null)\r\n            return _super.prototype.end.call(this);\r\n        else {\r\n            var bucket = this.buckets_.at(index);\r\n            return bucket[bucket.length - 1].next();\r\n        }\r\n    };\r\n    HashMap.prototype.rbegin = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.end(index).reverse();\r\n    };\r\n    HashMap.prototype.rend = function (index) {\r\n        if (index === void 0) { index = null; }\r\n        return this.begin(index).reverse();\r\n    };\r\n    /* ---------------------------------------------------------\r\n        HASH\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_count = function () {\r\n        return this.buckets_.length();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket_size = function (index) {\r\n        return this.buckets_.at(index).length;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.load_factor = function () {\r\n        return this.buckets_.load_factor();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.hash_function = function () {\r\n        return this.buckets_.hash_function();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.key_eq = function () {\r\n        return this.buckets_.key_eq();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.bucket = function (key) {\r\n        return this.hash_function()(key) % this.buckets_.length();\r\n    };\r\n    HashMap.prototype.max_load_factor = function (z) {\r\n        if (z === void 0) { z = null; }\r\n        return this.buckets_.max_load_factor(z);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.reserve = function (n) {\r\n        this.buckets_.reserve(n);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.rehash = function (n) {\r\n        this.buckets_.rehash(n);\r\n    };\r\n    /* =========================================================\r\n        ELEMENTS I/O\r\n            - INSERT\r\n            - POST-PROCESS\r\n    ============================================================\r\n        INSERT\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace = function (key, val) {\r\n        // TEST WHETHER EXIST\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === false)\r\n            return new Pair_1.Pair(it, false);\r\n        // INSERT\r\n        this.data_.push(new Entry_1.Entry(key, val));\r\n        it = it.prev();\r\n        // POST-PROCESS\r\n        this._Handle_insert(it, it.next());\r\n        return new Pair_1.Pair(it, true);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    HashMap.prototype.emplace_hint = function (hint, key, val) {\r\n        // FIND DUPLICATED KEY\r\n        var it = this.find(key);\r\n        if (it.equals(this.end()) === true) {\r\n            // INSERT\r\n            it = this.data_.insert(hint, new Entry_1.Entry(key, val));\r\n            // POST-PROCESS\r\n            this._Handle_insert(it, it.next());\r\n        }\r\n        return it;\r\n    };\r\n    /* ---------------------------------------------------------\r\n        POST-PROCESS\r\n    --------------------------------------------------------- */\r\n    HashMap.prototype._Handle_insert = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.insert(first);\r\n    };\r\n    HashMap.prototype._Handle_erase = function (first, last) {\r\n        for (; !first.equals(last); first = first.next())\r\n            this.buckets_.erase(first);\r\n    };\r\n    return HashMap;\r\n}(UniqueMap_1.UniqueMap));\r\nexports.HashMap = HashMap;\r\n/**\r\n *\r\n */\r\n(function (HashMap) {\r\n    // BODY\r\n    HashMap.Iterator = MapElementList_1.MapElementList.Iterator;\r\n    HashMap.ReverseIterator = MapElementList_1.MapElementList.ReverseIterator;\r\n})(HashMap = exports.HashMap || (exports.HashMap = {}));\r\nexports.HashMap = HashMap;\r\n//# sourceMappingURL=HashMap.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapElementList = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar ListContainer_1 = require(\"../linear/ListContainer\");\r\nvar ListIterator_1 = require(\"../../iterator/ListIterator\");\r\nvar ReverseIterator_1 = require(\"../../iterator/ReverseIterator\");\r\n/**\r\n * Doubly Linked List storing map elements.\r\n *\r\n * @template Key Key type\r\n * @template T Mapped type\r\n * @template Unique Whether duplicated key is blocked or not\r\n * @template Source Source type\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapElementList = /** @class */ (function (_super) {\r\n    __extends(MapElementList, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    function MapElementList(associative) {\r\n        var _this = _super.call(this) || this;\r\n        _this.associative_ = associative;\r\n        return _this;\r\n    }\r\n    MapElementList.prototype._Create_iterator = function (prev, next, val) {\r\n        return MapElementList.Iterator.create(this, prev, next, val);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    MapElementList._Swap_associative = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.associative_, x.associative_], 2), x.associative_ = _a[0], y.associative_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        ACCESSORS\r\n    --------------------------------------------------------- */\r\n    MapElementList.prototype.associative = function () {\r\n        return this.associative_;\r\n    };\r\n    return MapElementList;\r\n}(ListContainer_1.ListContainer));\r\nexports.MapElementList = MapElementList;\r\n/**\r\n *\r\n */\r\n(function (MapElementList) {\r\n    /**\r\n     * Iterator of map container storing elements in a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var Iterator = /** @class */ (function (_super) {\r\n        __extends(Iterator, _super);\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        function Iterator(list, prev, next, val) {\r\n            var _this = _super.call(this, prev, next, val) || this;\r\n            _this.list_ = list;\r\n            return _this;\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        Iterator.create = function (list, prev, next, val) {\r\n            return new Iterator(list, prev, next, val);\r\n        };\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.reverse = function () {\r\n            return new ReverseIterator(this);\r\n        };\r\n        /* ---------------------------------------------------------\r\n            ACCESSORS\r\n        --------------------------------------------------------- */\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        Iterator.prototype.source = function () {\r\n            return this.list_.associative();\r\n        };\r\n        Object.defineProperty(Iterator.prototype, \"first\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Iterator.prototype, \"second\", {\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            get: function () {\r\n                return this.value.second;\r\n            },\r\n            /**\r\n             * @inheritDoc\r\n             */\r\n            set: function (val) {\r\n                this.value.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return Iterator;\r\n    }(ListIterator_1.ListIterator));\r\n    MapElementList.Iterator = Iterator;\r\n    /**\r\n     * Reverse iterator of map container storing elements a list.\r\n     *\r\n     * @template Key Key type\r\n     * @template T Mapped type\r\n     * @template Unique Whether duplicated key is blocked or not\r\n     * @template Source Source container type\r\n     *\r\n     * @author Jeongho Nam - https://github.com/samchon\r\n     */\r\n    var ReverseIterator = /** @class */ (function (_super) {\r\n        __extends(ReverseIterator, _super);\r\n        function ReverseIterator() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        /* ---------------------------------------------------------\r\n            CONSTRUCTORS\r\n        --------------------------------------------------------- */\r\n        ReverseIterator.prototype._Create_neighbor = function (base) {\r\n            return new ReverseIterator(base);\r\n        };\r\n        Object.defineProperty(ReverseIterator.prototype, \"first\", {\r\n            /* ---------------------------------------------------------\r\n                ACCESSORS\r\n            --------------------------------------------------------- */\r\n            /**\r\n             * Get the first, key element.\r\n             *\r\n             * @return The first element.\r\n             */\r\n            get: function () {\r\n                return this.base_.first;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ReverseIterator.prototype, \"second\", {\r\n            /**\r\n             * Get the second, stored element.\r\n             *\r\n             * @return The second element.\r\n             */\r\n            get: function () {\r\n                return this.base_.second;\r\n            },\r\n            /**\r\n             * Set the second, stored element.\r\n             *\r\n             * @param val The value to set.\r\n             */\r\n            set: function (val) {\r\n                this.base_.second = val;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return ReverseIterator;\r\n    }(ReverseIterator_1.ReverseIterator));\r\n    MapElementList.ReverseIterator = ReverseIterator;\r\n})(MapElementList = exports.MapElementList || (exports.MapElementList = {}));\r\nexports.MapElementList = MapElementList;\r\n//# sourceMappingURL=MapElementList.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapHashBuckets = void 0;\r\n//================================================================\r\n/**\r\n * @packageDocumentation\r\n * @module std.internal\r\n */\r\n//================================================================\r\nvar HashBuckets_1 = require(\"./HashBuckets\");\r\n/**\r\n * Hash buckets for map containers.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar MapHashBuckets = /** @class */ (function (_super) {\r\n    __extends(MapHashBuckets, _super);\r\n    /* ---------------------------------------------------------\r\n        CONSTRUCTORS\r\n    --------------------------------------------------------- */\r\n    /**\r\n     * Initializer Constructor\r\n     *\r\n     * @param source Source map container\r\n     * @param hasher Hash function\r\n     * @param pred Equality function\r\n     */\r\n    function MapHashBuckets(source, hasher, pred) {\r\n        var _this = _super.call(this, fetcher, hasher) || this;\r\n        _this.source_ = source;\r\n        _this.key_eq_ = pred;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    MapHashBuckets._Swap_source = function (x, y) {\r\n        var _a;\r\n        _a = __read([y.source_, x.source_], 2), x.source_ = _a[0], y.source_ = _a[1];\r\n    };\r\n    /* ---------------------------------------------------------\r\n        FINDERS\r\n    --------------------------------------------------------- */\r\n    MapHashBuckets.prototype.key_eq = function () {\r\n        return this.key_eq_;\r\n    };\r\n    MapHashBuckets.prototype.find = function (key) {\r\n        var e_1, _a;\r\n        var index = this.hash_function()(key) % this.length();\r\n        var bucket = this.at(index);\r\n        try {\r\n            for (var bucket_1 = __values(bucket), bucket_1_1 = bucket_1.next(); !bucket_1_1.done; bucket_1_1 = bucket_1.next()) {\r\n                var it = bucket_1_1.value;\r\n                if (this.key_eq_(it.first, key))\r\n                    return it;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (bucket_1_1 && !bucket_1_1.done && (_a = bucket_1.return)) _a.call(bucket_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this.source_.end();\r\n    };\r\n    return MapHashBuckets;\r\n}(HashBuckets_1.HashBuckets));\r\nexports.MapHashBuckets = MapHashBuckets;\r\nfunction fetcher(elem) {\r\n    return elem.first;\r\n}\r\n//# sourceMappingURL=MapHashBuckets.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Entry = void 0;\r\nvar hash_1 = require(\"../functional/hash\");\r\nvar comparators_1 = require(\"../functional/comparators\");\r\n/**\r\n * Entry for mapping.\r\n *\r\n * @author Jeongho Nam - https://github.com/samchon\r\n */\r\nvar Entry = /** @class */ (function () {\r\n    /**\r\n     * Intializer Constructor.\r\n     *\r\n     * @param first The first, key element.\r\n     * @param second The second, mapped element.\r\n     */\r\n    function Entry(first, second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.equals = function (obj) {\r\n        return (0, comparators_1.equal_to)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.less = function (obj) {\r\n        return (0, comparators_1.less)(this.first, obj.first);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Entry.prototype.hashCode = function () {\r\n        return (0, hash_1.hash)(this.first);\r\n    };\r\n    return Entry;\r\n}());\r\nexports.Entry = Entry;\r\n//# sourceMappingURL=Entry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event = /** @class */ (function () {\r\n    function Event(type, init) {\r\n        this.type = type;\r\n        if (init)\r\n            Object.assign(this, init);\r\n    }\r\n    return Event;\r\n}());\r\nexports.Event = Event;\r\n//# sourceMappingURL=Event.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar node_1 = require(\"tstl/utility/node\");\r\nif (node_1.is_node())\r\n    global.WebSocket = require(\"./WebSocket\").WebSocket;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar websocket_1 = require(\"websocket\");\r\nvar EventTarget_1 = require(\"./events/EventTarget\");\r\nvar Event_1 = require(\"./events/Event\");\r\nvar CloseEvent_1 = require(\"./events/CloseEvent\");\r\nvar MessageEvent_1 = require(\"./events/MessageEvent\");\r\nvar ErrorEvent_1 = require(\"./events/ErrorEvent\");\r\nvar WebSocket = /** @class */ (function (_super) {\r\n    __extends(WebSocket, _super);\r\n    /* ----------------------------------------------------------------\r\n        CONSTRUCTORS\r\n    ---------------------------------------------------------------- */\r\n    function WebSocket(url, protocols) {\r\n        var _this = _super.call(this) || this;\r\n        _this.on_ = {};\r\n        _this.state_ = WebSocket.CONNECTING;\r\n        //----\r\n        // CLIENT\r\n        //----\r\n        // PREPARE SOCKET\r\n        _this.client_ = new websocket_1.client();\r\n        _this.client_.on(\"connect\", _this._Handle_connect.bind(_this));\r\n        _this.client_.on(\"connectFailed\", _this._Handle_error.bind(_this));\r\n        if (typeof protocols === \"string\")\r\n            protocols = [protocols];\r\n        // DO CONNECT\r\n        _this.client_.connect(url, protocols);\r\n        return _this;\r\n    }\r\n    WebSocket.prototype.close = function (code, reason) {\r\n        this.state_ = WebSocket.CLOSING;\r\n        if (code === undefined)\r\n            this.connection_.sendCloseFrame();\r\n        else\r\n            this.connection_.sendCloseFrame(code, reason, true);\r\n    };\r\n    /* ================================================================\r\n        ACCESSORS\r\n            - SENDER\r\n            - PROPERTIES\r\n            - LISTENERS\r\n    ===================================================================\r\n        SENDER\r\n    ---------------------------------------------------------------- */\r\n    WebSocket.prototype.send = function (data) {\r\n        if (typeof data.valueOf() === \"string\")\r\n            this.connection_.sendUTF(data);\r\n        else {\r\n            var buffer = void 0;\r\n            if (data instanceof Buffer)\r\n                buffer = data;\r\n            else if (data instanceof Blob)\r\n                buffer = new Buffer(data, \"blob\");\r\n            else if (data.buffer)\r\n                buffer = new Buffer(data.buffer);\r\n            else\r\n                buffer = new Buffer(data);\r\n            this.connection_.sendBytes(buffer);\r\n        }\r\n    };\r\n    Object.defineProperty(WebSocket.prototype, \"url\", {\r\n        /* ----------------------------------------------------------------\r\n            PROPERTIES\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.client_.url.href;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"protocol\", {\r\n        get: function () {\r\n            return this.client_.protocols\r\n                ? this.client_.protocols[0]\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"extensions\", {\r\n        get: function () {\r\n            return this.connection_ && this.connection_.extensions\r\n                ? this.connection_.extensions[0].name\r\n                : \"\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"readyState\", {\r\n        get: function () {\r\n            return this.state_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"bufferedAmount\", {\r\n        get: function () {\r\n            return this.connection_.bytesWaitingToFlush;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return \"arraybuffer\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onopen\", {\r\n        /* ----------------------------------------------------------------\r\n            LISTENERS\r\n        ---------------------------------------------------------------- */\r\n        get: function () {\r\n            return this.on_.open;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"open\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onclose\", {\r\n        get: function () {\r\n            return this.on_.close;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"close\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onmessage\", {\r\n        get: function () {\r\n            return this.on_.message;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"message\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebSocket.prototype, \"onerror\", {\r\n        get: function () {\r\n            return this.on_.error;\r\n        },\r\n        set: function (listener) {\r\n            this._Set_on(\"error\", listener);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Set_on = function (type, listener) {\r\n        if (this.on_[type])\r\n            this.removeEventListener(type, this.on_[type]);\r\n        this.addEventListener(type, listener);\r\n        this.on_[type] = listener;\r\n    };\r\n    /* ----------------------------------------------------------------\r\n        SOCKET HANDLERS\r\n    ---------------------------------------------------------------- */\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_connect = function (connection) {\r\n        this.connection_ = connection;\r\n        this.state_ = WebSocket.OPEN;\r\n        this.connection_.on(\"message\", this._Handle_message.bind(this));\r\n        this.connection_.on(\"error\", this._Handle_error.bind(this));\r\n        this.connection_.on(\"close\", this._Handle_close.bind(this));\r\n        var event = new Event_1.Event(\"open\", EVENT_INIT);\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_close = function (code, reason) {\r\n        var event = new CloseEvent_1.CloseEvent(\"close\", __assign({}, EVENT_INIT, { code: code, reason: reason }));\r\n        this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_message = function (message) {\r\n        var event = new MessageEvent_1.MessageEvent(\"message\", __assign({}, EVENT_INIT, { data: message.binaryData\r\n                ? message.binaryData\r\n                : message.utf8Data }));\r\n        this.dispatchEvent(event);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    WebSocket.prototype._Handle_error = function (error) {\r\n        var event = new ErrorEvent_1.ErrorEvent(\"error\", __assign({}, EVENT_INIT, { error: error, message: error.message }));\r\n        if (this.state_ === WebSocket.CONNECTING)\r\n            this.state_ = WebSocket.CLOSED;\r\n        this.dispatchEvent(event);\r\n    };\r\n    return WebSocket;\r\n}(EventTarget_1.EventTarget));\r\nexports.WebSocket = WebSocket;\r\n(function (WebSocket) {\r\n    WebSocket.CONNECTING = 0;\r\n    WebSocket.OPEN = 1;\r\n    WebSocket.CLOSING = 2;\r\n    WebSocket.CLOSED = 3;\r\n})(WebSocket = exports.WebSocket || (exports.WebSocket = {}));\r\nexports.WebSocket = WebSocket;\r\nvar EVENT_INIT = {\r\n    bubbles: false,\r\n    cancelable: false\r\n};\r\n//# sourceMappingURL=WebSocket.js.map","\"use strict\";\r\nvar __values = (this && this.__values) || function (o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar HashSet_1 = require(\"tstl/container/HashSet\");\r\nvar HashMap_1 = require(\"tstl/container/HashMap\");\r\nvar EventTarget = /** @class */ (function () {\r\n    function EventTarget() {\r\n        this.listeners_ = new HashMap_1.HashMap();\r\n        this.created_at_ = new Date();\r\n    }\r\n    EventTarget.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        // FIND LISTENERS\r\n        var it = this.listeners_.find(event.type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        // SET DEFAULT ARGUMENTS\r\n        event.target = this;\r\n        event.timeStamp = new Date().getTime() - this.created_at_.getTime();\r\n        try {\r\n            // CALL THE LISTENERS\r\n            for (var _b = __values(it.second), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var listener = _c.value;\r\n                listener(event);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    EventTarget.prototype.addEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            it = this.listeners_.emplace(type, new HashSet_1.HashSet()).first;\r\n        it.second.insert(listener);\r\n    };\r\n    EventTarget.prototype.removeEventListener = function (type, listener) {\r\n        var it = this.listeners_.find(type);\r\n        if (it.equals(this.listeners_.end()))\r\n            return;\r\n        it.second.erase(listener);\r\n        if (it.second.empty())\r\n            this.listeners_.erase(it);\r\n    };\r\n    return EventTarget;\r\n}());\r\nexports.EventTarget = EventTarget;\r\n//# sourceMappingURL=EventTarget.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return CloseEvent;\r\n}(Event_1.Event));\r\nexports.CloseEvent = CloseEvent;\r\n//# sourceMappingURL=CloseEvent.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar MessageEvent = /** @class */ (function (_super) {\r\n    __extends(MessageEvent, _super);\r\n    function MessageEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return MessageEvent;\r\n}(Event_1.Event));\r\nexports.MessageEvent = MessageEvent;\r\n//# sourceMappingURL=MessageEvent.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Event_1 = require(\"./Event\");\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(type, init) {\r\n        return _super.call(this, type, init) || this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event_1.Event));\r\nexports.ErrorEvent = ErrorEvent;\r\n//# sourceMappingURL=ErrorEvent.js.map","const {bech32, hex, utf8} = require('@scure/base')\n\n// defaults for encode; default timestamp is current time at call\nconst DEFAULTNETWORK = {\n  // default network is bitcoin\n  bech32: 'bc',\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  validWitnessVersions: [0]\n}\nconst TESTNETWORK = {\n  bech32: 'tb',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst REGTESTNETWORK = {\n  bech32: 'bcrt',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0]\n}\nconst SIMNETWORK = {\n  bech32: 'sb',\n  pubKeyHash: 0x3f,\n  scriptHash: 0x7b,\n  validWitnessVersions: [0]\n}\n\nconst FEATUREBIT_ORDER = [\n  'option_data_loss_protect',\n  'initial_routing_sync',\n  'option_upfront_shutdown_script',\n  'gossip_queries',\n  'var_onion_optin',\n  'gossip_queries_ex',\n  'option_static_remotekey',\n  'payment_secret',\n  'basic_mpp',\n  'option_support_large_channel'\n]\n\nconst DIVISORS = {\n  m: BigInt(1e3),\n  u: BigInt(1e6),\n  n: BigInt(1e9),\n  p: BigInt(1e12)\n}\n\nconst MAX_MILLISATS = BigInt('2100000000000000000')\n\nconst MILLISATS_PER_BTC = BigInt(1e11)\n\nconst TAGCODES = {\n  payment_hash: 1,\n  payment_secret: 16,\n  description: 13,\n  payee: 19,\n  description_hash: 23, // commit to longer descriptions (used by lnurl-pay)\n  expiry: 6, // default: 3600 (1 hour)\n  min_final_cltv_expiry: 24, // default: 9\n  fallback_address: 9,\n  route_hint: 3, // for extra routing info (private etc.)\n  feature_bits: 5,\n  metadata: 27\n}\n\n// reverse the keys and values of TAGCODES and insert into TAGNAMES\nconst TAGNAMES = {}\nfor (let i = 0, keys = Object.keys(TAGCODES); i < keys.length; i++) {\n  const currentName = keys[i]\n  const currentCode = TAGCODES[keys[i]].toString()\n  TAGNAMES[currentCode] = currentName\n}\n\nconst TAGPARSERS = {\n  1: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  16: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  13: words => utf8.encode(bech32.fromWordsUnsafe(words)), // string variable length\n  19: words => hex.encode(bech32.fromWordsUnsafe(words)), // 264 bits\n  23: words => hex.encode(bech32.fromWordsUnsafe(words)), // 256 bits\n  27: words => hex.encode(bech32.fromWordsUnsafe(words)), // variable\n  6: wordsToIntBE, // default: 3600 (1 hour)\n  24: wordsToIntBE, // default: 9\n  3: routingInfoParser, // for extra routing info (private etc.)\n  5: featureBitsParser // keep feature bits as array of 5 bit words\n}\n\nfunction getUnknownParser(tagCode) {\n  return words => ({\n    tagCode: parseInt(tagCode),\n    words: bech32.encode('unknown', words, Number.MAX_SAFE_INTEGER)\n  })\n}\n\nfunction wordsToIntBE(words) {\n  return words.reverse().reduce((total, item, index) => {\n    return total + item * Math.pow(32, index)\n  }, 0)\n}\n\n// first convert from words to buffer, trimming padding where necessary\n// parse in 51 byte chunks. See encoder for details.\nfunction routingInfoParser(words) {\n  const routes = []\n  let pubkey,\n    shortChannelId,\n    feeBaseMSats,\n    feeProportionalMillionths,\n    cltvExpiryDelta\n  let routesBuffer = bech32.fromWordsUnsafe(words)\n  while (routesBuffer.length > 0) {\n    pubkey = hex.encode(routesBuffer.slice(0, 33)) // 33 bytes\n    shortChannelId = hex.encode(routesBuffer.slice(33, 41)) // 8 bytes\n    feeBaseMSats = parseInt(hex.encode(routesBuffer.slice(41, 45)), 16) // 4 bytes\n    feeProportionalMillionths = parseInt(\n      hex.encode(routesBuffer.slice(45, 49)),\n      16\n    ) // 4 bytes\n    cltvExpiryDelta = parseInt(hex.encode(routesBuffer.slice(49, 51)), 16) // 2 bytes\n\n    routesBuffer = routesBuffer.slice(51)\n\n    routes.push({\n      pubkey,\n      short_channel_id: shortChannelId,\n      fee_base_msat: feeBaseMSats,\n      fee_proportional_millionths: feeProportionalMillionths,\n      cltv_expiry_delta: cltvExpiryDelta\n    })\n  }\n  return routes\n}\n\nfunction featureBitsParser(words) {\n  const bools = words\n    .slice()\n    .reverse()\n    .map(word => [\n      !!(word & 0b1),\n      !!(word & 0b10),\n      !!(word & 0b100),\n      !!(word & 0b1000),\n      !!(word & 0b10000)\n    ])\n    .reduce((finalArr, itemArr) => finalArr.concat(itemArr), [])\n  while (bools.length < FEATUREBIT_ORDER.length * 2) {\n    bools.push(false)\n  }\n\n  const featureBits = {}\n\n  FEATUREBIT_ORDER.forEach((featureName, index) => {\n    let status\n    if (bools[index * 2]) {\n      status = 'required'\n    } else if (bools[index * 2 + 1]) {\n      status = 'supported'\n    } else {\n      status = 'unsupported'\n    }\n    featureBits[featureName] = status\n  })\n\n  const extraBits = bools.slice(FEATUREBIT_ORDER.length * 2)\n  featureBits.extra_bits = {\n    start_bit: FEATUREBIT_ORDER.length * 2,\n    bits: extraBits,\n    has_required: extraBits.reduce(\n      (result, bit, index) =>\n        index % 2 !== 0 ? result || false : result || bit,\n      false\n    )\n  }\n\n  return featureBits\n}\n\nfunction hrpToMillisat(hrpString, outputString) {\n  let divisor, value\n  if (hrpString.slice(-1).match(/^[munp]$/)) {\n    divisor = hrpString.slice(-1)\n    value = hrpString.slice(0, -1)\n  } else if (hrpString.slice(-1).match(/^[^munp0-9]$/)) {\n    throw new Error('Not a valid multiplier for the amount')\n  } else {\n    value = hrpString\n  }\n\n  if (!value.match(/^\\d+$/))\n    throw new Error('Not a valid human readable amount')\n\n  const valueBN = BigInt(value)\n\n  const millisatoshisBN = divisor\n    ? (valueBN * MILLISATS_PER_BTC) / DIVISORS[divisor]\n    : valueBN * MILLISATS_PER_BTC\n\n  if (\n    (divisor === 'p' && !(valueBN % BigInt(10) === BigInt(0))) ||\n    millisatoshisBN > MAX_MILLISATS\n  ) {\n    throw new Error('Amount is outside of valid range')\n  }\n\n  return outputString ? millisatoshisBN.toString() : millisatoshisBN\n}\n\n// decode will only have extra comments that aren't covered in encode comments.\n// also if anything is hard to read I'll comment.\nfunction decode(paymentRequest, network) {\n  if (typeof paymentRequest !== 'string')\n    throw new Error('Lightning Payment Request must be string')\n  if (paymentRequest.slice(0, 2).toLowerCase() !== 'ln')\n    throw new Error('Not a proper lightning payment request')\n\n  const sections = []\n  const decoded = bech32.decode(paymentRequest, Number.MAX_SAFE_INTEGER)\n  paymentRequest = paymentRequest.toLowerCase()\n  const prefix = decoded.prefix\n  let words = decoded.words\n  let letters = paymentRequest.slice(prefix.length + 1)\n  let sigWords = words.slice(-104)\n  words = words.slice(0, -104)\n\n  // Without reverse lookups, can't say that the multipier at the end must\n  // have a number before it, so instead we parse, and if the second group\n  // doesn't have anything, there's a good chance the last letter of the\n  // coin type got captured by the third group, so just re-regex without\n  // the number.\n  let prefixMatches = prefix.match(/^ln(\\S+?)(\\d*)([a-zA-Z]?)$/)\n  if (prefixMatches && !prefixMatches[2])\n    prefixMatches = prefix.match(/^ln(\\S+)$/)\n  if (!prefixMatches) {\n    throw new Error('Not a proper lightning payment request')\n  }\n\n  // \"ln\" section\n  sections.push({\n    name: 'lightning_network',\n    letters: 'ln'\n  })\n\n  // \"bc\" section\n  const bech32Prefix = prefixMatches[1]\n  let coinNetwork\n  if (!network) {\n    switch (bech32Prefix) {\n      case DEFAULTNETWORK.bech32:\n        coinNetwork = DEFAULTNETWORK\n        break\n      case TESTNETWORK.bech32:\n        coinNetwork = TESTNETWORK\n        break\n      case REGTESTNETWORK.bech32:\n        coinNetwork = REGTESTNETWORK\n        break\n      case SIMNETWORK.bech32:\n        coinNetwork = SIMNETWORK\n        break\n    }\n  } else {\n    if (\n      network.bech32 === undefined ||\n      network.pubKeyHash === undefined ||\n      network.scriptHash === undefined ||\n      !Array.isArray(network.validWitnessVersions)\n    )\n      throw new Error('Invalid network')\n    coinNetwork = network\n  }\n  if (!coinNetwork || coinNetwork.bech32 !== bech32Prefix) {\n    throw new Error('Unknown coin bech32 prefix')\n  }\n  sections.push({\n    name: 'coin_network',\n    letters: bech32Prefix,\n    value: coinNetwork\n  })\n\n  // amount section\n  const value = prefixMatches[2]\n  let millisatoshis\n  if (value) {\n    const divisor = prefixMatches[3]\n    millisatoshis = hrpToMillisat(value + divisor, true)\n    sections.push({\n      name: 'amount',\n      letters: prefixMatches[2] + prefixMatches[3],\n      value: millisatoshis\n    })\n  } else {\n    millisatoshis = null\n  }\n\n  // \"1\" separator\n  sections.push({\n    name: 'separator',\n    letters: '1'\n  })\n\n  // timestamp\n  const timestamp = wordsToIntBE(words.slice(0, 7))\n  words = words.slice(7) // trim off the left 7 words\n  sections.push({\n    name: 'timestamp',\n    letters: letters.slice(0, 7),\n    value: timestamp\n  })\n  letters = letters.slice(7)\n\n  let tagName, parser, tagLength, tagWords\n  // we have no tag count to go on, so just keep hacking off words\n  // until we have none.\n  while (words.length > 0) {\n    const tagCode = words[0].toString()\n    tagName = TAGNAMES[tagCode] || 'unknown_tag'\n    parser = TAGPARSERS[tagCode] || getUnknownParser(tagCode)\n    words = words.slice(1)\n\n    tagLength = wordsToIntBE(words.slice(0, 2))\n    words = words.slice(2)\n\n    tagWords = words.slice(0, tagLength)\n    words = words.slice(tagLength)\n\n    sections.push({\n      name: tagName,\n      tag: letters[0],\n      letters: letters.slice(0, 1 + 2 + tagLength),\n      value: parser(tagWords) // see: parsers for more comments\n    })\n    letters = letters.slice(1 + 2 + tagLength)\n  }\n\n  // signature\n  sections.push({\n    name: 'signature',\n    letters: letters.slice(0, 104),\n    value: hex.encode(bech32.fromWordsUnsafe(sigWords))\n  })\n  letters = letters.slice(104)\n\n  // checksum\n  sections.push({\n    name: 'checksum',\n    letters: letters\n  })\n\n  let result = {\n    paymentRequest,\n    sections,\n\n    get expiry() {\n      let exp = sections.find(s => s.name === 'expiry')\n      if (exp) return getValue('timestamp') + exp.value\n    },\n\n    get route_hints() {\n      return sections.filter(s => s.name === 'route_hint').map(s => s.value)\n    }\n  }\n\n  for (let name in TAGCODES) {\n    if (name === 'route_hint') {\n      // route hints can be multiple, so this won't work for them\n      continue\n    }\n\n    Object.defineProperty(result, name, {\n      get() {\n        return getValue(name)\n      }\n    })\n  }\n\n  return result\n\n  function getValue(name) {\n    let section = sections.find(s => s.name === name)\n    return section ? section.value : undefined\n  }\n}\n\nmodule.exports = {\n  decode,\n  hrpToMillisat\n}\n","// src/index.ts\nimport debug2 from \"debug\";\nimport EventEmitter7 from \"eventemitter3\";\n\n// src/events/dedup.ts\nfunction dedup(event1, event2) {\n  if (event1.created_at > event2.created_at) {\n    return event1;\n  }\n  return event2;\n}\n\n// src/events/index.ts\nimport EventEmitter2 from \"eventemitter3\";\nimport { getEventHash } from \"nostr-tools\";\n\n// src/zap/index.ts\nimport { bech32 } from \"@scure/base\";\nimport EventEmitter from \"eventemitter3\";\nimport { nip57 } from \"nostr-tools\";\nvar Zap = class extends EventEmitter {\n  ndk;\n  zappedEvent;\n  zappedUser;\n  constructor(args) {\n    super();\n    this.ndk = args.ndk;\n    this.zappedEvent = args.zappedEvent;\n    this.zappedUser = args.zappedUser || this.ndk.getUser({ hexpubkey: this.zappedEvent.pubkey });\n  }\n  async getZapEndpoint() {\n    let lud06;\n    let lud16;\n    let zapEndpoint;\n    let zapEndpointCallback;\n    if (this.zappedEvent) {\n      const zapTag = (await this.zappedEvent.getMatchingTags(\"zap\"))[0];\n      if (zapTag) {\n        switch (zapTag[2]) {\n          case \"lud06\":\n            lud06 = zapTag[1];\n            break;\n          case \"lud16\":\n            lud16 = zapTag[1];\n            break;\n          default:\n            throw new Error(`Unknown zap tag ${zapTag}`);\n        }\n      }\n    }\n    if (this.zappedUser && !lud06 && !lud16) {\n      if (!this.zappedUser.profile) {\n        await this.zappedUser.fetchProfile();\n      }\n      lud06 = (this.zappedUser.profile || {}).lud06;\n      lud16 = (this.zappedUser.profile || {}).lud16;\n    }\n    if (lud16) {\n      const [name, domain] = lud16.split(\"@\");\n      zapEndpoint = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else if (lud06) {\n      const { words } = bech32.decode(lud06, 1e3);\n      const data = bech32.fromWords(words);\n      const utf8Decoder = new TextDecoder(\"utf-8\");\n      zapEndpoint = utf8Decoder.decode(data);\n    }\n    if (!zapEndpoint) {\n      throw new Error(\"No zap endpoint found\");\n    }\n    const response = await fetch(zapEndpoint);\n    const body = await response.json();\n    if (body?.allowsNostr && (body?.nostrPubkey || body?.nostrPubKey)) {\n      zapEndpointCallback = body.callback;\n    }\n    return zapEndpointCallback;\n  }\n  async createZapRequest(amount, comment, extraTags) {\n    const zapEndpoint = await this.getZapEndpoint();\n    if (!zapEndpoint) {\n      throw new Error(\"No zap endpoint found\");\n    }\n    if (!this.zappedEvent)\n      throw new Error(\"No zapped event found\");\n    const zapRequest = nip57.makeZapRequest({\n      profile: this.zappedUser.hexpubkey(),\n      // set the event to null since nostr-tools doesn't support nip-33 zaps\n      event: null,\n      amount,\n      comment: comment || \"\",\n      relays: [\n        \"wss://nos.lol\",\n        \"wss://relay.nostr.band\",\n        \"wss://relay.f7z.io\",\n        \"wss://relay.damus.io\",\n        \"wss://nostr.mom\",\n        \"wss://no.str.cr\"\n      ]\n      // TODO: fix this\n    });\n    if (this.zappedEvent) {\n      const tag = this.zappedEvent.tagReference();\n      if (tag) {\n        zapRequest.tags.push(tag);\n      }\n    }\n    zapRequest.tags.push([\"lnurl\", zapEndpoint]);\n    const zapRequestEvent = new NDKEvent(this.ndk, zapRequest);\n    if (extraTags) {\n      zapRequestEvent.tags = zapRequestEvent.tags.concat(extraTags);\n    }\n    await zapRequestEvent.sign();\n    const zapRequestNostrEvent = await zapRequestEvent.toNostrEvent();\n    const response = await fetch(\n      `${zapEndpoint}?` + new URLSearchParams({\n        amount: amount.toString(),\n        nostr: JSON.stringify(zapRequestNostrEvent)\n      })\n    );\n    const body = await response.json();\n    return body.pr;\n  }\n};\n\n// src/events/content-tagger.ts\nimport { nip19 } from \"nostr-tools\";\nfunction generateContentTags(content, tags = []) {\n  const tagRegex = /(@|nostr:)(npub|nprofile|note|nevent)[a-zA-Z0-9]+/g;\n  content = content.replace(tagRegex, (tag) => {\n    try {\n      const entity = tag.split(/(@|nostr:)/)[2];\n      const { type, data } = nip19.decode(entity);\n      let t;\n      switch (type) {\n        case \"npub\":\n          t = [\"p\", data];\n          break;\n        case \"nprofile\":\n          t = [\"p\", data.pubkey];\n          break;\n        case \"nevent\":\n          t = [\"e\", data.id];\n          break;\n        case \"note\":\n          t = [\"e\", data];\n          break;\n        default:\n          return tag;\n      }\n      if (!tags.find((t2) => t2[0] === t2[0] && t2[1] === t2[1])) {\n        tags.push(t);\n      }\n      return `nostr:${entity}`;\n    } catch (error) {\n      return tag;\n    }\n  });\n  return { content, tags };\n}\n\n// src/events/kind.ts\nfunction isReplaceable() {\n  if (this.kind === void 0)\n    throw new Error(\"Kind not set\");\n  return this.kind >= 1e4 && this.kind < 2e4;\n}\nfunction isParamReplaceable() {\n  if (this.kind === void 0)\n    throw new Error(\"Kind not set\");\n  return this.kind >= 3e4 && this.kind < 4e4;\n}\n\n// src/user/index.ts\nimport { nip05, nip19 as nip193 } from \"nostr-tools\";\n\n// src/user/follows.ts\nimport { nip19 as nip192 } from \"nostr-tools\";\nasync function follows() {\n  if (!this.ndk)\n    throw new Error(\"NDK not set\");\n  const contactListEvents = await this.ndk.fetchEvents({\n    kinds: [3],\n    authors: [this.hexpubkey()]\n  });\n  if (contactListEvents) {\n    const npubs = /* @__PURE__ */ new Set();\n    contactListEvents.forEach((event) => {\n      event.tags.forEach((tag) => {\n        if (tag[0] === \"p\") {\n          try {\n            const npub = nip192.npubEncode(tag[1]);\n            npubs.add(npub);\n          } catch (e) {\n          }\n        }\n      });\n    });\n    return [...npubs].reduce((acc, npub) => {\n      const user = new NDKUser({ npub });\n      user.ndk = this.ndk;\n      acc.add(user);\n      return acc;\n    }, /* @__PURE__ */ new Set());\n  }\n  return /* @__PURE__ */ new Set();\n}\n\n// src/user/profile.ts\nfunction mergeEvent(event, profile) {\n  const payload = JSON.parse(event.content);\n  if (payload.name)\n    profile.name = payload.name;\n  if (payload.display_name)\n    profile.displayName = payload.display_name;\n  if (payload.displayName)\n    profile.displayName = payload.displayName;\n  if (payload.image)\n    profile.image = payload.image;\n  if (payload.picture)\n    profile.image = payload.picture;\n  if (payload.banner)\n    profile.banner = payload.banner;\n  if (payload.bio)\n    profile.bio = payload.bio;\n  if (payload.nip05)\n    profile.nip05 = payload.nip05;\n  if (payload.lud06)\n    profile.lud06 = payload.lud06;\n  if (payload.lud16)\n    profile.lud16 = payload.lud16;\n  if (payload.about)\n    profile.about = payload.about;\n  if (payload.zapService)\n    profile.zapService = payload.zapService;\n  return profile;\n}\n\n// src/user/index.ts\nvar NDKUser = class {\n  ndk;\n  profile;\n  npub = \"\";\n  relayUrls = [];\n  constructor(opts) {\n    if (opts.npub)\n      this.npub = opts.npub;\n    if (opts.hexpubkey) {\n      this.npub = nip193.npubEncode(opts.hexpubkey);\n    }\n    if (opts.relayUrls) {\n      this.relayUrls = opts.relayUrls;\n    }\n  }\n  static async fromNip05(nip05Id) {\n    const profile = await nip05.queryProfile(nip05Id);\n    if (profile) {\n      return new NDKUser({\n        hexpubkey: profile.pubkey,\n        relayUrls: profile.relays\n      });\n    }\n  }\n  hexpubkey() {\n    return nip193.decode(this.npub).data;\n  }\n  async fetchProfile(opts) {\n    if (!this.ndk)\n      throw new Error(\"NDK not set\");\n    if (!this.profile)\n      this.profile = {};\n    const setMetadataEvents = await this.ndk.fetchEvents(\n      {\n        kinds: [0],\n        authors: [this.hexpubkey()]\n      },\n      opts\n    );\n    if (setMetadataEvents) {\n      const sortedSetMetadataEvents = Array.from(setMetadataEvents).sort(\n        (a, b) => a.created_at - b.created_at\n      );\n      sortedSetMetadataEvents.forEach((event) => {\n        try {\n          this.profile = mergeEvent(event, this.profile);\n        } catch (e) {\n        }\n      });\n    }\n    return setMetadataEvents;\n  }\n  /**\n   * Returns a set of users that this user follows.\n   */\n  follows = follows.bind(this);\n  async relayList() {\n    if (!this.ndk)\n      throw new Error(\"NDK not set\");\n    const relayListEvents = await this.ndk.fetchEvents({\n      kinds: [10002],\n      authors: [this.hexpubkey()]\n    });\n    if (relayListEvents) {\n      return relayListEvents;\n    }\n    return /* @__PURE__ */ new Set();\n  }\n};\n\n// src/events/nip04.ts\nasync function encrypt(recipient, signer) {\n  if (!signer) {\n    if (!this.ndk) {\n      throw new Error(\"No signer available\");\n    }\n    await this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!recipient) {\n    const pTags = this.getMatchingTags(\"p\");\n    if (pTags.length !== 1) {\n      throw new Error(\"No recipient could be determined and no explicit recipient was provided\");\n    }\n    recipient = new NDKUser({ hexpubkey: pTags[0][1] });\n    recipient.ndk = this.ndk;\n  }\n  this.content = await signer.encrypt(recipient, this.content);\n}\nasync function decrypt(sender, signer) {\n  if (!signer) {\n    if (!this.ndk) {\n      throw new Error(\"No signer available\");\n    }\n    await this.ndk.assertSigner();\n    signer = this.ndk.signer;\n  }\n  if (!sender) {\n    sender = this.author();\n  }\n  this.content = await signer.decrypt(sender, this.content);\n}\n\n// src/events/nip19.ts\nimport { nip19 as nip194 } from \"nostr-tools\";\nfunction encode() {\n  if (this.isParamReplaceable()) {\n    return nip194.naddrEncode({\n      kind: this.kind,\n      pubkey: this.pubkey,\n      identifier: this.replaceableDTag()\n    });\n  } else {\n    return nip194.noteEncode(this.tagId());\n  }\n}\n\n// src/events/index.ts\nvar NDKEvent = class extends EventEmitter2 {\n  ndk;\n  created_at;\n  content = \"\";\n  tags = [];\n  kind;\n  id = \"\";\n  sig;\n  pubkey = \"\";\n  constructor(ndk, event) {\n    super();\n    this.ndk = ndk;\n    this.created_at = event?.created_at;\n    this.content = event?.content || \"\";\n    this.tags = event?.tags || [];\n    this.id = event?.id || \"\";\n    this.sig = event?.sig;\n    this.pubkey = event?.pubkey || \"\";\n    this.kind = event?.kind;\n  }\n  /**\n   * Returns the event as is.\n   */\n  rawEvent() {\n    return {\n      created_at: this.created_at,\n      content: this.content,\n      tags: this.tags,\n      kind: this.kind,\n      pubkey: this.pubkey,\n      id: this.id,\n      sig: this.sig\n    };\n  }\n  /**\n   * Returns an NDKUser for the author of the event.\n   */\n  author() {\n    const user = new NDKUser({ hexpubkey: this.pubkey });\n    user.ndk = this.ndk;\n    return user;\n  }\n  /**\n   * Return a NostrEvent object, trying to fill in missing fields\n   * when possible, adding tags when necessary.\n   */\n  async toNostrEvent(pubkey) {\n    if (!pubkey && this.pubkey === \"\") {\n      const user = await this.ndk?.signer?.user();\n      this.pubkey = user?.hexpubkey() || \"\";\n    }\n    if (!this.created_at)\n      this.created_at = Math.floor(Date.now() / 1e3);\n    const nostrEvent = this.rawEvent();\n    const { content, tags } = this.generateTags();\n    nostrEvent.content = content || \"\";\n    nostrEvent.tags = tags;\n    try {\n      this.id = getEventHash(nostrEvent);\n    } catch (e) {\n    }\n    if (this.id)\n      nostrEvent.id = this.id;\n    if (this.sig)\n      nostrEvent.sig = this.sig;\n    return nostrEvent;\n  }\n  isReplaceable = isReplaceable.bind(this);\n  isParamReplaceable = isParamReplaceable.bind(this);\n  encode = encode.bind(this);\n  encrypt = encrypt.bind(this);\n  decrypt = decrypt.bind(this);\n  /**\n   * Get all tags with the given name\n   */\n  getMatchingTags(tagName) {\n    return this.tags.filter((tag) => tag[0] === tagName);\n  }\n  async toString() {\n    return await this.toNostrEvent();\n  }\n  /**\n   * Sign the event if a signer is present.\n   *\n   * It will generate tags.\n   * Repleacable events will have their created_at field set to the current time.\n   */\n  async sign(signer) {\n    signer || this.ndk?.assertSigner();\n    await this.generateTags();\n    if (this.isReplaceable()) {\n      this.created_at = Math.floor(Date.now() / 1e3);\n    }\n    const nostrEvent = await this.toNostrEvent();\n    const _signer = signer || this.ndk?.signer;\n    this.sig = await _signer.sign(nostrEvent);\n  }\n  async publish(relaySet) {\n    if (!this.sig)\n      await this.sign();\n    return this.ndk?.publish(this, relaySet);\n  }\n  generateTags() {\n    let tags = [];\n    const g = generateContentTags(this.content, this.tags);\n    const content = g.content;\n    tags = g.tags;\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTag = this.getMatchingTags(\"d\")[0];\n      if (!dTag) {\n        const str = [...Array(16)].map(() => Math.random().toString(36)[2]).join(\"\");\n        tags.push([\"d\", str]);\n      }\n    }\n    return { content: content || \"\", tags };\n  }\n  /**\n   * @returns the `d` tag of a parameterized replaceable event\n   */\n  replaceableDTag() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTag = this.getMatchingTags(\"d\")[0];\n      const dTagId = dTag ? dTag[1] : \"\";\n      return dTagId;\n    }\n    throw new Error(\"Event is not a parameterized replaceable event\");\n  }\n  /**\n   * @returns the id of the event, or if it's a parameterized event, the id of the event with the d tag\n   */\n  tagId() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      const dTagId = this.replaceableDTag();\n      return `${this.kind}:${this.pubkey}:${dTagId}`;\n    }\n    return this.id;\n  }\n  /**\n   * Get the tag that can be used to reference this event from another event\n   * @example\n   *     event = new NDKEvent(ndk, { kind: 30000, pubkey: 'pubkey', tags: [ [\"d\", \"d-code\"] ] });\n   *     event.tagReference(); // [\"a\", \"30000:pubkey:d-code\"]\n   *\n   *     event = new NDKEvent(ndk, { kind: 1, pubkey: 'pubkey', id: \"eventid\" });\n   *     event.tagReference(); // [\"e\", \"eventid\"]\n   */\n  tagReference() {\n    if (this.kind && this.kind >= 3e4 && this.kind <= 4e4) {\n      return [\"a\", this.tagId()];\n    }\n    return [\"e\", this.tagId()];\n  }\n  /**\n   * Create a zap request for an existing event\n   *\n   * @param amount The amount to zap in millisatoshis\n   * @param comment A comment to add to the zap request\n   * @param extraTags Extra tags to add to the zap request\n   */\n  async zap(amount, comment, extraTags) {\n    if (!this.ndk)\n      throw new Error(\"No NDK instance found\");\n    this.ndk.assertSigner();\n    const zap = new Zap({\n      ndk: this.ndk,\n      zappedEvent: this\n    });\n    const paymentRequest = await zap.createZapRequest(amount, comment, extraTags);\n    return paymentRequest;\n  }\n};\n\n// src/relay/pool/index.ts\nimport EventEmitter4 from \"eventemitter3\";\n\n// src/relay/index.ts\nimport EventEmitter3 from \"eventemitter3\";\nimport { relayInit } from \"nostr-tools\";\nimport \"websocket-polyfill\";\nimport debug from \"debug\";\nvar NDKRelayStatus = /* @__PURE__ */ ((NDKRelayStatus2) => {\n  NDKRelayStatus2[NDKRelayStatus2[\"CONNECTING\"] = 0] = \"CONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"CONNECTED\"] = 1] = \"CONNECTED\";\n  NDKRelayStatus2[NDKRelayStatus2[\"DISCONNECTING\"] = 2] = \"DISCONNECTING\";\n  NDKRelayStatus2[NDKRelayStatus2[\"DISCONNECTED\"] = 3] = \"DISCONNECTED\";\n  NDKRelayStatus2[NDKRelayStatus2[\"RECONNECTING\"] = 4] = \"RECONNECTING\";\n  return NDKRelayStatus2;\n})(NDKRelayStatus || {});\nvar NDKRelay = class extends EventEmitter3 {\n  url;\n  scores;\n  relay;\n  _status;\n  connectedAt;\n  _connectionStats = { attempts: 0, success: 0, durations: [] };\n  complaining = false;\n  debug;\n  /**\n   * Active subscriptions this relay is connected to\n   */\n  activeSubscriptions = /* @__PURE__ */ new Set();\n  constructor(url) {\n    super();\n    this.url = url;\n    this.relay = relayInit(url);\n    this.scores = /* @__PURE__ */ new Map();\n    this._status = 3 /* DISCONNECTED */;\n    this.debug = debug(`ndk:relay:${url}`);\n    this.relay.on(\"connect\", () => {\n      this.updateConnectionStats.connected();\n      this.emit(\"connect\");\n      this._status = 1 /* CONNECTED */;\n    });\n    this.relay.on(\"disconnect\", () => {\n      this.updateConnectionStats.disconnected();\n      this.emit(\"disconnect\");\n      if (this._status === 1 /* CONNECTED */) {\n        this._status = 3 /* DISCONNECTED */;\n        this.handleReconnection();\n      }\n    });\n    this.relay.on(\"notice\", (notice) => this.handleNotice(notice));\n  }\n  /**\n   * Evaluates the connection stats to determine if the relay is flapping.\n   */\n  isFlapping() {\n    const durations = this._connectionStats.durations;\n    if (durations.length < 10)\n      return false;\n    const sum = durations.reduce((a, b) => a + b, 0);\n    const avg = sum / durations.length;\n    const variance = durations.map((x) => Math.pow(x - avg, 2)).reduce((a, b) => a + b, 0) / durations.length;\n    const stdDev = Math.sqrt(variance);\n    const isFlapping = stdDev < 1e3;\n    return isFlapping;\n  }\n  /**\n   * Called when the relay is unexpectedly disconnected.\n   */\n  handleReconnection() {\n    if (this.isFlapping()) {\n      this.emit(\"flapping\", this, this._connectionStats);\n    }\n    if (this.connectedAt && Date.now() - this.connectedAt < 5e3) {\n      setTimeout(() => this.connect(), 6e4);\n    } else {\n      this.connect();\n    }\n  }\n  get status() {\n    return this._status;\n  }\n  /**\n   * Connects to the relay.\n   */\n  async connect() {\n    try {\n      this.updateConnectionStats.attempt();\n      this._status = 0 /* CONNECTING */;\n      await this.relay.connect();\n    } catch (e) {\n      this.debug(\"Failed to connect\", e);\n      this._status = 3 /* DISCONNECTED */;\n      throw e;\n    }\n  }\n  /**\n   * Disconnects from the relay.\n   */\n  disconnect() {\n    this._status = 2 /* DISCONNECTING */;\n    this.relay.close();\n  }\n  async handleNotice(notice) {\n    if (notice.includes(\"oo many\") || notice.includes(\"aximum\")) {\n      this.disconnect();\n      setTimeout(() => this.connect(), 2e3);\n      console.log(this.relay.url, \"Relay complaining?\", notice);\n    }\n    this.emit(\"notice\", this, notice);\n  }\n  /**\n   * Subscribes to a subscription.\n   */\n  subscribe(subscription) {\n    const { filter } = subscription;\n    const sub = this.relay.sub([filter], {\n      id: subscription.subId\n    });\n    this.debug(`Subscribed to ${JSON.stringify(filter)}`);\n    sub.on(\"event\", (event) => {\n      const e = new NDKEvent(void 0, event);\n      subscription.eventReceived(e, this);\n    });\n    sub.on(\"eose\", () => {\n      subscription.eoseReceived(this);\n    });\n    this.activeSubscriptions.add(subscription);\n    subscription.on(\"close\", () => {\n      this.activeSubscriptions.delete(subscription);\n    });\n    return sub;\n  }\n  /**\n   * Publishes an event to the relay.\n   */\n  async publish(event) {\n    const nostrEvent = await event.toNostrEvent();\n    const a = this.relay.publish(nostrEvent);\n    a.on(\"failed\", (err) => {\n      this.debug(\"Publish failed\", err, event.rawEvent());\n    });\n    a.on(\"ok\", () => {\n      this.debug(\"Publish ok\", event.rawEvent());\n    });\n    this.debug(`Published event ${event.id}`, event.rawEvent());\n  }\n  /**\n   * Called when this relay has responded with an event but\n   * wasn't the fastest one.\n   * @param timeDiffInMs The time difference in ms between the fastest and this relay in milliseconds\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  scoreSlowerEvent(timeDiffInMs) {\n  }\n  /**\n   * Utility functions to update the connection stats.\n   */\n  updateConnectionStats = {\n    connected: () => {\n      this._connectionStats.success++;\n      this._connectionStats.connectedAt = Date.now();\n    },\n    disconnected: () => {\n      if (this._connectionStats.connectedAt) {\n        this._connectionStats.durations.push(\n          Date.now() - this._connectionStats.connectedAt\n        );\n        if (this._connectionStats.durations.length > 100) {\n          this._connectionStats.durations.shift();\n        }\n      }\n      this._connectionStats.connectedAt = void 0;\n    },\n    attempt: () => {\n      this._connectionStats.attempts++;\n    }\n  };\n  /**\n   * Returns the connection stats.\n   */\n  get connectionStats() {\n    return this._connectionStats;\n  }\n};\n\n// src/relay/pool/index.ts\nvar NDKPool = class extends EventEmitter4 {\n  relays = /* @__PURE__ */ new Map();\n  debug;\n  constructor(relayUrls = [], ndk) {\n    super();\n    this.debug = ndk.debug.extend(\"pool\");\n    for (const relayUrl of relayUrls) {\n      const relay = new NDKRelay(relayUrl);\n      relay.on(\"notice\", (relay2, notice) => this.emit(\"notice\", relay2, notice));\n      relay.on(\"connect\", () => this.handleRelayConnect(relayUrl));\n      relay.on(\"disconnect\", () => this.emit(\"relay:disconnect\", relay));\n      relay.on(\"flapping\", () => this.handleFlapping(relay));\n      this.relays.set(relayUrl, relay);\n    }\n  }\n  handleRelayConnect(relayUrl) {\n    this.debug(`Relay ${relayUrl} connected`);\n    this.emit(\"relay:connect\", this.relays.get(relayUrl));\n    if (this.stats().connected === this.relays.size) {\n      this.emit(\"connect\");\n    }\n  }\n  /**\n   * Attempts to establish a connection to each relay in the pool.\n   *\n   * @async\n   * @param {number} [timeoutMs] - Optional timeout in milliseconds for each connection attempt.\n   * @returns {Promise<void>} A promise that resolves when all connection attempts have completed.\n   * @throws {Error} If any of the connection attempts result in an error or timeout.\n   */\n  async connect(timeoutMs) {\n    const promises = [];\n    this.debug(\n      `Connecting to ${this.relays.size} relays${timeoutMs ? `, timeout ${timeoutMs}...` : \"\"}`\n    );\n    for (const relay of this.relays.values()) {\n      if (timeoutMs) {\n        const timeoutPromise = new Promise((_, reject) => {\n          setTimeout(() => reject(`Timed out after ${timeoutMs}ms`), timeoutMs);\n        });\n        promises.push(\n          Promise.race([relay.connect(), timeoutPromise]).catch((e) => {\n            this.debug(`Failed to connect to relay ${relay.url}: ${e}`);\n          })\n        );\n      } else {\n        promises.push(relay.connect());\n      }\n    }\n    await Promise.all(promises);\n  }\n  handleFlapping(relay) {\n    this.debug(`Relay ${relay.url} is flapping`);\n    this.relays.delete(relay.url);\n    this.emit(\"flapping\", relay);\n  }\n  size() {\n    return this.relays.size;\n  }\n  /**\n   * Returns the status of each relay in the pool.\n   * @returns {NDKPoolStats} An object containing the number of relays in each status.\n   */\n  stats() {\n    const stats = {\n      total: 0,\n      connected: 0,\n      disconnected: 0,\n      connecting: 0\n    };\n    for (const relay of this.relays.values()) {\n      stats.total++;\n      if (relay.status === 1 /* CONNECTED */) {\n        stats.connected++;\n      } else if (relay.status === 3 /* DISCONNECTED */) {\n        stats.disconnected++;\n      } else if (relay.status === 0 /* CONNECTING */) {\n        stats.connecting++;\n      }\n    }\n    return stats;\n  }\n};\n\n// src/relay/sets/index.ts\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\n\n// src/subscription/index.ts\nimport EventEmitter5 from \"eventemitter3\";\nimport { matchFilter } from \"nostr-tools\";\nvar NDKSubscriptionCacheUsage = /* @__PURE__ */ ((NDKSubscriptionCacheUsage2) => {\n  NDKSubscriptionCacheUsage2[\"ONLY_CACHE\"] = \"ONLY_CACHE\";\n  NDKSubscriptionCacheUsage2[\"CACHE_FIRST\"] = \"CACHE_FIRST\";\n  NDKSubscriptionCacheUsage2[\"PARALLEL\"] = \"PARALLEL\";\n  NDKSubscriptionCacheUsage2[\"ONLY_RELAY\"] = \"ONLY_RELAY\";\n  return NDKSubscriptionCacheUsage2;\n})(NDKSubscriptionCacheUsage || {});\nvar defaultOpts = {\n  closeOnEose: true,\n  cacheUsage: \"CACHE_FIRST\" /* CACHE_FIRST */,\n  groupable: true,\n  groupableDelay: 100\n};\nvar NDKSubscription = class extends EventEmitter5 {\n  subId;\n  filter;\n  opts;\n  relaySet;\n  ndk;\n  relaySubscriptions;\n  debug;\n  constructor(ndk, filter, opts, relaySet, subId) {\n    super();\n    this.ndk = ndk;\n    this.subId = subId || Math.floor(Math.random() * 9999991e3).toString();\n    this.filter = filter;\n    this.relaySet = relaySet;\n    this.opts = { ...defaultOpts, ...opts || {} };\n    this.relaySubscriptions = /* @__PURE__ */ new Map();\n    this.debug = ndk.debug.extend(\"subscription\");\n    if (this.opts.cacheUsage === \"ONLY_CACHE\" /* ONLY_CACHE */ && !this.opts.closeOnEose) {\n      throw new Error(\"Cannot use cache-only options with a persistent subscription\");\n    }\n  }\n  /**\n   * Calculates the groupable ID for this subscription.\n   *\n   * @returns The groupable ID, or null if the subscription is not groupable.\n   */\n  groupableId() {\n    if (!this.opts?.groupable) {\n      return null;\n    }\n    const hasKind = (this.filter.kinds?.length || 0) > 0;\n    const noTimeConstraints = !this.filter.since && !this.filter.until;\n    const noLimit = !this.filter.limit;\n    if (hasKind && noTimeConstraints && noLimit) {\n      let id = this.filter.kinds.join(\",\");\n      const keys = Object.keys(this.filter || {}).sort().join(\"-\");\n      id += `-${keys}`;\n      return id;\n    }\n    return null;\n  }\n  shouldQueryCache() {\n    return this.opts?.cacheUsage !== \"ONLY_RELAY\" /* ONLY_RELAY */;\n  }\n  shouldQueryRelays() {\n    return this.opts?.cacheUsage !== \"ONLY_CACHE\" /* ONLY_CACHE */;\n  }\n  /**\n   * Start the subscription. This is the main method that should be called\n   * after creating a subscription.\n   */\n  async start() {\n    let cachePromise;\n    if (this.shouldQueryCache()) {\n      cachePromise = this.startWithCache();\n      const shouldWaitForCache = this.ndk.cacheAdapter?.locking && this.shouldQueryRelays() && this.opts?.cacheUsage !== \"PARALLEL\" /* PARALLEL */;\n      if (shouldWaitForCache) {\n        this.debug(\"waiting for cache to finish\");\n        await cachePromise;\n        if (this.eventFirstSeen.size > 0) {\n          this.debug(\"cache hit, skipping relay query\");\n          this.emit(\"eose\", this);\n          return;\n        }\n      }\n    }\n    if (this.shouldQueryRelays()) {\n      this.startWithRelaySet();\n    }\n    return;\n  }\n  stop() {\n    this.relaySubscriptions.forEach((sub) => sub.unsub());\n    this.relaySubscriptions.clear();\n    this.emit(\"close\", this);\n  }\n  async startWithCache() {\n    if (this.ndk.cacheAdapter?.query) {\n      this.debug(\"querying cache\");\n      const promise = this.ndk.cacheAdapter.query(this);\n      if (this.ndk.cacheAdapter.locking) {\n        await promise;\n      }\n    }\n  }\n  startWithRelaySet() {\n    if (!this.relaySet) {\n      this.relaySet = calculateRelaySetFromFilter(this.ndk, this.filter);\n    }\n    if (this.relaySet) {\n      this.debug(\"querying relays\");\n      this.relaySet.subscribe(this);\n    }\n  }\n  // EVENT handling\n  eventFirstSeen = /* @__PURE__ */ new Map();\n  /**\n   * Called when an event is received from a relay or the cache\n   * @param event\n   * @param relay\n   * @param fromCache Whether the event was received from the cache\n   */\n  eventReceived(event, relay, fromCache = false) {\n    if (!fromCache && relay) {\n      const eventAlreadySeen = this.eventFirstSeen.has(event.id);\n      if (eventAlreadySeen) {\n        const timeSinceFirstSeen = Date.now() - (this.eventFirstSeen.get(event.id) || 0);\n        relay.scoreSlowerEvent(timeSinceFirstSeen);\n        this.emit(\"event:dup\", event, relay, timeSinceFirstSeen, this);\n        return;\n      }\n      if (this.ndk.cacheAdapter) {\n        this.ndk.cacheAdapter.setEvent(event, this.filter);\n      }\n      this.eventFirstSeen.set(`${event.id}`, Date.now());\n    } else {\n      this.eventFirstSeen.set(`${event.id}`, 0);\n    }\n    this.emit(\"event\", event, relay, this);\n  }\n  // EOSE handling\n  eosesSeen = /* @__PURE__ */ new Set();\n  eoseTimeout;\n  eoseReceived(relay) {\n    if (this.opts?.closeOnEose) {\n      this.relaySubscriptions.get(relay)?.unsub();\n      this.relaySubscriptions.delete(relay);\n      if (this.relaySubscriptions.size === 0) {\n        this.emit(\"close\", this);\n      }\n    }\n    this.eosesSeen.add(relay);\n    const hasSeenAllEoses = this.eosesSeen.size === this.relaySet?.size();\n    if (hasSeenAllEoses) {\n      this.emit(\"eose\");\n    } else {\n      if (this.eoseTimeout) {\n        clearTimeout(this.eoseTimeout);\n      }\n      this.eoseTimeout = setTimeout(() => {\n        this.emit(\"eose\");\n      }, 500);\n    }\n  }\n};\nvar NDKSubscriptionGroup = class extends NDKSubscription {\n  subscriptions;\n  constructor(ndk, subscriptions) {\n    const debug3 = ndk.debug.extend(\"subscription-group\");\n    const filters = mergeFilters(subscriptions.map((s) => s.filter));\n    super(\n      ndk,\n      filters,\n      subscriptions[0].opts,\n      // TODO: This should be merged\n      subscriptions[0].relaySet\n      // TODO: This should be merged\n    );\n    this.subscriptions = subscriptions;\n    debug3(\"merged filters\", {\n      count: subscriptions.length,\n      mergedFilters: this.filter\n    });\n    this.on(\"event\", this.forwardEvent);\n    this.on(\"event:dup\", this.forwardEventDup);\n    this.on(\"eose\", this.forwardEose);\n    this.on(\"close\", this.forwardClose);\n  }\n  isEventForSubscription(event, subscription) {\n    const { filter } = subscription;\n    if (!filter)\n      return false;\n    return matchFilter(filter, event.rawEvent());\n  }\n  forwardEvent(event, relay) {\n    for (const subscription of this.subscriptions) {\n      if (!this.isEventForSubscription(event, subscription)) {\n        continue;\n      }\n      subscription.emit(\"event\", event, relay, subscription);\n    }\n  }\n  forwardEventDup(event, relay, timeSinceFirstSeen) {\n    for (const subscription of this.subscriptions) {\n      if (!this.isEventForSubscription(event, subscription)) {\n        continue;\n      }\n      subscription.emit(\"event:dup\", event, relay, timeSinceFirstSeen, subscription);\n    }\n  }\n  forwardEose() {\n    for (const subscription of this.subscriptions) {\n      subscription.emit(\"eose\", subscription);\n    }\n  }\n  forwardClose() {\n    for (const subscription of this.subscriptions) {\n      subscription.emit(\"close\", subscription);\n    }\n  }\n};\nfunction mergeFilters(filters) {\n  const result = {};\n  filters.forEach((filter) => {\n    Object.entries(filter).forEach(([key, value]) => {\n      if (Array.isArray(value)) {\n        if (result[key] === void 0) {\n          result[key] = [...value];\n        } else {\n          result[key] = Array.from(/* @__PURE__ */ new Set([...result[key], ...value]));\n        }\n      } else {\n        result[key] = value;\n      }\n    });\n  });\n  return result;\n}\n\n// src/relay/sets/index.ts\nvar NDKRelaySet2 = class {\n  relays;\n  debug;\n  ndk;\n  constructor(relays, ndk) {\n    this.relays = relays;\n    this.ndk = ndk;\n    this.debug = ndk.debug.extend(\"relayset\");\n  }\n  /**\n   * Creates a relay set from a list of relay URLs.\n   *\n   * This is useful for testing in development to pass a local relay\n   * to publish methods.\n   *\n   * @param relayUrls - list of relay URLs to include in this set\n   * @param ndk\n   * @returns NDKRelaySet\n   */\n  static fromRelayUrls(relayUrls, ndk) {\n    const relays = /* @__PURE__ */ new Set();\n    for (const url of relayUrls) {\n      const relay = ndk.pool.relays.get(url);\n      if (relay) {\n        relays.add(relay);\n      }\n    }\n    return new NDKRelaySet2(new Set(relays), ndk);\n  }\n  subscribeOnRelay(relay, subscription) {\n    const sub = relay.subscribe(subscription);\n    subscription.relaySubscriptions.set(relay, sub);\n  }\n  /**\n   * Calculates an ID of this specific combination of relays.\n   */\n  getId() {\n    const urls = Array.from(this.relays).map((r) => r.url);\n    const urlString = urls.sort().join(\",\");\n    return bytesToHex(sha256(urlString));\n  }\n  /**\n   * Add a subscription to this relay set\n   */\n  subscribe(subscription) {\n    const subGroupableId = subscription.groupableId();\n    const groupableId = `${this.getId()}:${subGroupableId}`;\n    if (!groupableId) {\n      this.executeSubscription(subscription);\n      return subscription;\n    }\n    const delayedSubscription = this.ndk.delayedSubscriptions.get(groupableId);\n    if (delayedSubscription) {\n      delayedSubscription.push(subscription);\n    } else {\n      setTimeout(() => {\n        this.executeDelayedSubscription(groupableId);\n      }, subscription.opts.groupableDelay);\n      this.ndk.delayedSubscriptions.set(groupableId, [subscription]);\n    }\n    return subscription;\n  }\n  executeDelayedSubscription(groupableId) {\n    const subscriptions = this.ndk.delayedSubscriptions.get(groupableId);\n    this.ndk.delayedSubscriptions.delete(groupableId);\n    if (subscriptions) {\n      if (subscriptions.length > 1) {\n        this.executeSubscriptions(subscriptions);\n      } else {\n        this.executeSubscription(subscriptions[0]);\n      }\n    }\n  }\n  /**\n   * This function takes a similar group of subscriptions, merges the filters\n   * and sends a single subscription to the relay.\n   */\n  executeSubscriptions(subscriptions) {\n    const ndk = subscriptions[0].ndk;\n    const subGroup = new NDKSubscriptionGroup(ndk, subscriptions);\n    this.executeSubscription(subGroup);\n  }\n  executeSubscription(subscription) {\n    this.debug(\"subscribing\", { filter: subscription.filter });\n    for (const relay of this.relays) {\n      if (relay.status === 1 /* CONNECTED */) {\n        this.subscribeOnRelay(relay, subscription);\n      } else {\n        const connectedListener = () => {\n          this.debug(\"new relay coming online for active subscription\", {\n            relay: relay.url,\n            filter: subscription.filter\n          });\n          this.subscribeOnRelay(relay, subscription);\n        };\n        relay.once(\"connect\", connectedListener);\n        subscription.once(\"close\", () => {\n          relay.removeListener(\"connect\", connectedListener);\n        });\n      }\n    }\n    return subscription;\n  }\n  async publish(event) {\n    this.relays.forEach(async (relay) => {\n      try {\n        await relay.publish(event);\n      } catch (e) {\n      }\n    });\n  }\n  size() {\n    return this.relays.size;\n  }\n};\n\n// src/relay/sets/calculate.ts\nfunction calculateRelaySetFromEvent(ndk, event) {\n  const relays = /* @__PURE__ */ new Set();\n  ndk.pool?.relays.forEach((relay) => relays.add(relay));\n  return new NDKRelaySet2(relays, ndk);\n}\nfunction calculateRelaySetFromFilter(ndk, filter) {\n  const relays = /* @__PURE__ */ new Set();\n  ndk.pool?.relays.forEach((relay) => {\n    if (!relay.complaining) {\n      relays.add(relay);\n    } else {\n      ndk.debug(`Relay ${relay.url} is complaining, not adding to set`);\n    }\n  });\n  return new NDKRelaySet2(relays, ndk);\n}\n\n// src/signers/nip07/index.ts\nvar NDKNip07Signer = class {\n  _userPromise;\n  constructor() {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n  }\n  async blockUntilReady() {\n    const pubkey = await window.nostr?.getPublicKey();\n    if (!pubkey) {\n      throw new Error(\"User rejected access\");\n    }\n    return new NDKUser({ hexpubkey: pubkey });\n  }\n  /**\n   * Getter for the user property.\n   * @returns The NDKUser instance.\n   */\n  async user() {\n    if (!this._userPromise) {\n      this._userPromise = this.blockUntilReady();\n    }\n    return this._userPromise;\n  }\n  /**\n   * Signs the given Nostr event.\n   * @param event - The Nostr event to be signed.\n   * @returns The signature of the signed event.\n   * @throws Error if the NIP-07 is not available on the window object.\n   */\n  async sign(event) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const signedEvent = await window.nostr.signEvent(event);\n    return signedEvent.sig;\n  }\n  async encrypt(recipient, value) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const recipientHexPubKey = recipient.hexpubkey();\n    return window.nostr.nip04.encrypt(recipientHexPubKey, value);\n  }\n  async decrypt(sender, value) {\n    if (!window.nostr) {\n      throw new Error(\"NIP-07 extension not available\");\n    }\n    const senderHexPubKey = sender.hexpubkey();\n    return window.nostr.nip04.decrypt(senderHexPubKey, value);\n  }\n};\n\n// src/signers/nip46/rpc.ts\nimport EventEmitter6 from \"eventemitter3\";\nvar NDKNostrRpc = class extends EventEmitter6 {\n  ndk;\n  signer;\n  debug;\n  constructor(ndk, signer, debug3) {\n    super();\n    this.ndk = ndk;\n    this.signer = signer;\n    this.debug = debug3.extend(\"rpc\");\n  }\n  /**\n   * Subscribe to a filter. This function will resolve once the subscription is ready.\n   */\n  async subscribe(filter) {\n    const sub = this.ndk.subscribe(filter, { closeOnEose: false });\n    sub.on(\"event\", async (event) => {\n      try {\n        const parsedEvent = await this.parseEvent(event);\n        if (parsedEvent.method) {\n          this.emit(\"request\", parsedEvent);\n        } else {\n          this.emit(`response-${parsedEvent.id}`, parsedEvent);\n        }\n      } catch (e) {\n        this.debug(\"error parsing event\", e, event);\n      }\n    });\n    return new Promise((resolve, reject) => {\n      sub.on(\"eose\", () => resolve(sub));\n    });\n  }\n  async parseEvent(event) {\n    const remoteUser = this.ndk.getUser({ hexpubkey: event.pubkey });\n    remoteUser.ndk = this.ndk;\n    const decryptedContent = await this.signer.decrypt(remoteUser, event.content);\n    const parsedContent = JSON.parse(decryptedContent);\n    const { id, method, params, result, error } = parsedContent;\n    if (method) {\n      return { id, pubkey: event.pubkey, method, params, event };\n    } else {\n      return { id, result, error, event };\n    }\n  }\n  async sendResponse(id, remotePubkey, result, kind = 24133, error) {\n    const res = { id, result };\n    if (error) {\n      res.error = error;\n    }\n    const localUser = await this.signer.user();\n    const remoteUser = this.ndk.getUser({ hexpubkey: remotePubkey });\n    const event = new NDKEvent(this.ndk, {\n      kind,\n      content: JSON.stringify(res),\n      tags: [[\"p\", remotePubkey]],\n      pubkey: localUser.hexpubkey()\n    });\n    event.content = await this.signer.encrypt(remoteUser, event.content);\n    await event.sign(this.signer);\n    await this.ndk.publish(event);\n  }\n  /**\n   * Sends a request.\n   * @param remotePubkey\n   * @param method\n   * @param params\n   * @param kind\n   * @param id\n   */\n  async sendRequest(remotePubkey, method, params = [], kind = 24133, cb) {\n    const id = Math.random().toString(36).substring(7);\n    const localUser = await this.signer.user();\n    const remoteUser = this.ndk.getUser({ hexpubkey: remotePubkey });\n    const request = { id, method, params };\n    const promise = new Promise((resolve) => {\n      if (cb)\n        this.once(`response-${id}`, cb);\n    });\n    const event = new NDKEvent(this.ndk, {\n      kind,\n      content: JSON.stringify(request),\n      tags: [[\"p\", remotePubkey]],\n      pubkey: localUser.hexpubkey()\n    });\n    event.content = await this.signer.encrypt(remoteUser, event.content);\n    await event.sign(this.signer);\n    this.debug(\"sending request to\", remotePubkey);\n    await this.ndk.publish(event);\n    return promise;\n  }\n};\n\n// src/signers/nip46/backend/connect.ts\nvar ConnectEventHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [pubkey, token] = params;\n    const debug3 = backend.debug.extend(\"connect\");\n    debug3(`connection request from ${pubkey}`);\n    if (token && backend.applyToken) {\n      debug3(`applying token`);\n      await backend.applyToken(pubkey, token);\n    }\n    if (await backend.pubkeyAllowed(pubkey, \"connect\", token)) {\n      debug3(`connection request from ${pubkey} allowed`);\n      return \"ack\";\n    } else {\n      debug3(`connection request from ${pubkey} rejected`);\n    }\n    return void 0;\n  }\n};\n\n// src/signers/nip46/backend/describe.ts\nvar DescribeHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const keys = Object.keys(backend.handlers);\n    return JSON.stringify(keys);\n  }\n};\n\n// src/signers/nip46/backend/get-public-key.ts\nvar GetPublicKeyHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    return backend.localUser?.hexpubkey();\n  }\n};\n\n// src/signers/nip46/backend/sign-event.ts\nvar SignEventHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const event = await backend.signEvent(remotePubkey, params);\n    if (!event)\n      return void 0;\n    return JSON.stringify(await event.toNostrEvent());\n  }\n};\n\n// src/signers/nip46/backend/nip04-decrypt.ts\nvar Nip04DecryptHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [senderPubkey, payload] = params;\n    const senderUser = new NDKUser({ hexpubkey: senderPubkey });\n    const decryptedPayload = await backend.decrypt(remotePubkey, senderUser, payload);\n    return JSON.stringify([decryptedPayload]);\n  }\n};\n\n// src/signers/nip46/backend/nip04-encrypt.ts\nvar Nip04EncryptHandlingStrategy = class {\n  async handle(backend, remotePubkey, params) {\n    const [recipientPubkey, payload] = params;\n    const recipientUser = new NDKUser({ hexpubkey: recipientPubkey });\n    const decryptedPayload = await backend.encrypt(remotePubkey, recipientUser, payload);\n    return decryptedPayload;\n  }\n};\n\n// src/signers/nip46/backend/index.ts\nvar NDKNip46Backend = class {\n  ndk;\n  signer;\n  localUser;\n  debug;\n  rpc;\n  permitCallback;\n  /**\n   * @param ndk The NDK instance to use\n   * @param privateKey The private key of the npub that wants to be published as\n   */\n  constructor(ndk, privateKey, permitCallback) {\n    this.ndk = ndk;\n    this.signer = new NDKPrivateKeySigner(privateKey);\n    this.debug = ndk.debug.extend(\"nip46:backend\");\n    this.rpc = new NDKNostrRpc(ndk, this.signer, this.debug);\n    this.permitCallback = permitCallback;\n  }\n  /**\n   * This method starts the backend, which will start listening for incoming\n   * requests.\n   */\n  async start() {\n    this.localUser = await this.signer.user();\n    const sub = this.ndk.subscribe(\n      {\n        kinds: [24133],\n        \"#p\": [this.localUser.hexpubkey()]\n      },\n      { closeOnEose: false }\n    );\n    sub.on(\"event\", (e) => this.handleIncomingEvent(e));\n  }\n  handlers = {\n    connect: new ConnectEventHandlingStrategy(),\n    sign_event: new SignEventHandlingStrategy(),\n    nip04_encrypt: new Nip04EncryptHandlingStrategy(),\n    nip04_decrypt: new Nip04DecryptHandlingStrategy(),\n    get_public_key: new GetPublicKeyHandlingStrategy(),\n    describe: new DescribeHandlingStrategy()\n  };\n  /**\n   * Enables the user to set a custom strategy for handling incoming events.\n   * @param method - The method to set the strategy for\n   * @param strategy - The strategy to set\n   */\n  setStrategy(method, strategy) {\n    this.handlers[method] = strategy;\n  }\n  /**\n   * Overload this method to apply tokens, which can\n   * wrap permission sets to be applied to a pubkey.\n   * @param pubkey public key to apply token to\n   * @param token token to apply\n   */\n  async applyToken(pubkey, token) {\n    throw new Error(\"connection token not supported\");\n  }\n  async handleIncomingEvent(event) {\n    const { id, method, params } = await this.rpc.parseEvent(event);\n    const remotePubkey = event.pubkey;\n    let response;\n    this.debug(\"incoming event\", { id, method, params });\n    const strategy = this.handlers[method];\n    if (strategy) {\n      try {\n        response = await strategy.handle(this, remotePubkey, params);\n      } catch (e) {\n        this.debug(\"error handling event\", e, { id, method, params });\n        this.rpc.sendResponse(id, remotePubkey, \"error\", void 0, e.message);\n      }\n    } else {\n      this.debug(\"unsupported method\", { method, params });\n    }\n    if (response) {\n      this.debug(`sending response to ${remotePubkey}`, response);\n      this.rpc.sendResponse(id, remotePubkey, response);\n    }\n  }\n  async decrypt(remotePubkey, senderUser, payload) {\n    if (!await this.pubkeyAllowed(remotePubkey, \"decrypt\", payload)) {\n      this.debug(`decrypt request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    return await this.signer.decrypt(senderUser, payload);\n  }\n  async encrypt(remotePubkey, recipientUser, payload) {\n    if (!await this.pubkeyAllowed(remotePubkey, \"encrypt\", payload)) {\n      this.debug(`encrypt request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    return await this.signer.encrypt(recipientUser, payload);\n  }\n  async signEvent(remotePubkey, params) {\n    const [eventString] = params;\n    this.debug(`sign event request from ${remotePubkey}`);\n    const event = new NDKEvent(this.ndk, JSON.parse(eventString));\n    this.debug(\"event to sign\", event.rawEvent());\n    if (!await this.pubkeyAllowed(remotePubkey, \"sign_event\", event)) {\n      this.debug(`sign event request from ${remotePubkey} rejected`);\n      return void 0;\n    }\n    this.debug(`sign event request from ${remotePubkey} allowed`);\n    await event.sign(this.signer);\n    return event;\n  }\n  /**\n   * This method should be overriden by the user to allow or reject incoming\n   * connections.\n   */\n  async pubkeyAllowed(pubkey, method, params) {\n    return this.permitCallback(pubkey, method, params);\n  }\n};\n\n// src/signers/nip46/index.ts\nvar NDKNip46Signer = class {\n  ndk;\n  remoteUser;\n  remotePubkey;\n  token;\n  localSigner;\n  rpc;\n  debug;\n  /**\n   * @param ndk - The NDK instance to use\n   * @param tokenOrRemotePubkey - The public key, or a connection token, of the npub that wants to be published as\n   * @param localSigner - The signer that will be used to request events to be signed\n   */\n  constructor(ndk, tokenOrRemotePubkey, localSigner) {\n    let remotePubkey;\n    let token;\n    if (tokenOrRemotePubkey.includes(\"#\")) {\n      const parts = tokenOrRemotePubkey.split(\"#\");\n      remotePubkey = new NDKUser({ npub: parts[0] }).hexpubkey();\n      token = parts[1];\n    } else if (tokenOrRemotePubkey.startsWith(\"npub\")) {\n      remotePubkey = new NDKUser({ npub: tokenOrRemotePubkey }).hexpubkey();\n    } else {\n      remotePubkey = tokenOrRemotePubkey;\n    }\n    this.ndk = ndk;\n    this.remotePubkey = remotePubkey;\n    this.token = token;\n    this.debug = ndk.debug.extend(\"nip46:signer\");\n    this.remoteUser = new NDKUser({ hexpubkey: remotePubkey });\n    if (!localSigner) {\n      this.localSigner = NDKPrivateKeySigner.generate();\n    } else {\n      this.localSigner = localSigner;\n    }\n    this.rpc = new NDKNostrRpc(ndk, this.localSigner, this.debug);\n  }\n  /**\n   * Get the user that is being published as\n   */\n  async user() {\n    return this.remoteUser;\n  }\n  async blockUntilReady() {\n    const localUser = await this.localSigner.user();\n    const user = this.ndk.getUser({ npub: localUser.npub });\n    await this.rpc.subscribe({\n      kinds: [24133],\n      \"#p\": [localUser.hexpubkey()]\n    });\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const connectParams = [localUser.hexpubkey()];\n        if (this.token) {\n          connectParams.push(this.token);\n        }\n        this.rpc.sendRequest(\n          this.remotePubkey,\n          \"connect\",\n          connectParams,\n          24133,\n          (response) => {\n            if (response.result === \"ack\") {\n              resolve(user);\n            } else {\n              reject(response.error);\n            }\n          }\n        );\n      }, 100);\n    });\n  }\n  async encrypt(recipient, value) {\n    this.debug(\"asking for encryption\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"nip04_encrypt\",\n        [recipient.hexpubkey(), value],\n        24133,\n        (response) => {\n          if (!response.error) {\n            resolve(response.result);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n  async decrypt(sender, value) {\n    this.debug(\"asking for decryption\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"nip04_decrypt\",\n        [sender.hexpubkey(), value],\n        24133,\n        (response) => {\n          if (!response.error) {\n            const value2 = JSON.parse(response.result);\n            resolve(value2[0]);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n  async sign(event) {\n    this.debug(\"asking for a signature\");\n    const promise = new Promise((resolve, reject) => {\n      this.rpc.sendRequest(\n        this.remotePubkey,\n        \"sign_event\",\n        [JSON.stringify(event)],\n        24133,\n        (response) => {\n          this.debug(\"got a response\", response);\n          if (!response.error) {\n            const json = JSON.parse(response.result);\n            resolve(json.sig);\n          } else {\n            reject(response.error);\n          }\n        }\n      );\n    });\n    return promise;\n  }\n};\n\n// src/signers/private-key/index.ts\nimport { generatePrivateKey, getPublicKey, nip04, getSignature } from \"nostr-tools\";\nvar NDKPrivateKeySigner = class {\n  _user;\n  privateKey;\n  constructor(privateKey) {\n    if (privateKey) {\n      this.privateKey = privateKey;\n      this._user = new NDKUser({ hexpubkey: getPublicKey(this.privateKey) });\n    }\n  }\n  static generate() {\n    const privateKey = generatePrivateKey();\n    return new NDKPrivateKeySigner(privateKey);\n  }\n  async blockUntilReady() {\n    if (!this._user) {\n      throw new Error(\"NDKUser not initialized\");\n    }\n    return this._user;\n  }\n  async user() {\n    await this.blockUntilReady();\n    return this._user;\n  }\n  async sign(event) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to sign without a private key\");\n    }\n    return getSignature(event, this.privateKey);\n  }\n  async encrypt(recipient, value) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to encrypt without a private key\");\n    }\n    const recipientHexPubKey = recipient.hexpubkey();\n    return await nip04.encrypt(this.privateKey, recipientHexPubKey, value);\n  }\n  async decrypt(sender, value) {\n    if (!this.privateKey) {\n      throw Error(\"Attempted to decrypt without a private key\");\n    }\n    const senderHexPubKey = sender.hexpubkey();\n    return await nip04.decrypt(this.privateKey, senderHexPubKey, value);\n  }\n};\n\n// src/zap/invoice.ts\nimport { decode } from \"light-bolt11-decoder\";\nfunction zapInvoiceFromEvent(event) {\n  const description = event.getMatchingTags(\"description\")[0];\n  const bolt11 = event.getMatchingTags(\"bolt11\")[0];\n  let decodedInvoice;\n  let zapRequest;\n  if (!description || !bolt11 || !bolt11[1]) {\n    return null;\n  }\n  try {\n    let zapRequestPayload = description[1];\n    if (zapRequestPayload.startsWith(\"%\")) {\n      zapRequestPayload = decodeURIComponent(zapRequestPayload);\n    }\n    if (zapRequestPayload === \"\") {\n      return null;\n    }\n    zapRequest = JSON.parse(zapRequestPayload);\n    decodedInvoice = decode(bolt11[1]);\n  } catch (e) {\n    return null;\n  }\n  const amountSection = decodedInvoice.sections.find((s) => s.name === \"amount\");\n  if (!amountSection) {\n    return null;\n  }\n  const amount = parseInt(amountSection.value);\n  if (!amount) {\n    return null;\n  }\n  const content = zapRequest.content;\n  const sender = zapRequest.pubkey;\n  const recipientTag = event.getMatchingTags(\"p\")[0];\n  const recipient = recipientTag[1];\n  let zappedEvent = event.getMatchingTags(\"e\")[0];\n  if (!zappedEvent) {\n    zappedEvent = event.getMatchingTags(\"a\")[0];\n  }\n  const zappedEventId = zappedEvent ? zappedEvent[1] : void 0;\n  const zapInvoice = {\n    id: event.id,\n    zapper: event.pubkey,\n    zappee: sender,\n    zapped: recipient,\n    zappedEvent: zappedEventId,\n    amount,\n    comment: content\n  };\n  return zapInvoice;\n}\n\n// src/index.ts\nvar NDK5 = class extends EventEmitter7 {\n  pool;\n  signer;\n  cacheAdapter;\n  debug;\n  devWriteRelaySet;\n  delayedSubscriptions;\n  constructor(opts = {}) {\n    super();\n    this.debug = opts.debug || debug2(\"ndk\");\n    this.pool = new NDKPool(opts.explicitRelayUrls || [], this);\n    this.signer = opts.signer;\n    this.cacheAdapter = opts.cacheAdapter;\n    this.delayedSubscriptions = /* @__PURE__ */ new Map();\n    if (opts.devWriteRelayUrls) {\n      this.devWriteRelaySet = NDKRelaySet2.fromRelayUrls(opts.devWriteRelayUrls, this);\n    }\n  }\n  /**\n   * Connect to relays with optional timeout.\n   * If the timeout is reached, the connection will be continued to be established in the background.\n   */\n  async connect(timeoutMs) {\n    this.debug(\"Connecting to relays\", { timeoutMs });\n    return this.pool.connect(timeoutMs);\n  }\n  /**\n   * Get a NDKUser object\n   *\n   * @param opts\n   * @returns\n   */\n  getUser(opts) {\n    const user = new NDKUser(opts);\n    user.ndk = this;\n    return user;\n  }\n  /**\n   * Create a new subscription. Subscriptions automatically start and finish when all relays\n   * on the set send back an EOSE. (set `opts.closeOnEose` to `false` in order avoid this)\n   *\n   * @param filter\n   * @param opts\n   * @param relaySet explicit relay set to use\n   * @returns NDKSubscription\n   */\n  subscribe(filter, opts, relaySet) {\n    const subscription = new NDKSubscription(this, filter, opts, relaySet);\n    subscription.start();\n    return subscription;\n  }\n  /**\n   * Publish an event\n   * @param event event to publish\n   * @returns\n   */\n  async publish(event, relaySet) {\n    if (!relaySet) {\n      relaySet = this.devWriteRelaySet || calculateRelaySetFromEvent(this, event);\n    }\n    return relaySet.publish(event);\n  }\n  /**\n   * Fetch a single event\n   */\n  async fetchEvent(filter, opts = {}) {\n    return new Promise((resolve) => {\n      const s = this.subscribe(filter, { ...opts, closeOnEose: true });\n      s.on(\"event\", (event) => {\n        event.ndk = this;\n        resolve(event);\n      });\n      s.on(\"eose\", () => {\n        resolve(null);\n      });\n    });\n  }\n  /**\n   * Fetch events\n   */\n  async fetchEvents(filter, opts = {}) {\n    return new Promise((resolve) => {\n      const events = /* @__PURE__ */ new Map();\n      const relaySetSubscription = this.subscribe(filter, { ...opts, closeOnEose: true });\n      relaySetSubscription.on(\"event\", (event) => {\n        const existingEvent = events.get(event.tagId());\n        if (existingEvent) {\n          event = dedup(existingEvent, event);\n        }\n        event.ndk = this;\n        events.set(event.tagId(), event);\n      });\n      relaySetSubscription.on(\"eose\", () => {\n        resolve(new Set(events.values()));\n      });\n    });\n  }\n  /**\n   * Ensures that a signer is available to sign an event.\n   */\n  async assertSigner() {\n    if (!this.signer) {\n      this.emit(\"signerRequired\");\n      throw new Error(\"Signer required\");\n    }\n  }\n};\nexport {\n  NDKEvent,\n  NDKNip07Signer,\n  NDKNip46Backend,\n  NDKNip46Signer,\n  NDKNostrRpc,\n  NDKPrivateKeySigner,\n  NDKRelay,\n  NDKRelaySet2 as NDKRelaySet,\n  NDKRelayStatus,\n  NDKSubscription,\n  NDKSubscriptionCacheUsage,\n  NDKSubscriptionGroup,\n  NDKUser,\n  NDK5 as default,\n  defaultOpts,\n  mergeEvent,\n  mergeFilters,\n  zapInvoiceFromEvent\n};\n","import { chatData } from '../store';\nimport { getEventHash, relayInit } from 'nostr-tools';\nimport RelayPool from 'nostr/lib/relay-pool';\nimport { createEventDispatcher } from 'svelte';\nimport EventEmitter from 'events';\nimport * as uuid from 'uuid';\nimport debug from 'debug';\nimport { NDKEvent, zapInvoiceFromEvent } from '@nostr-dev-kit/ndk';\n\nconst log = new debug('nostr:adapter');\nconst profilesLog = new debug('nostr:adapter:profiles');\nconst writeLog = new debug('nostr:adapter:write');\n\nclass NstrAdapter {\n    relayStatus = {};\n    #pool = null;\n    #messages = {};\n    #eventEmitter = new EventEmitter();\n    #handlers = {}\n    tags;\n    referenceTags;\n    type;\n    #websiteOwnerPubkey;\n    chatId;\n    relayUrls = [];\n\n    #profileRequestQueue = [];\n    #requestedProfiles = [];\n    #profileRequestTimer;\n    #delayedSubscriptions = {};\n    #delayedSubscriptionTimeouts = {};\n\n    constructor(clientPubkey, {tags, referenceTags, type='DM', chatId, websiteOwnerPubkey, relays} = {}) {\n        this.pubkey = clientPubkey;\n        this.#websiteOwnerPubkey = websiteOwnerPubkey;\n        this.relayUrls = relays\n\n        if (type) {\n            this.setChatConfiguration(type, tags, referenceTags, chatId);\n        }\n    }\n\n    setChatConfiguration(type, tags, referenceTags, chatId) {\n        this.type = type;\n        this.tags = tags;\n        this.chatId = chatId;\n        this.referenceTags = referenceTags;\n\n        // handle connection\n        if (this.#pool) { this.#disconnect() }\n\n        let filters = [];\n\n        // handle subscriptions\n        // if this is DM type then subscribe to chats with this website owner\n        switch (this.type) {\n            case 'DM':\n                filters.push({\n                    kinds: [4],\n                    '#p': [this.pubkey, this.#websiteOwnerPubkey],\n                    'authors': [this.pubkey, this.#websiteOwnerPubkey]\n                });\n                break;\n            case 'GROUP':\n                if (this.chatId) {\n                    filters.push({\n                        kinds: [41, 42],\n                        \"#e\": [this.chatId],\n                        limit: 200,\n                    })\n                }\n            case 'GLOBAL':\n                if (this.tags && this.tags.length > 0) {\n                    filters.push({kinds: [1], '#t': this.tags, limit: 20});\n                }\n                if (this.referenceTags && this.referenceTags.length > 0) {\n                    filters.push({kinds: [1], '#r': this.referenceTags, limit: 20});\n                }\n\n                break;\n        }\n\n        if (filters && filters.length > 0) {\n            this.#connect()\n            this.subscribe(filters, (e) => { this.#emitMessage(e) })\n        }\n    }\n\n    async getPubKey() {\n        return this.pubkey;\n    }\n\n    on(event, callback) {\n        this.#eventEmitter.on(event, callback);\n    }\n\n    /**\n     * Send a message to the relay\n     * @param {String} message - The message to send\n     */\n    async send(message, {tagPubKeys, tags} = {}) {\n        let event;\n\n        if (!tags) { tags = []}\n\n        if (this.type === 'DM') {\n            event = await this.sendKind4(message, {tagPubKeys, tags});\n        } else if (this.type === 'GROUP') {\n            event = await this.sendKind42(message, {tagPubKeys, tags, chatId: this.chatId});\n        } else {\n            event = await this.sendKind1(message, {tagPubKeys, tags});\n        }\n\n        event.id = getEventHash(event)\n        const signedEvent = await this.signEvent(event)\n\n        this.#_publish(signedEvent);\n\n        return event.id;\n    }\n\n    async sendKind4(message, {tagPubKeys, tags} = {}) {\n        let ciphertext = await this.encrypt(this.#websiteOwnerPubkey, message);\n        let event = {\n            kind: 4,\n            pubkey: this.pubkey,\n            created_at: Math.floor(Date.now() / 1000),\n            content: ciphertext,\n            tags: [\n                ['p', this.#websiteOwnerPubkey],\n                ...tags\n            ],\n        }\n\n        return event;\n    }\n\n    async sendKind42(message, {tagPubKeys, tags, chatId} = {}) {\n        if (!tags) { tags = []; }\n\n        if (this.tags) {\n            this.tags.forEach((t) => tags.push(['t', t]));\n        }\n\n        // check if there is an e tag\n        const reply = !!tags.find((t) => t[0] === 'e');\n\n        if (!reply) {\n            tags.push(['e', chatId, \"wss://nos.lol\", reply ? \"reply\" : \"root\"]);\n        }\n\n        if (this.referenceTags) {\n            this.referenceTags.forEach((t) => tags.push(['r', t]));\n        }\n\n        let event = {\n            kind: 42,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: message,\n            pubkey: this.pubkey,\n        }\n\n        if (tagPubKeys) {\n            for (let pubkey of tagPubKeys) {\n                if (pubkey) {\n                    event.tags.push(['p', pubkey]);\n                }\n            }\n        }\n\n        event.id = getEventHash(event)\n        this.subscribeToEventAndResponses(event.id);\n\n        return event;\n    }\n\n    async sendKind1(message, {tagPubKeys, tags} = {}) {\n        if (!tags) { tags = []; }\n\n        if (this.tags) {\n            this.tags.forEach((t) => tags.push(['t', t]));\n        }\n\n        if (this.referenceTags) {\n            this.referenceTags.forEach((t) => tags.push(['r', t]));\n        }\n\n        let event = {\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: message,\n            pubkey: this.pubkey,\n        }\n\n        if (tagPubKeys) {\n            for (let pubkey of tagPubKeys) {\n                if (pubkey) {\n                    event.tags.push(['p', pubkey]);\n                }\n            }\n        }\n\n        event.id = getEventHash(event)\n        this.subscribeToEventAndResponses(event.id);\n\n        return event;\n    }\n\n    async #_publish(event) {\n        writeLog('publish', event);\n        this.#pool.send([ 'EVENT', event ]);\n    }\n\n    async onEvent(event, messageCallback) {\n        this.#addProfileRequest(event.pubkey);\n\n        messageCallback(event)\n    }\n\n    async delayedSubscribe(filters, family, timeout) {\n        this.#delayedSubscriptions[family] = this.#delayedSubscriptions[family] || []\n        this.#delayedSubscriptions[family].push(filters);\n\n        if (!this.#delayedSubscriptionTimeouts[family]) {\n            this.#delayedSubscriptionTimeouts[family] = setTimeout(() => {\n                delete this.#delayedSubscriptionTimeouts[family];\n\n                // if there are more than 10 filters then we need to split them up\n                // into multiple subscriptions\n                let filters = this.#delayedSubscriptions[family];\n                delete this.#delayedSubscriptions[family];\n\n                // split filters into groups of 10\n                let groups = [];\n                groups = filters.reduce((groups, filter, index) => {\n                    if (index % 10 === 0) {\n                        groups.push([]);\n                    }\n                    groups[groups.length - 1].push(filter);\n                    return groups;\n                }, groups);\n\n                groups.forEach((filters) => {\n                    this.subscribe(filters, (e) => { this.#emitMessage(e)});\n                });\n            }, timeout)\n        }\n    }\n\n    async subscribe(filters, messageCallback=null) {\n        if (!messageCallback) { messageCallback = (e) => { this.#emitMessage(e) } }\n        return this.#_subscribe(filters, messageCallback)\n    }\n\n    async #_subscribe(filters, messageCallback) {\n        const subId = uuid.v4();\n        this.#handlers[subId] = messageCallback;\n        if (!Array.isArray(filters)) { filters = [filters] }\n\n\n\n        this.#pool.subscribe(subId, filters);\n        this.#pool.on('event', (relay, recSubId, e) => {\n            this.onEvent(e, this.#handlers[recSubId])\n        });\n\n        return subId;\n    }\n\n    async #emitMessage(event) {\n        // has already been emitted\n        if (this.#messages[event.id]) {\n            return;\n        }\n\n        this.#messages[event.id] = true;\n\n        // decrypt\n        if (event.kind === 4) {\n            event.content = await this.decrypt(this.#websiteOwnerPubkey, event.content);\n        }\n\n        let deletedEvents = []\n        if (event.kind === 5) {\n            deletedEvents = event.tags.filter(tag => tag[0] === 'e').map(tag => tag[1]);\n        }\n\n        let zap;\n        if (event.kind === 9735) {\n            const ndkEvent = new NDKEvent(null, event);\n            zap = zapInvoiceFromEvent(ndkEvent);\n            console.log(`received a zap invoice: ${zap}`, event);\n        }\n\n        switch (event.kind) {\n            case 1:\n            case 42:\n                this.#eventEmitter.emit('message', event); break;\n            case 41:\n                this.#eventEmitter.emit('channelMetadata', event); break;\n            case 4: this.#eventEmitter.emit('message', event); break;\n            case 5: this.#eventEmitter.emit('deleted', deletedEvents); break;\n            case 7: this.#eventEmitter.emit('reaction', event); break;\n            case 9735: this.#eventEmitter.emit('zap', zap); break;\n            default:\n                // alert('unknown event kind ' + event.kind)\n                console.log('unknown event kind', event.kind, event);\n        }\n\n    }\n\n    subscribeToEventAndResponses(eventId) {\n        this.subscribe([\n            {ids: [eventId]},\n            {'#e': [eventId]},\n        ], (e) => {\n            this.#emitMessage(e);\n            // this.subscribeToResponses(e)\n        })\n    }\n\n    subscribeToResponses(event) {\n        this.subscribe([\n            {'#e': [event.id]},\n        ], (e) => {\n            this.#emitMessage(e);\n            this.subscribeToResponses(e)\n        })\n    }\n\n    /**\n     * Connect to the relay\n     */\n    #connect() {\n        this.relayUrls.forEach((url) => {\n            this.relayStatus[url] = 'disconnected';\n        });\n        this.#eventEmitter.emit('connectivity', this.relayStatus);\n\n        // console.log('connecting to relay', this.relayUrls);\n        this.#pool = new RelayPool(this.relayUrls)\n        this.#pool.on('open', (relay) => {\n            // console.log(`connected to ${relay.url}`, new Date())\n            this.relayStatus[relay.url] = 'connected';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n        })\n\n        this.#pool.on('error', (relay, r, e) => {\n            this.relayStatus[relay.url] = 'error';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n            console.log('error from relay', relay.url, r, e)\n        })\n\n        this.#pool.on('close', (relay, r) => {\n            this.relayStatus[relay.url] = 'closed';\n            this.#eventEmitter.emit('connectivity', this.relayStatus);\n            console.log('error from relay', relay.url, r)\n        })\n\n        this.#pool.on('notice', (relay, r) => {\n            console.log('notice', relay.url, r)\n        })\n    }\n\n    #disconnect() {\n        this.relayUrls.forEach((url) => {\n            this.relayStatus[url] = 'disconnected';\n        });\n        this.#eventEmitter.emit('connectivity', this.relayStatus);\n        this.#pool.close();\n        this.#pool = null;\n    }\n\n    //\n    //\n    // Profiles\n    //\n    //\n    reqProfile(pubkey) {\n        this.#addProfileRequest(pubkey);\n    }\n\n    #addProfileRequest(pubkey, event=null) {\n        if (this.#profileRequestQueue.includes(pubkey)) { return; }\n        if (this.#requestedProfiles.includes(pubkey)) { return; }\n        this.#profileRequestQueue.push(pubkey);\n        this.#requestedProfiles.push(pubkey);\n\n        if (!this.#profileRequestTimer) {\n            this.#profileRequestTimer = setTimeout(() => {\n                this.#profileRequestTimer = null;\n                this.#requestProfiles();\n            }, 500);\n        }\n    }\n\n    /**\n     * Send request for all queued profiles\n     */\n    async #requestProfiles() {\n        if (this.#profileRequestQueue.length > 0) {\n            profilesLog('requesting profiles', this.#profileRequestQueue);\n\n            // send request\n            const subId = await this.subscribe({ kinds: [0], authors: this.#profileRequestQueue }, (e) => {\n                this.#processReceivedProfile(e);\n            });\n            profilesLog('subscribed to request', {subId})\n            this.#profileRequestQueue = [];\n\n            setTimeout(() => {\n                profilesLog('unsubscribing from request', {subId})\n                this.#pool.unsubscribe(subId);\n            }, 5000);\n        }\n    }\n\n    #processReceivedProfile(event) {\n        profilesLog('received profile', event)\n        let profile;\n        try {\n            profile = JSON.parse(event.content);\n        } catch (e) {\n            profilesLog('failed to parse profile', event);\n            return;\n        }\n        this.#eventEmitter.emit('profile', {pubkey: event.pubkey, profile});\n    }\n}\n\nexport default NstrAdapter;","import NstrAdapter from './index.js';\n\nclass NstrAdapterNip07 extends NstrAdapter {\n    constructor(pubkey, adapterConfig={}) {\n        super(pubkey, adapterConfig);\n    }\n\n    async signEvent(event) {\n        return await window.nostr.signEvent(event);\n    }\n\n    async encrypt(destPubkey, message) {\n        return await window.nostr.nip04.encrypt(destPubkey, message);\n    }\n\n    async decrypt(destPubkey, message) {\n        return await window.nostr.nip04.decrypt(destPubkey, message);\n    }\n}\n\nexport default NstrAdapterNip07;\n","import EventEmitter from 'events';\nimport { relayInit, getPublicKey, getEventHash, signEvent, validateEvent, verifySignature, nip04 } from 'nostr-tools';\n\nfunction _regeneratorRuntime() {\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function (method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nvar NostrRPC = /*#__PURE__*/function () {\n  function NostrRPC(opts) {\n    // events\n    this.events = new EventEmitter();\n    this.relay = opts.relay || 'wss://nostr.vulpem.com';\n    this.self = {\n      pubkey: getPublicKey(opts.secretKey),\n      secret: opts.secretKey\n    };\n  }\n  var _proto = NostrRPC.prototype;\n  _proto.call = /*#__PURE__*/function () {\n    var _call = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref, opts) {\n      var _this = this;\n      var target, _ref$request, _ref$request$id, id, method, _ref$request$params, params, relay, request, event;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            target = _ref.target, _ref$request = _ref.request, _ref$request$id = _ref$request.id, id = _ref$request$id === void 0 ? /*#__PURE__*/randomID() : _ref$request$id, method = _ref$request.method, _ref$request$params = _ref$request.params, params = _ref$request$params === void 0 ? [] : _ref$request$params;\n            _context3.next = 3;\n            return connectToRelay(this.relay);\n          case 3:\n            relay = _context3.sent;\n            // prepare request to be sent\n            request = prepareRequest(id, method, params);\n            _context3.next = 7;\n            return prepareEvent(this.self.secret, target, request);\n          case 7:\n            event = _context3.sent;\n            return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                var sub;\n                return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                  while (1) switch (_context2.prev = _context2.next) {\n                    case 0:\n                      sub = relay.sub([{\n                        kinds: [24133],\n                        authors: [target],\n                        '#p': [_this.self.pubkey],\n                        limit: 1\n                      }]);\n                      _context2.next = 3;\n                      return broadcastToRelay(relay, event, true);\n                    case 3:\n                      // skip waiting for response from remote\n                      if (opts && opts.skipResponse === true) resolve();\n                      sub.on('event', /*#__PURE__*/function () {\n                        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n                          var payload, plaintext;\n                          return _regeneratorRuntime().wrap(function _callee$(_context) {\n                            while (1) switch (_context.prev = _context.next) {\n                              case 0:\n                                _context.prev = 0;\n                                _context.next = 3;\n                                return nip04.decrypt(_this.self.secret, event.pubkey, event.content);\n                              case 3:\n                                plaintext = _context.sent;\n                                if (plaintext) {\n                                  _context.next = 6;\n                                  break;\n                                }\n                                throw new Error('failed to decrypt event');\n                              case 6:\n                                payload = JSON.parse(plaintext);\n                                _context.next = 12;\n                                break;\n                              case 9:\n                                _context.prev = 9;\n                                _context.t0 = _context[\"catch\"](0);\n                                return _context.abrupt(\"return\");\n                              case 12:\n                                if (isValidResponse(payload)) {\n                                  _context.next = 14;\n                                  break;\n                                }\n                                return _context.abrupt(\"return\");\n                              case 14:\n                                if (!(payload.id !== id)) {\n                                  _context.next = 16;\n                                  break;\n                                }\n                                return _context.abrupt(\"return\");\n                              case 16:\n                                // if the response is an error, reject the promise\n                                if (payload.error) {\n                                  reject(payload.error);\n                                }\n                                // if the response is a result, resolve the promise\n                                if (payload.result) {\n                                  resolve(payload.result);\n                                }\n                              case 18:\n                              case \"end\":\n                                return _context.stop();\n                            }\n                          }, _callee, null, [[0, 9]]);\n                        }));\n                        return function (_x5) {\n                          return _ref3.apply(this, arguments);\n                        };\n                      }());\n                    case 5:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }, _callee2);\n              }));\n              return function (_x3, _x4) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, this);\n    }));\n    function call(_x, _x2) {\n      return _call.apply(this, arguments);\n    }\n    return call;\n  }();\n  _proto.listen = /*#__PURE__*/function () {\n    var _listen = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      var _this2 = this;\n      var relay, sub;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return connectToRelay(this.relay);\n          case 2:\n            relay = _context5.sent;\n            sub = relay.sub([{\n              kinds: [24133],\n              '#p': [this.self.pubkey],\n              since: now()\n            }]);\n            sub.on('event', /*#__PURE__*/function () {\n              var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event) {\n                var payload, plaintext, response, body, responseEvent;\n                return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                  while (1) switch (_context4.prev = _context4.next) {\n                    case 0:\n                      _context4.prev = 0;\n                      _context4.next = 3;\n                      return nip04.decrypt(_this2.self.secret, event.pubkey, event.content);\n                    case 3:\n                      plaintext = _context4.sent;\n                      if (plaintext) {\n                        _context4.next = 6;\n                        break;\n                      }\n                      throw new Error('failed to decrypt event');\n                    case 6:\n                      payload = JSON.parse(plaintext);\n                      _context4.next = 12;\n                      break;\n                    case 9:\n                      _context4.prev = 9;\n                      _context4.t0 = _context4[\"catch\"](0);\n                      return _context4.abrupt(\"return\");\n                    case 12:\n                      if (isValidRequest(payload)) {\n                        _context4.next = 14;\n                        break;\n                      }\n                      return _context4.abrupt(\"return\");\n                    case 14:\n                      _context4.next = 17;\n                      return _this2.handleRequest(payload, event);\n                    case 17:\n                      response = _context4.sent;\n                      body = prepareResponse(response.id, response.result, response.error);\n                      _context4.next = 21;\n                      return prepareEvent(_this2.self.secret, event.pubkey, body);\n                    case 21:\n                      responseEvent = _context4.sent;\n                      // send response via relay\n                      relay.publish(responseEvent);\n                    case 23:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }, _callee4, null, [[0, 9]]);\n              }));\n              return function (_x6) {\n                return _ref4.apply(this, arguments);\n              };\n            }());\n            return _context5.abrupt(\"return\", sub);\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5, this);\n    }));\n    function listen() {\n      return _listen.apply(this, arguments);\n    }\n    return listen;\n  }();\n  _proto.handleRequest = /*#__PURE__*/function () {\n    var _handleRequest = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(request, event) {\n      var id, method, params, result, error;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            id = request.id, method = request.method, params = request.params;\n            result = null;\n            error = null;\n            _context6.prev = 3;\n            this.event = event;\n            _context6.next = 7;\n            return this[method].apply(this, params);\n          case 7:\n            result = _context6.sent;\n            this.event = undefined;\n            _context6.next = 14;\n            break;\n          case 11:\n            _context6.prev = 11;\n            _context6.t0 = _context6[\"catch\"](3);\n            if (_context6.t0 instanceof Error) {\n              error = _context6.t0.message;\n            } else {\n              error = 'unknown error';\n            }\n          case 14:\n            return _context6.abrupt(\"return\", {\n              id: id,\n              result: result,\n              error: error\n            });\n          case 15:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this, [[3, 11]]);\n    }));\n    function handleRequest(_x7, _x8) {\n      return _handleRequest.apply(this, arguments);\n    }\n    return handleRequest;\n  }();\n  return NostrRPC;\n}();\nfunction now() {\n  return Math.floor(Date.now() / 1000);\n}\nfunction randomID() {\n  return Math.random().toString().slice(2);\n}\nfunction prepareRequest(id, method, params) {\n  return JSON.stringify({\n    id: id,\n    method: method,\n    params: params\n  });\n}\nfunction prepareResponse(id, result, error) {\n  return JSON.stringify({\n    id: id,\n    result: result,\n    error: error\n  });\n}\nfunction prepareEvent(_x9, _x10, _x11) {\n  return _prepareEvent.apply(this, arguments);\n}\nfunction _prepareEvent() {\n  _prepareEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(secretKey, pubkey, content) {\n    var cipherText, event, id, sig, signedEvent, ok, veryOk;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return nip04.encrypt(secretKey, pubkey, content);\n        case 2:\n          cipherText = _context7.sent;\n          event = {\n            kind: 24133,\n            created_at: now(),\n            pubkey: getPublicKey(secretKey),\n            tags: [['p', pubkey]],\n            content: cipherText\n          };\n          id = getEventHash(event);\n          sig = signEvent(event, secretKey);\n          signedEvent = _extends({}, event, {\n            id: id,\n            sig: sig\n          });\n          ok = validateEvent(signedEvent);\n          veryOk = verifySignature(signedEvent);\n          if (!(!ok || !veryOk)) {\n            _context7.next = 11;\n            break;\n          }\n          throw new Error('Event is not valid');\n        case 11:\n          return _context7.abrupt(\"return\", signedEvent);\n        case 12:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return _prepareEvent.apply(this, arguments);\n}\nfunction isValidRequest(payload) {\n  if (!payload) return false;\n  var keys = Object.keys(payload);\n  if (!keys.includes('id') || !keys.includes('method') || !keys.includes('params')) return false;\n  return true;\n}\nfunction isValidResponse(payload) {\n  if (!payload) return false;\n  var keys = Object.keys(payload);\n  if (!keys.includes('id') || !keys.includes('result') || !keys.includes('error')) return false;\n  return true;\n}\nfunction connectToRelay(_x12) {\n  return _connectToRelay.apply(this, arguments);\n}\nfunction _connectToRelay() {\n  _connectToRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(realayURL) {\n    var relay;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          relay = relayInit(realayURL);\n          _context8.next = 3;\n          return relay.connect();\n        case 3:\n          _context8.next = 5;\n          return new Promise(function (resolve, reject) {\n            relay.on('connect', function () {\n              resolve();\n            });\n            relay.on('error', function () {\n              reject(new Error(\"not possible to connect to \" + relay.url));\n            });\n          });\n        case 5:\n          return _context8.abrupt(\"return\", relay);\n        case 6:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return _connectToRelay.apply(this, arguments);\n}\nfunction broadcastToRelay(_x13, _x14, _x15) {\n  return _broadcastToRelay.apply(this, arguments);\n}\nfunction _broadcastToRelay() {\n  _broadcastToRelay = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(relay, event, skipSeen) {\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          if (skipSeen === void 0) {\n            skipSeen = false;\n          }\n          _context9.next = 3;\n          return new Promise(function (resolve, reject) {\n            relay.on('error', function () {\n              reject(new Error(\"failed to connect to \" + relay.url));\n            });\n            var pub = relay.publish(event);\n            if (skipSeen) resolve();\n            pub.on('failed', function (reason) {\n              reject(reason);\n            });\n            pub.on('seen', function () {\n              resolve();\n            });\n          });\n        case 3:\n          return _context9.abrupt(\"return\", _context9.sent);\n        case 4:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9);\n  }));\n  return _broadcastToRelay.apply(this, arguments);\n}\n\nvar ConnectURI = /*#__PURE__*/function () {\n  function ConnectURI(_ref) {\n    var target = _ref.target,\n      metadata = _ref.metadata,\n      relay = _ref.relay;\n    this.target = target;\n    this.metadata = metadata;\n    this.relay = relay;\n  }\n  ConnectURI.fromURI = function fromURI(uri) {\n    var url = new URL(uri);\n    var target = url.hostname || url.pathname.substring(2);\n    if (!target) throw new Error('Invalid connect URI: missing target');\n    var relay = url.searchParams.get('relay');\n    if (!relay) {\n      throw new Error('Invalid connect URI: missing relay');\n    }\n    var metadata = url.searchParams.get('metadata');\n    if (!metadata) {\n      throw new Error('Invalid connect URI: missing metadata');\n    }\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    try {\n      var md = JSON.parse(metadata);\n      return new ConnectURI({\n        target: target,\n        metadata: md,\n        relay: relay\n      });\n    } catch (ignore) {\n      throw new Error('Invalid connect URI: metadata is not valid JSON');\n    }\n  };\n  var _proto = ConnectURI.prototype;\n  _proto.toString = function toString() {\n    return \"nostrconnect://\" + this.target + \"?metadata=\" + encodeURIComponent(JSON.stringify(this.metadata)) + \"&relay=\" + encodeURIComponent(this.relay);\n  };\n  _proto.approve = /*#__PURE__*/function () {\n    var _approve = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(secretKey) {\n      var rpc;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            rpc = new NostrRPC({\n              relay: this.relay,\n              secretKey: secretKey\n            });\n            _context.next = 3;\n            return rpc.call({\n              target: this.target,\n              request: {\n                method: 'connect',\n                params: [getPublicKey(secretKey)]\n              }\n            }, {\n              skipResponse: true\n            });\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function approve(_x) {\n      return _approve.apply(this, arguments);\n    }\n    return approve;\n  }();\n  _proto.reject = /*#__PURE__*/function () {\n    var _reject = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(secretKey) {\n      var rpc;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            rpc = new NostrRPC({\n              relay: this.relay,\n              secretKey: secretKey\n            });\n            _context2.next = 3;\n            return rpc.call({\n              target: this.target,\n              request: {\n                method: 'disconnect',\n                params: []\n              }\n            }, {\n              skipResponse: true\n            });\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, this);\n    }));\n    function reject(_x2) {\n      return _reject.apply(this, arguments);\n    }\n    return reject;\n  }();\n  return ConnectURI;\n}();\nvar Connect = /*#__PURE__*/function () {\n  function Connect(_ref2) {\n    var target = _ref2.target,\n      relay = _ref2.relay,\n      secretKey = _ref2.secretKey;\n    this.events = new EventEmitter();\n    this.nip04 = {\n      encrypt: function () {\n        var _encrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_pubkey, _plaintext) {\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                throw new Error('Not implemented');\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        function encrypt(_x3, _x4) {\n          return _encrypt.apply(this, arguments);\n        }\n        return encrypt;\n      }(),\n      decrypt: function () {\n        var _decrypt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_pubkey, _ciphertext) {\n          return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                throw new Error('Not implemented');\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }, _callee4);\n        }));\n        function decrypt(_x5, _x6) {\n          return _decrypt.apply(this, arguments);\n        }\n        return decrypt;\n      }()\n    };\n    this.rpc = new NostrRPC({\n      relay: relay,\n      secretKey: secretKey\n    });\n    if (target) {\n      this.target = target;\n    }\n  }\n  var _proto2 = Connect.prototype;\n  _proto2.init = /*#__PURE__*/function () {\n    var _init = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      var _this = this;\n      var sub;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return this.rpc.listen();\n          case 2:\n            sub = _context6.sent;\n            sub.on('event', /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event) {\n                var payload, plaintext, _payload$params, pubkey;\n                return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                  while (1) switch (_context5.prev = _context5.next) {\n                    case 0:\n                      _context5.prev = 0;\n                      _context5.next = 3;\n                      return nip04.decrypt(_this.rpc.self.secret, event.pubkey, event.content);\n                    case 3:\n                      plaintext = _context5.sent;\n                      if (plaintext) {\n                        _context5.next = 6;\n                        break;\n                      }\n                      throw new Error('failed to decrypt event');\n                    case 6:\n                      payload = JSON.parse(plaintext);\n                      _context5.next = 12;\n                      break;\n                    case 9:\n                      _context5.prev = 9;\n                      _context5.t0 = _context5[\"catch\"](0);\n                      return _context5.abrupt(\"return\");\n                    case 12:\n                      if (isValidRequest(payload)) {\n                        _context5.next = 14;\n                        break;\n                      }\n                      return _context5.abrupt(\"return\");\n                    case 14:\n                      _context5.t1 = payload.method;\n                      _context5.next = _context5.t1 === 'connect' ? 17 : _context5.t1 === 'disconnect' ? 23 : 26;\n                      break;\n                    case 17:\n                      if (!(!payload.params || payload.params.length !== 1)) {\n                        _context5.next = 19;\n                        break;\n                      }\n                      throw new Error('connect: missing pubkey');\n                    case 19:\n                      _payload$params = payload.params, pubkey = _payload$params[0];\n                      _this.target = pubkey;\n                      _this.events.emit('connect', pubkey);\n                      return _context5.abrupt(\"break\", 26);\n                    case 23:\n                      _this.target = undefined;\n                      _this.events.emit('disconnect');\n                      return _context5.abrupt(\"break\", 26);\n                    case 26:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }, _callee5, null, [[0, 9]]);\n              }));\n              return function (_x7) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6, this);\n    }));\n    function init() {\n      return _init.apply(this, arguments);\n    }\n    return init;\n  }();\n  _proto2.on = function on(evt, cb) {\n    this.events.on(evt, cb);\n  };\n  _proto2.off = function off(evt, cb) {\n    this.events.off(evt, cb);\n  };\n  _proto2.disconnect = /*#__PURE__*/function () {\n    var _disconnect = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            if (this.target) {\n              _context7.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            // notify the UI that we are disconnecting\n            this.events.emit('disconnect');\n            _context7.prev = 3;\n            _context7.next = 6;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'disconnect',\n                params: []\n              }\n            }, {\n              skipResponse: true\n            });\n          case 6:\n            _context7.next = 11;\n            break;\n          case 8:\n            _context7.prev = 8;\n            _context7.t0 = _context7[\"catch\"](3);\n            throw new Error('Failed to disconnect');\n          case 11:\n            this.target = undefined;\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7, this, [[3, 8]]);\n    }));\n    function disconnect() {\n      return _disconnect.apply(this, arguments);\n    }\n    return disconnect;\n  }();\n  _proto2.getPublicKey = /*#__PURE__*/function () {\n    var _getPublicKey = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n      var response;\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) switch (_context8.prev = _context8.next) {\n          case 0:\n            if (this.target) {\n              _context8.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context8.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'get_public_key',\n                params: []\n              }\n            });\n          case 4:\n            response = _context8.sent;\n            return _context8.abrupt(\"return\", response);\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }, _callee8, this);\n    }));\n    function getPublicKey() {\n      return _getPublicKey.apply(this, arguments);\n    }\n    return getPublicKey;\n  }();\n  _proto2.signEvent = /*#__PURE__*/function () {\n    var _signEvent = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(event) {\n      var signature;\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) switch (_context9.prev = _context9.next) {\n          case 0:\n            if (this.target) {\n              _context9.next = 2;\n              break;\n            }\n            throw new Error('Not connected');\n          case 2:\n            _context9.next = 4;\n            return this.rpc.call({\n              target: this.target,\n              request: {\n                method: 'sign_event',\n                params: [event]\n              }\n            });\n          case 4:\n            signature = _context9.sent;\n            return _context9.abrupt(\"return\", signature);\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }, _callee9, this);\n    }));\n    function signEvent(_x8) {\n      return _signEvent.apply(this, arguments);\n    }\n    return signEvent;\n  }();\n  _proto2.getRelays = /*#__PURE__*/function () {\n    var _getRelays = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n      return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n        while (1) switch (_context10.prev = _context10.next) {\n          case 0:\n            throw new Error('Not implemented');\n          case 1:\n          case \"end\":\n            return _context10.stop();\n        }\n      }, _callee10);\n    }));\n    function getRelays() {\n      return _getRelays.apply(this, arguments);\n    }\n    return getRelays;\n  }();\n  return Connect;\n}();\n\nvar NostrSigner = /*#__PURE__*/function (_NostrRPC) {\n  _inheritsLoose(NostrSigner, _NostrRPC);\n  function NostrSigner() {\n    return _NostrRPC.apply(this, arguments) || this;\n  }\n  var _proto = NostrSigner.prototype;\n  _proto.disconnect = /*#__PURE__*/function () {\n    var _disconnect = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            this.events.emit('disconnect');\n            return _context.abrupt(\"return\", null);\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    function disconnect() {\n      return _disconnect.apply(this, arguments);\n    }\n    return disconnect;\n  }();\n  _proto.isConnected = function isConnected() {\n    throw new Error('Method not implemented yet.');\n  };\n  return NostrSigner;\n}(NostrRPC);\n\nexport { Connect, ConnectURI, NostrRPC, NostrSigner, broadcastToRelay, connectToRelay, isValidRequest, isValidResponse, now, prepareEvent, prepareRequest, prepareResponse, randomID };\n//# sourceMappingURL=connect.esm.js.map\n","import NstrAdapter from './index.js';\nimport { Connect } from '@nostr-connect/connect';\n\nclass NstrAdapterNip46 extends NstrAdapter {\n    #secretKey = null;\n    \n    constructor(pubkey, secretKey, adapterConfig = {}) {\n        super(pubkey, adapterConfig);\n        this.#secretKey = secretKey;\n    }\n\n    async signEvent(event) {\n        const connect = new Connect({\n            secretKey: this.#secretKey,\n            target: this.pubkey,\n        });\n        await connect.init();\n        \n        event.sig = await connect.signEvent('12323423434');\n        return event;\n    }\n}\n\nexport default NstrAdapterNip46;\n","import { generatePrivateKey, signEvent, getPublicKey, nip04 } from 'nostr-tools';\nimport NstrAdapter from './index.js';\n\nclass NstrAdapterDiscadableKeys extends NstrAdapter {\n    #privateKey;\n\n    constructor(adapterConfig={}) {\n        let key = localStorage.getItem('nostrichat-discardable-key');\n        let publicKey = localStorage.getItem('nostrichat-discardable-public-key');\n\n        if (!key) {\n            key = generatePrivateKey();\n            console.log('generated key', key);\n            publicKey = getPublicKey(key);\n        }\n\n        localStorage.setItem('nostrichat-discardable-key', key);\n        localStorage.setItem('nostrichat-discardable-public-key', publicKey);\n\n        super(publicKey, adapterConfig);\n        \n        this.#privateKey = key;\n        console.log(key);\n    }\n\n    async signEvent(event) {\n        event.sig = await signEvent(event, this.#privateKey);\n        return event;\n    }\n\n    async encrypt(destPubkey, message) {\n        console.log(this.#privateKey);\n        return await nip04.encrypt(this.#privateKey, destPubkey, message);\n    }\n\n    async decrypt(destPubkey, message) {\n        return await nip04.decrypt(this.#privateKey, destPubkey, message);\n    }\n}\n\nexport default NstrAdapterDiscadableKeys;\n","<script>\n    import { onMount } from \"svelte\";\n    // import QR from 'svelte-qr';\n    import { chatAdapter } from './lib/store';\n    import NstrAdapterNip07 from './lib/adapters/nip07.js';\n    import NstrAdapterNip46 from './lib/adapters/nip46.js';\n\timport NstrAdapterDiscadableKeys from './lib/adapters/discardable-keys.js';\n\n    export let websiteOwnerPubkey;\n    export let chatConfiguration;\n    export let relays;\n\n    let hasNostrNip07 = true;\n    let publicKey = null;\n    let nip46URI;\n    let adapterConfig;\n\n    onMount(() => {\n        // hasNostrNip07 = !!window.nostr;\n\n        const type = localStorage.getItem('nostrichat-type');\n\n        if (type === 'nip07') {\n            useNip07();\n        } else if (type === 'nip-46') {\n            useNip46();\n        }\n\n        adapterConfig = {\n            type: chatConfiguration.chatType,\n            tags: chatConfiguration.chatTags,\n            referenceTags: chatConfiguration.chatReferenceTags,\n            websiteOwnerPubkey,\n            relays\n        }\n    });\n\n    function useNip07() {\n        window.nostr.getPublicKey().then((pubkey) => {\n            localStorage.setItem('nostrichat-type', 'nip07');\n            chatAdapter.set(new NstrAdapterNip07(pubkey, adapterConfig))\n        });\n    }\n\n    import { generatePrivateKey, getPublicKey } from 'nostr-tools';\n    import { Connect, ConnectURI } from '@nostr-connect/connect';\n\n    async function useDiscardableKeys() {\n        chatAdapter.set(new NstrAdapterDiscadableKeys(adapterConfig))\n    }\n\n\n    async function useNip46() {\n        let key = localStorage.getItem('nostrichat-nostr-connect-key');\n        let publicKey = localStorage.getItem('nostrichat-nostr-connect-public-key');\n\n        if (key) {\n            chatAdapter.set(new NstrAdapterNip46(publicKey, key, adapterConfig))\n            return;\n        }\n\n        key = generatePrivateKey();\n\n        const connect = new Connect({ secretKey: key, relay: 'wss://nostr.vulpem.com' });\n        connect.events.on('connect', (connectedPubKey) => {\n            localStorage.setItem('nostrichat-nostr-connect-key', key);\n            localStorage.setItem('nostrichat-nostr-connect-public-key', connectedPubKey);\n            localStorage.setItem('nostrichat-type', 'nip-46');\n\n            console.log('connected to nostr connect relay')\n            publicKey = connectedPubKey;\n            chatAdapter.set(new NstrAdapterNip46(publicKey, key))\n            nip46URI = null;\n        });\n        connect.events.on('disconnect', () => {\n            console.log('disconnected from nostr connect relay')\n        })\n        await connect.init();\n\n        let windowTitle, currentUrl, currentDomain;\n\n        try {\n            windowTitle = window.document.title || 'Nostrichat';\n            currentUrl = new URL(window.location.href);\n            currentDomain = currentUrl.hostname;\n        } catch (e) {\n            currentUrl = window.location.href;\n            currentDomain = currentUrl;\n        }\n\n        const connectURI = new ConnectURI({\n            target: getPublicKey(key),\n            relay: 'wss://nostr.vulpem.com',\n            metadata: {\n                name: windowTitle,\n                description: '',\n                url: currentUrl,\n            },\n        });\n\n        nip46URI = connectURI.toString();\n    }\n\n    function Nip46Copy() {\n        navigator.clipboard.writeText(nip46URI);\n    }\n</script>\n\n<h1 class=\"font-bold text-xl mb-3\">\n    How would you like to connect?\n</h1>\n\n{#if publicKey}\n    <p class=\"text-gray-400 mb-3 font-bold\">\n        Nostr Connect is a WIP, not fully implemented yet!\n    </p>\n\n    <p class=\"text-gray-400 mb-3\">\n        You are currently connected with the following public key:\n        <span>{publicKey}</span>\n    </p>\n{/if}\n\n{#if nip46URI}\n    <p class=\"text-gray-600 mb-3\">\n        Scan this with your Nostr Connect (click to copy to clipboard)\n    </p>\n\n    <div class=\"bg-white w-full p-3\"\n        on:click|preventDefault={Nip46Copy}>\n        <!-- <QR text={nip46URI} /> -->\n    </div>\n\n    <button class=\"\n        bg-purple-900\n        hover:bg-purple-700\n        w-full\n        p-2\n        rounded-xl\n        text-center\n        font-regular\n        text-white\n    \" on:click|preventDefault={() => { nip46URI = null; }}>\n        Cancel\n    </button>\n{:else if !publicKey}\n    <div class=\"flex flex-col gap-1\">\n        {#if hasNostrNip07}\n            <button class=\"\n                bg-purple-900\n                hover:bg-purple-700\n                w-full\n                p-4\n                rounded-xl\n                text-center\n                font-regular\n                text-gray-200\n            \" on:click|preventDefault={useNip07}>\n                Browser Extension (NIP-07)\n            </button>\n        {/if}\n\n\n        <button class=\"\n            bg-purple-900\n            hover:bg-purple-700\n            w-full\n            p-4\n            rounded-xl\n            text-center\n            font-regular\n            text-gray-200\n        \" on:click|preventDefault={useNip46}>\n            Nostr Connect (NIP-46)\n        </button>\n\n        <button class=\"\n            bg-purple-900\n            hover:bg-purple-700\n            w-full\n            p-4\n            rounded-xl\n            text-center\n            font-regular\n            text-gray-200\n        \" on:click|preventDefault={useDiscardableKeys}>\n            Anonymous\n            <span class=\"text-xs text-gray-300\">\n                (Ephemeral Keys)\n            </span>\n        </button>\n    </div>\n{/if}\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","\"use strict\";\n/* tslint:disable:max-classes-per-file */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InternalError = exports.InvalidDataError = exports.RoutingError = exports.UnsupportedMethodError = exports.ConnectionError = exports.RejectionError = exports.MissingProviderError = void 0;\n/**\n * Workaround for custom errors when compiling typescript targeting 'ES5'.\n * see: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n * @param {CustomError} error\n * @param newTarget the value of `new.target`\n * @param {Function} errorType\n */\nfunction fixError(error, newTarget, errorType) {\n    Object.setPrototypeOf(error, errorType.prototype);\n    // when an error constructor is invoked with the `new` operator\n    if (newTarget === errorType) {\n        error.name = newTarget.name;\n        // exclude the constructor call of the error type from the stack trace.\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(error, errorType);\n        }\n        else {\n            var stack = new Error(error.message).stack;\n            if (stack) {\n                error.stack = fixStack(stack, \"new \".concat(newTarget.name));\n            }\n        }\n    }\n}\nfunction fixStack(stack, functionName) {\n    if (!stack)\n        return stack;\n    if (!functionName)\n        return stack;\n    // exclude lines starts with:  \"  at functionName \"\n    var exclusion = new RegExp(\"\\\\s+at\\\\s\".concat(functionName, \"\\\\s\"));\n    var lines = stack.split(\"\\n\");\n    var resultLines = lines.filter(function (line) { return !line.match(exclusion); });\n    return resultLines.join(\"\\n\");\n}\n/// CUSTOM ERRORS ///\n// When no WebLN provider is available\nvar MissingProviderError = /** @class */ (function (_super) {\n    __extends(MissingProviderError, _super);\n    function MissingProviderError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, MissingProviderError);\n        return _this;\n    }\n    return MissingProviderError;\n}(Error));\nexports.MissingProviderError = MissingProviderError;\n// When the user rejects a request\nvar RejectionError = /** @class */ (function (_super) {\n    __extends(RejectionError, _super);\n    function RejectionError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, RejectionError);\n        return _this;\n    }\n    return RejectionError;\n}(Error));\nexports.RejectionError = RejectionError;\n// When the node can't be connected to (i.e. the app did nothing wrong)\nvar ConnectionError = /** @class */ (function (_super) {\n    __extends(ConnectionError, _super);\n    function ConnectionError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, ConnectionError);\n        return _this;\n    }\n    return ConnectionError;\n}(Error));\nexports.ConnectionError = ConnectionError;\n// The WebLN provider doesn't support this method\nvar UnsupportedMethodError = /** @class */ (function (_super) {\n    __extends(UnsupportedMethodError, _super);\n    function UnsupportedMethodError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, UnsupportedMethodError);\n        return _this;\n    }\n    return UnsupportedMethodError;\n}(Error));\nexports.UnsupportedMethodError = UnsupportedMethodError;\n// The desired node couldn't be routed to\nvar RoutingError = /** @class */ (function (_super) {\n    __extends(RoutingError, _super);\n    function RoutingError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, RoutingError);\n        return _this;\n    }\n    return RoutingError;\n}(Error));\nexports.RoutingError = RoutingError;\n// An argument passed was somehow invalid (e.g. malformed invoice)\nvar InvalidDataError = /** @class */ (function (_super) {\n    __extends(InvalidDataError, _super);\n    function InvalidDataError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, InvalidDataError);\n        return _this;\n    }\n    return InvalidDataError;\n}(Error));\nexports.InvalidDataError = InvalidDataError;\n// Something broke in the WebLN provider internally, nothing to do with the app\nvar InternalError = /** @class */ (function (_super) {\n    __extends(InternalError, _super);\n    function InternalError(message) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        fixError(_this, _newTarget, InternalError);\n        return _this;\n    }\n    return InternalError;\n}(Error));\nexports.InternalError = InternalError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.requestProvider = void 0;\nvar errors_1 = require(\"./errors\");\nfunction requestProvider(_) {\n    if (_ === void 0) { _ = {}; }\n    return new Promise(function (resolve, reject) {\n        if (typeof window === 'undefined') {\n            return reject(new Error('Must be called in a browser context'));\n        }\n        var webln = window.webln;\n        if (!webln) {\n            return reject(new errors_1.MissingProviderError('Your browser has no WebLN provider'));\n        }\n        webln.enable()\n            .then(function () { return resolve(webln); })\n            .catch(function (err) { return reject(err); });\n    });\n}\nexports.requestProvider = requestProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./client\"), exports);\n__exportStar(require(\"./provider\"), exports);\n__exportStar(require(\"./errors\"), exports);\n","<script>\n    export let icon, amount, amountDisplay, event, mobilePR;\n    import { zappingMessage } from './lib/store';\n    import NDK, { NDKEvent, NDKNip07Signer } from '@nostr-dev-kit/ndk';\n    import { requestProvider } from 'webln';\n\n    let hover = false;\n\n    async function zap() {\n        const signer = new NDKNip07Signer();\n        const ndk = new NDK({ explicitRelayUrls: ['wss://nos.lol', 'wss://relay.nostr.band', 'wss://relay.damus.io', 'wss://nostr.mom', 'wss://no.str.cr'] });\n        ndk.signer = signer;\n        await ndk.connect();\n        let pr;\n        try {\n            const ndkEvent = new NDKEvent(ndk, event);\n            pr = await ndkEvent.zap(amount * 1000);\n        } catch (e) {\n            alert(e)\n            return;\n        }\n\n\n        let webln;\n\n        try {\n            webln = await requestProvider();\n        } catch (err) {\n            mobilePR = pr;\n            return;\n        }\n\n        try {\n            await webln.sendPayment(pr);\n            $zappingMessage = null;\n        } catch (err) {\n            mobilePR = pr;\n        }\n    }\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n    on:mouseenter={() => (hover = true)}\n    on:mouseleave={() => (hover = false)}\n    on:click|preventDefault={zap}\n>\n    {#if !hover}\n        <span class=\"text-xl\">{icon}</span>\n    {:else}\n        <span class=\"text-base text-white flex flex-col items-center\">\n            {amountDisplay||amount}\n        </span>\n    {/if}\n</div>","\"use strict\";\n/**\n * Everything needed to implement your own provider.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","<script>\n    import { afterUpdate, onMount } from 'svelte';\n\timport { selectedMessage, zappingMessage, zapsPerMessage } from './lib/store';\n    import { chatData, chatAdapter } from './lib/store';\n    import { nip19 } from 'nostr-tools';\n    import ZapAmountButton from './ZapAmountButton.svelte';\n    // import { prettifyContent } from '$lib/utils';\n    export let event;\n    export let responses;\n    export let websiteOwnerPubkey;\n\n    let profiles = {};\n    let profilePicture;\n    let npub;\n    let zappingIt;\n    let hovering;\n    let mobilePR;\n\n    let zappedAmount = 0;\n\n    function selectMessage() {\n        if ($selectedMessage === event.id) {\n            $selectedMessage = null;\n        } else {\n            $selectedMessage = event.id;\n        }\n    }\n\n    // delay-fetch responses\n    onMount(() => {\n        $chatAdapter.delayedSubscribe(\n            {kinds: [1, 42, 9735], '#e': [event.id]}\n        , 'responses', 500)\n    })\n\n    const byWebsiteOwner = !!websiteOwnerPubkey === event.pubkey;\n\n    $: profiles = $chatData.profiles;\n    $: displayName = profiles[event.pubkey] && profiles[event.pubkey].display_name || `[${event.pubkey.slice(0, 6)}]`;\n    // $: nip05 = profiles[event.pubkey] && profiles[event.pubkey].nip05;\n    $: zappingIt = $zappingMessage === event.id;\n    $: {\n        try {\n            npub = nip19.npubEncode(event.pubkey);\n        } catch (e) {\n            npub = event.pubkey;\n        }\n    }\n\n    $chatAdapter.on('zap', () => {\n        zappedAmount = $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n    });\n\n    $: {\n        zappedAmount = $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n    }\n\n    afterUpdate(() => {\n        zappedAmount = $zapsPerMessage[event.id]?.reduce((acc, zap) => acc + zap.amount, 0) || 0;\n    });\n\n    $: profilePicture = profiles[event.pubkey] && profiles[event.pubkey].picture || `https://robohash.org/${event.pubkey.slice(0, 1)}.png?set=set1`;\n\n    // const repliedIds = event.tags.filter(e => e[0] === 'e').map(e => e[1]);\n\n    let timestamp = new Date(event.created_at * 1000);\n</script>\n\n<div\n    class=\"\n        flex flex-col gap-4\n        p-2-lg mb-3\n        text-wrap\n        relative\n    \"\n    on:mouseenter={() => (hovering = true)}\n    on:mouseleave={() => (hovering = false)}\n>\n    <div class=\"flex flex-row gap-3\">\n        <div class=\"min-w-fit flex flex-col gap-2\">\n            <a href={`nostr:${npub}`}>\n                <img src=\"{profilePicture}\" class=\"\n                    block w-8 h-8 rounded-full\n                    {byWebsiteOwner ? 'ring-purple-700 ring-4' : ''}\n                \" alt=\"\" />\n            </a>\n\n            <button\n                    class=\"\n                        rounded-full\n                        {zappedAmount > 0 ? 'opacity-100 text-base' : 'bg-orange-500 opacity-10 text-xl'}\n                        w-8 h-8\n                        flex items-center\n                        justify-center\n                        hover:opacity-100\n                    \"\n                    on:click|preventDefault={() => $zappingMessage = $zappingMessage === event.id ? null : event.id}\n                >\n                {#if zappedAmount > 0}\n                    <p class=\"flex flex-col items-center my-4\">\n                        \n                        <span class=\"text-orange-500 font-semibold\">\n                            {zappedAmount/1000}\n                        </span>\n                    </p>\n                {:else}\n                    \n                {/if}\n                </button>\n\n            <div class=\"\n                {zappingIt ?\n                    'w-full rounded-full bg-white  drop-shadow-xl justify-between border-2 border-gray-200' :\n                    ' rounded-full w-8 h-8 justify-center'\n                }\n                flex items-center absolute ml-5 mt-10 z-10\">\n                {#if zappingIt}\n                    {#if mobilePR}\n                        <div class=\"flex flex-col gap-3 w-full\">\n                            <a href={`lightning:${mobilePR}`} class=\"text-center w-full p-3 bg-black text-white rounded-t-xl\">Open in wallet</a>\n                            <button class=\"bg-white rounder-b-xl p-3\" on:click={() => { $zappingMessage = null; }}>\n                                Cancel\n                            </button>\n                        </div>\n                    {:else}\n                        <div class=\"flex flex-row items-stretch justify-between w-full\">\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={500} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={2500} amountDisplay={'2.5k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={5000} amountDisplay={'5k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={10000} amountDisplay={'10k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={100000} amountDisplay={'100k'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                            <div class=\"flex flex-col hover:bg-orange-500 text-white rounded-full w-12 h-12 items-center justify-center cursor-pointer\">\n                                <ZapAmountButton icon=\"\" amount={1000000} amountDisplay={'1M'} {event} bind:mobilePR={mobilePR} />\n                            </div>\n                        </div>\n                    {/if}\n                {/if}\n            </div>\n\n            <!-- <span class=\"text-base font-semibold text-clip\">{displayName}</span>\n                {#if nip05}\n                    <span class=\"text-sm text-gray-400\">{nip05}</span>\n                {/if} -->\n        </div>\n\n        <div class=\"w-full overflow-hidden\">\n            <div class=\"flex flex-row justify-between text-center overflow-clip text-clip w-full\">\n            </div>\n\n            <div class=\"\n                max-h-64 text-base\n                cursor-pointer\n                border border-slate-200\n                {$selectedMessage === event.id ? 'bg-purple-700 text-white' : 'bg-white text-gray-900 hover:bg-slate-100'}\n                p-4 py-2 overflow-auto rounded-2xl\n                shadow-sm\n            \" on:click|preventDefault={()=>{selectMessage(event.id)}}\n            on:keydown|preventDefault={()=>{selectMessage(event.id)}}\n            on:keyup|preventDefault={()=>{selectMessage(event.id)}}\n            >\n                {event.content}\n            </div>\n\n            <div class=\"flex flex-row-reverse justify-between mt-1 overflow-clip items-center relative\">\n                <div class=\"text-xs text-gray-400 text-ellipsis overflow-clip whitespace-nowrap\">\n                    <span class=\"py-2\">\n                        {timestamp.toLocaleString()}\n                    </span>\n                </div>\n\n                {#if byWebsiteOwner}\n                    <div class=\"text-purple-500 text-xs\">\n                        Website owner\n                    </div>\n                {:else}\n                    <div class=\"text-xs text-gray-400\">\n                        {displayName}\n                    </div>\n                {/if}\n            </div>\n        </div>\n    </div>\n</div>\n\n{#if responses[event.id].length > 0}\n    <div class=\"pl-5 border-l border-l-gray-400 flex flex-col gap-4\">\n        {#each responses[event.id] as response}\n            <svelte:self {websiteOwnerPubkey} event={response} {responses} />\n        {/each}\n    </div>\n{/if}\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","export default {\n  $(selector) {\n    if (typeof selector === \"string\") {\n      return document.querySelector(selector);\n    }\n    return selector;\n  },\n  extend(...args) {\n    return Object.assign(...args);\n  },\n  cumulativeOffset(element) {\n    let top = 0;\n    let left = 0;\n\n    do {\n      top += element.offsetTop || 0;\n      left += element.offsetLeft || 0;\n      element = element.offsetParent;\n    } while (element);\n\n    return {\n      top: top,\n      left: left\n    };\n  },\n  directScroll(element) {\n    return element && element !== document && element !== document.body;\n  },\n  scrollTop(element, value) {\n    let inSetter = value !== undefined;\n    if (this.directScroll(element)) {\n      return inSetter ? (element.scrollTop = value) : element.scrollTop;\n    } else {\n      return inSetter\n        ? (document.documentElement.scrollTop = document.body.scrollTop = value)\n        : window.pageYOffset ||\n            document.documentElement.scrollTop ||\n            document.body.scrollTop ||\n            0;\n    }\n  },\n  scrollLeft(element, value) {\n    let inSetter = value !== undefined;\n    if (this.directScroll(element)) {\n      return inSetter ? (element.scrollLeft = value) : element.scrollLeft;\n    } else {\n      return inSetter\n        ? (document.documentElement.scrollLeft = document.body.scrollLeft = value)\n        : window.pageXOffset ||\n            document.documentElement.scrollLeft ||\n            document.body.scrollLeft ||\n            0;\n    }\n  }\n};\n","import { cubicInOut } from \"svelte/easing\";\nimport { noop, loop, now } from \"svelte/internal\";\nimport _ from \"./helper\";\n\nconst defaultOptions = {\n  container: \"body\",\n  duration: 500,\n  delay: 0,\n  offset: 0,\n  easing: cubicInOut,\n  onStart: noop,\n  onDone: noop,\n  onAborting: noop,\n  scrollX: false,\n  scrollY: true\n};\n\nconst _scrollTo = options => {\n  let {\n    offset,\n    duration,\n    delay,\n    easing,\n    x=0,\n    y=0,\n    scrollX,\n    scrollY,\n    onStart,\n    onDone,\n    container,\n    onAborting,\n    element\n  } = options;\n\n  if (typeof offset === \"function\") {\n    offset = offset();\n  }\n\n  var cumulativeOffsetContainer = _.cumulativeOffset(container);\n  var cumulativeOffsetTarget = element\n    ? _.cumulativeOffset(element)\n    : { top: y, left: x };\n\n  var initialX = _.scrollLeft(container);\n  var initialY = _.scrollTop(container);\n\n  var targetX =\n    cumulativeOffsetTarget.left - cumulativeOffsetContainer.left + offset;\n  var targetY =\n    cumulativeOffsetTarget.top - cumulativeOffsetContainer.top + offset;\n\n  var diffX = targetX - initialX;\n\tvar diffY = targetY - initialY;\n\n  let scrolling = true;\n  let started = false;\n  let start_time = now() + delay;\n  let end_time = start_time + duration;\n\n  function scrollToTopLeft(element, top, left) {\n    if (scrollX) _.scrollLeft(element, left);\n    if (scrollY) _.scrollTop(element, top);\n  }\n\n  function start(delayStart) {\n    if (!delayStart) {\n      started = true;\n      onStart(element, {x, y});\n    }\n  }\n\n  function tick(progress) {\n    scrollToTopLeft(\n      container,\n      initialY + diffY * progress,\n      initialX + diffX * progress\n    );\n  }\n\n  function stop() {\n    scrolling = false;\n  }\n\n  loop(now => {\n    if (!started && now >= start_time) {\n      start(false)\n    }\n\n    if (started && now >= end_time) {\n      tick(1);\n      stop();\n      onDone(element, {x, y});\n    }\n\n    if (!scrolling) {\n      onAborting(element, {x, y});\n      return false;\n    }\n    if (started) {\n      const p = now - start_time;\n      const t = 0 + 1 * easing(p / duration);\n      tick(t);\n    }\n\n    return true;\n  });\n\n  start(delay);\n\n  tick(0);\n\n  return stop;\n};\n\nconst proceedOptions = options => {\n\tlet opts = _.extend({}, defaultOptions, options);\n  opts.container = _.$(opts.container);\n  opts.element = _.$(opts.element);\n  return opts;\n};\n\nconst scrollContainerHeight = containerElement => {\n  if (\n    containerElement &&\n    containerElement !== document &&\n    containerElement !== document.body\n  ) {\n    return containerElement.scrollHeight - containerElement.offsetHeight;\n  } else {\n    let body = document.body;\n    let html = document.documentElement;\n\n    return Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n  }\n};\n\nexport const setGlobalOptions = options => {\n\t_.extend(defaultOptions, options || {});\n};\n\nexport const scrollTo = options => {\n  return _scrollTo(proceedOptions(options));\n};\n\nexport const scrollToBottom = options => {\n  options = proceedOptions(options);\n\n  return _scrollTo(\n    _.extend(options, {\n      element: null,\n      y: scrollContainerHeight(options.container)\n    })\n  );\n};\n\nexport const scrollToTop = options => {\n  options = proceedOptions(options);\n\n  return _scrollTo(\n    _.extend(options, {\n      element: null,\n      y: 0\n    })\n  );\n};\n\nexport const makeScrollToAction = scrollToFunc => {\n  return (node, options) => {\n    let current = options;\n    const handle = e => {\n      e.preventDefault();\n      scrollToFunc(\n        typeof current === \"string\" ? { element: current } : current\n      );\n    };\n    node.addEventListener(\"click\", handle);\n    node.addEventListener(\"touchstart\", handle);\n    return {\n      update(options) {\n        current = options;\n      },\n      destroy() {\n        node.removeEventListener(\"click\", handle);\n        node.removeEventListener(\"touchstart\", handle);\n      }\n    };\n  };\n};\n\nexport const scrollto = makeScrollToAction(scrollTo);\nexport const scrolltotop = makeScrollToAction(scrollToTop);\nexport const scrolltobottom = makeScrollToAction(scrollToBottom);\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","<script>\n    import { chatAdapter, chatData, selectedMessage, zapsPerMessage } from './lib/store';\n    import { onMount } from 'svelte';\n    import NostrNote from './NostrNote.svelte';\n    import * as animateScroll from \"svelte-scrollto\";\n\n    let events = [];\n    let responseEvents = [];\n    let responses = {};\n    let profiles = {};\n\n    export let websiteOwnerPubkey;\n    export let chatConfiguration;\n    let prevChatConfiguration;\n\n    $: {\n        if (chatConfiguration !== prevChatConfiguration && $chatAdapter) {\n            $chatAdapter.setChatConfiguration(\n                chatConfiguration.chatType,\n                chatConfiguration.chatTags,\n                chatConfiguration.chatReferenceTags,\n                chatConfiguration.chatId);\n            events = [];\n            responses = {};\n            rootNoteId = null;\n            localStorage.removeItem('rootNoteId');\n\n            // rootNoteId = localStorage.getItem('rootNoteId');\n            // if (rootNoteId) {\n            //     $chatAdapter.subscribeToEventAndResponses(rootNoteId);\n            // }\n        }\n        prevChatConfiguration = chatConfiguration;\n    }\n\n    function getEventById(eventId) {\n        let event = events.find(e => e.id === eventId);\n        event = event || responseEvents.find(e => e.id === eventId);\n        return event;\n    }\n\n    async function sendMessage() {\n        const input = document.getElementById('message-input');\n        const message = input.value;\n        input.value = '';\n        let extraParams = { tags: [], tagPubKeys: [] };\n\n        // if this is the rootLevel we want to tag the owner of the site's pubkey\n        if (!rootNoteId && websiteOwnerPubkey) { extraParams.tagPubKeys = [websiteOwnerPubkey] }\n\n        // if we are responding to an event, we want to tag the event and the pubkey\n        if ($selectedMessage) {\n            extraParams.tags.push(['e', $selectedMessage, \"wss://nos.lol\", \"root\"]);\n            extraParams.tagPubKeys.push(getEventById($selectedMessage).pubkey);\n        }\n\n        // if (rootNoteId) {\n        //     // mark it as a response to the most recent event\n        //     const mostRecentEvent = events[events.length - 1];\n        //     // go through all the tags and add them to the new message\n        //     if (mostRecentEvent) {\n        //         mostRecentEvent.tags.forEach(tag => {\n        //             if (tag[0] === 'e') {\n        //                 extraParams.tags.push(tag);\n        //             }\n        //         })\n        //         extraParams.tags.push(['e', mostRecentEvent.id]);\n        //         extraParams.tags.push(['p', mostRecentEvent.pubkey]);\n        //     }\n        // }\n\n        const noteId = await $chatAdapter.send(message, extraParams);\n\n        if (!rootNoteId) {\n            rootNoteId = noteId;\n            localStorage.setItem('rootNoteId', rootNoteId);\n        }\n    }\n\n    async function inputKeyDown(event) {\n        if (event.key === 'Enter') {\n            sendMessage();\n            event.preventDefault();\n        }\n    }\n\n    function messageReceived(message) {\n        const messageLastEventTag = message.tags.filter(tag => tag[0] === 'e').pop();\n        let isThread;\n\n        if (chatConfiguration.chatType === 'GLOBAL') {\n            isThread = message.tags.filter(tag => tag[0] === 'e').length >= 1;\n        } else if (chatConfiguration.chatType === 'GROUP') {\n            isThread = message.tags.filter(tag => tag[0] === 'e' && tag[1] !== chatConfiguration.chatId).length >= 1;\n        } else {\n            const pubkeysTagged = message.tags.filter(tag => tag[0] === 'p').map(tag => tag[1]);\n            isThread = new Set(pubkeysTagged).size >= 2;\n        }\n\n        if (!responses[message.id]) { responses[message.id] = [] };\n\n        if (isThread) {\n            // get the last \"e\" tag, which is tagging the immediate parent\n            const lastETag = message.tags.filter(tag => tag[0] === 'e').pop();\n            if (lastETag && lastETag[1]) {\n                // if there is one, add it to the response\n                if (!responses[lastETag[1]]) {\n                    responses[lastETag[1]] = [];\n                }\n                responses[lastETag[1]].push(message);\n            }\n\n            responseEvents.push(message);\n            responseEvents = responseEvents;\n        } else {\n            // insert message so that it's chronologically ordered by created_at\n            let index = 0;\n            while (index < events.length && events[index].created_at < message.created_at) {\n                index++;\n            }\n            events.splice(index, 0, message);\n            events = events;\n        }\n\n        responses = responses;\n\n        scrollDown()\n    }\n\n    function scrollDown() {\n        animateScroll.scrollToBottom({\n            container: document.getElementById('messages-container'),\n            offset: 999999, // hack, oh well, browsers suck\n            duration: 50\n        })\n    }\n\n    function zapReceived(zap) {\n        const event = events.find(event => event.id === zap.zappedEvent);\n        if (!event) { return; }\n\n        if (!$zapsPerMessage[event.id]) $zapsPerMessage[event.id] = [];\n        $zapsPerMessage[event.id].push(zap);\n    }\n\n    function reactionReceived(reaction) {\n        const event = events.find(event => event.id === reaction.id);\n        if (!event) { return; }\n\n        event.reactions = event.reactions || [];\n        event.reactions.push(reaction);\n        events = events;\n    }\n\n    let rootNoteId;\n    let channelMetadata = {};\n\n    onMount(() => {\n        $chatAdapter.on('message', messageReceived);\n\n        $chatAdapter.on('connectivity', (e) => {\n            connectivityStatus = e;\n        })\n\n        $chatAdapter.on('reaction', reactionReceived);\n        $chatAdapter.on('zap', zapReceived);\n        $chatAdapter.on('deleted', (deletedEvents) => {\n            deletedEvents.forEach(deletedEventId => {\n                const index = events.findIndex(event => event.id === deletedEventId);\n                if (index !== -1) {\n                    events[index].deleted = true;\n                    events = events;\n                }\n            })\n        });\n\n        $chatAdapter.on('profile', ({pubkey, profile}) => {\n            let profiles = $chatData.profiles;\n            profiles[pubkey] = profile;\n\n            chatData.set({ profiles, ...$chatData })\n        })\n\n        $chatAdapter.on('channelMetadata', (event) => {\n            channelMetadata = JSON.parse(event.content);\n        })\n    });\n\n    let connectivityStatus = {};\n    let connectedRelays = 0;\n    let totalRelays = 0;\n\n    $: {\n        connectedRelays = Object.values(connectivityStatus).filter(status => status === 'connected').length;\n        totalRelays = Object.values(connectivityStatus).length;\n\n        if ($chatAdapter?.pubkey && !profiles[$chatAdapter.pubkey]) {\n            $chatAdapter.reqProfile($chatAdapter.pubkey)\n        }\n    }\n\n    let connectedChatId;\n\n    $: if (connectedChatId !== $chatAdapter?.chatId) {\n        connectedChatId = $chatAdapter?.chatId;\n        channelMetadata = {};\n    }\n\n    $: profiles = $chatData.profiles;\n\n    function selectParent() {\n        if (chatConfiguration.chatType === 'GROUP') {\n            $selectedMessage = null;\n        } else {\n            // get the last tagged event in the tags array of the current $selectedMessage\n            const lastETag = getEventById($selectedMessage).tags.filter(tag => tag[0] === 'e').pop();\n            const lastETagId = lastETag && lastETag[1];\n\n            $selectedMessage = lastETagId;\n        }\n\n        scrollDown()\n    }\n\n    let ownName;\n    $: ownName = $chatAdapter?.pubkey ? pubkeyName($chatAdapter.pubkey) : \"\";\n\n    function pubkeyName(pubkey) {\n        let name;\n\n        if (profiles[$chatAdapter.pubkey]) {\n            let self = profiles[$chatAdapter.pubkey];\n\n            // https://xkcd.com/927/\n            name = self.display_name ||\n                    self.displayName ||\n                    self.name ||\n                    self.nip05;\n\n        }\n\n        if (!name) { name = `[${pubkey.slice(0, 6)}]`; }\n\n        return name;\n    }\n\n</script>\n\n<div class=\"\n    bg-purple-700 text-white\n    -mx-4 -mt-5 mb-3\n    px-4 py-3\n    overflow-clip\n    flex flex-row justify-between items-center\n\">\n\n    <div class=\"text-lg font-semibold\">\n        {#if $chatAdapter?.pubkey}\n            {ownName}\n        {/if}\n    </div>\n\n    <span class=\"text-xs flex flex-col items-end mt-2 text-gray-200 gap-1\">\n        <div class=\"flex flex-row gap-1 overflow-clip\">\n            {#each Array(totalRelays) as _, i}\n                <span class=\"\n                    inline-block\n                    rounded-full\n                    {connectedRelays > i ? 'bg-green-500' : 'bg-gray-300'}\n                    w-2 h-2\n                \"></span>\n            {/each}\n        </div>\n\n        {connectedRelays}/{totalRelays} relays\n    </span>\n</div>\n\n{#if channelMetadata.name}\n    <div class=\"flex flex-row gap-2 mb-3 bg-zinc-300 text-zinc-800 px-4 py-2 -mx-4 -mt-3\">\n        {#if channelMetadata.picture}\n            <img src={channelMetadata.picture} class=\"w-12 h-12 rounded-full\" />\n        {/if}\n\n        <div class=\"flex flex-col\">\n            <div class=\"font-extrabold text-xl\">{channelMetadata.name}</div>\n            {#if channelMetadata.about}\n                <div class=\"text-sm truncate font-regular\">{channelMetadata.about}</div>\n            {/if}\n        </div>\n    </div>\n{/if}\n\n{#if $selectedMessage}\n    {#if !getEventById($selectedMessage)}\n        <h1>Couldn't find event with ID {$selectedMessage}</h1>\n    {:else}\n    <div class=\"flex flex-row mb-3\">\n        <a href='#' on:click|preventDefault={selectParent}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75\" />\n            </svg>\n        </a>\n\n        <div class=\"flex flex-col ml-2\">\n            <span class=\"text-lg text-black overflow-hidden whitespace-nowrap text-ellipsis\">\n                {getEventById($selectedMessage).content}\n            </span>\n        </div>\n    </div>\n    {/if}\n{/if}\n\n<div id=\"messages-container\" class=\"overflow-auto -mx-4 px-4\" style=\"height: 50vh; min-height: 300px;\">\n    <div id=\"messages-container-inner\" class=\"flex flex-col gap-4\">\n        {#if $selectedMessage}\n            <NostrNote event={getEventById($selectedMessage)} {responses} {websiteOwnerPubkey} />\n        {:else}\n            {#each events as event}\n                <NostrNote {event} {responses} {websiteOwnerPubkey} />\n                {#if event.deleted}\n                     deleted\n                {/if}\n            {/each}\n        {/if}\n    </div>\n</div>\n\n\n<div class=\"flex flex-col\">\n    <div class=\"\n        border-y border-y-slate-200\n        -mx-4 my-2 bg-slate-100 text-black text-sm\n        px-4 py-2\n    \">\n        {#if chatConfiguration.chatType === 'DM'}\n            <b>Encrypted chat:</b>\n            only your chat partner can see these messages.\n        {:else if chatConfiguration.chatType === 'GROUP'}\n            <b>Public chat:</b>\n            anyone can see these messages.\n        {:else}\n            <b>Public notes:</b>\n            your followers see your messages on their timeline\n        {/if}\n    </div>\n\n    <div class=\"flex flex-row gap-2 -mx-1\">\n        <textarea\n            type=\"text\"\n            id=\"message-input\"\n            class=\"\n                -mb-2\n                p-2\n                w-full\n                resize-none\n                rounded-xl\n                text-gray-600\n                border\n            \" placeholder=\"Say hello!\"\n            rows=1\n            on:keydown={inputKeyDown}\n        ></textarea>\n        <button type=\"button\" class=\"inline-flex items-center rounded-full border border-transparent bg-purple-700 p-3 text-white shadow-sm hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2\" on:click|preventDefault={sendMessage}>\n            <!-- Heroicon name: outline/plus -->\n            <svg aria-hidden=\"true\" class=\"w-6 h-6 rotate-90\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"></path></svg>\n        </button>\n    </div>\n</div>\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","<script>\n    import { chatAdapter } from './lib/store';\n    import KeyPrompt from './KeyPrompt.svelte';\n    import ConnectedWidget from './ConnectedWidget.svelte';\n\n    export let websiteOwnerPubkey;\n    export let chatStarted;\n    export let chatConfiguration;\n    export let relays;\n\n    $: chatStarted = !!$chatAdapter\n</script>\n\n{#if !chatStarted}\n    <KeyPrompt {websiteOwnerPubkey} {chatConfiguration} {relays} />\n{:else}\n    <ConnectedWidget {websiteOwnerPubkey} {chatConfiguration} {relays} />\n{/if}\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","<script>\n    import Container from './Container.svelte';\n\n    export let websiteOwnerPubkey;\n    export let chatType;\n    export let chatTags;\n    export let chatReferenceTags;\n    export let relays;\n    export let chatId;\n\n    let showChat = false;\n    let minimizeChat = false;\n\n    function toggleChat() {\n        if (showChat) {\n            minimizeChat = !minimizeChat;\n        } else {\n            showChat = !showChat;\n        }\n    }\n</script>\n\n<div class=\"\n    fixed bottom-5 right-5 mb-5 flex flex-col item-end font-sans\n\">\n    {#if showChat}\n        <div class=\"\n\t\t\tshadow-2xl\n            bg-white/90 backdrop-brightness-150 backdrop-blur-md mb-5 w-96 max-w-screen-sm text-black rounded-3xl p-5\n            overflow-auto\n            flex flex-col justify-end\n            {minimizeChat ? 'hidden' : ''}\n        \" style=\"max-height: 80vh;\">\n            <Container\n                {websiteOwnerPubkey}\n                chatConfiguration={{\n                    chatType,\n                    chatTags,\n                    chatId,\n                    chatReferenceTags,\n                }}\n                {relays}\n            />\n        </div>\n    {/if}\n\n\n    <div class=\"self-end\">\n        <a href=\"#\" class=\"text-white bg-purple-900 hover:bg-purple-700 w-full p-5 rounded-full flex-shrink-1 text-center font-semibold flex flex-row items-center gap-4\" on:click|preventDefault={toggleChat}>\n            <span class=\"tracking-wider flex\">\n                <span class=\"\n\t\t\t\t\ttext-white\n\t\t\t\t\">Nostri</span><span class=\"text-purple-300\">Chat</span>\n            </span>\n            <svg fill=\"#ffffff\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25px\" height=\"25px\" viewBox=\"0 0 571.004 571.004\" xml:space=\"preserve\">\n                <g>\n                    <g>\n                        <path d=\"M533.187,269.019c-1.432-1.746-2.219-3.876-1.252-5.993c1.868-4.08,0.611-7.658-0.931-11.465\n                            c-0.877-2.167-0.796-4.716-1.15-7.095c-0.221-1.493-0.057-3.199-0.742-4.435c-1.775-3.199-3.812-6.275-5.949-9.245\n                            c-2.681-3.717-5.564-7.291-8.38-10.914c-3.325-4.284-6.581-8.633-10.09-12.766c-0.706-0.833-2.604-1.42-3.607-1.085\n                            c-2.411,0.808-4.732,2.052-6.874,3.452c-2.771,1.812-5.435,3.317-8.928,3.713c-3.953,0.453-8.062,1.403-11.604,3.154\n                            c-5.189,2.562-9.747,6.401-14.924,9c-4.913,2.464-8.328,6.112-11.184,10.567c-0.783,1.22-1.705,2.371-2.685,3.444\n                            c-3.252,3.574-5.549,7.629-7.051,12.248c-1.154,3.554-2.378,7.226-4.373,10.322c-1.963,3.044-3.256,6.194-4.162,9.601\n                            c-0.285,1.065-0.44,2.167-0.656,3.251c-2.212-0.539-4.19-0.873-6.06-1.518c-1.709-0.592-3.684-1.15-4.879-2.375\n                            c-2.979-3.052-6.528-5.059-10.388-6.577c-3.448-1.354-6.581-3.06-9.441-5.496c-1.514-1.29-3.771-1.738-5.721-2.489\n                            c-1.419-0.547-3.043-0.714-4.3-1.501c-3.439-2.146-6.639-4.68-10.11-6.765c-2.256-1.359-4.737-2.542-7.271-3.166\n                            c-1.722-0.424-2.293-0.865-2.216-2.599c0.241-5.227-0.832-10.175-3.235-14.872c-2.855-5.582-8.723-8.625-14.777-7.589\n                            c-2.697,0.461-5.573,1.347-8.128,0.833c-3.329-0.669-6.516-2-10.028-1.861c-0.612,0.025-1.31-0.437-1.864-0.82\n                            c-4.076-2.832-8.152-5.663-12.163-8.584c-1.489-1.085-2.782-1.154-4.442-0.322c-1.221,0.612-2.705,0.955-4.08,0.967\n                            c-6.047,0.062-12.098-0.082-18.148-0.077c-5.173,0.004-10.498,1.815-15.377-1.399c-0.241-0.159-0.588-0.216-0.886-0.221\n                            c-3.023-0.028-4.488-1.632-5.096-4.524c-0.171-0.82-1.436-1.971-2.236-2c-3.986-0.143-7.984-0.041-11.971,0.139\n                            c-2.187,0.102-4.619,0.004-6.483,0.922c-3.941,1.942-7.556,4.533-11.355,6.773c-1.505,0.889-3.023,1.085-3.872-0.763\n                            c0.979-1.261,2.337-2.272,2.627-3.525c0.771-3.37-3.705-7.181-6.969-6.059c-1.498,0.514-3.003,1.208-4.272,2.138\n                            c-2.464,1.807-4.725,3.896-7.144,5.769c-3.011,2.33-6.055,4.655-10.449,4.737c0.983-3.753-1.718-5.104-4.108-6.597\n                            c-1.094-0.686-2.293-1.281-3.525-1.652c-3.276-1-6.348-0.763-8.956,1.828c-2.158,2.142-3.488,2.179-6.014,0.367\n                            c-3.081-2.208-3.986-2.175-7.128,0c-1.122,0.775-2.346,1.832-3.586,1.926c-4.268,0.318-6.646,3.052-8.931,6.132\n                            c-1.632,2.203-3.244,4.472-5.173,6.405c-4.378,4.39-8.911,8.629-13.48,12.815c-0.608,0.559-1.95,0.873-2.709,0.608\n                            c-3.378-1.191-5.582-3.823-6.899-7.001c-2.521-6.075-4.957-12.203-7.07-18.429c-0.816-2.399-1.11-5.165-0.865-7.687\n                            c0.559-5.786,1.771-11.51,2.411-17.291c1.196-10.796,3.583-21.343,7.405-31.445c6.773-17.891,13.934-35.643,21.2-53.342\n                            c4.619-11.249,7.817-22.852,10.167-34.75c1.644-8.319,2.477-16.63,1.901-25.137c-0.286-4.227,0.232-8.56,0.808-12.787\n                            c1.669-12.232-2.46-19.547-13.843-24.068c-1.403-0.559-2.766-1.228-4.149-1.844c-2.15,0-4.3,0-6.455,0\n                            c-2.909,0.91-5.871,1.681-8.715,2.762c-3.827,1.457-7.989,2.484-10.51,6.145c-1.701,2.472-4.088,3.5-6.916,4.06\n                            c-3.9,0.771-7.797,1.62-11.62,2.705c-3.378,0.959-6.369,2.709-9.135,5.872c6.863,1.652,13.211,3.305,19.617,4.692\n                            c7.629,1.652,14.558,4.729,20.518,9.763c2.954,2.493,5.667,5.447,6.165,9.425c0.51,4.084,0.608,8.271,0.392,12.383\n                            c-0.563,10.694-4.137,20.661-7.976,30.515c-2.358,6.059-5.406,11.876-7.36,18.054c-4.321,13.656-8.486,27.348-14.19,40.522\n                            c-3.309,7.646-6.83,15.251-8.307,23.534c-1.722,9.657-3.264,19.343-4.917,29.013c-0.845,4.958-0.877,10.049-2.864,14.819\n                            c-0.873,2.093-1.269,4.406-1.693,6.654c-0.975,5.182-1.832,10.379-2.733,15.573c0,7.838,0,15.675,0,23.513\n                            c0.632,3.905,1.363,7.801,1.877,11.722c1.481,11.232,4.773,21.955,8.825,32.489c0.816,2.121,1.322,4.378,1.783,6.613\n                            c0.718,3.473,1.069,7.365,4.309,9.303c2.427,1.452,2.982,3.402,3.603,5.671c1.828,6.684,1.318,13.428,0.147,20.086\n                            c-1.114,6.341-0.845,12.525,0.861,18.65c2.313,8.318,4.72,16.613,7.291,24.859c0.461,1.48,1.71,2.896,2.946,3.916\n                            c5.3,4.382,10.735,8.605,16.108,12.897c0.355,0.281,0.645,0.656,0.914,1.028c2.652,3.672,6.373,5.879,10.677,6.638\n                            c8.262,1.457,16.275,4.117,24.664,4.929c1.363,0.131,2.742,0.453,4.035,0.906c2.362,0.828,4.696,1.733,7.038,2.623\n                            c1.257,0.824,2.391,1.832,3.415,3.064c-0.698,2.239-1.901,4.234-3.199,6.164c-3.529,5.239-8.344,8.948-14.007,11.633\n                            c-5.818,2.754-11.975,4.442-18.242,5.744c-8.115,1.686-16.259,3.231-24.378,4.88c-6.789,1.379-13.248,3.79-19.633,6.414\n                            c-8.25,3.39-16.463,6.879-24.77,10.13c-6.447,2.525-13.158,4.149-20.086,4.68c-2.077,0.159-4.178,0.017-6.267,0.065\n                            c-0.604,0.017-1.326,0.045-1.783,0.367c-3.46,2.437-7.446,3.407-11.481,4.272c-1.607,0.347-3.203,0.742-4.802,1.117\n                            c-4.423,1.049-7.703,3.672-10.237,7.36c-2.481,3.619-3.827,7.691-4.762,11.914c-1.26,5.708-1.685,11.521-1.921,17.344\n                            c-0.306,7.405-0.526,14.814-0.828,22.22c-0.082,2.023-0.367,4.035-0.486,6.059c-0.033,0.592,0.012,1.302,0.314,1.779\n                            c3.525,5.654,7.299,11.126,12.276,15.643c4.251,3.859,8.993,6.769,14.819,7.557c0.171,0.024,0.326,0.175,0.485,0.265\n                            c1.775,0,3.55,0,5.32,0c1.032-0.253,2.085-0.444,3.097-0.767c2.216-0.702,4.415-1.461,6.663-2.212\n                            c-0.196-1.881-0.971-3.166-2.317-3.962c-1.236-0.734-2.595-1.301-3.958-1.771c-1.73-0.596-3.55-0.942-5.275-1.554\n                            c-1.114-0.396-2.208-0.968-3.174-1.648c-1.367-0.968-1.979-2.424-2.052-4.097c0.069-0.102,0.118-0.257,0.212-0.298\n                            c4.643-1.885,7.16-5.879,9.694-9.837c0.298-0.461,0.294-1.195,0.241-1.787c-0.445-4.696-1.775-9.184-3.354-13.599\n                            c-1.75-4.884-3.595-9.73-5.333-14.614c-0.551-1.547-0.836-3.183-1.326-4.749c-0.318-1.017,0.11-1.543,0.938-1.971\n                            c1.64-0.841,3.423-0.832,5.189-0.886c2.464-0.073,4.945,0.041,7.393-0.188c1.408-0.131,2.925-0.515,4.121-1.236\n                            c13.692-8.303,28.474-14.003,43.791-18.413c13.876-3.998,27.997-6.915,42.244-9.229c6.247-1.012,12.501-1.967,18.76-2.897\n                            c0.918-0.134,1.665-0.428,2.371-1.027c4.227-3.595,9.217-5.586,14.635-6.259c5.773-0.715,11.608-0.951,17.393-1.563\n                            c3.578-0.379,7.161-0.905,10.678-1.656c4.308-0.918,8.045-3.129,11.146-6.205c2.688-2.669,5.132-5.59,7.593-8.482\n                            c3.28-3.855,6.414-7.834,9.727-11.661c1.02-1.179,2.432-2.012,3.631-3.039c0.792-0.674,1.501-0.653,2.391-0.11\n                            c4.125,2.529,8.576,4.32,13.199,5.712c5.716,1.722,11.566,2.75,17.495,3.374c10.983,1.159,22,1.204,33.023,0.906\n                            c3.166-0.086,6.333-0.09,9.503-0.184c0.93-0.029,1.718,0.171,2.473,0.729c3.309,2.444,6.646,4.852,9.963,7.291\n                            c3.117,2.293,6.345,4.402,9.927,5.92c0.641,0.273,1.277,0.612,1.95,0.735c2.758,0.497,4.741,2.235,6.744,4.002\n                            c5.908,5.214,11.343,10.894,16.161,17.111c6.324,8.156,12.468,16.455,18.617,24.745c6.152,8.295,12.342,16.557,19.396,24.125\n                            c6.863,7.36,14.423,13.868,23.122,18.984c0.775,0.457,1.432,0.955,1.844,1.815c3.187,6.655,8.475,11.09,15.076,14.093\n                            c6.81,3.097,14.006,4.256,21.444,4.142c10.33-0.159,20.062-2.53,28.906-8.014c5.264-3.264,9.572-7.471,12.347-13.097\n                            c1.15-2.338,2.109-4.737,2.269-7.385c0.016-0.29,0.212-0.571,0.326-0.853c0-0.633,0-1.27,0-1.901\n                            c-3.488-0.6-6.802,0.208-10.045,1.362c-3.101,1.102-6.124,2.416-9.25,3.443c-2.692,0.886-5.442,1.673-8.225,2.195\n                            c-4.554,0.853-8.042-1.113-10.037-5.41c0.804-1.049,1.995-1.195,3.194-1.253c2.338-0.113,4.685-0.143,7.022-0.302\n                            c0.799-0.053,1.664-0.249,2.338-0.648c0.6-0.359,1.121-1.024,1.411-1.673c0.498-1.126,0.311-1.44-0.869-2.085\n                            c-3.402-1.856-6.993-3.264-10.714-4.324c-8.421-2.399-17.055-3.028-25.757-3.061c-1.836-0.008-3.677-0.004-5.513,0.082\n                            c-0.963,0.045-1.66-0.249-2.366-0.906c-4.843-4.5-9.094-9.53-13.166-14.721c-6.613-8.429-12.48-17.389-18.47-26.259\n                            c-2.836-4.198-5.786-8.319-8.769-12.411c-0.999-1.375-2.244-2.574-3.419-3.811c-0.384-0.404-0.885-0.727-1.383-0.991\n                            c-1.358-0.727-2.269-0.408-2.905,1.003c-0.229,0.511-0.379,1.062-0.648,1.828c-0.633-0.465-1.179-0.841-1.697-1.253\n                            c-5.03-4.019-8.866-9.058-11.905-14.655c-2.954-5.446-5.627-11.048-8.344-16.626c-2.607-5.353-5.092-10.767-8.438-15.712\n                            c-1.521-2.248-3.317-4.312-4.9-6.523c-0.783-1.094-1.709-1.229-2.949-1.094c-5.324,0.579-10.625,0.494-15.843-0.894\n                            c-2.591-0.689-5.035-1.718-7.1-3.488c-1.473-1.269-2.562-2.746-3.211-4.513c1.95-0.433,3.893-0.897,5.818-1.424\n                            c6.459-1.767,12.926-2.469,19.552-2.081c7.964,0.466,15.92,1.159,23.892,1.437c2.853,0.098,5.966-0.172,8.557-1.244\n                            c3.859-1.596,7.544-3.799,10.971-6.206c5.075-3.566,9.702-7.78,14.847-11.232c2.379-1.595,3.203-3.292,3.306-5.92\n                            c0.134-3.509,1.9-4.781,5.3-4.149c0.6,0.114,1.203,0.253,1.787,0.44c3.852,1.229,7.633,1.028,11.489-0.163\n                            c2.962-0.914,6.066-1.354,9.053-2.195c0.547-0.154,1.024-1.199,1.163-1.909c0.094-0.481-0.616-1.068-0.693-1.648\n                            c-0.127-0.922-0.384-2.402,0.057-2.705c0.854-0.575,2.154-0.656,3.265-0.636c0.881,0.016,1.733,0.62,2.627,0.729\n                            c2.064,0.258,3.995,0.021,5.247-1.986c1.232-1.971,1.277-3.864-0.163-5.757c-0.465-0.608-1.069-1.249-1.191-1.946\n                            c-0.163-0.938-0.273-2.199,0.212-2.881c1.779-2.488,3.771-4.83,5.77-7.152c1.828-2.121,4.251-3.354,6.997-3.541\n                            c0.967-0.065,2.158,0.742,2.966,1.465c0.633,0.562,0.686,1.729,1.261,2.407c0.674,0.795,1.628,1.347,2.465,2.007\n                            c0.571-0.877,1.358-1.688,1.656-2.651c0.311-0.992-0.028-2.175,0.236-3.187c0.213-0.812,0.743-1.738,1.416-2.195\n                            c3.591-2.439,7.442-4.524,10.861-7.177c2.574-1.991,4.508-4.786,6.944-6.98c4.182-3.771,9.526-5.097,14.789-6.472\n                            c3.452-0.901,4.194-1.921,3.134-5.365c-0.514-1.673-1.228-3.309-2.052-4.854c-1.062-1.987-0.531-3.362,1.297-4.402\n                            c0.727-0.412,1.498-0.751,2.252-1.114c2.387-1.139,4.08-2.701,4.688-5.521c0.612-2.827,1.75-5.549,2.741-8.286\n                            c1.339-3.692,2.432-7.65,7.34-8.144c0.147-0.017,0.294-0.061,0.441-0.094c0-1.077,0-2.15,0-3.228\n                            c-1.135-1.775-2.15-3.639-3.432-5.3C536.084,271.981,534.492,270.614,533.187,269.019z\"></path>\n                    </g>\n                </g>\n            </svg>\n        </a>\n    </div>\n</div>\n\n<style>\n\t@tailwind base;\n\t@tailwind components;\n\t@tailwind utilities;\n</style>","import Widget from './Widget.svelte';\n\nvar div = document.createElement('DIV');\nvar script = document.currentScript;\nconst websiteOwnerPubkey = script.getAttribute('data-website-owner-pubkey');\nconst chatType = script.getAttribute('data-chat-type');\nlet chatTags = script.getAttribute('data-chat-tags');\nlet chatId = script.getAttribute('data-chat-id');\nlet chatReferenceTags = script.getAttribute('data-chat-reference-tags');\nlet relays = script.getAttribute('data-relays');\nscript.parentNode.insertBefore(div, script);\n\nif (!relays) {\n\trelays = 'wss://relay.f7z.io,wss://nos.lol,wss://relay.nostr.info,wss://nostr-pub.wellorder.net,wss://relay.current.fyi,wss://relay.nostr.band'\n}\n\nrelays = relays.split(',');\nchatTags = chatTags ? chatTags.split(',') : [];\nchatReferenceTags = chatReferenceTags ? chatReferenceTags.split(',') : [];\n\nconst embed = new Widget({\n\ttarget: div,\n\tprops: {\n\t\twebsiteOwnerPubkey,\n\t\tchatType,\n\t\tchatTags,\n\t\tchatReferenceTags,\n\t\trelays\n\t},\n});\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","document","createElement","href","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","unsub","subscribe","unsubscribe","set_store_value","ret","value","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","wholeText","set_style","key","important","style","removeProperty","setProperty","current_component","set_current_component","get_current_component","Error","onMount","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","seen_callbacks","flushidx","flush","saved_component","update","e","pop","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","bind","index","props","undefined","bound","create_component","mount_component","customElement","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","fill","init","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","context","Map","skip_bound","root","ready","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","$destroy","$on","type","indexOf","splice","$set","$$props","obj","$$set","keys","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","chatAdapter","chatData","events","profiles","selectedMessage","zappingMessage","zapsPerMessage","number","n","Number","isSafeInteger","bytes","lengths","Uint8Array","TypeError","includes","assert","bool","hash","outputLen","blockLen","exists","checkFinished","destroyed","finished","output","out","min","crypto","globalThis","createView","arr","DataView","buffer","byteOffset","byteLength","rotr","word","shift","Uint32Array","hexes","v","toString","padStart","bytesToHex","uint8a","hex","hexToBytes","array","j","hexByte","slice","byte","parseInt","isNaN","utf8ToBytes","str","TextEncoder","encode","toBytes","concatBytes","arrays","every","reduce","result","pad","Hash","clone","_cloneInto","wrapConstructor","hashConstructor","hashC","message","digest","tmp","randomBytes","bytesLength","getRandomValues","constructor","padOffset","isLE","super","pos","view","len","take","Math","subarray","process","dataView","roundClean","digestInto","setBigUint64","_32n","BigInt","_u32_max","wh","wl","h","setUint32","oview","outLen","state","get","res","destroy","to","Maj","SHA256_K","IV","SHA256_W","SHA2","A","B","C","D","E","F","G","H","offset","getUint32","W15","W2","s0","s1","T1","T2","SHA256","sha256","SHA224","_0n","_1n","_2n","u8a","numberToHexUnpadded","num","hexToNumber","bytesToNumberBE","bytesToNumberLE","reverse","numberToBytesBE","numberToBytesLE","ensureBytes","title","expectedLength","arrs","sum","bitMask","u8n","u8fr","createHmacDrbg","hashLen","qByteLen","hmacFn","k","reset","reseed","seed","gen","sl","pred","validatorFns","bigint","val","function","boolean","string","isArray","field","object","Fp","isValid","validateObject","validators","optValidators","checkField","fieldName","isOptional","checkVal","String","entries","b1","b2","_3n","_4n","_5n","_8n","mod","pow","power","modulo","pow2","x","invert","u","FpSqrt","P","p1div4","eql","sqr","c1","n2","mul","nv","sub","ONE","legendreC","Q","S","Z","Q1div2","neg","g","ZERO","t2","ge","tonelliShanks","FIELD_FIELDS","validateField","opts","ORDER","MASK","BYTES","BITS","nLength","nBitLength","_nBitLength","nByteLength","ceil","validateBasic","curve","Gx","Gy","freeze","b2n","h2b","ut","DER","Err","_parseInt","toSig","sBytes","s","rBytesLeft","hexFromSig","sig","shl","rhl","rl","weierstrassPoints","CURVE","ut.validateObject","allowedPrivateKeyLengths","wrapPrivateKey","isTorsionFree","clearCofactor","allowInfinityPoint","fromBytes","endo","beta","splitScalar","validatePointOpts","point","isCompressed","toAffine","ut.concatBytes","y","tail","weierstrassEquation","x2","x3","isWithinCurveOrder","assertGE","normPrivateKeyToScalar","ut.bytesToHex","ut.bytesToNumberBE","error","mod.mod","pointPrecomputes","assertPrjPoint","other","Point","px","py","pz","static","is0","points","toInv","invertBatch","fromAffine","assertValidity","privateKey","BASE","multiply","_setWindowSize","windowSize","_WINDOW_SIZE","left","right","hasEvenY","isOdd","equals","X1","Y1","Z1","X2","Y2","Z2","U1","U2","negate","double","b3","X3","Y3","Z3","t0","t1","t3","t4","t5","subtract","wNAF","wnaf","wNAFCached","comp","multiplyUnsafe","I","unsafeLadder","k1neg","k1","k2neg","k2","k1p","k2p","scalar","fake","f1p","f2p","constTimeNegate","normalizeZ","multiplyAndAddUnsafe","iz","z","inv","ax","ay","zz","cofactor","toRawBytes","toHex","_bits","bits","condition","item","W","windows","elm","precomputeWindow","base","precomputes","mask","maxNumber","shiftBy","wbits","offset1","offset2","abs","cond1","cond2","precomputesMap","transform","ProjectivePoint","weierstrass","curveDef","hmac","bits2int","bits2int_modN","lowS","validateOpts","CURVE_ORDER","compressedLen","uncompressedLen","modN","invN","mod.invert","cat","head","y2","sqrt","numToNByteStr","ut.numberToBytesBE","isBiggerThanHalfOrder","slcNum","Signature","recovery","addRecoveryBit","recoverPublicKey","msgHash","rec","radj","prefix","R","fromHex","ir","u1","u2","hasHighS","normalizeS","toDERRawBytes","ut.hexToBytes","toDERHex","toCompactRawBytes","toCompactHex","utils","isValidPrivateKey","randomPrivateKey","groupOrder","minLen","mod.hashToPrivateScalar","precompute","isProbPub","delta","ORDER_MASK","ut.bitMask","int2octets","prepSig","defaultSigOpts","some","prehash","extraEntropy","ent","h1int","seedArgs","k2sig","kBytes","ik","q","normS","defaultVerOpts","getPublicKey","fromPrivateKey","getSharedSecret","privateA","publicB","sign","privKey","ut.createHmacDrbg","drbg","verify","signature","publicKey","sg","_sig","fromDER","derError","fromCompact","is","HMAC","_key","iHash","oHash","buf","getPrototypeOf","getHash","msgs","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b6","b9","b11","b22","b44","b88","b176","b220","b223","bitLen","redef","sqrtP","lhs","rhs","FpPow","div","sqrN","addN","subN","mulN","lst","nums","lastMultiplied","acc","inverted","reduceRight","FpInvertBatch","cmov","Field","secp256k1","defHash","createCurve","a1","a2","POW_2_128","c2","fe","TAGGED_HASH_PREFIXES","taggedHash","tag","messages","tagP","tagH","charCodeAt","pointToBytes","numTo32b","modP","schnorrGetExtPubKey","priv","d_","lift_x","xx","challenge","args","schnorrVerify","pub","schnorr","auxRand","t","rand","k_","rx","isoMap","COEFF","xNum","xDen","yNum","yDen","htf.isogenyMap","mapSWU","mod.validateField","sqrtRatio","c3","c4","c5","c6","c7","tv1","tv2","tv3","tv5","tv4","isQR","tvv5","e1","y1","SWUFpSqrtRatio","tv6","mapToCurveSimpleSWU","assertNumber","chain","wrap","decode","alphabet","digits","input","letter","join","separator","split","padding","chr","end","normalize","convertRadix","carry","done","digit","digitBase","floor","mapToCurve","def","htf.createHasher","scalars","DST","encodeDST","expand","gcd","radix2carry","convertRadix2","radix2","revPadding","unsafeWrapper","apply","base16","base32","toUpperCase","replace","base64","base64url","genBase58","abc","base58","XMR_BLOCK_LEN","base58xmr","concat","BECH_ALPHABET","POLYMOD_GENERATORS","bech32Polymod","pre","chk","bechChecksum","words","encodingConst","genBech32","encoding","ENCODING_CONST","_words","fromWords","toWords","fromWordsUnsafe","limit","lowered","toLowerCase","sepIndex","lastIndexOf","endsWith","actualLength","decodeToBytes","decodeUnsafe","bech32","CODERS","utf8","TextDecoder","defineProperty","english","wordlist","_assert","default","exports","checkOpts","asyncLoop","nextTick","u8","crypto_1","require$$0","u32","async","iters","tick","ts","diff","defaults","prototype","assign","wrapConstructorWithOpts","hashCons","msg","_assert_js_1","utils_js_1","require$$1","pbkdf2_1","pbkdf2$1","pbkdf2Async","pbkdf2","hmac_js_1","require$$2","pbkdf2Init","_password","_salt","_opts","dkLen","asyncTick","password","salt","DK","PRF","PRFSalt","pbkdf2Output","prfW","ti","Ti","setInt32","ui","_sha2","sha224","_sha2_js_1","toBig","fromBig","U32_MASK64","le","Ah","Al","Bh","Bl","u64","shrSH","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5H","Eh","add5L","El","sha512","sha512$1","sha384","sha512_256","sha512_224","SHA512","_u64_js_1","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512$1","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","SHA512_224","SHA512_256","SHA384","stringToBytes","bytesToString","bech32m","base58check","base58xrp","base58flickr","base32hex","radix","checksum","payload","newChecksum","oldChecksum","base32crockford","coderTypeError","hasOwnProperty","bip39","mnemonicToSeedSync_1","mnemonicToSeedSync","mnemonicToSeed","validateMnemonic_1","validateMnemonic","entropyToMnemonic","mnemonicToEntropy","generateMnemonic_1","generateMnemonic","_assert_1","sha256_1","sha512_1","require$$3","utils_1","require$$4","base_1","require$$5","nfkd","norm","assertEntropy","entropy","strength","calcChecksum","bitsLeft","getCoder","mnemonic","isJapanese","passphrase","Rho","Id","_","Pi","idxL","idxR","shifts","shiftsL","idx","shiftsR","Kl","Kr","rotl","group","BUF","RIPEMD160","h0","h1","h2","h3","h4","al","ar","bl","br","cl","cr","dl","dr","el","er","rGroup","hbl","hbr","rr","sr","tl","tr","ripemd160","secp","base58checker","bytesToNumber","MASTER_SECRET","BITCOIN_VERSIONS","private","public","HARDENED_OFFSET","toU32","HDKey","fingerprint","pubHash","identifier","pubKeyHash","privKeyBytes","pubKey","privateExtendedKey","serialize","versions","publicExtendedKey","assertBytes","chainCode","base58key","keyBuffer","keyView","version","opt","depth","parentFingerprint","isPriv","json","fromExtendedKey","xpriv","derive","path","test","parts","child","exec","deriveChild","childTweak","added","err","wipePrivateData","toJSON","xpub","__defProp","__export","all","enumerable","generatePrivateKey","insertEventIntoAscendingList","insertEventIntoDescendingList","normalizeURL","utf8Decoder","utf8Encoder","URL","pathname","port","protocol","searchParams","sort","sortedArray","midPoint","position","created_at","id","finishEvent","pubkey","getEventHash","getSignature","bytesToHex2","evt","validateEvent","JSON","stringify","kind","tags","content","serializeEvent","match","verifySignature","schnorr2","signEvent","console","warn","matchFilter","ids","startsWith","kinds","authors","values","find","since","until","getHex64","getInt","sliced","getSubscriptionId","pstart","pend","matchEventId","matchEventPubkey","matchEventKind","relayInit","listTimeout","getTimeout","countTimeout","ws","connectionPromise","openSubs","listeners","connect","disconnect","notice","auth","subListeners","pubListeners","connectRelay","reject","WebSocket","onopen","onerror","onclose","handleNextInterval","incomingMessageQueue","handleNext","clearInterval","subid","so","alreadyHaveEvent","parse","id2","skipVerification","filters","matchFilters","count","eose","ok","reason","failed","onmessage","setInterval","connected","readyState","trySend","params","setTimeout","send","log","verb","random","newFilters","newOpts","on","off","listeners2","_publishEvent","type2","list","timeout","clearTimeout","publish","close","OPEN","status","nip19_exports","BECH32_REGEX","naddrEncode","neventEncode","noteEncode","nprofileEncode","npubEncode","nrelayEncode","nsecEncode","Bech32MaxSize","nip19","tlv","parseTLV","bytesToHex3","relays","author","encodeBytes","profile","encodeTLV","addr","ArrayBuffer","vs","entry","nip04_exports","encrypt","privkey","normalizedKey","getNormalizedX","iv","plaintext","cryptoKey","subtle","importKey","ciphertext","decrypt","ctb64","ivb64","webcrypto","nip05_exports","NIP05_REGEX","queryProfile","searchDomain","useFetchImplementation","_fetch","fetch","fetchImplementation","domain","query","names","fullname","relay","parseNIP05Result","_e","privateKeyFromSeedWords","fromMasterSeed","bytesToHex4","generateSeedWords","validateWords","reply","mentions","eTags","eTagIndex","eTag","eTagEventId","eTagRelayUrl","eTagMarker","eventPointer","isFirstETag","isLastETag","getPow","total","msb","getLeadingZeroBits","hexToBytes2","finishRepostEvent","reposted","relayUrl","getRepostedEventPointer","lastETag","lastPTag","getRepostedEvent","pointer","repostedEvent","NOSTR_URI_REGEX","parse2","RegExp","source","uri","decoded","finishReactionEvent","reacted","inheritedTags","getReactedEventPointer","createDelegation","parameters","conditions","cond","sighash","sha2562","bytesToHex5","schnorr3","getDelegator","tag2","operator","matchAll","regex","replaceAll","matches","replacer","_fetch2","useFetchImplementation2","validateGithub","username","proof","authenticate","_fetch3","fail","nip57_exports","getZapEndpoint","makeZapReceipt","makeZapRequest","useFetchImplementation3","validateZapRequest","metadata","lnurl","lud06","lud16","bech322","body","allowsNostr","nostrPubkey","amount","comment","zr","round","zapRequestString","zapRequest","preimage","bolt11","paidAt","tagsFromZapRequest","zap","getTime","constants","BINARY_TYPES","EMPTY_BUFFER","Buffer","alloc","GUID","kForOnEventAttribute","Symbol","kListener","kStatusCode","kWebSocket","NOOP","addon","module","fs","os","runtimeRequire","__webpack_require__","__non_webpack_require__","require","vars","config","variables","prebuildsOnly","env","PREBUILDS_ONLY","abi","modules","runtime","electron","ELECTRON_RUN_AS_NODE","nw","arch","npm_config_arch","platform","npm_config_platform","libc","LIBC","existsSync","isAlpine","armv","ARM_VERSION","arm_version","uv","load","dir","readdirSync","getFirst","files","matchBuild","parseTuple","architectures","Boolean","matchTuple","tuple","compareTuples","parseTags","file","specificity","napi","matchTags","runtimeAgnostic","compareTags","nodeGypBuild","release","debug","prebuild","nearby","dirname","execPath","prebuilds","winner","fallback","unmask","FastBuffer","species","_mask","_unmask","bufferUtilModule","totalLength","allocUnsafe","toArrayBuffer","toBuffer","readOnly","isBuffer","isView","WS_NO_BUFFER_UTIL","bufferUtil","bufferUtil_1","zlib","Limiter","kDone","kRun","limiter","concurrency","pending","Infinity","jobs","job","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","RangeError","code","removeListener","inflateOnError","_inflate","permessageDeflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","extensionName","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","configurations","normalizeParams","acceptAsServer","acceptAsClient","cleanup","offers","accepted","response","isInteger","decompress","fin","_decompress","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","write","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","isUtf8","_isValidUTF8","validationModule","isValidStatusCode","isValidUTF8","tokenChars","validation","WS_NO_UTF_8_VALIDATE","Writable","PerMessageDeflate","ErrorCtor","statusCode","errorCode","captureStackTrace","receiver","_binaryType","binaryType","_extensions","extensions","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","_write","startLoop","consume","dst","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","readUInt16BE","readUInt32BE","controlMessage","dataMessage","messageLength","fragments","emit","randomFillSync","applyMask","require$$6","kByteLength","maskBuffer","Sender","socket","generateMask","_generateMask","_maskBuffer","_socket","_firstFragment","_deflating","_queue","dataLength","merge","skipMasking","payloadLength","opcode","rsv1","writeUInt16BE","writeUIntBE","enqueue","dispatch","sendFrame","frame","ping","pong","perMessageDeflate","binary","dequeue","Reflect","cork","uncork","sender","dest","elem","extension","format","header","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","token","EventEmitter","https","http","net","tls","createHash","require$$7","require$$8","Receiver","require$$9","require$$10","require$$11","EventTarget","kCode","kData","kMessage","kReason","kTarget","kType","kWasClean","Event","CloseEvent","wasClean","ErrorEvent","MessageEvent","listener","wrapper","isBinary","callListener","_closeFrameReceived","_closeFrameSent","once","thisArg","handleEvent","eventTarget","require$$12","require$$13","require$$14","kAborted","protocolVersions","readyStates","subprotocolRegex","address","protocols","_closeCode","_closeMessage","_closeTimer","_paused","_protocol","_readyState","CONNECTING","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","bufferedAmount","_writableState","isPaused","_url","setSocket","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","socketOnError","emitClose","CLOSED","removeAllListeners","CLOSING","errorEmitted","abortHandshake","_req","pause","sendAfterClose","resume","needDrain","terminate","websocket","protocolVersion","followRedirects","maxRedirects","createConnection","socketPath","hostname","method","host","parsedUrl","isSecure","isIpcUrl","invalidUrlMessage","emitErrorAndClose","defaultPort","request","protocolSet","req","tlsConnect","netConnect","headers","Connection","Upgrade","search","handshakeTimeout","origin","Origin","_originalIpc","_originalSecure","_originalHostOrSocketPath","listenerCount","isSameHost","authorization","cookie","location","abort","upgrade","serverProt","protError","secWebSocketExtensions","extensionNames","servername","isIP","stream","setHeader","receiverOnFinish","read","property","subprotocol","keyRegex","server","STATUS_CODES","abortHandshakeOrEmitwsClientError","websocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","writeHead","emitConnection","_removeListeners","addListeners","listening","handleUpgrade","clients","_shouldEmitClose","shouldHandle","secWebSocketProtocol","info","secure","authorized","encrypted","verified","completeUpgrade","readable","next","WS","createWebSocketStream","Duplex","duplexOnEnd","duplexOnError","terminateOnDestroy","duplex","autoDestroy","objectMode","writableObjectMode","_destroy","called","_final","_read","Server","WebSocketServer","Relay","reconnect","me","onfn","init_websocket","catch","resolved","handle_nostr_message","reconnecting","manualClose","open","sleep","ms","Relay$1","wait_connected","retry","sub_id","RelayPool","relay_ids","find_relays","setupHandlers","remove","replays","rid","relayPool","rnds8","rng","byteToHex","native","randomUUID","v4","rnds","unsafeStringify","w","plural","msAbs","isPlural","parseFloat","isFinite","long","fmtLong","fmtShort","common","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","prev","coerce","formatter","formatters","formatArgs","useColors","color","selectColor","extend","configurable","namespaces","delimiter","newDebug","toNamespace","regexp","substring","stack","disable","skips","enable","save","humanize","colors","lastC","storage","setItem","removeItem","getItem","DEBUG","__nwjs","navigator","userAgent","documentElement","WebkitAppearance","firebug","exception","table","$1","localStorage","localstorage","warned","Events","EE","addListener","emitter","_events","_eventsCount","clearEvent","__proto__","eventNames","getOwnPropertySymbols","handlers","ee","a3","a4","a5","arguments","prefixed","is_node","is_node_","global","_globalThis","naiveFallback","__global__","NativeWebSocket","MozWebSocket","websocket_version","W3CWebSocket","prop","browser","w3cwebsocket","__values","iterator","Container_1","Container","ForOfAdaptor_1","ForOfAdaptor","first","last","it_","last_","it","rbegin","rend","begin","e_1","_a","_b","_c","e_1_1","return","__read","NativeArrayIterator_1","NativeArrayIterator","data_","index_","advance","swap","extendStatics","__extends","setPrototypeOf","__","LogicError_1","LogicError","Exception_1","Exception","_super","_newTarget","_this","proto","what","InvalidArgument_1","InvalidArgument","ErrorGenerator","OutOfRange_1","OutOfRange","get_class_name","__MODULE","negative_index","excessive_index","not_my_iterator","erased_iterator","negative_iterator","iterator_end_value","className","key_nout_found","__spreadArray","pack","UniqueSet_1","UniqueSet","SetContainer_1","SetContainer","factory","items","_i","_Insert_by_range","_Insert_by_key","Function","_Insert_by_hint","erase","_Erase_by_range","_Erase_by_val","_Handle_erase","ErrorGenerator_1","extract","param","_Extract_by_iterator","_Extract_by_val","uid","get_uid","Global_1","Global","_Get_root","node_1","__s_pRoot","__s_iUID","uid_1","__get_m_iUID","hash_1","_Hash_boolean","MULTIPLIER","_Hash_number","_Hash_string","itemList","INIT_VALUE","itemList_1","itemList_1_1","valueOf","hashCode","hashed","comparators","greater_equal","greater","less_equal","less","not_equal_to","equal_to","IHashContainer","IAssociativeContainer_1","IAssociativeContainer","construct","ramda","comparators_1","Source","bucketFactory","post_process","hash_function","key_eq","container_1","ListIterator_1","ListIterator","prev_","next_","value_","_Set_prev","_Set_next","_Try_value","distance","stepper","_Distance_via_index","ListContainer_1","ListContainer","Repeater_1","Repeater","global_1","end_","_Create_iterator","par1","par2","begin_","size_","resize","expansion","push_front","push_back","pop_front","pop_back","erased_","_Insert_by_repeating_val","ReverseIterator_1","ReverseIterator","base_","_Create_neighbor","HashBuckets_1","HashBuckets","fetcher","hasher","fetcher_","hasher_","max_load_factor_","DEFAULT_MAX_FACTOR","initialize","rehash","e_2","max","MIN_BUCKET_COUNT","_d","row","row_1","row_1_1","e_2_1","reserve","capacity","at","load_factor","max_load_factor","bucket","Pair_1","make_pair","Pair","second","pair","HashSet","IHashContainer_1","SetElementList_1","SetElementList","associative","associative_","Iterator","_Swap_associative","source_","SetHashBuckets_1","SetHashBuckets","key_eq_","_Swap_source","bucket_1","bucket_1_1","buckets_","bucket_count","bucket_size","_Handle_insert","hint","UniqueMap_1","UniqueMap","MapContainer_1","MapContainer","emplace","emplace_hint","_Erase_by_key","generator","insert_or_assign","_Insert_or_assign_with_key_value","_Insert_or_assign_with_hint","_Extract_by_key","HashMap","MapElementList_1","MapElementList","list_","MapHashBuckets_1","MapHashBuckets","Entry_1","Entry","Event_1","__assign","websocket_1","EventTarget_1","HashSet_1","HashMap_1","listeners_","created_at_","dispatchEvent","timeStamp","CloseEvent_1","MessageEvent_1","ErrorEvent_1","on_","state_","client_","client","_Handle_connect","_Handle_error","connection_","sendCloseFrame","sendUTF","Blob","sendBytes","bytesWaitingToFlush","_Set_on","connection","_Handle_message","_Handle_close","EVENT_INIT","binaryData","utf8Data","bubbles","cancelable","DEFAULTNETWORK","scriptHash","validWitnessVersions","TESTNETWORK","REGTESTNETWORK","SIMNETWORK","FEATUREBIT_ORDER","DIVISORS","MAX_MILLISATS","MILLISATS_PER_BTC","TAGCODES","payment_hash","payment_secret","description","payee","description_hash","expiry","min_final_cltv_expiry","fallback_address","route_hint","feature_bits","TAGNAMES","currentName","currentCode","TAGPARSERS","wordsToIntBE","routes","shortChannelId","feeBaseMSats","feeProportionalMillionths","cltvExpiryDelta","routesBuffer","short_channel_id","fee_base_msat","fee_proportional_millionths","cltv_expiry_delta","bools","finalArr","itemArr","featureBits","featureName","extraBits","extra_bits","start_bit","has_required","bit","getUnknownParser","tagCode","MAX_SAFE_INTEGER","hrpToMillisat","hrpString","outputString","divisor","valueBN","millisatoshisBN","paymentRequest","network","sections","letters","sigWords","prefixMatches","bech32Prefix","coinNetwork","millisatoshis","timestamp","tagName","parser","tagLength","tagWords","exp","getValue","route_hints","section","Zap","ndk","zappedEvent","zappedUser","getUser","hexpubkey","zapEndpoint","zapEndpointCallback","zapTag","getMatchingTags","fetchProfile","nostrPubKey","extraTags","nip57","tagReference","zapRequestEvent","NDKEvent","zapRequestNostrEvent","toNostrEvent","URLSearchParams","nostr","pr","isReplaceable","isParamReplaceable","follows","contactListEvents","fetchEvents","npubs","npub","nip192","user","NDKUser","relayUrls","nip193","nip05Id","nip05","setMetadataEvents","display_name","displayName","image","picture","banner","bio","about","zapService","mergeEvent","relayListEvents","recipient","signer","assertSigner","pTags","nip194","replaceableDTag","tagId","EventEmitter2","rawEvent","nostrEvent","generateTags","_signer","relaySet","entity","generateContentTags","dTag","dTagId","createZapRequest","NDKRelay","EventEmitter3","scores","_status","connectedAt","_connectionStats","attempts","success","durations","complaining","activeSubscriptions","updateConnectionStats","disconnected","handleReconnection","handleNotice","isFlapping","avg","variance","attempt","subscription","subId","eventReceived","eoseReceived","scoreSlowerEvent","timeDiffInMs","connectionStats","NDKPool","EventEmitter4","relay2","handleRelayConnect","handleFlapping","stats","timeoutMs","promises","timeoutPromise","race","connecting","defaultOpts","closeOnEose","cacheUsage","groupable","groupableDelay","NDKSubscription","EventEmitter5","relaySubscriptions","groupableId","hasKind","noTimeConstraints","noLimit","shouldQueryCache","shouldQueryRelays","cachePromise","startWithCache","cacheAdapter","locking","eventFirstSeen","startWithRelaySet","promise","pool","NDKRelaySet2","calculateRelaySetFromFilter","fromCache","timeSinceFirstSeen","setEvent","eosesSeen","eoseTimeout","NDKSubscriptionGroup","subscriptions","debug3","mergeFilters","mergedFilters","forwardEvent","forwardEventDup","forwardEose","forwardClose","isEventForSubscription","subscribeOnRelay","getId","urlString","subGroupableId","executeSubscription","delayedSubscription","delayedSubscriptions","executeDelayedSubscription","executeSubscriptions","subGroup","connectedListener","NDK5","EventEmitter7","devWriteRelaySet","debug2","explicitRelayUrls","devWriteRelayUrls","fromRelayUrls","calculateRelaySetFromEvent","relaySetSubscription","existingEvent","event1","event2","profilesLog","writeLog","NstrAdapter","relayStatus","eventEmitter","referenceTags","websiteOwnerPubkey","chatId","profileRequestQueue","requestedProfiles","profileRequestTimer","delayedSubscriptionTimeouts","clientPubkey","setChatConfiguration","emitMessage","tagPubKeys","sendKind4","sendKind42","sendKind1","signedEvent","_publish","subscribeToEventAndResponses","messageCallback","addProfileRequest","family","groups","_subscribe","uuid.v4","recSubId","onEvent","deletedEvents","decodedInvoice","zapRequestPayload","decodeURIComponent","amountSection","zappedEventId","zapper","zappee","zapped","zapInvoiceFromEvent","eventId","subscribeToResponses","reqProfile","requestProfiles","processReceivedProfile","NstrAdapterNip07","adapterConfig","destPubkey","nip04","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isGeneratorFunction","genFun","ctor","mark","awrap","iter","skipTempReset","charAt","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","_next","_throw","_asyncToGenerator","_extends","NostrRPC","secretKey","secret","_proto","_call","_callee3","_ref","_ref$request","_ref$request$id","_ref$request$params","_context3","randomID","connectToRelay","prepareRequest","prepareEvent","_ref2","_callee2","_context2","broadcastToRelay","skipResponse","_ref3","_callee","_context","isValidResponse","_x5","_x3","_x4","_x","_x2","_listen","_callee5","_this2","_context5","_ref4","_callee4","responseEvent","_context4","isValidRequest","handleRequest","prepareResponse","_x6","_handleRequest","_callee6","_context6","_x7","_x8","_x9","_x10","_x11","_prepareEvent","_callee7","cipherText","veryOk","_context7","_x12","_connectToRelay","_callee8","realayURL","_context8","_x13","_x14","_x15","_broadcastToRelay","_callee9","skipSeen","_context9","ConnectURI","fromURI","ignore","encodeURIComponent","approve","_approve","rpc","_reject","Connect","_decrypt","_encrypt","_pubkey","_plaintext","_ciphertext","_proto2","_init","_payload$params","_disconnect","_getPublicKey","_signEvent","getRelays","_getRelays","_callee10","_context10","NstrAdapterNip46","NstrAdapterDiscadableKeys","button","create_if_block_2","button0","button1","create_if_block","create_if_block_1","nip46URI","chatConfiguration","useNip07","useNip46","windowTitle","currentUrl","currentDomain","connectedPubKey","$$invalidate","connectURI","chatType","chatTags","chatReferenceTags","clipboard","writeText","fixError","newTarget","errorType","functionName","exclusion","lines","line","fixStack","errors","InternalError","InvalidDataError","RoutingError","UnsupportedMethodError","ConnectionError","MissingProviderError","RejectionError","requestProvider","errors_1","webln","__createBinding","__exportStar","t_value","span","icon","amountDisplay","mobilePR","hover","_userPromise","blockUntilReady","recipientHexPubKey","senderHexPubKey","NDK","ndkEvent","alert","sendPayment","$zappingMessage","provider","getOwnPropertyDescriptor","__esModule","t1_value","div6","div0","div1","div2","div3","div4","div5","each_blocks","t4_value","create_if_block_4","if_block3","textContent","toLocaleString","img","img_src_value","button_class_value","div8","div7","current","profilePicture","zappingIt","hovering","responses","zappedAmount","selectMessage","$selectedMessage","$chatAdapter","delayedSubscribe","byWebsiteOwner","$zapsPerMessage","$chatData","$","selector","querySelector","cumulativeOffset","top","offsetTop","offsetLeft","offsetParent","directScroll","scrollTop","inSetter","pageYOffset","scrollLeft","pageXOffset","defaultOptions","container","duration","delay","easing","onStart","onDone","onAborting","scrollX","scrollY","_scrollTo","cumulativeOffsetContainer","cumulativeOffsetTarget","initialX","initialY","targetX","targetY","diffX","diffY","scrolling","started","start_time","end_time","delayStart","progress","scrollToTopLeft","fulfill","loop","scrollContainerHeight","containerElement","scrollHeight","offsetHeight","html","clientHeight","scrollToBottom","proceedOptions","span_class_value","if_block0","create_if_block_8","if_block1","create_if_block_7","src","show_if","nostrnote_changes","if_block","deleted","create_if_block_3","create_if_block_9","each_value_1","create_if_block_6","textarea","prevChatConfiguration","rootNoteId","responseEvents","getEventById","sendMessage","getElementById","extraParams","noteId","messageReceived","isThread","pubkeysTagged","scrollDown","animateScroll.scrollToBottom","zapReceived","reactionReceived","reaction","reactions","channelMetadata","connectivityStatus","deletedEventId","findIndex","connectedChatId","ownName","connectedRelays","totalRelays","pubkeyName","lastETagId","chatStarted","showChat","minimizeChat","script","currentScript"],"mappings":"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","x_google_ignoreList":[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,113,117,118,119,121,123,124,125]}